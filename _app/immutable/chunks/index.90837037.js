import{c as rd,d as rQ,e as Vg,h as Fe}from"./stores.df143790.js";function iQ(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var T3={};const zB=rd(rQ);var N3={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var oQ=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sQ=Object.prototype.hasOwnProperty;function iA(e,t){return sQ.call(e,t)}function oA(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)iA(e,i)&&r.push(i);return r}function Sr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function sA(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Uu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function UB(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function aA(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(aA(e[t]))return!0}else if(typeof e=="object"){for(var r=oA(e),i=r.length,o=0;o<i;o++)if(aA(e[r[o]]))return!0}}return!1}function CO(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var qB=function(e){oQ(t,e);function t(n,r,i,o,s){var a=this.constructor,u=e.call(this,CO(n,{name:r,index:i,operation:o,tree:s}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=s,Object.setPrototypeOf(u,a.prototype),u.message=CO(n,{name:r,index:i,operation:o,tree:s}),u}return t}(Error),mt=qB,aQ=Sr,Vc={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=ry(n,this.path);r&&(r=Sr(r));var i=dl(n,{op:"remove",path:this.from}).removed;return dl(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=ry(n,this.from);return dl(n,{op:"add",path:this.path,value:Sr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:S0(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},uQ={add:function(e,t,n){return sA(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Vc.move,copy:Vc.copy,test:Vc.test,_get:Vc._get};function ry(e,t){if(t=="")return e;var n={op:"_get",path:t};return dl(e,n),n.value}function dl(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):iy(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=ry(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=S0(e,t.value),s.test===!1)throw new mt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new mt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Sr(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,g=void 0;for(typeof n=="function"?g=n:g=iy;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=UB(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&g(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!sA(h))throw new mt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);sA(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new mt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=uQ[t.op].call(t,l,h,e);if(s.test===!1)throw new mt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=Vc[t.op].call(t,l,h,e);if(s.test===!1)throw new mt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new mt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function Cv(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new mt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Sr(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=dl(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function lQ(e,t,n){var r=dl(e,t);if(r.test===!1)throw new mt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function iy(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new mt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Vc[e.op]){if(typeof e.path!="string")throw new mt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new mt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new mt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new mt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&aA(e.value))throw new mt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new mt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new mt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=WB([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new mt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new mt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function WB(e,t,n){try{if(!Array.isArray(e))throw new mt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Cv(Sr(t),Sr(e),n||!0);else{n=n||iy;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof mt)return i;throw i}}function S0(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!S0(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!S0(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const cQ=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:mt,_areEquals:S0,applyOperation:dl,applyPatch:Cv,applyReducer:lQ,deepClone:aQ,getValueByPointer:ry,validate:WB,validator:iy},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var R3=new WeakMap,fQ=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),dQ=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function hQ(e){return R3.get(e)}function gQ(e,t){return e.observers.get(t)}function pQ(e,t){e.observers.delete(t.callback)}function mQ(e,t){t.unobserve()}function yQ(e,t){var n=[],r,i=hQ(e);if(!i)i=new fQ(e),R3.set(e,i);else{var o=gQ(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Sr(e),t){r.callback=t,r.next=null;var s=function(){uA(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){uA(r),clearTimeout(r.next),pQ(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new dQ(t,r)),r}function uA(e,t){t===void 0&&(t=!1);var n=R3.get(e.object);B3(n.value,e.object,e.patches,"",t),e.patches.length&&Cv(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function B3(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=oA(t),s=oA(e),a=!1,u=s.length-1;u>=0;u--){var l=s[u],c=e[l];if(iA(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?B3(c,f,n,r+"/"+Uu(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Uu(l),value:Sr(c)}),n.push({op:"replace",path:r+"/"+Uu(l),value:Sr(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Uu(l),value:Sr(c)}),n.push({op:"remove",path:r+"/"+Uu(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var u=0;u<o.length;u++){var l=o[u];!iA(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Uu(l),value:Sr(t[l])})}}}function bQ(e,t,n){n===void 0&&(n=!1);var r=[];return B3(e,t,r,"",n),r}const vQ=Object.freeze(Object.defineProperty({__proto__:null,compare:bQ,generate:uA,observe:yQ,unobserve:mQ},Symbol.toStringTag,{value:"Module"}));Object.assign({},cQ,vQ,{JsonPatchError:qB,deepClone:Sr,escapePathComponent:Uu,unescapePathComponent:UB});var xQ=/("(?:[^\\"]|\\.)*")|[:,]/g,_Q=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function s(a,u,l){var c,f,d,h,g,p,m,y,b,x,v,_;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),v=JSON.stringify(a,o),v===void 0)return v;if(m=i-u.length-l,v.length<=m&&(b=v.replace(xQ,function(w,$){return $||w+" "}),b.length<=m))return b;if(o!=null&&(a=JSON.parse(v),o=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(x="[",c="]",m=a.length;f<m;f++)d.push(s(a[f],y,f===m-1?0:1)||"null");else for(x="{",c="}",p=Object.keys(a),m=p.length;f<m;f++)h=p[f],g=JSON.stringify(h)+": ",_=s(a[h],y,g.length+(f===m-1?0:1)),_!==void 0&&d.push(g+_);if(d.length>0)return[x,r+d.join(`,
`+y),c].join(`
`+u)}return v}(t,"",0)};const z_=Vg(_Q);var lA={exports:{}};const $Q="2.0.0",wQ=256,AQ=Number.MAX_SAFE_INTEGER||9007199254740991,EQ=16,CQ=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Sv={MAX_LENGTH:wQ,MAX_SAFE_COMPONENT_LENGTH:EQ,MAX_SAFE_INTEGER:AQ,RELEASE_TYPES:CQ,SEMVER_SPEC_VERSION:$Q,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const SQ=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Fv=SQ;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=Sv,r=Fv;t=e.exports={};const i=t.re=[],o=t.src=[],s=t.t={};let a=0;const u=(l,c,f)=>{const d=a++;r(l,d,c),s[l]=d,o[d]=c,i[d]=new RegExp(c,f?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),u("FULL",`^${o[s.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),u("LOOSE",`^${o[s.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),u("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),u("COERCERTL",o[s.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",u("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",u("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(lA,lA.exports);var Xg=lA.exports;const FQ=Object.freeze({loose:!0}),kQ=Object.freeze({}),DQ=e=>e?typeof e!="object"?FQ:e:kQ;var L3=DQ;const SO=/^[0-9]+$/,HB=(e,t)=>{const n=SO.test(e),r=SO.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},MQ=(e,t)=>HB(t,e);var YB={compareIdentifiers:HB,rcompareIdentifiers:MQ};const y1=Fv,{MAX_LENGTH:FO,MAX_SAFE_INTEGER:b1}=Sv,{re:kO,t:DO}=Xg,OQ=L3,{compareIdentifiers:Oc}=YB;let TQ=class Vi{constructor(t,n){if(n=OQ(n),t instanceof Vi){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>FO)throw new TypeError(`version is longer than ${FO} characters`);y1("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?kO[DO.LOOSE]:kO[DO.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>b1||this.major<0)throw new TypeError("Invalid major version");if(this.minor>b1||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>b1||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<b1)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(y1("SemVer.compare",this.version,this.options,t),!(t instanceof Vi)){if(typeof t=="string"&&t===this.version)return 0;t=new Vi(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Vi||(t=new Vi(t,this.options)),Oc(this.major,t.major)||Oc(this.minor,t.minor)||Oc(this.patch,t.patch)}comparePre(t){if(t instanceof Vi||(t=new Vi(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(y1("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Oc(r,i)}while(++n)}compareBuild(t){t instanceof Vi||(t=new Vi(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(y1("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Oc(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),Oc(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};var Kn=TQ;const MO=Kn,NQ=(e,t,n=!1)=>{if(e instanceof MO)return e;try{return new MO(e,t)}catch(r){if(!n)return null;throw r}};var id=NQ;const RQ=id,BQ=(e,t)=>{const n=RQ(e,t);return n?n.version:null};var LQ=BQ;const PQ=id,jQ=(e,t)=>{const n=PQ(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var IQ=jQ;const OO=Kn,zQ=(e,t,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new OO(e instanceof OO?e.version:e,n).inc(t,r,i).version}catch{return null}};var UQ=zQ;const TO=id,qQ=(e,t)=>{const n=TO(e,null,!0),r=TO(t,null,!0),i=n.compare(r);if(i===0)return null;const o=i>0,s=o?n:r,a=o?r:n,u=!!s.prerelease.length,l=u?"pre":"";return n.major!==r.major?l+"major":n.minor!==r.minor?l+"minor":n.patch!==r.patch?l+"patch":u?"prerelease":a.patch?"patch":a.minor?"minor":"major"};var WQ=qQ;const HQ=Kn,YQ=(e,t)=>new HQ(e,t).major;var GQ=YQ;const VQ=Kn,XQ=(e,t)=>new VQ(e,t).minor;var KQ=XQ;const ZQ=Kn,JQ=(e,t)=>new ZQ(e,t).patch;var QQ=JQ;const eee=id,tee=(e,t)=>{const n=eee(e,t);return n&&n.prerelease.length?n.prerelease:null};var nee=tee;const NO=Kn,ree=(e,t,n)=>new NO(e,n).compare(new NO(t,n));var Oi=ree;const iee=Oi,oee=(e,t,n)=>iee(t,e,n);var see=oee;const aee=Oi,uee=(e,t)=>aee(e,t,!0);var lee=uee;const RO=Kn,cee=(e,t,n)=>{const r=new RO(e,n),i=new RO(t,n);return r.compare(i)||r.compareBuild(i)};var P3=cee;const fee=P3,dee=(e,t)=>e.sort((n,r)=>fee(n,r,t));var hee=dee;const gee=P3,pee=(e,t)=>e.sort((n,r)=>gee(r,n,t));var mee=pee;const yee=Oi,bee=(e,t,n)=>yee(e,t,n)>0;var kv=bee;const vee=Oi,xee=(e,t,n)=>vee(e,t,n)<0;var j3=xee;const _ee=Oi,$ee=(e,t,n)=>_ee(e,t,n)===0;var GB=$ee;const wee=Oi,Aee=(e,t,n)=>wee(e,t,n)!==0;var VB=Aee;const Eee=Oi,Cee=(e,t,n)=>Eee(e,t,n)>=0;var I3=Cee;const See=Oi,Fee=(e,t,n)=>See(e,t,n)<=0;var z3=Fee;const kee=GB,Dee=VB,Mee=kv,Oee=I3,Tee=j3,Nee=z3,Ree=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return kee(e,n,r);case"!=":return Dee(e,n,r);case">":return Mee(e,n,r);case">=":return Oee(e,n,r);case"<":return Tee(e,n,r);case"<=":return Nee(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var XB=Ree;const Bee=Kn,Lee=id,{re:v1,t:x1}=Xg,Pee=(e,t)=>{if(e instanceof Bee)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(v1[x1.COERCE]);else{let r;for(;(r=v1[x1.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),v1[x1.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;v1[x1.COERCERTL].lastIndex=-1}return n===null?null:Lee(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};var jee=Pee,U_,BO;function Iee(){return BO||(BO=1,U_=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),U_}var q_,LO;function zee(){if(LO)return q_;LO=1,q_=e,e.Node=i,e.create=e;function e(o){var s=this;if(s instanceof e||(s=new e),s.tail=null,s.head=null,s.length=0,o&&typeof o.forEach=="function")o.forEach(function(l){s.push(l)});else if(arguments.length>0)for(var a=0,u=arguments.length;a<u;a++)s.push(arguments[a]);return s}e.prototype.removeNode=function(o){if(o.list!==this)throw new Error("removing node which does not belong to this list");var s=o.next,a=o.prev;return s&&(s.prev=a),a&&(a.next=s),o===this.head&&(this.head=s),o===this.tail&&(this.tail=a),o.list.length--,o.next=null,o.prev=null,o.list=null,s},e.prototype.unshiftNode=function(o){if(o!==this.head){o.list&&o.list.removeNode(o);var s=this.head;o.list=this,o.next=s,s&&(s.prev=o),this.head=o,this.tail||(this.tail=o),this.length++}},e.prototype.pushNode=function(o){if(o!==this.tail){o.list&&o.list.removeNode(o);var s=this.tail;o.list=this,o.prev=s,s&&(s.next=o),this.tail=o,this.head||(this.head=o),this.length++}},e.prototype.push=function(){for(var o=0,s=arguments.length;o<s;o++)n(this,arguments[o]);return this.length},e.prototype.unshift=function(){for(var o=0,s=arguments.length;o<s;o++)r(this,arguments[o]);return this.length},e.prototype.pop=function(){if(this.tail){var o=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,o}},e.prototype.shift=function(){if(this.head){var o=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,o}},e.prototype.forEach=function(o,s){s=s||this;for(var a=this.head,u=0;a!==null;u++)o.call(s,a.value,u,this),a=a.next},e.prototype.forEachReverse=function(o,s){s=s||this;for(var a=this.tail,u=this.length-1;a!==null;u--)o.call(s,a.value,u,this),a=a.prev},e.prototype.get=function(o){for(var s=0,a=this.head;a!==null&&s<o;s++)a=a.next;if(s===o&&a!==null)return a.value},e.prototype.getReverse=function(o){for(var s=0,a=this.tail;a!==null&&s<o;s++)a=a.prev;if(s===o&&a!==null)return a.value},e.prototype.map=function(o,s){s=s||this;for(var a=new e,u=this.head;u!==null;)a.push(o.call(s,u.value,this)),u=u.next;return a},e.prototype.mapReverse=function(o,s){s=s||this;for(var a=new e,u=this.tail;u!==null;)a.push(o.call(s,u.value,this)),u=u.prev;return a},e.prototype.reduce=function(o,s){var a,u=this.head;if(arguments.length>1)a=s;else if(this.head)u=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var l=0;u!==null;l++)a=o(a,u.value,l),u=u.next;return a},e.prototype.reduceReverse=function(o,s){var a,u=this.tail;if(arguments.length>1)a=s;else if(this.tail)u=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var l=this.length-1;u!==null;l--)a=o(a,u.value,l),u=u.prev;return a},e.prototype.toArray=function(){for(var o=new Array(this.length),s=0,a=this.head;a!==null;s++)o[s]=a.value,a=a.next;return o},e.prototype.toArrayReverse=function(){for(var o=new Array(this.length),s=0,a=this.tail;a!==null;s++)o[s]=a.value,a=a.prev;return o},e.prototype.slice=function(o,s){s=s||this.length,s<0&&(s+=this.length),o=o||0,o<0&&(o+=this.length);var a=new e;if(s<o||s<0)return a;o<0&&(o=0),s>this.length&&(s=this.length);for(var u=0,l=this.head;l!==null&&u<o;u++)l=l.next;for(;l!==null&&u<s;u++,l=l.next)a.push(l.value);return a},e.prototype.sliceReverse=function(o,s){s=s||this.length,s<0&&(s+=this.length),o=o||0,o<0&&(o+=this.length);var a=new e;if(s<o||s<0)return a;o<0&&(o=0),s>this.length&&(s=this.length);for(var u=this.length,l=this.tail;l!==null&&u>s;u--)l=l.prev;for(;l!==null&&u>o;u--,l=l.prev)a.push(l.value);return a},e.prototype.splice=function(o,s,...a){o>this.length&&(o=this.length-1),o<0&&(o=this.length+o);for(var u=0,l=this.head;l!==null&&u<o;u++)l=l.next;for(var c=[],u=0;l&&u<s;u++)c.push(l.value),l=this.removeNode(l);l===null&&(l=this.tail),l!==this.head&&l!==this.tail&&(l=l.prev);for(var u=0;u<a.length;u++)l=t(this,l,a[u]);return c},e.prototype.reverse=function(){for(var o=this.head,s=this.tail,a=o;a!==null;a=a.prev){var u=a.prev;a.prev=a.next,a.next=u}return this.head=s,this.tail=o,this};function t(o,s,a){var u=s===o.head?new i(a,null,s,o):new i(a,s,s.next,o);return u.next===null&&(o.tail=u),u.prev===null&&(o.head=u),o.length++,u}function n(o,s){o.tail=new i(s,o.tail,null,o),o.head||(o.head=o.tail),o.length++}function r(o,s){o.head=new i(s,null,o.head,o),o.tail||(o.tail=o.head),o.length++}function i(o,s,a,u){if(!(this instanceof i))return new i(o,s,a,u);this.list=u,this.value=o,s?(s.next=this,this.prev=s):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{Iee()(e)}catch{}return q_}var W_,PO;function Uee(){if(PO)return W_;PO=1;const e=zee(),t=Symbol("max"),n=Symbol("length"),r=Symbol("lengthCalculator"),i=Symbol("allowStale"),o=Symbol("maxAge"),s=Symbol("dispose"),a=Symbol("noDisposeOnSet"),u=Symbol("lruList"),l=Symbol("cache"),c=Symbol("updateAgeOnGet"),f=()=>1;class d{constructor(v){if(typeof v=="number"&&(v={max:v}),v||(v={}),v.max&&(typeof v.max!="number"||v.max<0))throw new TypeError("max must be a non-negative number");this[t]=v.max||1/0;const _=v.length||f;if(this[r]=typeof _!="function"?f:_,this[i]=v.stale||!1,v.maxAge&&typeof v.maxAge!="number")throw new TypeError("maxAge must be a number");this[o]=v.maxAge||0,this[s]=v.dispose,this[a]=v.noDisposeOnSet||!1,this[c]=v.updateAgeOnGet||!1,this.reset()}set max(v){if(typeof v!="number"||v<0)throw new TypeError("max must be a non-negative number");this[t]=v||1/0,p(this)}get max(){return this[t]}set allowStale(v){this[i]=!!v}get allowStale(){return this[i]}set maxAge(v){if(typeof v!="number")throw new TypeError("maxAge must be a non-negative number");this[o]=v,p(this)}get maxAge(){return this[o]}set lengthCalculator(v){typeof v!="function"&&(v=f),v!==this[r]&&(this[r]=v,this[n]=0,this[u].forEach(_=>{_.length=this[r](_.value,_.key),this[n]+=_.length})),p(this)}get lengthCalculator(){return this[r]}get length(){return this[n]}get itemCount(){return this[u].length}rforEach(v,_){_=_||this;for(let w=this[u].tail;w!==null;){const $=w.prev;b(this,v,w,_),w=$}}forEach(v,_){_=_||this;for(let w=this[u].head;w!==null;){const $=w.next;b(this,v,w,_),w=$}}keys(){return this[u].toArray().map(v=>v.key)}values(){return this[u].toArray().map(v=>v.value)}reset(){this[s]&&this[u]&&this[u].length&&this[u].forEach(v=>this[s](v.key,v.value)),this[l]=new Map,this[u]=new e,this[n]=0}dump(){return this[u].map(v=>g(this,v)?!1:{k:v.key,v:v.value,e:v.now+(v.maxAge||0)}).toArray().filter(v=>v)}dumpLru(){return this[u]}set(v,_,w){if(w=w||this[o],w&&typeof w!="number")throw new TypeError("maxAge must be a number");const $=w?Date.now():0,A=this[r](_,v);if(this[l].has(v)){if(A>this[t])return m(this,this[l].get(v)),!1;const C=this[l].get(v).value;return this[s]&&(this[a]||this[s](v,C.value)),C.now=$,C.maxAge=w,C.value=_,this[n]+=A-C.length,C.length=A,this.get(v),p(this),!0}const M=new y(v,_,A,$,w);return M.length>this[t]?(this[s]&&this[s](v,_),!1):(this[n]+=M.length,this[u].unshift(M),this[l].set(v,this[u].head),p(this),!0)}has(v){if(!this[l].has(v))return!1;const _=this[l].get(v).value;return!g(this,_)}get(v){return h(this,v,!0)}peek(v){return h(this,v,!1)}pop(){const v=this[u].tail;return v?(m(this,v),v.value):null}del(v){m(this,this[l].get(v))}load(v){this.reset();const _=Date.now();for(let w=v.length-1;w>=0;w--){const $=v[w],A=$.e||0;if(A===0)this.set($.k,$.v);else{const M=A-_;M>0&&this.set($.k,$.v,M)}}}prune(){this[l].forEach((v,_)=>h(this,_,!1))}}const h=(x,v,_)=>{const w=x[l].get(v);if(w){const $=w.value;if(g(x,$)){if(m(x,w),!x[i])return}else _&&(x[c]&&(w.value.now=Date.now()),x[u].unshiftNode(w));return $.value}},g=(x,v)=>{if(!v||!v.maxAge&&!x[o])return!1;const _=Date.now()-v.now;return v.maxAge?_>v.maxAge:x[o]&&_>x[o]},p=x=>{if(x[n]>x[t])for(let v=x[u].tail;x[n]>x[t]&&v!==null;){const _=v.prev;m(x,v),v=_}},m=(x,v)=>{if(v){const _=v.value;x[s]&&x[s](_.key,_.value),x[n]-=_.length,x[l].delete(_.key),x[u].removeNode(v)}};class y{constructor(v,_,w,$,A){this.key=v,this.value=_,this.length=w,this.now=$,this.maxAge=A||0}}const b=(x,v,_,w)=>{let $=_.value;g(x,$)&&(m(x,_),x[i]||($=void 0)),$&&v.call(w,$.value,$.key,x)};return W_=d,W_}var H_,jO;function Ti(){if(jO)return H_;jO=1;class e{constructor(D,F){if(F=r(F),D instanceof e)return D.loose===!!F.loose&&D.includePrerelease===!!F.includePrerelease?D:new e(D.raw,F);if(D instanceof i)return this.raw=D.value,this.set=[[D]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=D,this.set=D.split("||").map(O=>this.parseRange(O.trim())).filter(O=>O.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${D}`);if(this.set.length>1){const O=this.set[0];if(this.set=this.set.filter(R=>!g(R[0])),this.set.length===0)this.set=[O];else if(this.set.length>1){for(const R of this.set)if(R.length===1&&p(R[0])){this.set=[R];break}}}this.format()}format(){return this.range=this.set.map(D=>D.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(D){D=D.trim();const O=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+D,R=n.get(O);if(R)return R;const B=this.options.loose,P=B?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];D=D.replace(P,C(this.options.includePrerelease)),o("hyphen replace",D),D=D.replace(a[u.COMPARATORTRIM],l),o("comparator trim",D),D=D.replace(a[u.TILDETRIM],c),D=D.replace(a[u.CARETTRIM],f),D=D.split(/\s+/).join(" ");let Z=D.split(" ").map(de=>y(de,this.options)).join(" ").split(/\s+/).map(de=>k(de,this.options));B&&(Z=Z.filter(de=>(o("loose invalid filter",de,this.options),!!de.match(a[u.COMPARATORLOOSE])))),o("range list",Z);const Q=new Map,fe=Z.map(de=>new i(de,this.options));for(const de of fe){if(g(de))return[de];Q.set(de.value,de)}Q.size>1&&Q.has("")&&Q.delete("");const we=[...Q.values()];return n.set(O,we),we}intersects(D,F){if(!(D instanceof e))throw new TypeError("a Range is required");return this.set.some(O=>m(O,F)&&D.set.some(R=>m(R,F)&&O.every(B=>R.every(P=>B.intersects(P,F)))))}test(D){if(!D)return!1;if(typeof D=="string")try{D=new s(D,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(N(this.set[F],D,this.options))return!0;return!1}}H_=e;const t=Uee(),n=new t({max:1e3}),r=L3,i=Dv(),o=Fv,s=Kn,{re:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Xg,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Sv,g=E=>E.value==="<0.0.0-0",p=E=>E.value==="",m=(E,D)=>{let F=!0;const O=E.slice();let R=O.pop();for(;F&&O.length;)F=O.every(B=>R.intersects(B,D)),R=O.pop();return F},y=(E,D)=>(o("comp",E,D),E=_(E,D),o("caret",E),E=x(E,D),o("tildes",E),E=$(E,D),o("xrange",E),E=M(E,D),o("stars",E),E),b=E=>!E||E.toLowerCase()==="x"||E==="*",x=(E,D)=>E.trim().split(/\s+/).map(F=>v(F,D)).join(" "),v=(E,D)=>{const F=D.loose?a[u.TILDELOOSE]:a[u.TILDE];return E.replace(F,(O,R,B,P,Z)=>{o("tilde",E,O,R,B,P,Z);let Q;return b(R)?Q="":b(B)?Q=`>=${R}.0.0 <${+R+1}.0.0-0`:b(P)?Q=`>=${R}.${B}.0 <${R}.${+B+1}.0-0`:Z?(o("replaceTilde pr",Z),Q=`>=${R}.${B}.${P}-${Z} <${R}.${+B+1}.0-0`):Q=`>=${R}.${B}.${P} <${R}.${+B+1}.0-0`,o("tilde return",Q),Q})},_=(E,D)=>E.trim().split(/\s+/).map(F=>w(F,D)).join(" "),w=(E,D)=>{o("caret",E,D);const F=D.loose?a[u.CARETLOOSE]:a[u.CARET],O=D.includePrerelease?"-0":"";return E.replace(F,(R,B,P,Z,Q)=>{o("caret",E,R,B,P,Z,Q);let fe;return b(B)?fe="":b(P)?fe=`>=${B}.0.0${O} <${+B+1}.0.0-0`:b(Z)?B==="0"?fe=`>=${B}.${P}.0${O} <${B}.${+P+1}.0-0`:fe=`>=${B}.${P}.0${O} <${+B+1}.0.0-0`:Q?(o("replaceCaret pr",Q),B==="0"?P==="0"?fe=`>=${B}.${P}.${Z}-${Q} <${B}.${P}.${+Z+1}-0`:fe=`>=${B}.${P}.${Z}-${Q} <${B}.${+P+1}.0-0`:fe=`>=${B}.${P}.${Z}-${Q} <${+B+1}.0.0-0`):(o("no pr"),B==="0"?P==="0"?fe=`>=${B}.${P}.${Z}${O} <${B}.${P}.${+Z+1}-0`:fe=`>=${B}.${P}.${Z}${O} <${B}.${+P+1}.0-0`:fe=`>=${B}.${P}.${Z} <${+B+1}.0.0-0`),o("caret return",fe),fe})},$=(E,D)=>(o("replaceXRanges",E,D),E.split(/\s+/).map(F=>A(F,D)).join(" ")),A=(E,D)=>{E=E.trim();const F=D.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return E.replace(F,(O,R,B,P,Z,Q)=>{o("xRange",E,O,R,B,P,Z,Q);const fe=b(B),we=fe||b(P),de=we||b(Z),Me=de;return R==="="&&Me&&(R=""),Q=D.includePrerelease?"-0":"",fe?R===">"||R==="<"?O="<0.0.0-0":O="*":R&&Me?(we&&(P=0),Z=0,R===">"?(R=">=",we?(B=+B+1,P=0,Z=0):(P=+P+1,Z=0)):R==="<="&&(R="<",we?B=+B+1:P=+P+1),R==="<"&&(Q="-0"),O=`${R+B}.${P}.${Z}${Q}`):we?O=`>=${B}.0.0${Q} <${+B+1}.0.0-0`:de&&(O=`>=${B}.${P}.0${Q} <${B}.${+P+1}.0-0`),o("xRange return",O),O})},M=(E,D)=>(o("replaceStars",E,D),E.trim().replace(a[u.STAR],"")),k=(E,D)=>(o("replaceGTE0",E,D),E.trim().replace(a[D.includePrerelease?u.GTE0PRE:u.GTE0],"")),C=E=>(D,F,O,R,B,P,Z,Q,fe,we,de,Me,wt)=>(b(O)?F="":b(R)?F=`>=${O}.0.0${E?"-0":""}`:b(B)?F=`>=${O}.${R}.0${E?"-0":""}`:P?F=`>=${F}`:F=`>=${F}${E?"-0":""}`,b(fe)?Q="":b(we)?Q=`<${+fe+1}.0.0-0`:b(de)?Q=`<${fe}.${+we+1}.0-0`:Me?Q=`<=${fe}.${we}.${de}-${Me}`:E?Q=`<${fe}.${we}.${+de+1}-0`:Q=`<=${Q}`,`${F} ${Q}`.trim()),N=(E,D,F)=>{for(let O=0;O<E.length;O++)if(!E[O].test(D))return!1;if(D.prerelease.length&&!F.includePrerelease){for(let O=0;O<E.length;O++)if(o(E[O].semver),E[O].semver!==i.ANY&&E[O].semver.prerelease.length>0){const R=E[O].semver;if(R.major===D.major&&R.minor===D.minor&&R.patch===D.patch)return!0}return!1}return!0};return H_}var Y_,IO;function Dv(){if(IO)return Y_;IO=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Y_=t;const n=L3,{re:r,t:i}=Xg,o=XB,s=Fv,a=Kn,u=Ti();return Y_}const qee=Ti(),Wee=(e,t,n)=>{try{t=new qee(t,n)}catch{return!1}return t.test(e)};var Mv=Wee;const Hee=Ti(),Yee=(e,t)=>new Hee(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var Gee=Yee;const Vee=Kn,Xee=Ti(),Kee=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Xee(t,n)}catch{return null}return e.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new Vee(r,n))}),r};var Zee=Kee;const Jee=Kn,Qee=Ti(),ete=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Qee(t,n)}catch{return null}return e.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new Jee(r,n))}),r};var tte=ete;const G_=Kn,nte=Ti(),zO=kv,rte=(e,t)=>{e=new nte(e,t);let n=new G_("0.0.0");if(e.test(n)||(n=new G_("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){const i=e.set[r];let o=null;i.forEach(s=>{const a=new G_(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||zO(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!n||zO(n,o))&&(n=o)}return n&&e.test(n)?n:null};var ite=rte;const ote=Ti(),ste=(e,t)=>{try{return new ote(e,t).range||"*"}catch{return null}};var ate=ste;const ute=Kn,KB=Dv(),{ANY:lte}=KB,cte=Ti(),fte=Mv,UO=kv,qO=j3,dte=z3,hte=I3,gte=(e,t,n,r)=>{e=new ute(e,r),t=new cte(t,r);let i,o,s,a,u;switch(n){case">":i=UO,o=dte,s=qO,a=">",u=">=";break;case"<":i=qO,o=hte,s=UO,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(fte(e,t,r))return!1;for(let l=0;l<t.set.length;++l){const c=t.set[l];let f=null,d=null;if(c.forEach(h=>{h.semver===lte&&(h=new KB(">=0.0.0")),f=f||h,d=d||h,i(h.semver,f.semver,r)?f=h:s(h.semver,d.semver,r)&&(d=h)}),f.operator===a||f.operator===u||(!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===u&&s(e,d.semver))return!1}return!0};var U3=gte;const pte=U3,mte=(e,t,n)=>pte(e,t,">",n);var yte=mte;const bte=U3,vte=(e,t,n)=>bte(e,t,"<",n);var xte=vte;const WO=Ti(),_te=(e,t,n)=>(e=new WO(e,n),t=new WO(t,n),e.intersects(t,n));var $te=_te;const wte=Mv,Ate=Oi;var Ete=(e,t,n)=>{const r=[];let i=null,o=null;const s=e.sort((c,f)=>Ate(c,f,n));for(const c of s)wte(c,t,n)?(o=c,i||(i=c)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);const a=[];for(const[c,f]of r)c===f?a.push(c):!f&&c===s[0]?a.push("*"):f?c===s[0]?a.push(`<=${f}`):a.push(`${c} - ${f}`):a.push(`>=${c}`);const u=a.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return u.length<l.length?u:t};const HO=Ti(),q3=Dv(),{ANY:V_}=q3,Hd=Mv,W3=Oi,Cte=(e,t,n={})=>{if(e===t)return!0;e=new HO(e,n),t=new HO(t,n);let r=!1;e:for(const i of e.set){for(const o of t.set){const s=Fte(i,o,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},Ste=[new q3(">=0.0.0-0")],YO=[new q3(">=0.0.0")],Fte=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===V_){if(t.length===1&&t[0].semver===V_)return!0;n.includePrerelease?e=Ste:e=YO}if(t.length===1&&t[0].semver===V_){if(n.includePrerelease)return!0;t=YO}const r=new Set;let i,o;for(const h of e)h.operator===">"||h.operator===">="?i=GO(i,h,n):h.operator==="<"||h.operator==="<="?o=VO(o,h,n):r.add(h.semver);if(r.size>1)return null;let s;if(i&&o){if(s=W3(i.semver,o.semver,n),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(const h of r){if(i&&!Hd(h,String(i),n)||o&&!Hd(h,String(o),n))return null;for(const g of t)if(!Hd(h,String(g),n))return!1;return!0}let a,u,l,c,f=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,d=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const h of t){if(c=c||h.operator===">"||h.operator===">=",l=l||h.operator==="<"||h.operator==="<=",i){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator===">"||h.operator===">="){if(a=GO(i,h,n),a===h&&a!==i)return!1}else if(i.operator===">="&&!Hd(i.semver,String(h),n))return!1}if(o){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(u=VO(o,h,n),u===h&&u!==o)return!1}else if(o.operator==="<="&&!Hd(o.semver,String(h),n))return!1}if(!h.operator&&(o||i)&&s!==0)return!1}return!(i&&l&&!o&&s!==0||o&&c&&!i&&s!==0||d||f)},GO=(e,t,n)=>{if(!e)return t;const r=W3(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},VO=(e,t,n)=>{if(!e)return t;const r=W3(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};var kte=Cte;const X_=Xg,XO=Sv,Dte=Kn,KO=YB,Mte=id,Ote=LQ,Tte=IQ,Nte=UQ,Rte=WQ,Bte=GQ,Lte=KQ,Pte=QQ,jte=nee,Ite=Oi,zte=see,Ute=lee,qte=P3,Wte=hee,Hte=mee,Yte=kv,Gte=j3,Vte=GB,Xte=VB,Kte=I3,Zte=z3,Jte=XB,Qte=jee,ene=Dv(),tne=Ti(),nne=Mv,rne=Gee,ine=Zee,one=tte,sne=ite,ane=ate,une=U3,lne=yte,cne=xte,fne=$te,dne=Ete,hne=kte;var ZB={parse:Mte,valid:Ote,clean:Tte,inc:Nte,diff:Rte,major:Bte,minor:Lte,patch:Pte,prerelease:jte,compare:Ite,rcompare:zte,compareLoose:Ute,compareBuild:qte,sort:Wte,rsort:Hte,gt:Yte,lt:Gte,eq:Vte,neq:Xte,gte:Kte,lte:Zte,cmp:Jte,coerce:Qte,Comparator:ene,Range:tne,satisfies:nne,toComparators:rne,maxSatisfying:ine,minSatisfying:one,minVersion:sne,validRange:ane,outside:une,gtr:lne,ltr:cne,intersects:fne,simplifyRange:dne,subset:hne,SemVer:Dte,re:X_.re,src:X_.src,tokens:X_.t,SEMVER_SPEC_VERSION:XO.SEMVER_SPEC_VERSION,RELEASE_TYPES:XO.RELEASE_TYPES,compareIdentifiers:KO.compareIdentifiers,rcompareIdentifiers:KO.rcompareIdentifiers};function ri(e,t,n){return e.fields=t||[],e.fname=n,e}function vt(e){return e==null?null:e.fname}function wn(e){return e==null?null:e.fields}function JB(e){return e.length===1?gne(e[0]):pne(e)}const gne=e=>function(t){return t[e]},pne=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function q(e){throw Error(e)}function Ov(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a),o+=e.substring(++a,++a),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||q("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&q("Access path missing closing bracket: "+e),r&&q("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function Da(e,t,n){const r=Ov(e);return e=r.length===1?r[0]:e,ri((n&&n.get||JB)(r),[e],t||e)}const mne=Da("id"),Xr=ri(e=>e,[],"identity"),ia=ri(()=>0,[],"zero"),od=ri(()=>1,[],"one"),sd=ri(()=>!0,[],"true"),Ks=ri(()=>!1,[],"false");function _1(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const QB=0,eL=1,tL=2,nL=3,rL=4;function yne(e,t){let n=e||QB;return{level(r){return arguments.length?(n=+r,this):n},error(){return n>=eL&&_1(t||"error","ERROR",arguments),this},warn(){return n>=tL&&_1(t||"warn","WARN",arguments),this},info(){return n>=nL&&_1(t||"log","INFO",arguments),this},debug(){return n>=rL&&_1(t||"log","DEBUG",arguments),this}}}var $e=Array.isArray;function ke(e){return e===Object(e)}const ZO=e=>e!=="__proto__";function Tv(...e){return e.reduce((t,n)=>{for(const r in n)if(r==="signals")t.signals=bne(t.signals,n.signals);else{const i=r==="legend"?{layout:1}:r==="style"?!0:null;Nv(t,r,n[r],i)}return t},{})}function Nv(e,t,n,r){if(!ZO(t))return;let i,o;if(ke(n)&&!$e(n)){o=ke(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Nv(o,i,n[i]):ZO(i)&&(o[i]=n[i])}else e[t]=n}function bne(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Ze(e){return e[e.length-1]}function Ma(e){return e==null||e===""?null:+e}const iL=e=>t=>e*Math.exp(t),oL=e=>t=>Math.log(e*t),sL=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),aL=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,oy=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Rv(e,t,n,r){const i=n(e[0]),o=n(Ze(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function vne(e,t){return Rv(e,t,Ma,Xr)}function xne(e,t){var n=Math.sign(e[0]);return Rv(e,t,oL(n),iL(n))}function _ne(e,t,n){return Rv(e,t,oy(n),oy(1/n))}function $ne(e,t,n){return Rv(e,t,sL(n),aL(n))}function Bv(e,t,n,r,i){const o=r(e[0]),s=r(Ze(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function uL(e,t,n){return Bv(e,t,n,Ma,Xr)}function lL(e,t,n){const r=Math.sign(e[0]);return Bv(e,t,n,oL(r),iL(r))}function cA(e,t,n,r){return Bv(e,t,n,oy(r),oy(1/r))}function cL(e,t,n,r){return Bv(e,t,n,sL(r),aL(r))}function wne(e){return 1+~~(new Date(e).getMonth()/3)}function Ane(e){return 1+~~(new Date(e).getUTCMonth()/3)}function be(e){return e!=null?$e(e)?e:[e]:[]}function Ene(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ge(e){return typeof e=="function"}const Cne="descending";function fL(e,t,n){n=n||{},t=be(t)||[];const r=[],i=[],o={},s=n.comparator||Sne;return be(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Cne?-1:1),i.push(a=Ge(a)?a:Da(a,null,n)),(wn(a)||[]).forEach(l=>o[l]=1))}),i.length===0?null:ri(s(i,r),Object.keys(o))}const Lv=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Sne=(e,t)=>e.length===1?Fne(e[0],t[0]):kne(e,t,e.length),Fne=(e,t)=>function(n,r){return Lv(e(n),e(r))*t},kne=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=Lv(o(r),o(i));return s*t[a]});function Kr(e){return Ge(e)?e:()=>e}function dL(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function De(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Oa(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function hL(e,t){const n=e.length;let r=-1,i,o,s,a,u;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}return[a,u]}const Dne=Object.prototype.hasOwnProperty;function ve(e,t){return Dne.call(e,t)}const $1={};function ad(e){let t={},n;function r(o){return ve(t,o)&&t[o]!==$1}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===$1&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=$1),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const u=t[a];u!==$1&&(!n||!n(u))&&(o[a]=u,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function Mne(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],u=Ze(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=s?r:c<=s?i:o}function X(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),De(r,n)}function One(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function gL(e){return typeof e=="boolean"}function Pv(e){return Object.prototype.toString.call(e)==="[object Date]"}function pL(e){return e&&Ge(e[Symbol.iterator])}function El(e){return typeof e=="number"}function Tne(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ut(e){return typeof e=="string"}function mL(e,t,n){e&&(e=t?be(e).map(a=>a.replace(/\\(.)/g,"$1")):be(e));const r=e&&e.length,i=n&&n.get||JB,o=a=>i(t?[a]:Ov(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(u){return""+a(u)}}else{const a=e.map(o);s=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ri(s,e,"key")}function Nne(e,t){const n=e[0],r=Ze(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Rne=1e4;function yL(e){e=+e||Rne;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>ve(t,s)||ve(n,s),get:s=>ve(t,s)?t[s]:ve(n,s)?o(s,n[s]):void 0,set:(s,a)=>ve(t,s)?t[s]=a:o(s,a)}}function bL(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,u=0,l=0;for(;a<i&&u<o;++l)s[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)s[l]=t[a];for(;u<o;++u,++l)s[l]=n[u];return s}function Sh(e,t){let n="";for(;--t>=0;)n+=e;return n}function Bne(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?Sh(i,s)+o:r==="center"?Sh(i,~~(s/2))+o+Sh(i,Math.ceil(s/2)):o+Sh(i,s)}function jv(e){return e&&Ze(e)-e[0]||0}function he(e){return $e(e)?"["+e.map(he)+"]":ke(e)||ut(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function vL(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Lne=e=>El(e)||Pv(e)?e:Date.parse(e);function xL(e,t){return t=t||Lne,e==null||e===""?null:t(e)}function _L(e){return e==null||e===""?null:e+""}function Es(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Pne(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function jne(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function ud(e,t,n){return e.fields=t||[],e.fname=n,e}function Ine(e){return e.length===1?zne(e[0]):Une(e)}const zne=e=>function(t){return t[e]},Une=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function An(e){throw Error(e)}function qne(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||An("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&An("Access path missing closing bracket: "+e),r&&An("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function $L(e,t,n){const r=qne(e);return e=r.length===1?r[0]:e,ud((n&&n.get||Ine)(r),[e],t||e)}const Iv=$L("id"),zv=ud(e=>e,[],"identity");ud(()=>0,[],"zero");ud(()=>1,[],"one");const fA=ud(()=>!0,[],"true");ud(()=>!1,[],"false");function Wne(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const Hne=0,wL=1,Yne=2,Gne=3,Vne=4;function Xne(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wne,r=e||Hne;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=wL&&n(t||"error","ERROR",arguments),this},warn(){return r>=Yne&&n(t||"warn","WARN",arguments),this},info(){return r>=Gne&&n(t||"log","INFO",arguments),this},debug(){return r>=Vne&&n(t||"log","DEBUG",arguments),this}}}var go=Array.isArray;function H3(e){return e===Object(e)}function JO(e){return e==null||e===""?null:+e}function sy(e){return e!=null?go(e)?e:[e]:[]}function Ai(e){return typeof e=="function"}function Y3(e){return Ai(e)?e:()=>e}function Kne(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function ld(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}const Zne=Object.prototype.hasOwnProperty;function G3(e,t){return Zne.call(e,t)}function AL(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ld(r,n)}function Jne(e){return Object.prototype.toString.call(e)==="[object Date]"}function Qne(e){return e&&Ai(e[Symbol.iterator])}function ere(e){return typeof e=="number"}function dA(e){return typeof e=="string"}function V3(e){return go(e)?"["+e.map(V3)+"]":H3(e)||dA(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function tre(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const nre=e=>ere(e)||Jne(e)?e:Date.parse(e);function rre(e,t){return t=t||nre,e==null||e===""?null:t(e)}function ire(e){return e==null||e===""?null:e+""}function qu(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var QO={},K_={},Z_=34,Yd=10,J_=13;function EL(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function ore(e,t){var n=EL(e);return function(r,i){return t(n(r),i,e)}}function e4(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function er(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function sre(e){return e<0?"-"+er(-e,6):e>9999?"+"+er(e,6):er(e,4)}function are(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":sre(e.getUTCFullYear())+"-"+er(e.getUTCMonth()+1,2)+"-"+er(e.getUTCDate(),2)+(i?"T"+er(t,2)+":"+er(n,2)+":"+er(r,2)+"."+er(i,3)+"Z":r?"T"+er(t,2)+":"+er(n,2)+":"+er(r,2)+"Z":n||t?"T"+er(t,2)+":"+er(n,2)+"Z":"")}function ure(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,g,p=i(f,function(m,y){if(h)return h(m,y-1);g=m,h=d?ore(m,d):EL(m)});return p.columns=g||[],p}function i(f,d){var h=[],g=f.length,p=0,m=0,y,b=g<=0,x=!1;f.charCodeAt(g-1)===Yd&&--g,f.charCodeAt(g-1)===J_&&--g;function v(){if(b)return K_;if(x)return x=!1,QO;var w,$=p,A;if(f.charCodeAt($)===Z_){for(;p++<g&&f.charCodeAt(p)!==Z_||f.charCodeAt(++p)===Z_;);return(w=p)>=g?b=!0:(A=f.charCodeAt(p++))===Yd?x=!0:A===J_&&(x=!0,f.charCodeAt(p)===Yd&&++p),f.slice($+1,w-1).replace(/""/g,'"')}for(;p<g;){if((A=f.charCodeAt(w=p++))===Yd)x=!0;else if(A===J_)x=!0,f.charCodeAt(p)===Yd&&++p;else if(A!==n)continue;return f.slice($,w)}return b=!0,f.slice($,g)}for(;(y=v())!==K_;){for(var _=[];y!==QO&&y!==K_;)_.push(y),y=v();d&&(_=d(_,m++))==null||h.push(_)}return h}function o(f,d){return f.map(function(h){return d.map(function(g){return c(h[g])}).join(e)})}function s(f,d){return d==null&&(d=e4(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=e4(f)),o(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?are(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function lre(e){return e}function cre(e){if(e==null)return lre;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;l<c;)f[l]=a[l],++l;return f}}function fre(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function CL(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return t4(e,n)})}:t4(e,t)}function t4(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=SL(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function SL(e,t){var n=cre(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,g=d.length;h<g;++h)f.push(n(d[h],h));c<0&&fre(f,g)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function dre(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,g;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,g=r[d]){delete r[g.start];var p=g===h?h:h.concat(g);r[p.start=h.start]=i[p.end=g.end]=p}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,g=i[f]){delete i[g.end];var m=g===h?h:g.concat(h);r[m.start=g.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function FL(e){return SL(e,hre.apply(this,arguments))}function hre(e,t,n){var r,i,o;if(arguments.length>1)r=gre(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:dre(e,r)}}function gre(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}class ay extends Map{constructor(t,n=ML){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(hA(this,t))}has(t){return super.has(hA(this,t))}set(t,n){return super.set(kL(this,t),n)}delete(t){return super.delete(DL(this,t))}}class uy extends Set{constructor(t,n=ML){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(hA(this,t))}add(t){return super.add(kL(this,t))}delete(t){return super.delete(DL(this,t))}}function hA({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function kL({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function DL({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(n),e.delete(r)),n}function ML(e){return e!==null&&typeof e=="object"?e.valueOf():e}const pre=Math.sqrt(50),mre=Math.sqrt(10),yre=Math.sqrt(2);function OL(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=pre?10:o>=mre?5:o>=yre?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?OL(e,t,n*2):[a,u,l]}function n4(e,t,n){return t=+t,e=+e,n=+n,OL(e,t,n)[2]}function bre(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?n4(t,e,n):n4(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function vre(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ly(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function hf(e){return e=ly(Math.abs(e)),e?e[1]:NaN}function xre(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function _re(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function F0(e){if(!(t=$re.exec(e)))throw new Error("invalid format: "+e);var t;return new X3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}F0.prototype=X3.prototype;function X3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}X3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wre(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var TL;function Are(e,t){var n=ly(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(TL=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ly(e,Math.max(0,t+o-1))[0]}function r4(e,t){var n=ly(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const i4={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:vre,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>r4(e*100,t),r:r4,s:Are,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function o4(e){return e}var s4=Array.prototype.map,a4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function NL(e){var t=e.grouping===void 0||e.thousands===void 0?o4:xre(s4.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?o4:_re(s4.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=F0(f);var d=f.fill,h=f.align,g=f.sign,p=f.symbol,m=f.zero,y=f.width,b=f.comma,x=f.precision,v=f.trim,_=f.type;_==="n"?(b=!0,_="g"):i4[_]||(x===void 0&&(x=12),v=!0,_="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var w=p==="$"?n:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",$=p==="$"?r:/[%p]/.test(_)?s:"",A=i4[_],M=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function k(C){var N=w,E=$,D,F,O;if(_==="c")E=A(C)+E,C="";else{C=+C;var R=C<0||1/C<0;if(C=isNaN(C)?u:A(Math.abs(C),x),v&&(C=wre(C)),R&&+C==0&&g!=="+"&&(R=!1),N=(R?g==="("?g:a:g==="-"||g==="("?"":g)+N,E=(_==="s"?a4[8+TL/3]:"")+E+(R&&g==="("?")":""),M){for(D=-1,F=C.length;++D<F;)if(O=C.charCodeAt(D),48>O||O>57){E=(O===46?i+C.slice(D+1):C.slice(D))+E,C=C.slice(0,D);break}}}b&&!m&&(C=t(C,1/0));var B=N.length+C.length+E.length,P=B<y?new Array(y-B+1).join(d):"";switch(b&&m&&(C=t(P+C,P.length?y-E.length:1/0),P=""),h){case"<":C=N+C+E+P;break;case"=":C=N+P+C+E;break;case"^":C=P.slice(0,B=P.length>>1)+N+C+E+P.slice(B);break;default:C=P+N+C+E;break}return o(C)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=F0(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(hf(d)/3)))*3,p=Math.pow(10,-g),m=a4[8+g/3];return function(y){return h(p*y)+m}}return{format:l,formatPrefix:c}}var w1,RL,BL;Ere({thousands:",",grouping:[3],currency:["$",""]});function Ere(e){return w1=NL(e),RL=w1.format,BL=w1.formatPrefix,w1}function Cre(e){return Math.max(0,-hf(Math.abs(e)))}function Sre(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hf(t)/3)))*3-hf(Math.abs(e)))}function Fre(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hf(t)-hf(e))+1}const Q_=new Date,e$=new Date;function Nt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let l;do u.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return u},i.filter=o=>Nt(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(Q_.setTime(+o),e$.setTime(+s),e(Q_),e(e$),Math.floor(n(Q_,e$))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const k0=Nt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);k0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Nt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):k0);k0.range;const D0=1e3,Ta=D0*60,M0=Ta*60,O0=M0*24,LL=O0*7,K3=Nt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*D0)},(e,t)=>(t-e)/D0,e=>e.getUTCSeconds());K3.range;const PL=Nt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*D0)},(e,t)=>{e.setTime(+e+t*Ta)},(e,t)=>(t-e)/Ta,e=>e.getMinutes());PL.range;const jL=Nt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ta)},(e,t)=>(t-e)/Ta,e=>e.getUTCMinutes());jL.range;const IL=Nt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*D0-e.getMinutes()*Ta)},(e,t)=>{e.setTime(+e+t*M0)},(e,t)=>(t-e)/M0,e=>e.getHours());IL.range;const zL=Nt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*M0)},(e,t)=>(t-e)/M0,e=>e.getUTCHours());zL.range;const tf=Nt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ta)/O0,e=>e.getDate()-1);tf.range;const nf=Nt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/O0,e=>e.getUTCDate()-1);nf.range;const kre=Nt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/O0,e=>Math.floor(e/O0));kre.range;function Ql(e){return Nt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ta)/LL)}const Z3=Ql(0),cy=Ql(1),Dre=Ql(2),Mre=Ql(3),gf=Ql(4),Ore=Ql(5),Tre=Ql(6);Z3.range;cy.range;Dre.range;Mre.range;gf.range;Ore.range;Tre.range;function ec(e){return Nt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/LL)}const J3=ec(0),fy=ec(1),Nre=ec(2),Rre=ec(3),pf=ec(4),Bre=ec(5),Lre=ec(6);J3.range;fy.range;Nre.range;Rre.range;pf.range;Bre.range;Lre.range;const gA=Nt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());gA.range;const pA=Nt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());pA.range;const Na=Nt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Na.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Na.range;const Ra=Nt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ra.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ra.range;const T0="year",N0="quarter",R0="month",B0="week",L0="date",Uv="day",Q3="dayofyear",P0="hours",j0="minutes",I0="seconds",qv="milliseconds",Pre=[T0,N0,R0,B0,L0,Uv,Q3,P0,j0,I0,qv];Pre.reduce((e,t,n)=>(e[t]=1+n,e),{});const jre={[T0]:Na,[N0]:gA.every(3),[R0]:gA,[B0]:Z3,[L0]:tf,[Uv]:tf,[Q3]:tf,[P0]:IL,[j0]:PL,[I0]:K3,[qv]:k0},Ire={[T0]:Ra,[N0]:pA.every(3),[R0]:pA,[B0]:J3,[L0]:nf,[Uv]:nf,[Q3]:nf,[P0]:zL,[j0]:jL,[I0]:K3,[qv]:k0};function zre(e){return jre[e]}function Ure(e){return Ire[e]}function t$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function n$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Gd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function UL(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,u=e.shortMonths,l=Vd(i),c=Xd(i),f=Vd(o),d=Xd(o),h=Vd(s),g=Xd(s),p=Vd(a),m=Xd(a),y=Vd(u),b=Xd(u),x={a:R,A:B,b:P,B:Z,c:null,d:h4,e:h4,f:fie,g:_ie,G:wie,H:uie,I:lie,j:cie,L:qL,m:die,M:hie,p:Q,q:fe,Q:m4,s:y4,S:gie,u:pie,U:mie,V:yie,w:bie,W:vie,x:null,X:null,y:xie,Y:$ie,Z:Aie,"%":p4},v={a:we,A:de,b:Me,B:wt,c:null,d:g4,e:g4,f:Fie,g:Pie,G:Iie,H:Eie,I:Cie,j:Sie,L:HL,m:kie,M:Die,p:On,q:ln,Q:m4,s:y4,S:Mie,u:Oie,U:Tie,V:Nie,w:Rie,W:Bie,x:null,X:null,y:Lie,Y:jie,Z:zie,"%":p4},_={a:k,A:C,b:N,B:E,c:D,d:f4,e:f4,f:iie,g:c4,G:l4,H:d4,I:d4,j:eie,L:rie,m:Qre,M:tie,p:M,q:Jre,Q:sie,s:aie,S:nie,u:Gre,U:Vre,V:Xre,w:Yre,W:Kre,x:F,X:O,y:c4,Y:l4,Z:Zre,"%":oie};x.x=w(n,x),x.X=w(r,x),x.c=w(t,x),v.x=w(n,v),v.X=w(r,v),v.c=w(t,v);function w(T,U){return function(W){var S=[],ye=-1,K=0,xe=T.length,_e,dt,Ys;for(W instanceof Date||(W=new Date(+W));++ye<xe;)T.charCodeAt(ye)===37&&(S.push(T.slice(K,ye)),(dt=u4[_e=T.charAt(++ye)])!=null?_e=T.charAt(++ye):dt=_e==="e"?" ":"0",(Ys=U[_e])&&(_e=Ys(W,dt)),S.push(_e),K=ye+1);return S.push(T.slice(K,ye)),S.join("")}}function $(T,U){return function(W){var S=Gd(1900,void 0,1),ye=A(S,T,W+="",0),K,xe;if(ye!=W.length)return null;if("Q"in S)return new Date(S.Q);if("s"in S)return new Date(S.s*1e3+("L"in S?S.L:0));if(U&&!("Z"in S)&&(S.Z=0),"p"in S&&(S.H=S.H%12+S.p*12),S.m===void 0&&(S.m="q"in S?S.q:0),"V"in S){if(S.V<1||S.V>53)return null;"w"in S||(S.w=1),"Z"in S?(K=n$(Gd(S.y,0,1)),xe=K.getUTCDay(),K=xe>4||xe===0?fy.ceil(K):fy(K),K=nf.offset(K,(S.V-1)*7),S.y=K.getUTCFullYear(),S.m=K.getUTCMonth(),S.d=K.getUTCDate()+(S.w+6)%7):(K=t$(Gd(S.y,0,1)),xe=K.getDay(),K=xe>4||xe===0?cy.ceil(K):cy(K),K=tf.offset(K,(S.V-1)*7),S.y=K.getFullYear(),S.m=K.getMonth(),S.d=K.getDate()+(S.w+6)%7)}else("W"in S||"U"in S)&&("w"in S||(S.w="u"in S?S.u%7:"W"in S?1:0),xe="Z"in S?n$(Gd(S.y,0,1)).getUTCDay():t$(Gd(S.y,0,1)).getDay(),S.m=0,S.d="W"in S?(S.w+6)%7+S.W*7-(xe+5)%7:S.w+S.U*7-(xe+6)%7);return"Z"in S?(S.H+=S.Z/100|0,S.M+=S.Z%100,n$(S)):t$(S)}}function A(T,U,W,S){for(var ye=0,K=U.length,xe=W.length,_e,dt;ye<K;){if(S>=xe)return-1;if(_e=U.charCodeAt(ye++),_e===37){if(_e=U.charAt(ye++),dt=_[_e in u4?U.charAt(ye++):_e],!dt||(S=dt(T,W,S))<0)return-1}else if(_e!=W.charCodeAt(S++))return-1}return S}function M(T,U,W){var S=l.exec(U.slice(W));return S?(T.p=c.get(S[0].toLowerCase()),W+S[0].length):-1}function k(T,U,W){var S=h.exec(U.slice(W));return S?(T.w=g.get(S[0].toLowerCase()),W+S[0].length):-1}function C(T,U,W){var S=f.exec(U.slice(W));return S?(T.w=d.get(S[0].toLowerCase()),W+S[0].length):-1}function N(T,U,W){var S=y.exec(U.slice(W));return S?(T.m=b.get(S[0].toLowerCase()),W+S[0].length):-1}function E(T,U,W){var S=p.exec(U.slice(W));return S?(T.m=m.get(S[0].toLowerCase()),W+S[0].length):-1}function D(T,U,W){return A(T,t,U,W)}function F(T,U,W){return A(T,n,U,W)}function O(T,U,W){return A(T,r,U,W)}function R(T){return s[T.getDay()]}function B(T){return o[T.getDay()]}function P(T){return u[T.getMonth()]}function Z(T){return a[T.getMonth()]}function Q(T){return i[+(T.getHours()>=12)]}function fe(T){return 1+~~(T.getMonth()/3)}function we(T){return s[T.getUTCDay()]}function de(T){return o[T.getUTCDay()]}function Me(T){return u[T.getUTCMonth()]}function wt(T){return a[T.getUTCMonth()]}function On(T){return i[+(T.getUTCHours()>=12)]}function ln(T){return 1+~~(T.getUTCMonth()/3)}return{format:function(T){var U=w(T+="",x);return U.toString=function(){return T},U},parse:function(T){var U=$(T+="",!1);return U.toString=function(){return T},U},utcFormat:function(T){var U=w(T+="",v);return U.toString=function(){return T},U},utcParse:function(T){var U=$(T+="",!0);return U.toString=function(){return T},U}}}var u4={"-":"",_:" ",0:"0"},Vt=/^\s*\d+/,qre=/^%/,Wre=/[\\^$*+?|[\]().{}]/g;function Pe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Hre(e){return e.replace(Wre,"\\$&")}function Vd(e){return new RegExp("^(?:"+e.map(Hre).join("|")+")","i")}function Xd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Yre(e,t,n){var r=Vt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Gre(e,t,n){var r=Vt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Vre(e,t,n){var r=Vt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Xre(e,t,n){var r=Vt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Kre(e,t,n){var r=Vt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function l4(e,t,n){var r=Vt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function c4(e,t,n){var r=Vt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Zre(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Jre(e,t,n){var r=Vt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Qre(e,t,n){var r=Vt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function f4(e,t,n){var r=Vt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function eie(e,t,n){var r=Vt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function d4(e,t,n){var r=Vt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function tie(e,t,n){var r=Vt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function nie(e,t,n){var r=Vt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function rie(e,t,n){var r=Vt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function iie(e,t,n){var r=Vt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function oie(e,t,n){var r=qre.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sie(e,t,n){var r=Vt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function aie(e,t,n){var r=Vt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function h4(e,t){return Pe(e.getDate(),t,2)}function uie(e,t){return Pe(e.getHours(),t,2)}function lie(e,t){return Pe(e.getHours()%12||12,t,2)}function cie(e,t){return Pe(1+tf.count(Na(e),e),t,3)}function qL(e,t){return Pe(e.getMilliseconds(),t,3)}function fie(e,t){return qL(e,t)+"000"}function die(e,t){return Pe(e.getMonth()+1,t,2)}function hie(e,t){return Pe(e.getMinutes(),t,2)}function gie(e,t){return Pe(e.getSeconds(),t,2)}function pie(e){var t=e.getDay();return t===0?7:t}function mie(e,t){return Pe(Z3.count(Na(e)-1,e),t,2)}function WL(e){var t=e.getDay();return t>=4||t===0?gf(e):gf.ceil(e)}function yie(e,t){return e=WL(e),Pe(gf.count(Na(e),e)+(Na(e).getDay()===4),t,2)}function bie(e){return e.getDay()}function vie(e,t){return Pe(cy.count(Na(e)-1,e),t,2)}function xie(e,t){return Pe(e.getFullYear()%100,t,2)}function _ie(e,t){return e=WL(e),Pe(e.getFullYear()%100,t,2)}function $ie(e,t){return Pe(e.getFullYear()%1e4,t,4)}function wie(e,t){var n=e.getDay();return e=n>=4||n===0?gf(e):gf.ceil(e),Pe(e.getFullYear()%1e4,t,4)}function Aie(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pe(t/60|0,"0",2)+Pe(t%60,"0",2)}function g4(e,t){return Pe(e.getUTCDate(),t,2)}function Eie(e,t){return Pe(e.getUTCHours(),t,2)}function Cie(e,t){return Pe(e.getUTCHours()%12||12,t,2)}function Sie(e,t){return Pe(1+nf.count(Ra(e),e),t,3)}function HL(e,t){return Pe(e.getUTCMilliseconds(),t,3)}function Fie(e,t){return HL(e,t)+"000"}function kie(e,t){return Pe(e.getUTCMonth()+1,t,2)}function Die(e,t){return Pe(e.getUTCMinutes(),t,2)}function Mie(e,t){return Pe(e.getUTCSeconds(),t,2)}function Oie(e){var t=e.getUTCDay();return t===0?7:t}function Tie(e,t){return Pe(J3.count(Ra(e)-1,e),t,2)}function YL(e){var t=e.getUTCDay();return t>=4||t===0?pf(e):pf.ceil(e)}function Nie(e,t){return e=YL(e),Pe(pf.count(Ra(e),e)+(Ra(e).getUTCDay()===4),t,2)}function Rie(e){return e.getUTCDay()}function Bie(e,t){return Pe(fy.count(Ra(e)-1,e),t,2)}function Lie(e,t){return Pe(e.getUTCFullYear()%100,t,2)}function Pie(e,t){return e=YL(e),Pe(e.getUTCFullYear()%100,t,2)}function jie(e,t){return Pe(e.getUTCFullYear()%1e4,t,4)}function Iie(e,t){var n=e.getUTCDay();return e=n>=4||n===0?pf(e):pf.ceil(e),Pe(e.getUTCFullYear()%1e4,t,4)}function zie(){return"+0000"}function p4(){return"%"}function m4(e){return+e}function y4(e){return Math.floor(+e/1e3)}var Tc,GL,VL,XL,KL;Uie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Uie(e){return Tc=UL(e),GL=Tc.format,VL=Tc.parse,XL=Tc.utcFormat,KL=Tc.utcParse,Tc}function Fh(e){const t={};return n=>t[n]||(t[n]=e(n))}function qie(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Wie(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function Wie(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function ZL(e){const t=Fh(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=F0(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return qie(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=F0(s??",f");const a=bre(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(s.precision==null)switch(s.type){case"s":return isNaN(l=Sre(a,u))||(s.precision=l),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Fre(a,u))||(s.precision=l-(s.type==="e"));break}case"f":case"%":{isNaN(l=Cre(a))||(s.precision=l-(s.type==="%")*2);break}}return t(s)}}}let mA;Hie();function Hie(){return mA=ZL({format:RL,formatPrefix:BL})}function Yie(e){return ZL(NL(e))}function b4(e){return arguments.length?mA=Yie(e):mA}function v4(e,t,n){n=n||{},H3(n)||An(`Invalid time multi-format specifier: ${n}`);const r=t(I0),i=t(j0),o=t(P0),s=t(L0),a=t(B0),u=t(R0),l=t(N0),c=t(T0),f=e(n[qv]||".%L"),d=e(n[I0]||":%S"),h=e(n[j0]||"%I:%M"),g=e(n[P0]||"%I %p"),p=e(n[L0]||n[Uv]||"%a %d"),m=e(n[B0]||"%b %d"),y=e(n[R0]||"%B"),b=e(n[N0]||"%B"),x=e(n[T0]||"%Y");return v=>(r(v)<v?f:i(v)<v?d:o(v)<v?h:s(v)<v?g:u(v)<v?a(v)<v?p:m:c(v)<v?l(v)<v?y:b:x)(v)}function JL(e){const t=Fh(e.format),n=Fh(e.utcFormat);return{timeFormat:r=>dA(r)?t(r):v4(t,zre,r),utcFormat:r=>dA(r)?n(r):v4(n,Ure,r),timeParse:Fh(e.parse),utcParse:Fh(e.utcParse)}}let yA;Gie();function Gie(){return yA=JL({format:GL,parse:VL,utcFormat:XL,utcParse:KL})}function Vie(e){return JL(UL(e))}function bA(e){return arguments.length?yA=Vie(e):yA}const x4=(e,t)=>ld({},e,t);function Xie(e,t){const n=arguments.length;return n&&n!==2&&An("defaultLocale expects either zero or two arguments."),n?x4(b4(e),bA(t)):x4(b4(),bA())}const Kie=/^(data:|([A-Za-z]+:)?\/\/)/,Zie=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Jie=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,_4="file://";function Qie(e,t){return n=>({options:n||{},sanitize:toe,load:eoe,fileAccess:!!t,file:noe(t),http:ioe(e)})}async function eoe(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function toe(e,t){t=ld({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=Zie.test(e.replace(Jie,""));(e==null||typeof e!="string"||!a)&&An("Sanitize failure, invalid URI: "+V3(e));const u=Kie.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(_4))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(_4.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function noe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):roe}async function roe(){An("No file system access.")}function ioe(e){return e?async function(t,n){const r=ld({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Ai(o[i])?o[i]():o.text():An(o.status+""+o.statusText)}:ooe}async function ooe(){An("No HTTP fetch method available.")}const soe=e=>e!=null&&e===e,aoe=e=>e==="true"||e==="false"||e===!0||e===!1,uoe=e=>!Number.isNaN(Date.parse(e)),QL=e=>!Number.isNaN(+e)&&!(e instanceof Date),loe=e=>QL(e)&&Number.isInteger(+e),$4={boolean:tre,integer:JO,number:JO,date:rre,string:ire,unknown:zv},A1=[aoe,loe,QL,uoe],coe=["boolean","integer","number","date"];function foe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=A1.length,i=A1.map((o,s)=>s+1);for(let o=0,s=0,a,u;o<n;++o)for(u=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&soe(u)&&!A1[a](u)&&(i[a]=0,++s,s===A1.length))return"string";return coe[i.reduce((o,s)=>o===0?s:o,0)-1]}function doe(e,t){return t.reduce((n,r)=>(n[r]=foe(e,r),n),{})}function w4(e){const t=function(n,r){const i={delimiter:e};return eS(n,r?ld(r,i):i)};return t.responseType="text",t}function eS(e,t){return t.header&&(e=t.header.map(V3).join(t.delimiter)+`
`+e),ure(t.delimiter).parse(e+"")}eS.responseType="text";function hoe(e){return typeof Buffer=="function"&&Ai(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function tS(e,t){const n=t&&t.property?$L(t.property):zv;return H3(e)&&!hoe(e)?goe(n(e),t):n(JSON.parse(e))}tS.responseType="json";function goe(e,t){return!go(e)&&Qne(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const poe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function eP(e,t){let n,r,i,o;return e=tS(e,t),t&&t.feature?(n=CL,i=t.feature):t&&t.mesh?(n=FL,i=t.mesh,o=poe[t.filter]):An("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):An("Invalid TopoJSON object: "+i),r&&r.features||[r]}eP.responseType="json";const r$={dsv:eS,csv:w4(","),tsv:w4("	"),json:tS,topojson:eP};function tP(e,t){return arguments.length>1?(r$[e]=t,this):G3(r$,e)?r$[e]:null}function moe(e){const t=tP(e);return t&&t.responseType||"text"}function yoe(e,t,n,r){t=t||{};const i=tP(t.type||"json");return i||An("Unknown data format type: "+t.type),e=i(e,t),t.parse&&boe(e,t.parse,n,r),G3(e,"columns")&&delete e.columns,e}function boe(e,t,n,r){if(!e.length)return;const i=bA();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,u,l,c,f;t==="auto"&&(t=doe(e,o)),o=Object.keys(t);const d=o.map(h=>{const g=t[h];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?r:n)(m);if(!$4[g])throw Error("Illegal format pattern: "+h+":"+g);return $4[g]});for(u=0,c=e.length,f=o.length;u<c;++u)for(s=e[u],l=0;l<f;++l)a=o[l],s[a]=d[l](s[a])}const voe=Qie(typeof fetch<"u"&&fetch,null);function Wv(e){const t=e||zv,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function _m(e,t){try{await t(e)}catch(n){e.error(n)}}const nP=Symbol("vega_id");let xoe=1;function Hv(e){return!!(e&&ie(e))}function ie(e){return e[nP]}function rP(e,t){return e[nP]=t,e}function Ue(e){const t=e===Object(e)?e:{data:e};return ie(t)?t:rP(t,xoe++)}function nS(e){return Yv(e,Ue({}))}function Yv(e,t){for(const n in e)t[n]=e[n];return t}function iP(e,t){return rP(t,ie(e))}function tc(e,t){return e?t?(n,r)=>e(n,r)||ie(t(n))-ie(t(r)):(n,r)=>e(n,r)||ie(n)-ie(r):null}function oP(e){return e&&e.constructor===nc}function nc(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:nc,insert(a){const u=sy(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Ai(a)?r:t,l=sy(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Y3(l)};return Ai(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Ai(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,u){const l={},c={};let f,d,h,g,p,m;for(f=0,d=u.length;f<d;++f)l[ie(u[f])]=1;for(f=0,d=t.length;f<d;++f)p=t[f],l[ie(p)]=-1;for(f=0,d=r.length;f<d;++f)g=r[f],u.forEach(b=>{g(b)&&(l[ie(b)]=-1)});for(f=0,d=e.length;f<d;++f)p=e[f],m=ie(p),l[m]?l[m]=1:a.add.push(Ue(e[f]));for(f=0,d=u.length;f<d;++f)p=u[f],l[ie(p)]<0&&a.rem.push(p);function y(b,x,v){v?b[x]=v(b):a.encode=x,s||(c[ie(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],p=h.tuple,g=h.field,m=l[ie(p)],m>0&&(y(p,g,h.value),a.modifies(g));for(f=0,d=i.length;f<d;++f)h=i[f],g=h.filter,u.forEach(b=>{g(b)&&l[ie(b)]>0&&y(b,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?u.filter(b=>l[ie(b)]>0):u.slice();else for(m in c)a.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const $m="_:mod:_";function Gv(){Object.defineProperty(this,$m,{writable:!0,value:{}})}Gv.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[$m];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=go(n)?1+n.length:-1),i},modified(e,t){const n=this[$m];if(arguments.length){if(go(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[$m]={},this}};let _oe=0;const $oe="pulse",woe=new Gv,Aoe=1,Eoe=2;function et(e,t,n,r){this.id=++_oe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function A4(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}et.prototype={targets(){return this._targets||(this._targets=Wv(Iv))},set(e){return this.value!==e?(this.value=e,1):0},skip:A4(Aoe),modified:A4(Eoe),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new Gv,i=this._argops=this._argops||[],o=[];let s,a,u,l;const c=(f,d,h)=>{h instanceof et?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===$oe)sy(a).forEach(f=>{f instanceof et?f!==this&&(f.targets().add(this),o.push(f)):An("Pulse parameters must be operator instances.")}),this.source=a;else if(go(a))for(r.set(s,-1,Array(u=a.length)),l=0;l<u;++l)c(s,l,a[l]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||woe,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Coe(e,t,n,r){let i=1,o;return e instanceof et?o=e:e&&e.prototype instanceof et?o=new e:Ai(e)?o=new et(null,e):(i=0,o=new et(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function Soe(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Foe=0;function Vv(e,t,n){this.id=++Foe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Zs(e,t,n){return new Vv(e,t,n)}Vv.prototype={_filter:fA,_apply:zv,targets(){return this._targets||(this._targets=Wv(Iv))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Zs(e);return this.targets().add(t),t},apply(e){const t=Zs(null,e);return this.targets().add(t),t},merge(){const e=Zs();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Zs();return this.targets().add(Zs(null,null,Kne(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Zs(null,null,()=>n=!0)),t.targets().add(Zs(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=fA,this._targets=null}};function koe(e,t,n,r){const i=this,o=Zs(n,r),s=function(l){l.dataflow=i;try{o.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=sy(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,s);return o}function Doe(e,t){const n=this.locale();return yoe(e,t,n.timeParse,n.utcParse)}function Moe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Ooe(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:moe(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function Toe(e,t,n){const r=this,i=r._pending||Noe(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(fA).insert(o.data||[])),i.done(),o}function Noe(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Roe={skip:!0};function Boe(e,t,n,r,i){return(e instanceof et?Poe:Loe)(this,e,t,n,r,i),this}function Loe(e,t,n,r,i,o){const s=ld({},o,Roe);let a,u;Ai(n)||(n=Y3(n)),r===void 0?a=l=>e.touch(n(l)):Ai(r)?(u=new et(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;oP(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=l=>e.update(n(l),r,s),t.apply(a)}function Poe(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new et(null,joe(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function joe(e,t){return t=Ai(t)?t:Y3(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Ioe(e){e.rank=++this._rank}function zoe(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&An("Cycle detected in dataflow graph.")}const dy={},Ki=1,Qs=2,Jo=4,Uoe=Ki|Qs,E4=Ki|Jo,Nc=Ki|Qs|Jo,C4=8,Kd=16,S4=32,F4=64;function $a(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function i$(e,t){const n=[];return qu(e,t,r=>n.push(r)),n}function k4(e,t){const n={};return e.visit(t,r=>{n[ie(r)]=1}),r=>n[ie(r)]?null:r}function E1(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}$a.prototype={StopPropagation:dy,ADD:Ki,REM:Qs,MOD:Jo,ADD_REM:Uoe,ADD_MOD:E4,ALL:Nc,REFLOW:C4,SOURCE:Kd,NO_SOURCE:S4,NO_FIELDS:F4,fork(e){return new $a(this.dataflow).init(this,e)},clone(){const e=this.fork(Nc);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Nc|Kd)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new $a(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&F4)&&(n.fields=e.fields),t&Ki?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Qs?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Jo?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&S4?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Nc;return t&Ki&&this.add.length||t&Qs&&this.rem.length||t&Jo&&this.mod.length},reflow(e){if(e)return this.fork(Nc).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Jo,k4(this,Ki))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return go(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?go(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ki&&(n.addF=E1(n.addF,t)),e&Qs&&(n.remF=E1(n.remF,t)),e&Jo&&(n.modF=E1(n.modF,t)),e&Kd&&(n.srcF=E1(n.srcF,t)),n},materialize(e){e=e||Nc;const t=this;return e&Ki&&t.addF&&(t.add=i$(t.add,t.addF),t.addF=null),e&Qs&&t.remF&&(t.rem=i$(t.rem,t.remF),t.remF=null),e&Jo&&t.modF&&(t.mod=i$(t.mod,t.modF),t.modF=null),e&Kd&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Kd)return qu(n.source,n.srcF,r),n;e&Ki&&qu(n.add,n.addF,r),e&Qs&&qu(n.rem,n.remF,r),e&Jo&&qu(n.mod,n.modF,r);const i=n.source;if(e&C4&&i){const o=n.add.length+n.mod.length;o===i.length||(o?qu(i,k4(n,E4),r):qu(i,n.srcF,r))}return n}};function rS(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const u in s.fields)a[u]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}AL(rS,$a,{fork(e){const t=new $a(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?go(e)?e.some(r=>n[r]):n[e]:0},filter(){An("MultiPulse does not support filtering.")},materialize(){An("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function qoe(e,t,n){const r=this,i=[];if(r._pulse)return sP(r);if(r._pending&&await r._pending,t&&await _m(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new $a(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=Wv(Iv);let s=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=dy),u!==dy&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await _m(r,c[f].callback)}return n&&await _m(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Woe(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Hoe(e,t,n){return this._pulse?sP(this):(this.evaluate(e,t,n),this)}function Yoe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function sP(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Goe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Voe(e,t){const n=e.source,r=this._clock;return n&&go(n)?new rS(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Xoe(this._pulse,n&&n.pulse)}function Xoe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==dy&&(e.source=t.source),e)}const iS={skip:!1,force:!1};function Koe(e,t){const n=t||iS;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Zoe(e,t,n){const r=n||iS;return(e.set(t)||r.force)&&this.touch(e,r),this}function Joe(e,t,n){this.touch(e,n||iS);const r=new $a(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Qoe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),aP(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,ese(t,0,e)):r=n,r}}}function aP(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function ese(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,aP(e,r,t,n)}function rf(){this.logger(Xne()),this.logLevel(wL),this._clock=0,this._rank=0,this._locale=Xie();try{this._loader=voe()}catch{}this._touched=Wv(Iv),this._input={},this._pulse=null,this._heap=Qoe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Zd(e){return function(){return this._log[e].apply(this,arguments)}}rf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Zd("error"),warn:Zd("warn"),info:Zd("info"),debug:Zd("debug"),logLevel:Zd("level"),cleanThreshold:1e4,add:Coe,connect:Soe,rank:Ioe,rerank:zoe,pulse:Joe,touch:Koe,update:Zoe,changeset:nc,ingest:Moe,parse:Doe,preload:Toe,request:Ooe,events:koe,on:Boe,evaluate:qoe,run:Hoe,runAsync:Woe,runAfter:Yoe,_enqueue:Goe,_getPulse:Voe};function L(e,t){et.call(this,e,null,t)}AL(L,et,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const mf={};function uP(e){const t=lP(e);return t&&t.Definition||null}function lP(e){return e=e&&e.toLowerCase(),G3(mf,e)?mf[e]:null}function cd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Kg(e){let t=e,n=e;e.length===1&&(t=(s,a)=>e(s)-a,n=tse(e));function r(s,a,u,l){for(u==null&&(u=0),l==null&&(l=s.length);u<l;){const c=u+l>>>1;n(s[c],a)<0?u=c+1:l=c}return u}function i(s,a,u,l){for(u==null&&(u=0),l==null&&(l=s.length);u<l;){const c=u+l>>>1;n(s[c],a)>0?l=c:u=c+1}return u}function o(s,a,u,l){u==null&&(u=0),l==null&&(l=s.length);const c=r(s,a,u,l-1);return c>u&&t(s[c-1],a)>-t(s[c],a)?c-1:c}return{left:r,center:o,right:i}}function tse(e){return(t,n)=>cd(e(t),n)}function cP(e){return e===null?NaN:+e}function*nse(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const fP=Kg(cd),hy=fP.right,rse=fP.left;Kg(cP).center;const Zg=hy;function ise(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function ose(e,t){const n=ise(e,t);return n&&Math.sqrt(n)}class qn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}function sse(e,t){return Array.from(t,n=>e[n])}var vA=Math.sqrt(50),xA=Math.sqrt(10),_A=Math.sqrt(2);function $A(e,t,n){var r,i=-1,o,s,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),(a=dP(e,t,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(e/a),l=Math.round(t/a);for(u*a<e&&++u,l*a>t&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)*a}else{a=-a;let u=Math.round(e*a),l=Math.round(t*a);for(u/a<e&&++u,l/a>t&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)/a}return r&&s.reverse(),s}function dP(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=vA?10:o>=xA?5:o>=_A?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=vA?10:o>=xA?5:o>=_A?2:1)}function Ba(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=vA?i*=10:o>=xA?i*=5:o>=_A&&(i*=2),t<e?-i:i}function hl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function wA(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function hP(e,t,n=0,r=e.length-1,i=cd){for(;r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),g=Math.min(r,Math.floor(t+(u-l)*f/u+d));hP(e,t,h,g,i)}const o=e[t];let s=n,a=r;for(Jd(e,n,t),i(e[r],o)>0&&Jd(e,n,r);s<a;){for(Jd(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?Jd(e,n,a):(++a,Jd(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Jd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function AA(e,t,n){if(e=Float64Array.from(nse(e,n)),!!(r=e.length)){if((t=+t)<=0||r<2)return wA(e);if(t>=1)return hl(e);var r,i=(r-1)*t,o=Math.floor(i),s=hl(hP(e,o).subarray(0,o+1)),a=wA(e.subarray(o+1));return s+(a-s)*(i-o)}}function gP(e,t,n=cP){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function ase(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function pP(e,t){return AA(e,.5,t)}function*use(e){for(const t of e)yield*t}function mP(e){return Array.from(use(e))}function Fr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function yP(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function*bP(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function oS(e,t,n){const r=Float64Array.from(bP(e,n));return r.sort(cd),t.map(i=>gP(r,i))}function sS(e,t){return oS(e,[.25,.5,.75],t)}function aS(e,t){const n=e.length,r=ose(e,t),i=sS(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function vP(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,u,l,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const g=c>=0?0:~~(-c/r)+1,p=Math.pow(n,-g-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+p)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var ki=Math.random;function lse(e){ki=e}function xP(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(bP(e,r)),o=i.length,s=t;let a,u,l,c;for(l=0,c=Array(s);l<s;++l){for(a=0,u=0;u<o;++u)a+=i[~~(ki()*o)];c[l]=a/o}return c.sort(cd),[AA(c,n/2),AA(c,1-n/2)]}function _P(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;s<a;++s)o[s]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;s<a;++s)o[s]=l;return n?cse(o,t+t/4):o}function cse(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function fse(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function dse(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*ki())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const $P=Math.sqrt(2*Math.PI),hse=Math.SQRT2;let Qd=NaN;function Xv(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Qd===Qd)n=Qd,Qd=NaN;else{do n=ki()*2-1,r=ki()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Qd=r*o}return e+n*t}function uS(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*$P)}function Kv(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function Zv(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*hse*gse(2*e-1)}function gse(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function lS(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Xv(n,r),pdf:o=>uS(o,n,r),cdf:o=>Kv(o,n,r),icdf:o=>Zv(o,n,r)};return i.mean(e).stdev(t)}function cS(e,t){const n=lS();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=aS(e)),i):t},sample(){return e[~~(ki()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function fS(e,t){return e=e||0,t=t??1,Math.exp(e+Xv()*t)}function dS(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*$P*e)}function hS(e,t,n){return Kv(Math.log(e),t,n)}function gS(e,t,n){return Math.exp(Zv(e,t,n))}function wP(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>fS(n,r),pdf:o=>dS(o,n,r),cdf:o=>hS(o,n,r),icdf:o=>gS(o,n,r)};return i.mean(e).stdev(t)}function AP(e,t){let n=0,r;function i(s){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=s[l]==null?1:+s[l];for(l=0;l<n;++l)a[l]/=u;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=ki();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(s<u){a=e[l];break}return a.sample()},pdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(s);return a},cdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function pS(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*ki()}function mS(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function yS(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function bS(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function EP(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>pS(n,r),pdf:o=>mS(o,n,r),cdf:o=>yS(o,n,r),icdf:o=>bS(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Jg(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Jv(e,t,n,r){e=e.filter(h=>{let g=t(h),p=n(h);return g!=null&&(g=+g)>=g&&p!=null&&(p=+p)>=p}),r&&e.sort((h,g)=>t(h)-t(g));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)o[a]-=u,s[a]-=l;return[o,s,u,l]}function Qg(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function fd(e,t,n,r,i){let o=0,s=0;return Qg(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;o+=l*l,s+=c*c}),1-o/s}function vS(e,t,n){let r=0,i=0,o=0,s=0,a=0;Qg(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=Jg(r,i,o,s),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:fd(e,t,n,i,l)}}function CP(e,t,n){let r=0,i=0,o=0,s=0,a=0;Qg(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=Jg(r,i,o,s),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:fd(e,t,n,i,l)}}function SP(e,t,n){const[r,i,o,s]=Jv(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,g;Qg(e,t,n,(b,x)=>{d=r[f++],h=Math.log(x),g=d*x,a+=(x*h-a)/f,u+=(g-u)/f,l+=(g*h-l)/f,c+=(d*g-c)/f});const[p,m]=Jg(u/s,a/s,l/s,c/s),y=b=>Math.exp(p+m*(b-o));return{coef:[Math.exp(p-m*o),m],predict:y,rSquared:fd(e,t,n,s,y)}}function FP(e,t,n){let r=0,i=0,o=0,s=0,a=0,u=0;Qg(e,t,n,(f,d)=>{const h=Math.log(f),g=Math.log(d);++u,r+=(h-r)/u,i+=(g-i)/u,o+=(h*g-o)/u,s+=(h*h-s)/u,a+=(d-a)/u});const l=Jg(r,i,o,s),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:fd(e,t,n,a,c)}}function xS(e,t,n){const[r,i,o,s]=Jv(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,g,p,m;for(h=0;h<a;)g=r[h],p=i[h++],m=g*g,u+=(m-u)/h,l+=(m*g-l)/h,c+=(m*m-c)/h,f+=(g*p-f)/h,d+=(m*p-d)/h;const y=c-u*u,b=u*y-l*l,x=(d*u-f*l)/b,v=(f*y-d*l)/b,_=-x*u,w=$=>($=$-o,x*$*$+v*$+_+s);return{coef:[_-v*o+x*o*o+s,v-2*x*o,x],predict:w,rSquared:fd(e,t,n,s,w)}}function kP(e,t,n,r){if(r===1)return vS(e,t,n);if(r===2)return xS(e,t,n);const[i,o,s,a]=Jv(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,g,p,m;for(d=0;d<f;++d){for(g=0,p=0;g<u;++g)p+=Math.pow(i[g],d)*o[g];for(l.push(p),m=new Float64Array(f),h=0;h<f;++h){for(g=0,p=0;g<u;++g)p+=Math.pow(i[g],d+h);m[h]=p}c.push(m)}c.push(l);const y=mse(c),b=x=>{x-=s;let v=a+y[0]+y[1]*x+y[2]*x*x;for(d=3;d<f;++d)v+=y[d]*Math.pow(x,d);return v};return{coef:pse(f,y,-s,a),predict:b,rSquared:fd(e,t,n,a,b)}}function pse(e,t,n,r){const i=Array(e);let o,s,a,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],u=1,i[o]+=a,s=1;s<=o;++s)u*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*u;return i[0]+=r,i}function mse(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const D4=2,M4=1e-12;function DP(e,t,n,r){const[i,o,s,a]=Jv(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=D4;){const g=[0,l-1];for(let m=0;m<u;++m){const y=i[m],b=g[0],x=g[1],v=y-i[b]>i[x]-y?b:x;let _=0,w=0,$=0,A=0,M=0;const k=1/Math.abs(i[v]-y||1);for(let E=b;E<=x;++E){const D=i[E],F=o[E],O=yse(Math.abs(y-D)*k)*d[E],R=D*O;_+=O,w+=R,$+=F*O,A+=F*R,M+=D*R}const[C,N]=Jg(w/_,$/_,A/_,M/_);c[m]=C+N*y,f[m]=Math.abs(o[m]-c[m]),bse(i,m+1,g)}if(h===D4)break;const p=pP(f);if(Math.abs(p)<M4)break;for(let m=0,y,b;m<u;++m)y=f[m]/(6*p),d[m]=y>=1?M4:(b=1-y*y)*b}return vse(i,c,s,a)}function yse(e){return(e=1-e*e*e)*e*e}function bse(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function vse(e,t,n,r){const i=e.length,o=[];let s=0,a=0,u=[],l;for(;s<i;++s)l=e[s]+n,u[0]===l?u[1]+=(t[s]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[s]],o.push(u));return u[1]+=r,o}const xse=.5*Math.PI/180;function Qv(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=p=>[p,e(p)],o=t[0],s=t[1],a=s-o,u=a/r,l=[i(o)],c=[];if(n===r){for(let p=1;p<r;++p)l.push(i(o+p/n*a));return l.push(i(s)),l}else{c.push(i(s));for(let p=n;--p>0;)c.push(i(o+p/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,g=_se(f[1],c);for(;d;){const p=i((f[0]+d[0])/2);p[0]-f[0]>=u&&$se(f,p,d,h,g)>xse?c.push(p):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function _se(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function $se(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}var o$=new Date,s$=new Date;function Xt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return e(o=new Date(+o)),o},i.ceil=function(o){return e(o=new Date(o-1)),t(o,1),e(o),o},i.round=function(o){var s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=function(o,s){return t(o=new Date(+o),s==null?1:Math.floor(s)),o},i.range=function(o,s,a){var u=[],l;if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;do u.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return u},i.filter=function(o){return Xt(function(s){if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},function(s,a){if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););})},n&&(i.count=function(o,s){return o$.setTime(+o),s$.setTime(+s),e(o$),e(s$),Math.floor(n(o$,s$))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?function(s){return r(s)%o===0}:function(s){return i.count(0,s)%o===0}):i}),i}var gy=Xt(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});gy.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Xt(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):gy};const _S=gy;gy.range;const ss=1e3,zr=ss*60,as=zr*60,Cl=as*24,$S=Cl*7,O4=Cl*30,a$=Cl*365;var MP=Xt(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*ss)},function(e,t){return(t-e)/ss},function(e){return e.getUTCSeconds()});const aa=MP;MP.range;var OP=Xt(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ss)},function(e,t){e.setTime(+e+t*zr)},function(e,t){return(t-e)/zr},function(e){return e.getMinutes()});const wS=OP;OP.range;var TP=Xt(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ss-e.getMinutes()*zr)},function(e,t){e.setTime(+e+t*as)},function(e,t){return(t-e)/as},function(e){return e.getHours()});const AS=TP;TP.range;var NP=Xt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zr)/Cl,e=>e.getDate()-1);const wa=NP;NP.range;function rc(e){return Xt(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*zr)/$S})}var dd=rc(0),py=rc(1),wse=rc(2),Ase=rc(3),yf=rc(4),Ese=rc(5),Cse=rc(6);dd.range;py.range;wse.range;Ase.range;yf.range;Ese.range;Cse.range;var RP=Xt(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});const my=RP;RP.range;var ES=Xt(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});ES.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};const La=ES;ES.range;var BP=Xt(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*zr)},function(e,t){return(t-e)/zr},function(e){return e.getUTCMinutes()});const CS=BP;BP.range;var LP=Xt(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*as)},function(e,t){return(t-e)/as},function(e){return e.getUTCHours()});const SS=LP;LP.range;var PP=Xt(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Cl},function(e){return e.getUTCDate()-1});const Aa=PP;PP.range;function ic(e){return Xt(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/$S})}var hd=ic(0),yy=ic(1),Sse=ic(2),Fse=ic(3),bf=ic(4),kse=ic(5),Dse=ic(6);hd.range;yy.range;Sse.range;Fse.range;bf.range;kse.range;Dse.range;var jP=Xt(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});const by=jP;jP.range;var FS=Xt(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});FS.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};const Pa=FS;FS.range;function IP(e,t,n,r,i,o){const s=[[aa,1,ss],[aa,5,5*ss],[aa,15,15*ss],[aa,30,30*ss],[o,1,zr],[o,5,5*zr],[o,15,15*zr],[o,30,30*zr],[i,1,as],[i,3,3*as],[i,6,6*as],[i,12,12*as],[r,1,Cl],[r,2,2*Cl],[n,1,$S],[t,1,O4],[t,3,3*O4],[e,1,a$]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),g=h?h.range(l,+c+1):[];return d?g.reverse():g}function u(l,c,f){const d=Math.abs(c-l)/f,h=Kg(([,,m])=>m).right(s,d);if(h===s.length)return e.every(Ba(l/a$,c/a$,f));if(h===0)return _S.every(Math.max(Ba(l,c,f),1));const[g,p]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return g.every(p)}return[a,u]}const[Mse,Ose]=IP(Pa,by,hd,Aa,SS,CS),[Tse,Nse]=IP(La,my,dd,wa,AS,wS),sn="year",gr="quarter",En="month",Dt="week",pr="date",bn="day",po="dayofyear",Or="hours",Tr="minutes",Zr="seconds",Di="milliseconds",kS=[sn,gr,En,Dt,pr,bn,po,Or,Tr,Zr,Di],u$=kS.reduce((e,t,n)=>(e[t]=1+n,e),{});function DS(e){const t=be(e).slice(),n={};return t.length||q("Missing time unit."),t.forEach(i=>{ve(u$,i)?n[i]=1:q("Invalid time unit: ".concat(i,"."))}),(n[Dt]||n[bn]?1:0)+(n[gr]||n[En]||n[pr]?1:0)+(n[po]?1:0)>1&&q("Incompatible time units: ".concat(e)),t.sort((i,o)=>u$[i]-u$[o]),t}const Rse={[sn]:"%Y ",[gr]:"Q%q ",[En]:"%b ",[pr]:"%d ",[Dt]:"W%U ",[bn]:"%a ",[po]:"%j ",[Or]:"%H:00",[Tr]:"00:%M",[Zr]:":%S",[Di]:".%L",["".concat(sn,"-").concat(En)]:"%Y-%m ",["".concat(sn,"-").concat(En,"-").concat(pr)]:"%Y-%m-%d ",["".concat(Or,"-").concat(Tr)]:"%H:%M"};function zP(e,t){const n=De({},Rse,t),r=DS(e),i=r.length;let o="",s=0,a,u;for(s=0;s<i;)for(a=r.length;a>s;--a)if(u=r.slice(s,a).join("-"),n[u]!=null){o+=n[u],s=a;break}return o.trim()}const Gu=new Date;function MS(e){return Gu.setFullYear(e),Gu.setMonth(0),Gu.setDate(1),Gu.setHours(0,0,0,0),Gu}function UP(e){return WP(new Date(e))}function qP(e){return EA(new Date(e))}function WP(e){return wa.count(MS(e.getFullYear())-1,e)}function EA(e){return dd.count(MS(e.getFullYear())-1,e)}function CA(e){return MS(e).getDay()}function Bse(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function HP(e){return GP(new Date(e))}function YP(e){return SA(new Date(e))}function GP(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Aa.count(t-1,e)}function SA(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return hd.count(t-1,e)}function FA(e){return Gu.setTime(Date.UTC(e,0,1)),Gu.getUTCDay()}function Lse(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function VP(e,t,n,r,i){const o=t||1,s=Ze(e),a=(y,b,x)=>(x=x||y,Pse(n[x],r[x],y===s&&o,b)),u=new Date,l=Es(e),c=l[sn]?a(sn):Kr(2012),f=l[En]?a(En):l[gr]?a(gr):ia,d=l[Dt]&&l[bn]?a(bn,1,Dt+bn):l[Dt]?a(Dt,1):l[bn]?a(bn,1):l[pr]?a(pr,1):l[po]?a(po,1):od,h=l[Or]?a(Or):ia,g=l[Tr]?a(Tr):ia,p=l[Zr]?a(Zr):ia,m=l[Di]?a(Di):ia;return function(y){u.setTime(+y);const b=c(u);return i(b,f(u),d(u,b),h(u),g(u),p(u),m(u))}}function Pse(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function vf(e,t,n){return t+e*7-(n+6)%7}const jse={[sn]:e=>e.getFullYear(),[gr]:e=>Math.floor(e.getMonth()/3),[En]:e=>e.getMonth(),[pr]:e=>e.getDate(),[Or]:e=>e.getHours(),[Tr]:e=>e.getMinutes(),[Zr]:e=>e.getSeconds(),[Di]:e=>e.getMilliseconds(),[po]:e=>WP(e),[Dt]:e=>EA(e),[Dt+bn]:(e,t)=>vf(EA(e),e.getDay(),CA(t)),[bn]:(e,t)=>vf(1,e.getDay(),CA(t))},Ise={[gr]:e=>3*e,[Dt]:(e,t)=>vf(e,0,CA(t))};function XP(e,t){return VP(e,t||1,jse,Ise,Bse)}const zse={[sn]:e=>e.getUTCFullYear(),[gr]:e=>Math.floor(e.getUTCMonth()/3),[En]:e=>e.getUTCMonth(),[pr]:e=>e.getUTCDate(),[Or]:e=>e.getUTCHours(),[Tr]:e=>e.getUTCMinutes(),[Zr]:e=>e.getUTCSeconds(),[Di]:e=>e.getUTCMilliseconds(),[po]:e=>GP(e),[Dt]:e=>SA(e),[bn]:(e,t)=>vf(1,e.getUTCDay(),FA(t)),[Dt+bn]:(e,t)=>vf(SA(e),e.getUTCDay(),FA(t))},Use={[gr]:e=>3*e,[Dt]:(e,t)=>vf(e,0,FA(t))};function KP(e,t){return VP(e,t||1,zse,Use,Lse)}const qse={[sn]:La,[gr]:my.every(3),[En]:my,[Dt]:dd,[pr]:wa,[bn]:wa,[po]:wa,[Or]:AS,[Tr]:wS,[Zr]:aa,[Di]:_S},Wse={[sn]:Pa,[gr]:by.every(3),[En]:by,[Dt]:hd,[pr]:Aa,[bn]:Aa,[po]:Aa,[Or]:SS,[Tr]:CS,[Zr]:aa,[Di]:_S};function gd(e){return qse[e]}function pd(e){return Wse[e]}function ZP(e,t,n){return e?e.offset(t,n):void 0}function JP(e,t,n){return ZP(gd(e),t,n)}function QP(e,t,n){return ZP(pd(e),t,n)}function ej(e,t,n,r){return e?e.range(t,n,r):void 0}function tj(e,t,n,r){return ej(gd(e),t,n,r)}function nj(e,t,n,r){return ej(pd(e),t,n,r)}const kh=1e3,Dh=kh*60,Mh=Dh*60,e2=Mh*24,Hse=e2*7,T4=e2*30,kA=e2*365,rj=[sn,En,pr,Or,Tr,Zr,Di],Oh=rj.slice(0,-1),Th=Oh.slice(0,-1),Nh=Th.slice(0,-1),Yse=Nh.slice(0,-1),Gse=[sn,Dt],N4=[sn,En],ij=[sn],eh=[[Oh,1,kh],[Oh,5,5*kh],[Oh,15,15*kh],[Oh,30,30*kh],[Th,1,Dh],[Th,5,5*Dh],[Th,15,15*Dh],[Th,30,30*Dh],[Nh,1,Mh],[Nh,3,3*Mh],[Nh,6,6*Mh],[Nh,12,12*Mh],[Yse,1,e2],[Gse,1,Hse],[N4,1,T4],[N4,3,3*T4],[ij,1,kA]];function oj(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(jv(t))/n;let i=Kg(a=>a[2]).right(eh,r),o,s;return i===eh.length?(o=ij,s=Ba(t[0]/kA,t[1]/kA,n)):i?(i=eh[r/eh[i-1][2]<eh[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=rj,s=Math.max(Ba(t[0],t[1],n),1)),{units:o,step:s}}function Vse(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function DA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Vse(e)}function sj(e,t,n){return n||e+(t?"_"+t:"")}const l$=()=>{},Xse={init:l$,add:l$,rem:l$,idx:0},z0={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},ep=Object.keys(z0);function Kse(e,t){return n=>De({name:e,out:n||e},Xse,t)}ep.forEach(e=>{z0[e]=Kse(e,z0[e])});function aj(e,t){return z0[e](t)}function uj(e,t){return e.idx-t.idx}function Zse(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=z0[i]())})};return e.forEach(n),Object.values(t).sort(uj)}function Jse(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function Qse(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function eae(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function tae(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function lj(e,t){const n=t||Xr,r=Zse(e),i=e.slice().sort(uj);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=Jse,o.prototype.add=Qse,o.prototype.rem=eae,o.prototype.set=tae,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function OS(e){this._key=e?Da(e):ie,this.reset()}const un=OS.prototype;un.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};un.add=function(e){this._add.push(e)};un.rem=function(e){this._rem.push(e)};un.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,u,l;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,u=0;a<r;++a)s[n(l=e[a])]?s[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o};un.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",ve(n,o)||(n[o]=1,++i);return i};un.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=hL(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};un.argmin=function(e){return this.extent(e)[0]||{}};un.argmax=function(e){return this.extent(e)[1]||{}};un.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};un.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};un.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=sS(this.values(),e),this._get=e),this._q};un.q1=function(e){return this.quartile(e)[0]};un.q2=function(e){return this.quartile(e)[1]};un.q3=function(e){return this.quartile(e)[2]};un.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=xP(this.values(),1e3,.05,e),this._get=e),this._ci};un.ci0=function(e){return this.ci(e)[0]};un.ci1=function(e){return this.ci(e)[1]};function ja(e){L.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ja.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ep},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};X(ja,L,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}o(e._prev),o(t);function s(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?s(h,u,l):t[h]||e.cell(h,u)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(m){const y=be(wn(m)),b=y.length;let x=0,v;for(;x<b;++x)r[v=y[x]]||(r[v]=1,t.push(v))}this._dims=be(e.groupby),this._dnames=this._dims.map(m=>{const y=vt(m);return i(m),n.push(y),y}),this.cellkey=e.key?e.key:DA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.as||[],u=o.length,l={};let c,f,d,h,g,p;for(u!==s.length&&q("Unmatched number of fields and aggregate ops."),p=0;p<u;++p){if(c=o[p],f=s[p],c==null&&f!=="count"&&q("Null aggregate field specified."),h=vt(c),g=sj(f,h,a[p]),n.push(g),f==="count"){this._counts.push(g);continue}d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),f!=="count"&&(this._countOnly=!1),d.push(aj(f,g))}return this._measures=this._measures.map(m=>lj(m,m.field)),{}},cellkey:DA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new OS),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?iP(t.tuple,o):Ue(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&s.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?s:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const nae=1e-14;function TS(e){L.call(this,null,e)}TS.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};X(TS,L,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],u=s[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(wn(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=vP(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const u=function(l){let c=Ma(t(l));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(nae+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ri(u,wn(t),e.name||"bin_"+vt(t))}});function cj(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:u=>o.push(u),remove:u=>s[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),l&&u&&i.sort(u),o.length&&(i=u?bL(u,i,o.sort(u)):i.concat(o),o=[]),i)}}function NS(e){L.call(this,[],e)}NS.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};X(NS,L,{transform(e,t){const n=t.fork(t.ALL),r=cj(ie,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(tc(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function fj(e){et.call(this,null,rae,e)}X(fj,et);function rae(e){return this.value&&!e.modified()?this.value:fL(e.fields,e.orders)}function RS(e){L.call(this,null,e)}RS.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function iae(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}X(RS,L,{transform(e,t){const n=f=>d=>{for(var h=iae(a(d),e.case,o)||[],g,p=0,m=h.length;p<m;++p)s.test(g=h[p])||f(g)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Ue({}),u[i]=a,u[o]=l,s.add.push(u)):l===0?(u&&s.rem.push(u),n[a]=null,r[a]=null):u[o]!==l&&(u[o]=l,s.mod.push(u));return s.modifies(t)}});function BS(e){L.call(this,null,e)}BS.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};X(BS,L,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=oae(a,i,o,e.filter||sd)):n.mod=a,n.source=this.value,n.modifies(r)}});function oae(e,t,n,r){for(var i=[],o={},s=e.length,a=0,u,l;a<s;++a)for(o[t]=l=e[a],u=0;u<s;++u)o[n]=e[u],r(o)&&(i.push(Ue(o)),o={},o[t]=l);return i}const R4={kde:cS,mixture:AP,normal:lS,lognormal:wP,uniform:EP},sae="distributions",B4="function",aae="field";function dj(e,t){const n=e[B4];ve(R4,n)||q("Unknown distribution function: "+n);const r=R4[n]();for(const i in e)i===aae?r.data((e.from||t()).map(e[i])):i===sae?r[i](e[i].map(o=>dj(o,t))):typeof r[i]===B4&&r[i](e[i]);return r}function LS(e){L.call(this,null,e)}const hj=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],uae={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:hj},{name:"weights",type:"number",array:!0}]};LS.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:hj.concat(uae)},{name:"as",type:"string",array:!0,default:["value","density"]}]};X(LS,L,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=dj(e.distribution,lae(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&q("Invalid density method: "+s),!e.extent&&!r.data&&q("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],u=e.extent||Oa(r.data()),l=Qv(s,u,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ue(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function lae(e){return()=>e.materialize(e.SOURCE).source}function gj(e,t){return e?e.map((n,r)=>t[r]||vt(n)):null}function PS(e,t,n){const r=[],i=f=>f(u);let o,s,a,u,l,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)u=e[s],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const pj="bin";function jS(e){L.call(this,null,e)}jS.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:pj}]};const cae=(e,t)=>jv(Oa(e,t))/30;X(jS,L,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=PS(t.source,e.groupby,Xr),i=e.smooth||!1,o=e.field,s=e.step||cae(n,o),a=tc((g,p)=>o(g)-o(p)),u=e.as||pj,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const g=r[d].sort(a);h=-1;for(const p of _P(g,s,i,o))p<c&&(c=p),p>f&&(f=p),g[++h][u]=p}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(u)}});function mj(e){et.call(this,null,fae,e),this.modified(!0)}X(mj,et);function fae(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ri(n=>t(n,e),wn(t),vt(t))}function IS(e){L.call(this,[void 0,void 0],e)}IS.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};X(IS,L,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Ma(r(a));u!=null&&(u<o&&(o=u),u>s&&(s=u))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=vt(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function zS(e,t){et.call(this,e),this.parent=t,this.count=0}X(zS,et,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function t2(e){L.call(this,{},e),this._keys=ad();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}X(t2,L,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=ve(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new zS(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=ie(u),c=o.get(l);c!==void 0&&(o.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);o.set(ie(u),l),a(l).add(u)}),s||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=ie(u),c=o.get(l),f=r(u);c===f?a(f).mod(u):(o.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(o.get(ie(u))).mod(u)}),s&&t.visit(t.REFLOW,u=>{const l=ie(u),c=o.get(l),f=r(u);c!==f&&(o.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function yj(e){et.call(this,null,dae,e)}X(yj,et);function dae(e){return this.value&&!e.modified()?this.value:$e(e.name)?be(e.name).map(t=>Da(t)):Da(e.name,e.as)}function US(e){L.call(this,ad(),e)}US.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};X(US,L,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=ie(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{u(f,e)?o.push(f):r.set(ie(f),1)});function c(f){const d=ie(f),h=u(f,e),g=r.get(d);h&&g?(r.delete(d),o.push(f)):!h&&!g?(r.set(d,1),s.push(f)):l&&h&&!g&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function qS(e){L.call(this,[],e)}qS.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};X(qS,L,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=gj(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(g=>g(a)),l=u.reduce((g,p)=>Math.max(g,p.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=nS(a),f=0;f<s;++f)d[i[f]]=(h=u[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function WS(e){L.call(this,[],e)}WS.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};X(WS,L,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(vt),o=e.as||["key","value"],s=o[0],a=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=nS(l),f[s]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function HS(e){L.call(this,null,e)}HS.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};X(HS,L,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function bj(e){L.call(this,[],e)}X(bj,L,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,u;if(o>0){for(s=[];--o>=0;)s.push(u=Ue(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const C1={value:"value",median:pP,mean:ase,min:wA,max:hl},hae=[];function YS(e){L.call(this,[],e)}YS.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function gae(e){var t=e.method||C1.value,n;if(C1[t]==null)q("Unrecognized imputation method: "+t);else return t===C1.value?(n=e.value!==void 0?e.value:0,()=>n):C1[t]}function pae(e){const t=e.field;return n=>n?t(n):NaN}X(YS,L,{transform(e,t){var n=t.fork(t.ALL),r=gae(e),i=pae(e),o=vt(e.field),s=vt(e.key),a=(e.groupby||[]).map(vt),u=mae(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,g,p,m,y,b,x,v,_;for(m=0,x=u.length;m<x;++m)for(d=u[m],g=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(p=u.domain[b],_={_impute:!0},y=0,v=g.length;y<v;++y)_[a[y]]=g[y];_[s]=p,_[o]=Number.isNaN(h)?h=r(d,i):h,l.push(Ue(_))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function mae(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},u={},l,c,f,d,h,g,p,m;for(s.forEach((y,b)=>a[y]=b+1),d=0,p=e.length;d<p;++d)m=e[d],g=n(m),h=a[g]||(a[g]=s.push(g)),c=(l=t?t.map(i):hae)+"",(f=u[c])||(f=u[c]=[],o.push(f),f.values=l),f[h-1]=m;return o.domain=s,o}function GS(e){ja.call(this,e)}GS.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ep},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};X(GS,ja,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{De(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function VS(e){L.call(this,null,e)}VS.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};X(VS,L,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=PS(r,e.groupby,e.field),o=(e.groupby||[]).map(vt),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&q("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Oa(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const g=cS(h,s)[a],p=e.counts?h.length:1,m=c||Oa(h);Qv(g,m,f,d).forEach(y=>{const b={};for(let x=0;x<o.length;++x)b[o[x]]=h.dims[x];b[u[0]]=y[0],b[u[1]]=y[1]*p,l.push(Ue(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function vj(e){et.call(this,null,yae,e)}X(vj,et);function yae(e){return this.value&&!e.modified()?this.value:mL(e.fields,e.flat)}function xj(e){L.call(this,[],e),this._pending=null}X(xj,L,{transform(e,t){const n=t.dataflow;return this._pending?c$(this,t,this._pending):bae(e)?t.StopPropagation:e.values?c$(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=be(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>c$(this,t,be(r.data)))}});function bae(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function c$(e,t,n){n.forEach(Ue);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function XS(e){L.call(this,{},e)}XS.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};X(XS,L,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let u=s?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&q('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&q('The "as" parameter has too few output field names.'),c=c||i.map(vt),f=function(g){for(var p=0,m=0,y,b;p<a;++p)if(b=r.get(n[p](g)),b==null)for(y=0;y<d;++y,++m)g[c[m]]=o;else for(y=0;y<d;++y,++m)g[c[m]]=i[y](b)}):(c||q("Missing output field names."),f=function(g){for(var p=0,m;p<a;++p)m=r.get(n[p](g)),g[c[p]]=m??o}),s?l=t.reflow(!0):(h=n.some(g=>t.modified(g.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function _j(e){et.call(this,null,vae,e)}X(_j,et);function vae(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function $j(e){et.call(this,null,xae,e)}X($j,et);function xae(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function wj(e){L.call(this,null,e)}X(wj,L,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function KS(e){ja.call(this,e)}KS.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ep,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};X(KS,ja,{_transform:ja.prototype.transform,transform(e,t){return this._transform(_ae(e,t),t)}});function _ae(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=wn(n).concat(wn(r)),s=wae(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>$ae(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function $ae(e,t,n,r){return ri(i=>t(i)===e?n(i):NaN,r,e+"")}function wae(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(Lv),t?i.slice(0,t):i}function Aj(e){t2.call(this,e)}X(Aj,t2,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(ie(o),n,t,o);return(e.modified("field")||r&&t.modified(wn(r)))&&q("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(Ue(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function ZS(e){L.call(this,null,e)}ZS.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};X(ZS,L,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=gj(e.fields,e.as||[]),o=r?(a,u)=>Aae(a,u,r,i):Yv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const u=ie(a);n.rem.push(s[u]),s[u]=null}),t.visit(t.ADD,a=>{const u=o(a,Ue({}));s[ie(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[ie(a)]))}),n}});function Aae(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function Ej(e){L.call(this,null,e)}X(Ej,L,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function JS(e){L.call(this,null,e)}JS.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Eae=1e-14;X(JS,L,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=PS(i,e.groupby,e.field),s=(e.groupby||[]).map(vt),a=[],u=e.step||.01,l=e.probs||Fr(u/2,1-Eae,u),c=l.length;return o.forEach(f=>{const d=oS(f,l);for(let h=0;h<c;++h){const g={};for(let p=0;p<s.length;++p)g[s[p]]=f.dims[p];g[r[0]]=l[h],g[r[1]]=d[h],a.push(Ue(g))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function Cj(e){L.call(this,null,e)}X(Cj,L,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=ie(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=nS(i);r[ie(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[ie(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function QS(e){L.call(this,[],e),this.count=0}QS.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};X(QS,L,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[ie(f)]=1,c),{});let s=this.value,a=this.count,u=0;function l(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*ki()),d<s.length&&d>=u&&(f=s[d],o[ie(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=ie(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[ie(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(u=a=s.length,t.visit(t.SOURCE,c=>{o[ie(c)]||l(c)}),u=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[ie(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[ie(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=s.filter(c=>!o[ie(c)])),this.count=a,this.value=n.source=s,n}});function eF(e){L.call(this,null,e)}eF.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};X(eF,L,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Fr(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,Ue(o)}),n.add=t.add.concat(this.value),n}});function Sj(e){L.call(this,null,e),this.modified(!0)}X(Sj,L,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function tF(e){L.call(this,null,e)}const Fj=["unit0","unit1"];tF.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:kS,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Fj}]};X(tF,L,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?pd:gd)(o.unit).offset,a=e.as||Fj,u=a[0],l=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(wn(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,g=>{const p=n(g);let m,y;p==null?(g[u]=null,r&&(g[l]=null)):(g[u]=m=y=o(p),r&&(g[l]=y=s(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:oj({extent:e.extent||Oa(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=DS(r),s=this.value||{},a=(n?KP:XP)(o,i);return a.unit=Ze(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function kj(e){L.call(this,ad(),e)}X(kj,L,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Dj(e){L.call(this,null,e)}X(Dj,L,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(tc(e.sort)):t.source).map(e.field))}});function Cae(e,t,n,r){const i=U0[e](t,n);return{init:i.init||ia,update:function(o,s){s[r]=i.next(o)}}}const U0={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=U0.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||q("ntile num must be greater than zero.");const n=U0.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||q("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Sae(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Sae(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Fae=Object.keys(U0);function Mj(e){const t=be(e.ops),n=be(e.fields),r=be(e.params),i=be(e.as),o=this.outputs=[],s=this.windows=[],a={},u={},l=[],c=[];let f=!0;function d(h){be(wn(h)).forEach(g=>a[g]=1)}d(e.sort),t.forEach((h,g)=>{const p=n[g],m=vt(p),y=sj(h,m,i[g]);if(d(p),o.push(y),ve(U0,h))s.push(Cae(h,n[g],r[g],y));else{if(p==null&&h!=="count"&&q("Null aggregate field specified."),h==="count"){l.push(y);return}f=!1;let b=u[m];b||(b=u[m]=[],b.field=p,c.push(b)),b.push(aj(h,y))}}),(l.length||c.length)&&(this.cell=kae(c,l,f)),this.inputs=Object.keys(a)}const Oj=Mj.prototype;Oj.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Oj.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function kae(e,t,n){e=e.map(u=>lj(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new OS;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)o[l].add(o[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)o[l].rem(o[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=o.length;l<c;++l)o[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)o[u].init()},r}function nF(e){L.call(this,{},e),this._mlen=0,this._mods=[]}nF.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Fae.concat(ep)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};X(nF,L,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=tc(e.sort),i=DA(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new Mj(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Dae(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=cj(ie),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Dae(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),u=a.length,l=o?Kg(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Kr(-1)};t.init();for(let f=0;f<u;++f)Mae(c,s,f,u),o&&Oae(c,l),t.update(c,a[f])}function Mae(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Oae(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const Tae=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ja,bin:TS,collect:NS,compare:fj,countpattern:RS,cross:BS,density:LS,dotbin:jS,expression:mj,extent:IS,facet:t2,field:yj,filter:US,flatten:qS,fold:WS,formula:HS,generate:bj,impute:YS,joinaggregate:GS,kde:VS,key:vj,load:xj,lookup:XS,multiextent:_j,multivalues:$j,params:wj,pivot:KS,prefacet:Aj,project:ZS,proxy:Ej,quantile:JS,relay:Cj,sample:QS,sequence:eF,sieve:Sj,subflow:zS,timeunit:tF,tupleindex:kj,values:Dj,window:nF},Symbol.toStringTag,{value:"Module"}));function md(e,t,n){return e.fields=t||[],e.fname=n,e}function Nae(e){return e.length===1?Rae(e[0]):Bae(e)}const Rae=e=>function(t){return t[e]},Bae=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function vs(e){throw Error(e)}function Lae(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||vs("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&vs("Access path missing closing bracket: "+e),r&&vs("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function Pae(e,t,n){const r=Lae(e);return e=r.length===1?r[0]:e,md((n&&n.get||Nae)(r),[e],t||e)}Pae("id");md(e=>e,[],"identity");md(()=>0,[],"zero");md(()=>1,[],"one");const Tj=md(()=>!0,[],"true");md(()=>!1,[],"false");var Co=Array.isArray;function rF(e){return e===Object(e)}function oo(e){return e[e.length-1]}function jae(e){return e==null||e===""?null:+e}function iF(e){return e!=null?Co(e)?e:[e]:[]}function n2(e){return typeof e=="function"}function r2(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}const Iae=Object.prototype.hasOwnProperty;function is(e,t){return Iae.call(e,t)}function ii(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),r2(r,n)}function vy(e){return typeof e=="string"}const zae=1e4;function Uae(e){e=+e||zae;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>is(t,s)||is(n,s),get:s=>is(t,s)?t[s]:is(n,s)?o(s,n[s]):void 0,set:(s,a)=>is(t,s)?t[s]=a:o(s,a)}}function Nj(e){return Co(e)?"["+e.map(Nj)+"]":rF(e)||vy(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Rj(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function We(e){return function(){return e}}const L4=Math.abs,cn=Math.atan2,ku=Math.cos,qae=Math.max,f$=Math.min,Wi=Math.sin,rl=Math.sqrt,dn=1e-12,xf=Math.PI,xy=xf/2,Bj=2*xf;function Wae(e){return e>1?0:e<-1?xf:Math.acos(e)}function P4(e){return e>=1?xy:e<=-1?-xy:Math.asin(e)}const MA=Math.PI,OA=2*MA,Wu=1e-6,Hae=OA-Wu;function Lj(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Yae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Lj;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let oF=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Lj:Yae(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=r-t,l=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Wu)if(!(Math.abs(f*u-l*c)>Wu)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,g=i-a,p=u*u+l*l,m=h*h+g*g,y=Math.sqrt(p),b=Math.sqrt(d),x=o*Math.tan((MA-Math.acos((p+d-m)/(2*y*b)))/2),v=x/b,_=x/y;Math.abs(v-1)>Wu&&this._append`L${t+v*c},${n+v*f}`,this._append`A${o},${o},0,0,${+(f*h>c*g)},${this._x1=t+_*u},${this._y1=n+_*l}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Wu||Math.abs(this._y1-c)>Wu)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%OA+OA),d>Hae?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Wu&&this._append`A${r},${r},0,${+(d>=MA)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function sF(){return new oF}sF.prototype=oF.prototype;function i2(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new oF(t)}function Gae(e){return e.innerRadius}function Vae(e){return e.outerRadius}function Xae(e){return e.startAngle}function Kae(e){return e.endAngle}function Zae(e){return e&&e.padAngle}function Jae(e,t,n,r,i,o,s,a){var u=n-e,l=r-t,c=s-i,f=a-o,d=f*u-c*l;if(!(d*d<dn))return d=(c*(t-o)-f*(e-i))/d,[e+d*u,t+d*l]}function S1(e,t,n,r,i,o,s){var a=e-n,u=t-r,l=(s?o:-o)/rl(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,g=n+c,p=r+f,m=(d+g)/2,y=(h+p)/2,b=g-d,x=p-h,v=b*b+x*x,_=i-o,w=d*p-g*h,$=(x<0?-1:1)*rl(qae(0,_*_*v-w*w)),A=(w*x-b*$)/v,M=(-w*b-x*$)/v,k=(w*x+b*$)/v,C=(-w*b+x*$)/v,N=A-m,E=M-y,D=k-m,F=C-y;return N*N+E*E>D*D+F*F&&(A=k,M=C),{cx:A,cy:M,x01:-c,y01:-f,x11:A*(i/_-1),y11:M*(i/_-1)}}function Qae(){var e=Gae,t=Vae,n=We(0),r=null,i=Xae,o=Kae,s=Zae,a=null,u=i2(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),g=i.apply(this,arguments)-xy,p=o.apply(this,arguments)-xy,m=L4(p-g),y=p>g;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>dn))a.moveTo(0,0);else if(m>Bj-dn)a.moveTo(h*ku(g),h*Wi(g)),a.arc(0,0,h,g,p,!y),d>dn&&(a.moveTo(d*ku(p),d*Wi(p)),a.arc(0,0,d,p,g,y));else{var b=g,x=p,v=g,_=p,w=m,$=m,A=s.apply(this,arguments)/2,M=A>dn&&(r?+r.apply(this,arguments):rl(d*d+h*h)),k=f$(L4(h-d)/2,+n.apply(this,arguments)),C=k,N=k,E,D;if(M>dn){var F=P4(M/d*Wi(A)),O=P4(M/h*Wi(A));(w-=F*2)>dn?(F*=y?1:-1,v+=F,_-=F):(w=0,v=_=(g+p)/2),($-=O*2)>dn?(O*=y?1:-1,b+=O,x-=O):($=0,b=x=(g+p)/2)}var R=h*ku(b),B=h*Wi(b),P=d*ku(_),Z=d*Wi(_);if(k>dn){var Q=h*ku(x),fe=h*Wi(x),we=d*ku(v),de=d*Wi(v),Me;if(m<xf)if(Me=Jae(R,B,we,de,Q,fe,P,Z)){var wt=R-Me[0],On=B-Me[1],ln=Q-Me[0],T=fe-Me[1],U=1/Wi(Wae((wt*ln+On*T)/(rl(wt*wt+On*On)*rl(ln*ln+T*T)))/2),W=rl(Me[0]*Me[0]+Me[1]*Me[1]);C=f$(k,(d-W)/(U-1)),N=f$(k,(h-W)/(U+1))}else C=N=0}$>dn?N>dn?(E=S1(we,de,R,B,h,N,y),D=S1(Q,fe,P,Z,h,N,y),a.moveTo(E.cx+E.x01,E.cy+E.y01),N<k?a.arc(E.cx,E.cy,N,cn(E.y01,E.x01),cn(D.y01,D.x01),!y):(a.arc(E.cx,E.cy,N,cn(E.y01,E.x01),cn(E.y11,E.x11),!y),a.arc(0,0,h,cn(E.cy+E.y11,E.cx+E.x11),cn(D.cy+D.y11,D.cx+D.x11),!y),a.arc(D.cx,D.cy,N,cn(D.y11,D.x11),cn(D.y01,D.x01),!y))):(a.moveTo(R,B),a.arc(0,0,h,b,x,!y)):a.moveTo(R,B),!(d>dn)||!(w>dn)?a.lineTo(P,Z):C>dn?(E=S1(P,Z,Q,fe,d,-C,y),D=S1(R,B,we,de,d,-C,y),a.lineTo(E.cx+E.x01,E.cy+E.y01),C<k?a.arc(E.cx,E.cy,C,cn(E.y01,E.x01),cn(D.y01,D.x01),!y):(a.arc(E.cx,E.cy,C,cn(E.y01,E.x01),cn(E.y11,E.x11),!y),a.arc(0,0,d,cn(E.cy+E.y11,E.cx+E.x11),cn(D.cy+D.y11,D.cx+D.x11),y),a.arc(D.cx,D.cy,C,cn(D.y11,D.x11),cn(D.y01,D.x01),!y))):a.arc(0,0,d,_,v,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-xf/2;return[ku(f)*c,Wi(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:We(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:We(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:We(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:We(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:We(+c),l):i},l.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:We(+c),l):o},l.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:We(+c),l):s},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function Pj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jj(e){this._context=e}jj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function aF(e){return new jj(e)}function Ij(e){return e[0]}function zj(e){return e[1]}function Uj(e,t){var n=We(!0),r=null,i=aF,o=null,s=i2(a);e=typeof e=="function"?e:e===void 0?Ij:We(e),t=typeof t=="function"?t:t===void 0?zj:We(t);function a(u){var l,c=(u=Pj(u)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,u),+t(f,l,u));if(h)return o=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:We(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:We(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:We(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),a):r},a}function qj(e,t,n){var r=null,i=We(!0),o=null,s=aF,a=null,u=i2(l);e=typeof e=="function"?e:e===void 0?Ij:We(+e),t=typeof t=="function"?t:We(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?zj:We(+n);function l(f){var d,h,g,p=(f=Pj(f)).length,m,y=!1,b,x=new Array(p),v=new Array(p);for(o==null&&(a=s(b=u())),d=0;d<=p;++d){if(!(d<p&&i(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=d-1;g>=h;--g)a.point(x[g],v[g]);a.lineEnd(),a.areaEnd()}y&&(x[d]=+e(m,d,f),v[d]=+t(m,d,f),a.point(r?+r(m,d,f):x[d],n?+n(m,d,f):v[d]))}if(b)return a=null,b+""||null}function c(){return Uj().defined(i).curve(s).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:We(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:We(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:We(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:We(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:We(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:We(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:We(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),l):s},l.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),l):o},l}const eue={draw(e,t){const n=rl(t/xf);e.moveTo(n,0),e.arc(0,0,n,0,Bj)}};function tue(e,t){let n=null,r=i2(i);e=typeof e=="function"?e:We(e||eue),t=typeof t=="function"?t:We(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:We(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:We(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Ia(){}function _y(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function o2(e){this._context=e}o2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_y(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_y(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nue(e){return new o2(e)}function Wj(e){this._context=e}Wj.prototype={areaStart:Ia,areaEnd:Ia,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:_y(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rue(e){return new Wj(e)}function Hj(e){this._context=e}Hj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:_y(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iue(e){return new Hj(e)}function Yj(e,t){this._basis=new o2(e),this._beta=t}Yj.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*o),this._beta*t[a]+(1-this._beta)*(i+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const oue=function e(t){function n(r){return t===1?new o2(r):new Yj(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function $y(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function uF(e,t){this._context=e,this._k=(1-t)/6}uF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$y(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:$y(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const sue=function e(t){function n(r){return new uF(r,t)}return n.tension=function(r){return e(+r)},n}(0);function lF(e,t){this._context=e,this._k=(1-t)/6}lF.prototype={areaStart:Ia,areaEnd:Ia,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:$y(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const aue=function e(t){function n(r){return new lF(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cF(e,t){this._context=e,this._k=(1-t)/6}cF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$y(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const uue=function e(t){function n(r){return new cF(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fF(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>dn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>dn){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function Gj(e,t){this._context=e,this._alpha=t}Gj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:fF(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lue=function e(t){function n(r){return t?new Gj(r,t):new uF(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Vj(e,t){this._context=e,this._alpha=t}Vj.prototype={areaStart:Ia,areaEnd:Ia,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:fF(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cue=function e(t){function n(r){return t?new Vj(r,t):new lF(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Xj(e,t){this._context=e,this._alpha=t}Xj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fF(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fue=function e(t){function n(r){return t?new Xj(r,t):new cF(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Kj(e){this._context=e}Kj.prototype={areaStart:Ia,areaEnd:Ia,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function due(e){return new Kj(e)}function j4(e){return e<0?-1:1}function I4(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(j4(o)+j4(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function z4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function d$(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function wy(e){this._context=e}wy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:d$(this,this._t0,z4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,d$(this,z4(this,n=I4(this,e,t)),n);break;default:d$(this,this._t0,n=I4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Zj(e){this._context=new Jj(e)}(Zj.prototype=Object.create(wy.prototype)).point=function(e,t){wy.prototype.point.call(this,t,e)};function Jj(e){this._context=e}Jj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function hue(e){return new wy(e)}function gue(e){return new Zj(e)}function Qj(e){this._context=e}Qj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=U4(e),i=U4(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function U4(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function pue(e){return new Qj(e)}function s2(e,t){this._context=e,this._t=t}s2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function mue(e){return new s2(e,.5)}function yue(e){return new s2(e,0)}function bue(e){return new s2(e,1)}function Ts(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const eI=()=>typeof Image<"u"?Image:null;function e0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vue(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dF(e){let t,n,r;e.length!==2?(t=e0,n=(a,u)=>e0(e(a),u),r=(a,u)=>e(a)-u):(t=e===e0||e===vue?e:xue,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function xue(){return 0}function tI(e){return e===null?NaN:+e}const _ue=dF(e0),TA=_ue.right;dF(tI).center;const tp=TA,$ue=Math.sqrt(50),wue=Math.sqrt(10),Aue=Math.sqrt(2);function Ay(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=$ue?10:o>=wue?5:o>=Aue?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?Ay(e,t,n*2):[a,u,l]}function NA(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?Ay(t,e,n):Ay(e,t,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)u[l]=(o-l)/-s;else for(let l=0;l<a;++l)u[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)u[l]=(i+l)/-s;else for(let l=0;l<a;++l)u[l]=(i+l)*s;return u}function RA(e,t,n){return t=+t,e=+e,n=+n,Ay(e,t,n)[2]}function Ey(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?RA(t,e,n):RA(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Eue(e,t,n=tI){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function Cue(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Sue(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Cy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function _f(e){return e=Cy(Math.abs(e)),e?e[1]:NaN}function Fue(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function kue(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Due=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sl(e){if(!(t=Due.exec(e)))throw new Error("invalid format: "+e);var t;return new hF({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sl.prototype=hF.prototype;function hF(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Mue(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var nI;function Oue(e,t){var n=Cy(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(nI=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Cy(e,Math.max(0,t+o-1))[0]}function q4(e,t){var n=Cy(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const W4={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Sue,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>q4(e*100,t),r:q4,s:Oue,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function H4(e){return e}var Y4=Array.prototype.map,G4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Tue(e){var t=e.grouping===void 0||e.thousands===void 0?H4:Fue(Y4.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?H4:kue(Y4.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Sl(f);var d=f.fill,h=f.align,g=f.sign,p=f.symbol,m=f.zero,y=f.width,b=f.comma,x=f.precision,v=f.trim,_=f.type;_==="n"?(b=!0,_="g"):W4[_]||(x===void 0&&(x=12),v=!0,_="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var w=p==="$"?n:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",$=p==="$"?r:/[%p]/.test(_)?s:"",A=W4[_],M=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function k(C){var N=w,E=$,D,F,O;if(_==="c")E=A(C)+E,C="";else{C=+C;var R=C<0||1/C<0;if(C=isNaN(C)?u:A(Math.abs(C),x),v&&(C=Mue(C)),R&&+C==0&&g!=="+"&&(R=!1),N=(R?g==="("?g:a:g==="-"||g==="("?"":g)+N,E=(_==="s"?G4[8+nI/3]:"")+E+(R&&g==="("?")":""),M){for(D=-1,F=C.length;++D<F;)if(O=C.charCodeAt(D),48>O||O>57){E=(O===46?i+C.slice(D+1):C.slice(D))+E,C=C.slice(0,D);break}}}b&&!m&&(C=t(C,1/0));var B=N.length+C.length+E.length,P=B<y?new Array(y-B+1).join(d):"";switch(b&&m&&(C=t(P+C,P.length?y-E.length:1/0),P=""),h){case"<":C=N+C+E+P;break;case"=":C=N+P+C+E;break;case"^":C=P.slice(0,B=P.length>>1)+N+C+E+P.slice(B);break;default:C=P+N+C+E;break}return o(C)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=Sl(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(_f(d)/3)))*3,p=Math.pow(10,-g),m=G4[8+g/3];return function(y){return h(p*y)+m}}return{format:l,formatPrefix:c}}var F1,a2,gF;Nue({thousands:",",grouping:[3],currency:["$",""]});function Nue(e){return F1=Tue(e),a2=F1.format,gF=F1.formatPrefix,F1}function rI(e){return Math.max(0,-_f(Math.abs(e)))}function iI(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_f(t)/3)))*3-_f(Math.abs(e)))}function oI(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_f(t)-_f(e))+1}const h$=new Date,g$=new Date;function Rt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let l;do u.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return u},i.filter=o=>Rt(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(h$.setTime(+o),g$.setTime(+s),e(h$),e(g$),Math.floor(n(h$,g$))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const $f=Rt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);$f.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Rt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):$f);$f.range;const us=1e3,Ur=us*60,ls=Ur*60,Cs=ls*24,pF=Cs*7,V4=Cs*30,p$=Cs*365,cs=Rt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*us)},(e,t)=>(t-e)/us,e=>e.getUTCSeconds());cs.range;const u2=Rt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*us)},(e,t)=>{e.setTime(+e+t*Ur)},(e,t)=>(t-e)/Ur,e=>e.getMinutes());u2.range;const l2=Rt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ur)},(e,t)=>(t-e)/Ur,e=>e.getUTCMinutes());l2.range;const c2=Rt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*us-e.getMinutes()*Ur)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getHours());c2.range;const f2=Rt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getUTCHours());f2.range;const Ea=Rt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ur)/Cs,e=>e.getDate()-1);Ea.range;const gl=Rt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cs,e=>e.getUTCDate()-1);gl.range;const sI=Rt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cs,e=>Math.floor(e/Cs));sI.range;function oc(e){return Rt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ur)/pF)}const np=oc(0),Sy=oc(1),Rue=oc(2),Bue=oc(3),wf=oc(4),Lue=oc(5),Pue=oc(6);np.range;Sy.range;Rue.range;Bue.range;wf.range;Lue.range;Pue.range;function sc(e){return Rt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/pF)}const rp=sc(0),Fy=sc(1),jue=sc(2),Iue=sc(3),Af=sc(4),zue=sc(5),Uue=sc(6);rp.range;Fy.range;jue.range;Iue.range;Af.range;zue.range;Uue.range;const q0=Rt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());q0.range;const W0=Rt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());W0.range;const mo=Rt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());mo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});mo.range;const yo=Rt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});yo.range;function aI(e,t,n,r,i,o){const s=[[cs,1,us],[cs,5,5*us],[cs,15,15*us],[cs,30,30*us],[o,1,Ur],[o,5,5*Ur],[o,15,15*Ur],[o,30,30*Ur],[i,1,ls],[i,3,3*ls],[i,6,6*ls],[i,12,12*ls],[r,1,Cs],[r,2,2*Cs],[n,1,pF],[t,1,V4],[t,3,3*V4],[e,1,p$]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),g=h?h.range(l,+c+1):[];return d?g.reverse():g}function u(l,c,f){const d=Math.abs(c-l)/f,h=dF(([,,m])=>m).right(s,d);if(h===s.length)return e.every(Ey(l/p$,c/p$,f));if(h===0)return $f.every(Math.max(Ey(l,c,f),1));const[g,p]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return g.every(p)}return[a,u]}const[que,Wue]=aI(yo,W0,rp,sI,f2,l2),[Hue,Yue]=aI(mo,q0,np,Ea,c2,u2),H0="year",Y0="quarter",G0="month",V0="week",X0="date",d2="day",mF="dayofyear",K0="hours",Z0="minutes",J0="seconds",h2="milliseconds",Gue=[H0,Y0,G0,V0,X0,d2,mF,K0,Z0,J0,h2];Gue.reduce((e,t,n)=>(e[t]=1+n,e),{});const Vue={[H0]:mo,[Y0]:q0.every(3),[G0]:q0,[V0]:np,[X0]:Ea,[d2]:Ea,[mF]:Ea,[K0]:c2,[Z0]:u2,[J0]:cs,[h2]:$f},Xue={[H0]:yo,[Y0]:W0.every(3),[G0]:W0,[V0]:rp,[X0]:gl,[d2]:gl,[mF]:gl,[K0]:f2,[Z0]:l2,[J0]:cs,[h2]:$f};function Kue(e){return Vue[e]}function Zue(e){return Xue[e]}function m$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function y$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function th(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Jue(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,u=e.shortMonths,l=nh(i),c=rh(i),f=nh(o),d=rh(o),h=nh(s),g=rh(s),p=nh(a),m=rh(a),y=nh(u),b=rh(u),x={a:R,A:B,b:P,B:Z,c:null,d:e8,e:e8,f:_le,g:Mle,G:Tle,H:ble,I:vle,j:xle,L:uI,m:$le,M:wle,p:Q,q:fe,Q:r8,s:i8,S:Ale,u:Ele,U:Cle,V:Sle,w:Fle,W:kle,x:null,X:null,y:Dle,Y:Ole,Z:Nle,"%":n8},v={a:we,A:de,b:Me,B:wt,c:null,d:t8,e:t8,f:Ple,g:Vle,G:Kle,H:Rle,I:Ble,j:Lle,L:cI,m:jle,M:Ile,p:On,q:ln,Q:r8,s:i8,S:zle,u:Ule,U:qle,V:Wle,w:Hle,W:Yle,x:null,X:null,y:Gle,Y:Xle,Z:Zle,"%":n8},_={a:k,A:C,b:N,B:E,c:D,d:J4,e:J4,f:gle,g:Z4,G:K4,H:Q4,I:Q4,j:cle,L:hle,m:lle,M:fle,p:M,q:ule,Q:mle,s:yle,S:dle,u:rle,U:ile,V:ole,w:nle,W:sle,x:F,X:O,y:Z4,Y:K4,Z:ale,"%":ple};x.x=w(n,x),x.X=w(r,x),x.c=w(t,x),v.x=w(n,v),v.X=w(r,v),v.c=w(t,v);function w(T,U){return function(W){var S=[],ye=-1,K=0,xe=T.length,_e,dt,Ys;for(W instanceof Date||(W=new Date(+W));++ye<xe;)T.charCodeAt(ye)===37&&(S.push(T.slice(K,ye)),(dt=X4[_e=T.charAt(++ye)])!=null?_e=T.charAt(++ye):dt=_e==="e"?" ":"0",(Ys=U[_e])&&(_e=Ys(W,dt)),S.push(_e),K=ye+1);return S.push(T.slice(K,ye)),S.join("")}}function $(T,U){return function(W){var S=th(1900,void 0,1),ye=A(S,T,W+="",0),K,xe;if(ye!=W.length)return null;if("Q"in S)return new Date(S.Q);if("s"in S)return new Date(S.s*1e3+("L"in S?S.L:0));if(U&&!("Z"in S)&&(S.Z=0),"p"in S&&(S.H=S.H%12+S.p*12),S.m===void 0&&(S.m="q"in S?S.q:0),"V"in S){if(S.V<1||S.V>53)return null;"w"in S||(S.w=1),"Z"in S?(K=y$(th(S.y,0,1)),xe=K.getUTCDay(),K=xe>4||xe===0?Fy.ceil(K):Fy(K),K=gl.offset(K,(S.V-1)*7),S.y=K.getUTCFullYear(),S.m=K.getUTCMonth(),S.d=K.getUTCDate()+(S.w+6)%7):(K=m$(th(S.y,0,1)),xe=K.getDay(),K=xe>4||xe===0?Sy.ceil(K):Sy(K),K=Ea.offset(K,(S.V-1)*7),S.y=K.getFullYear(),S.m=K.getMonth(),S.d=K.getDate()+(S.w+6)%7)}else("W"in S||"U"in S)&&("w"in S||(S.w="u"in S?S.u%7:"W"in S?1:0),xe="Z"in S?y$(th(S.y,0,1)).getUTCDay():m$(th(S.y,0,1)).getDay(),S.m=0,S.d="W"in S?(S.w+6)%7+S.W*7-(xe+5)%7:S.w+S.U*7-(xe+6)%7);return"Z"in S?(S.H+=S.Z/100|0,S.M+=S.Z%100,y$(S)):m$(S)}}function A(T,U,W,S){for(var ye=0,K=U.length,xe=W.length,_e,dt;ye<K;){if(S>=xe)return-1;if(_e=U.charCodeAt(ye++),_e===37){if(_e=U.charAt(ye++),dt=_[_e in X4?U.charAt(ye++):_e],!dt||(S=dt(T,W,S))<0)return-1}else if(_e!=W.charCodeAt(S++))return-1}return S}function M(T,U,W){var S=l.exec(U.slice(W));return S?(T.p=c.get(S[0].toLowerCase()),W+S[0].length):-1}function k(T,U,W){var S=h.exec(U.slice(W));return S?(T.w=g.get(S[0].toLowerCase()),W+S[0].length):-1}function C(T,U,W){var S=f.exec(U.slice(W));return S?(T.w=d.get(S[0].toLowerCase()),W+S[0].length):-1}function N(T,U,W){var S=y.exec(U.slice(W));return S?(T.m=b.get(S[0].toLowerCase()),W+S[0].length):-1}function E(T,U,W){var S=p.exec(U.slice(W));return S?(T.m=m.get(S[0].toLowerCase()),W+S[0].length):-1}function D(T,U,W){return A(T,t,U,W)}function F(T,U,W){return A(T,n,U,W)}function O(T,U,W){return A(T,r,U,W)}function R(T){return s[T.getDay()]}function B(T){return o[T.getDay()]}function P(T){return u[T.getMonth()]}function Z(T){return a[T.getMonth()]}function Q(T){return i[+(T.getHours()>=12)]}function fe(T){return 1+~~(T.getMonth()/3)}function we(T){return s[T.getUTCDay()]}function de(T){return o[T.getUTCDay()]}function Me(T){return u[T.getUTCMonth()]}function wt(T){return a[T.getUTCMonth()]}function On(T){return i[+(T.getUTCHours()>=12)]}function ln(T){return 1+~~(T.getUTCMonth()/3)}return{format:function(T){var U=w(T+="",x);return U.toString=function(){return T},U},parse:function(T){var U=$(T+="",!1);return U.toString=function(){return T},U},utcFormat:function(T){var U=w(T+="",v);return U.toString=function(){return T},U},utcParse:function(T){var U=$(T+="",!0);return U.toString=function(){return T},U}}}var X4={"-":"",_:" ",0:"0"},Kt=/^\s*\d+/,Que=/^%/,ele=/[\\^$*+?|[\]().{}]/g;function je(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function tle(e){return e.replace(ele,"\\$&")}function nh(e){return new RegExp("^(?:"+e.map(tle).join("|")+")","i")}function rh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function nle(e,t,n){var r=Kt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function rle(e,t,n){var r=Kt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ile(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ole(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function sle(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function K4(e,t,n){var r=Kt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Z4(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ale(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ule(e,t,n){var r=Kt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function lle(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function J4(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function cle(e,t,n){var r=Kt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Q4(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function fle(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function dle(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function hle(e,t,n){var r=Kt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function gle(e,t,n){var r=Kt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ple(e,t,n){var r=Que.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function mle(e,t,n){var r=Kt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function yle(e,t,n){var r=Kt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function e8(e,t){return je(e.getDate(),t,2)}function ble(e,t){return je(e.getHours(),t,2)}function vle(e,t){return je(e.getHours()%12||12,t,2)}function xle(e,t){return je(1+Ea.count(mo(e),e),t,3)}function uI(e,t){return je(e.getMilliseconds(),t,3)}function _le(e,t){return uI(e,t)+"000"}function $le(e,t){return je(e.getMonth()+1,t,2)}function wle(e,t){return je(e.getMinutes(),t,2)}function Ale(e,t){return je(e.getSeconds(),t,2)}function Ele(e){var t=e.getDay();return t===0?7:t}function Cle(e,t){return je(np.count(mo(e)-1,e),t,2)}function lI(e){var t=e.getDay();return t>=4||t===0?wf(e):wf.ceil(e)}function Sle(e,t){return e=lI(e),je(wf.count(mo(e),e)+(mo(e).getDay()===4),t,2)}function Fle(e){return e.getDay()}function kle(e,t){return je(Sy.count(mo(e)-1,e),t,2)}function Dle(e,t){return je(e.getFullYear()%100,t,2)}function Mle(e,t){return e=lI(e),je(e.getFullYear()%100,t,2)}function Ole(e,t){return je(e.getFullYear()%1e4,t,4)}function Tle(e,t){var n=e.getDay();return e=n>=4||n===0?wf(e):wf.ceil(e),je(e.getFullYear()%1e4,t,4)}function Nle(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+je(t/60|0,"0",2)+je(t%60,"0",2)}function t8(e,t){return je(e.getUTCDate(),t,2)}function Rle(e,t){return je(e.getUTCHours(),t,2)}function Ble(e,t){return je(e.getUTCHours()%12||12,t,2)}function Lle(e,t){return je(1+gl.count(yo(e),e),t,3)}function cI(e,t){return je(e.getUTCMilliseconds(),t,3)}function Ple(e,t){return cI(e,t)+"000"}function jle(e,t){return je(e.getUTCMonth()+1,t,2)}function Ile(e,t){return je(e.getUTCMinutes(),t,2)}function zle(e,t){return je(e.getUTCSeconds(),t,2)}function Ule(e){var t=e.getUTCDay();return t===0?7:t}function qle(e,t){return je(rp.count(yo(e)-1,e),t,2)}function fI(e){var t=e.getUTCDay();return t>=4||t===0?Af(e):Af.ceil(e)}function Wle(e,t){return e=fI(e),je(Af.count(yo(e),e)+(yo(e).getUTCDay()===4),t,2)}function Hle(e){return e.getUTCDay()}function Yle(e,t){return je(Fy.count(yo(e)-1,e),t,2)}function Gle(e,t){return je(e.getUTCFullYear()%100,t,2)}function Vle(e,t){return e=fI(e),je(e.getUTCFullYear()%100,t,2)}function Xle(e,t){return je(e.getUTCFullYear()%1e4,t,4)}function Kle(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Af(e):Af.ceil(e),je(e.getUTCFullYear()%1e4,t,4)}function Zle(){return"+0000"}function n8(){return"%"}function r8(e){return+e}function i8(e){return Math.floor(+e/1e3)}var Rc,yF,dI,bF,hI;Jle({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Jle(e){return Rc=Jue(e),yF=Rc.format,dI=Rc.parse,bF=Rc.utcFormat,hI=Rc.utcParse,Rc}function Rh(e){const t={};return n=>t[n]||(t[n]=e(n))}function Qle(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=ece(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function ece(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function tce(e){const t=Rh(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Sl(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Qle(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=Sl(s??",f");const a=Ey(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(s.precision==null)switch(s.type){case"s":return isNaN(l=iI(a,u))||(s.precision=l),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=oI(a,u))||(s.precision=l-(s.type==="e"));break}case"f":case"%":{isNaN(l=rI(a))||(s.precision=l-(s.type==="%")*2);break}}return t(s)}}}nce();function nce(){return tce({format:a2,formatPrefix:gF})}function o8(e,t,n){n=n||{},rF(n)||vs(`Invalid time multi-format specifier: ${n}`);const r=t(J0),i=t(Z0),o=t(K0),s=t(X0),a=t(V0),u=t(G0),l=t(Y0),c=t(H0),f=e(n[h2]||".%L"),d=e(n[J0]||":%S"),h=e(n[Z0]||"%I:%M"),g=e(n[K0]||"%I %p"),p=e(n[X0]||n[d2]||"%a %d"),m=e(n[V0]||"%b %d"),y=e(n[G0]||"%B"),b=e(n[Y0]||"%B"),x=e(n[H0]||"%Y");return v=>(r(v)<v?f:i(v)<v?d:o(v)<v?h:s(v)<v?g:u(v)<v?a(v)<v?p:m:c(v)<v?l(v)<v?y:b:x)(v)}function rce(e){const t=Rh(e.format),n=Rh(e.utcFormat);return{timeFormat:r=>vy(r)?t(r):o8(t,Kue,r),utcFormat:r=>vy(r)?n(r):o8(n,Zue,r),timeParse:Rh(e.parse),utcParse:Rh(e.utcParse)}}ice();function ice(){return rce({format:yF,parse:dI,utcFormat:bF,utcParse:hI})}const oce=/^(data:|([A-Za-z]+:)?\/\/)/,sce=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ace=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,s8="file://";function uce(e,t){return n=>({options:n||{},sanitize:cce,load:lce,fileAccess:!!t,file:fce(t),http:hce(e)})}async function lce(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function cce(e,t){t=r2({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=sce.test(e.replace(ace,""));(e==null||typeof e!="string"||!a)&&vs("Sanitize failure, invalid URI: "+Nj(e));const u=oce.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(s8))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(s8.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function fce(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):dce}async function dce(){vs("No file system access.")}function hce(e){return e?async function(t,n){const r=r2({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?n2(o[i])?o[i]():o.text():vs(o.status+""+o.statusText)}:gce}async function gce(){vs("No HTTP fetch method available.")}const gI=uce(typeof fetch<"u"&&fetch,null);function So(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function uu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const a8=Symbol("implicit");function vF(){var e=new ay,t=[],n=[],r=a8;function i(o){let s=e.get(o);if(s===void 0){if(r!==a8)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new ay;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return vF(t,n).unknown(r)},So.apply(i,arguments),i}function yd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ip(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function lu(){}var Fl=.7,Ef=1/Fl,of="\\s*([+-]?\\d+)\\s*",Q0="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",so="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pce=/^#([0-9a-f]{3,8})$/,mce=new RegExp("^rgb\\("+[of,of,of]+"\\)$"),yce=new RegExp("^rgb\\("+[so,so,so]+"\\)$"),bce=new RegExp("^rgba\\("+[of,of,of,Q0]+"\\)$"),vce=new RegExp("^rgba\\("+[so,so,so,Q0]+"\\)$"),xce=new RegExp("^hsl\\("+[Q0,so,so]+"\\)$"),_ce=new RegExp("^hsla\\("+[Q0,so,so,Q0]+"\\)$"),u8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yd(lu,Ss,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:l8,formatHex:l8,formatHsl:$ce,formatRgb:c8,toString:c8});function l8(){return this.rgb().formatHex()}function $ce(){return pI(this).formatHsl()}function c8(){return this.rgb().formatRgb()}function Ss(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pce.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?f8(t):n===3?new en(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?k1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?k1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mce.exec(e))?new en(t[1],t[2],t[3],1):(t=yce.exec(e))?new en(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bce.exec(e))?k1(t[1],t[2],t[3],t[4]):(t=vce.exec(e))?k1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xce.exec(e))?g8(t[1],t[2]/100,t[3]/100,1):(t=_ce.exec(e))?g8(t[1],t[2]/100,t[3]/100,t[4]):u8.hasOwnProperty(e)?f8(u8[e]):e==="transparent"?new en(NaN,NaN,NaN,0):null}function f8(e){return new en(e>>16&255,e>>8&255,e&255,1)}function k1(e,t,n,r){return r<=0&&(e=t=n=NaN),new en(e,t,n,r)}function xF(e){return e instanceof lu||(e=Ss(e)),e?(e=e.rgb(),new en(e.r,e.g,e.b,e.opacity)):new en}function mr(e,t,n,r){return arguments.length===1?xF(e):new en(e,t,n,r??1)}function en(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}yd(en,mr,ip(lu,{brighter:function(e){return e=e==null?Ef:Math.pow(Ef,e),new en(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Fl:Math.pow(Fl,e),new en(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d8,formatHex:d8,formatRgb:h8,toString:h8}));function d8(){return"#"+b$(this.r)+b$(this.g)+b$(this.b)}function h8(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function b$(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function g8(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ji(e,t,n,r)}function pI(e){if(e instanceof Ji)return new Ji(e.h,e.s,e.l,e.opacity);if(e instanceof lu||(e=Ss(e)),!e)return new Ji;if(e instanceof Ji)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Ji(s,a,u,e.opacity)}function za(e,t,n,r){return arguments.length===1?pI(e):new Ji(e,t,n,r??1)}function Ji(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yd(Ji,za,ip(lu,{brighter:function(e){return e=e==null?Ef:Math.pow(Ef,e),new Ji(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Fl:Math.pow(Fl,e),new Ji(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new en(v$(e>=240?e-240:e+120,i,r),v$(e,i,r),v$(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function v$(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mI=Math.PI/180,yI=180/Math.PI,ky=18,bI=.96422,vI=1,xI=.82521,_I=4/29,sf=6/29,$I=3*sf*sf,wce=sf*sf*sf;function wI(e){if(e instanceof ao)return new ao(e.l,e.a,e.b,e.opacity);if(e instanceof fs)return AI(e);e instanceof en||(e=xF(e));var t=w$(e.r),n=w$(e.g),r=w$(e.b),i=x$((.2225045*t+.7168786*n+.0606169*r)/vI),o,s;return t===n&&n===r?o=s=i:(o=x$((.4360747*t+.3850649*n+.1430804*r)/bI),s=x$((.0139322*t+.0971045*n+.7141733*r)/xI)),new ao(116*i-16,500*(o-i),200*(i-s),e.opacity)}function Ua(e,t,n,r){return arguments.length===1?wI(e):new ao(e,t,n,r??1)}function ao(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}yd(ao,Ua,ip(lu,{brighter:function(e){return new ao(this.l+ky*(e??1),this.a,this.b,this.opacity)},darker:function(e){return new ao(this.l-ky*(e??1),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=bI*_$(t),e=vI*_$(e),n=xI*_$(n),new en($$(3.1338561*t-1.6168667*e-.4906146*n),$$(-.9787684*t+1.9161415*e+.033454*n),$$(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function x$(e){return e>wce?Math.pow(e,1/3):e/$I+_I}function _$(e){return e>sf?e*e*e:$I*(e-_I)}function $$(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function w$(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ace(e){if(e instanceof fs)return new fs(e.h,e.c,e.l,e.opacity);if(e instanceof ao||(e=wI(e)),e.a===0&&e.b===0)return new fs(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*yI;return new fs(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function qa(e,t,n,r){return arguments.length===1?Ace(e):new fs(e,t,n,r??1)}function fs(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function AI(e){if(isNaN(e.h))return new ao(e.l,0,0,e.opacity);var t=e.h*mI;return new ao(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}yd(fs,qa,ip(lu,{brighter:function(e){return new fs(this.h,this.c,this.l+ky*(e??1),this.opacity)},darker:function(e){return new fs(this.h,this.c,this.l-ky*(e??1),this.opacity)},rgb:function(){return AI(this).rgb()}}));var EI=-.14861,_F=1.78277,$F=-.29227,g2=-.90649,eg=1.97294,p8=eg*g2,m8=eg*_F,y8=_F*$F-g2*EI;function Ece(e){if(e instanceof pl)return new pl(e.h,e.s,e.l,e.opacity);e instanceof en||(e=xF(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(y8*r+p8*t-m8*n)/(y8+p8-m8),o=r-i,s=(eg*(n-i)-$F*o)/g2,a=Math.sqrt(s*s+o*o)/(eg*i*(1-i)),u=a?Math.atan2(s,o)*yI-120:NaN;return new pl(u<0?u+360:u,a,i,e.opacity)}function kl(e,t,n,r){return arguments.length===1?Ece(e):new pl(e,t,n,r??1)}function pl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yd(pl,kl,ip(lu,{brighter:function(e){return e=e==null?Ef:Math.pow(Ef,e),new pl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Fl:Math.pow(Fl,e),new pl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*mI,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new en(255*(t+n*(EI*r+_F*i)),255*(t+n*($F*r+g2*i)),255*(t+n*(eg*r)),this.opacity)}}));function CI(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function SI(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return CI((n-r/t)*t,s,i,o,a)}}function FI(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return CI((n-r/t)*t,i,o,s,a)}}const p2=e=>()=>e;function kI(e,t){return function(n){return e+n*t}}function Cce(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function m2(e,t){var n=t-e;return n?kI(e,n>180||n<-180?n-360*Math.round(n/360):n):p2(isNaN(e)?t:e)}function Sce(e){return(e=+e)==1?jt:function(t,n){return n-t?Cce(t,n,e):p2(isNaN(t)?n:t)}}function jt(e,t){var n=t-e;return n?kI(e,n):p2(isNaN(e)?t:e)}const BA=function e(t){var n=Sce(t);function r(i,o){var s=n((i=mr(i)).r,(o=mr(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=jt(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function DI(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=mr(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=o(u),a+""}}}var Fce=DI(SI),kce=DI(FI);function wF(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function MI(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Dce(e,t){return(MI(t)?wF:OI)(e,t)}function OI(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=ac(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function TI(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function gi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function NI(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ac(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var LA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,A$=new RegExp(LA.source,"g");function Mce(e){return function(){return e}}function Oce(e){return function(t){return e(t)+""}}function RI(e,t){var n=LA.lastIndex=A$.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=LA.exec(e))&&(i=A$.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:gi(r,i)})),n=A$.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Oce(u[0].x):Mce(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function ac(e,t){var n=typeof t,r;return t==null||n==="boolean"?p2(t):(n==="number"?gi:n==="string"?(r=Ss(t))?(t=r,BA):RI:t instanceof Ss?BA:t instanceof Date?TI:MI(t)?wF:Array.isArray(t)?OI:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?NI:gi)(e,t)}function Tce(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Nce(e,t){var n=m2(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function y2(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var b8=180/Math.PI,PA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function BI(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*b8,skewX:Math.atan(u)*b8,scaleX:s,scaleY:a}}var D1;function Rce(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?PA:BI(t.a,t.b,t.c,t.d,t.e,t.f)}function Bce(e){return e==null||(D1||(D1=document.createElementNS("http://www.w3.org/2000/svg","g")),D1.setAttribute("transform",e),!(e=D1.transform.baseVal.consolidate()))?PA:(e=e.matrix,BI(e.a,e.b,e.c,e.d,e.e,e.f))}function LI(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,h,g){if(l!==f||c!==d){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:gi(l,f)},{i:p-2,x:gi(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:gi(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:gi(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,g){if(l!==f||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");g.push({i:p-4,x:gi(l,f)},{i:p-2,x:gi(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),s(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var g=-1,p=d.length,m;++g<p;)f[(m=d[g]).i]=m.x(h);return f.join("")}}}var Lce=LI(Rce,"px, ","px)","deg)"),Pce=LI(Bce,", ",")",")"),jce=1e-12;function v8(e){return((e=Math.exp(e))+1/e)/2}function Ice(e){return((e=Math.exp(e))-1/e)/2}function zce(e){return((e=Math.exp(2*e))-1)/(e+1)}const Uce=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],f=s[1],d=s[2],h=c-a,g=f-u,p=h*h+g*g,m,y;if(p<jce)y=Math.log(d/l)/t,m=function($){return[a+$*h,u+$*g,l*Math.exp(t*$*y)]};else{var b=Math.sqrt(p),x=(d*d-l*l+r*p)/(2*l*n*b),v=(d*d-l*l-r*p)/(2*d*n*b),_=Math.log(Math.sqrt(x*x+1)-x),w=Math.log(Math.sqrt(v*v+1)-v);y=(w-_)/t,m=function($){var A=$*y,M=v8(_),k=l/(n*b)*(M*zce(t*A+_)-Ice(_));return[a+k*h,u+k*g,l*M/v8(t*A+_)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);function PI(e){return function(t,n){var r=e((t=za(t)).h,(n=za(n)).h),i=jt(t.s,n.s),o=jt(t.l,n.l),s=jt(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const qce=PI(m2);var Wce=PI(jt);function Hce(e,t){var n=jt((e=Ua(e)).l,(t=Ua(t)).l),r=jt(e.a,t.a),i=jt(e.b,t.b),o=jt(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function jI(e){return function(t,n){var r=e((t=qa(t)).h,(n=qa(n)).h),i=jt(t.c,n.c),o=jt(t.l,n.l),s=jt(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const Yce=jI(m2);var Gce=jI(jt);function II(e){return function t(n){n=+n;function r(i,o){var s=e((i=kl(i)).h,(o=kl(o)).h),a=jt(i.s,o.s),u=jt(i.l,o.l),l=jt(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Vce=II(m2);var Xce=II(jt);function AF(e,t){t===void 0&&(t=e,e=ac);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Kce(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Zce=Object.freeze(Object.defineProperty({__proto__:null,interpolate:ac,interpolateArray:Dce,interpolateBasis:SI,interpolateBasisClosed:FI,interpolateCubehelix:Vce,interpolateCubehelixLong:Xce,interpolateDate:TI,interpolateDiscrete:Tce,interpolateHcl:Yce,interpolateHclLong:Gce,interpolateHsl:qce,interpolateHslLong:Wce,interpolateHue:Nce,interpolateLab:Hce,interpolateNumber:gi,interpolateNumberArray:wF,interpolateObject:NI,interpolateRgb:BA,interpolateRgbBasis:Fce,interpolateRgbBasisClosed:kce,interpolateRound:y2,interpolateString:RI,interpolateTransformCss:Lce,interpolateTransformSvg:Pce,interpolateZoom:Uce,piecewise:AF,quantize:Kce},Symbol.toStringTag,{value:"Module"}));function Jce(e){return function(){return e}}function jA(e){return+e}var x8=[0,1];function cr(e){return e}function IA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Jce(isNaN(t)?NaN:.5)}function Qce(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function efe(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=IA(i,r),o=n(s,o)):(r=IA(r,i),o=n(o,s)),function(a){return o(r(a))}}function tfe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=IA(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=tp(e,a,1,r)-1;return o[u](i[u](a))}}function op(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function b2(){var e=x8,t=x8,n=ac,r,i,o,s=cr,a,u,l;function c(){var d=Math.min(e.length,t.length);return s!==cr&&(s=Qce(e[0],e[d-1])),a=d>2?tfe:efe,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((l||(l=a(t,e.map(r),gi)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,jA),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=y2,c()},f.clamp=function(d){return arguments.length?(s=d?!0:cr,c()):s!==cr},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function zI(){return b2()(cr,cr)}function UI(e,t,n,r){var i=Ey(e,t,n),o;switch(r=Sl(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=iI(i,s))&&(r.precision=o),gF(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=oI(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=rI(i))&&(r.precision=o-(r.type==="%")*2);break}}return a2(r)}function uc(e){var t=e.domain;return e.ticks=function(n){var r=t();return NA(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return UI(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=RA(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function qI(){var e=zI();return e.copy=function(){return op(e,qI())},So.apply(e,arguments),uc(e)}function WI(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,jA),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return WI(e).unknown(t)},e=arguments.length?Array.from(e,jA):[0,1],uc(n)}function HI(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function _8(e){return Math.log(e)}function $8(e){return Math.exp(e)}function nfe(e){return-Math.log(-e)}function rfe(e){return-Math.exp(-e)}function ife(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ofe(e){return e===10?ife:e===Math.E?Math.exp:t=>Math.pow(e,t)}function sfe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function w8(e){return(t,n)=>-e(-t,n)}function EF(e){const t=e(_8,$8),n=t.domain;let r=10,i,o;function s(){return i=sfe(r),o=ofe(r),n()[0]<0?(i=w8(i),o=w8(o),e(nfe,rfe)):e(_8,$8),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),g,p;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(g=1;g<r;++g)if(p=d<0?g/o(-d):g*o(d),!(p<l)){if(p>c)break;y.push(p)}}else for(;d<=h;++d)for(g=r-1;g>=1;--g)if(p=d>0?g/o(-d):g*o(d),!(p<l)){if(p>c)break;y.push(p)}y.length*2<m&&(y=NA(l,c,m))}else y=NA(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Sl(u)).precision==null&&(u.trim=!0),u=a2(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(HI(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function YI(){const e=EF(b2()).domain([1,10]);return e.copy=()=>op(e,YI()).base(e.base()),So.apply(e,arguments),e}function A8(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function E8(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function CF(e){var t=1,n=e(A8(t),E8(t));return n.constant=function(r){return arguments.length?e(A8(t=+r),E8(t)):t},uc(n)}function GI(){var e=CF(b2());return e.copy=function(){return op(e,GI()).constant(e.constant())},So.apply(e,arguments)}function C8(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function afe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ufe(e){return e<0?-e*e:e*e}function SF(e){var t=e(cr,cr),n=1;function r(){return n===1?e(cr,cr):n===.5?e(afe,ufe):e(C8(n),C8(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},uc(t)}function FF(){var e=SF(b2());return e.copy=function(){return op(e,FF()).exponent(e.exponent())},So.apply(e,arguments),e}function lfe(){return FF.apply(null,arguments).exponent(.5)}function VI(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=Eue(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[tp(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(e0),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return VI().domain(e).range(t).unknown(r)},So.apply(o,arguments)}function XI(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[tp(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return XI().domain([e,t]).range(i).unknown(o)},So.apply(uc(s),arguments)}function KI(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[tp(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return KI().domain(e).range(t).unknown(n)},So.apply(i,arguments)}function cfe(e){return new Date(e)}function ffe(e){return e instanceof Date?+e:+new Date(+e)}function kF(e,t,n,r,i,o,s,a,u,l){var c=zI(),f=c.invert,d=c.domain,h=l(".%L"),g=l(":%S"),p=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),b=l("%b %d"),x=l("%B"),v=l("%Y");function _(w){return(u(w)<w?h:a(w)<w?g:s(w)<w?p:o(w)<w?m:r(w)<w?i(w)<w?y:b:n(w)<w?x:v)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?d(Array.from(w,ffe)):d().map(cfe)},c.ticks=function(w){var $=d();return e($[0],$[$.length-1],w??10)},c.tickFormat=function(w,$){return $==null?_:l($)},c.nice=function(w){var $=d();return(!w||typeof w.range!="function")&&(w=t($[0],$[$.length-1],w??10)),w?d(HI($,w)):c},c.copy=function(){return op(c,kF(e,t,n,r,i,o,s,a,u,l))},c}function dfe(){return So.apply(kF(Hue,Yue,mo,q0,np,Ea,c2,u2,cs,yF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hfe(){return So.apply(kF(que,Wue,yo,W0,rp,gl,f2,l2,cs,bF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function v2(){var e=0,t=1,n,r,i,o,s=cr,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(s=f,l):s};function c(f){return function(d){var h,g;return arguments.length?([h,g]=d,s=f(h,g),l):[s(0),s(1)]}}return l.range=c(ac),l.rangeRound=c(y2),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function cu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DF(){var e=uc(v2()(cr));return e.copy=function(){return cu(e,DF())},uu.apply(e,arguments)}function ZI(){var e=EF(v2()).domain([1,10]);return e.copy=function(){return cu(e,ZI()).base(e.base())},uu.apply(e,arguments)}function JI(){var e=CF(v2());return e.copy=function(){return cu(e,JI()).constant(e.constant())},uu.apply(e,arguments)}function MF(){var e=SF(v2());return e.copy=function(){return cu(e,MF()).exponent(e.exponent())},uu.apply(e,arguments)}function gfe(){return MF.apply(null,arguments).exponent(.5)}function x2(){var e=0,t=.5,n=1,r=1,i,o,s,a,u,l=cr,c,f=!1,d;function h(p){return isNaN(p=+p)?d:(p=.5+((p=+c(p))-o)*(r*p<r*o?a:u),l(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(l=p,h):l};function g(p){return function(m){var y,b,x;return arguments.length?([y,b,x]=m,l=AF(p,[y,b,x]),h):[l(0),l(.5),l(1)]}}return h.range=g(ac),h.rangeRound=g(y2),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return c=p,i=p(e),o=p(t),s=p(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function QI(){var e=uc(x2()(cr));return e.copy=function(){return cu(e,QI())},uu.apply(e,arguments)}function ez(){var e=EF(x2()).domain([.1,1,10]);return e.copy=function(){return cu(e,ez()).base(e.base())},uu.apply(e,arguments)}function tz(){var e=CF(x2());return e.copy=function(){return cu(e,tz()).constant(e.constant())},uu.apply(e,arguments)}function OF(){var e=SF(x2());return e.copy=function(){return cu(e,OF()).exponent(e.exponent())},uu.apply(e,arguments)}function pfe(){return OF.apply(null,arguments).exponent(.5)}function mfe(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const yfe="identity",TF="linear",Wa="log",NF="pow",RF="sqrt",BF="symlog",tg="time",ng="utc",bd="sequential",sp="diverging",Dy="quantile",LF="quantize",nz="threshold",bfe="ordinal",vfe="point",xfe="band",_fe="bin-ordinal",Zt="continuous",ap="discrete",up="discretizing",Ni="interpolating",PF="temporal";function $fe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function wfe(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),s=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function jF(){const e=vF().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],g=mfe(f,a,u);let p=r[d-0];i=(h-p)/(g||1),s&&(i=Math.floor(i)),p+=(h-p-i*(f-a))*l,o=i*(1-a),s&&(p=Math.round(p),o=Math.round(o));const m=Cue(f).map(y=>p+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),g=h.length-1;let p=+f[0],m=+f[1],y,b,x;if(!(p!==p||m!==m)&&(m<p&&(x=p,p=m,m=x),!(m<h[0]||p>r[1-d])))return y=Math.max(0,TA(h,p)-1),b=p===m?y:TA(h,m)-1,p-h[y]>o+1e-10&&++y,d&&(x=y,y=g-b,b=g-x),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return jF().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(u).align(l)},c()}function rz(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return rz(t())},e}function Afe(){return rz(jF().paddingInner(1))}var Efe=Array.prototype.map;function Cfe(e){return Efe.call(e,jae)}const Sfe=Array.prototype.slice;function iz(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(tp(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Cfe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Sfe.call(r),n):t.slice()},n.tickFormat=function(r,i){return UI(e[0],oo(e),r??10,i)},n.copy=function(){return iz().domain(n.domain()).range(n.range())},n}const My=new Map,Ffe=Symbol("vega_scale");function kfe(e){return e[Ffe]=!0,e}function Dfe(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?$fe(o):o.invertExtent?wfe(o):void 0),o.type=e,kfe(o)};return r.metadata=Rj(iF(n)),r}function it(e,t,n){return arguments.length>1?(My.set(e,Dfe(e,t,n)),this):Mfe(e)?My.get(e):void 0}it(yfe,WI);it(TF,qI,Zt);it(Wa,YI,[Zt,Wa]);it(NF,FF,Zt);it(RF,lfe,Zt);it(BF,GI,Zt);it(tg,dfe,[Zt,PF]);it(ng,hfe,[Zt,PF]);it(bd,DF,[Zt,Ni]);it(`${bd}-${TF}`,DF,[Zt,Ni]);it(`${bd}-${Wa}`,ZI,[Zt,Ni,Wa]);it(`${bd}-${NF}`,MF,[Zt,Ni]);it(`${bd}-${RF}`,gfe,[Zt,Ni]);it(`${bd}-${BF}`,JI,[Zt,Ni]);it(`${sp}-${TF}`,QI,[Zt,Ni]);it(`${sp}-${Wa}`,ez,[Zt,Ni,Wa]);it(`${sp}-${NF}`,OF,[Zt,Ni]);it(`${sp}-${RF}`,pfe,[Zt,Ni]);it(`${sp}-${BF}`,tz,[Zt,Ni]);it(Dy,VI,[up,Dy]);it(LF,XI,up);it(nz,KI,up);it(_fe,iz,[ap,up]);it(bfe,vF,ap);it(xfe,jF,ap);it(vfe,Afe,ap);function Mfe(e){return My.has(e)}function _2(e,t){const n=My.get(e);return n&&n.metadata[t]}function oz(e){return _2(e,ap)}function Ofe(e){return _2(e,up)}function Tfe(e){return _2(e,Wa)}function Nfe(e){return _2(e,PF)}function Rfe(e,t,n){return AF(Bfe(t||"rgb",n),e)}function Bfe(e,t){const n=Zce[Lfe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Lfe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Pfe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},jfe={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function sz(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function az(e,t){for(const n in e)Ife(n,t(e[n]))}const S8={};az(jfe,sz);az(Pfe,e=>Rfe(sz(e)));function Ife(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(S8[e]=t,this):S8[e]}const zfe="symbol",Ufe="discrete",qfe=e=>Co(e)?e.map(t=>String(t)):String(e),Wfe=(e,t)=>e[1]-t[1],Hfe=(e,t)=>t[1]-e[1];function Yfe(e,t,n){let r=e.range(),i=r[0],o=oo(r),s=Wfe;if(i>o&&(r=o,o=i,i=r,s=Hfe),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],oo(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function uz(e,t){return e.bins?Yfe(e,e.bins):e.ticks?e.ticks(t):e.domain()}function Gfe(e,t,n,r,i,o){const s=t.type;let a=qfe;if(s===tg||i===tg)a=e.timeFormat(r);else if(s===ng||i===ng)a=e.utcFormat(r);else if(Tfe(s)){const u=e.formatFloat(r);if(o||t.bins)a=u;else{const l=lz(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function lz(e,t,n){const r=uz(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/o));return l*i<i-.5&&(l*=i),l<=s};return n?r.filter(a):a}const zA={[Dy]:"quantiles",[LF]:"thresholds",[nz]:"domain"},cz={[Dy]:"quantiles",[LF]:"domain"};function Vfe(e,t){return e.bins?Zfe(e.bins):e.type===Wa?lz(e,t,!0):zA[e.type]?Kfe(e[zA[e.type]]()):uz(e,t)}function Xfe(e,t,n){const r=t[cz[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function Kfe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Zfe(e){const t=e.slice(0,-1);return t.max=oo(e),t}const Jfe=e=>zA[e.type]||e.bins;function Qfe(e,t,n,r,i,o,s){const a=cz[t.type]&&o!==tg&&o!==ng?Xfe(e,t,i):Gfe(e,t,n,i,o,s);return r===zfe&&Jfe(t)?ede(a):r===Ufe?tde(a):nde(a)}const ede=e=>(t,n,r)=>{const i=F8(r[n+1],F8(r.max,1/0)),o=k8(t,e),s=k8(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},F8=(e,t)=>e??t,tde=e=>(t,n)=>n?e(t):null,nde=e=>t=>e(t),k8=(e,t)=>Number.isFinite(e)?t(e):null;function rde(e,t,n,r){const i=r||t.type;return vy(n)&&Nfe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===tg?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===ng?e.utcFormat("%A, %d %B %Y, %X UTC"):Qfe(e,t,5,null,n,r,!0)}function fz(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=rde(e,t,n.format,n.formatType);if(Ofe(t.type)){const o=Vfe(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(oz(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(oo(o))}`}}let ide=0;const Oy="p_";function IF(e){return e&&e.gradient}function dz(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?Oy:"";return i||(i=e.id="gradient_"+ide++,r==="radial"?(e.x1=Hi(e.x1,.5),e.y1=Hi(e.y1,.5),e.r1=Hi(e.r1,0),e.x2=Hi(e.x2,.5),e.y2=Hi(e.y2,.5),e.r2=Hi(e.r2,.5),o=Oy):(e.x1=Hi(e.x1,0),e.y1=Hi(e.y1,0),e.x2=Hi(e.x2,1),e.y2=Hi(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Hi(e,t){return e??t}const D8={basis:{curve:nue},"basis-closed":{curve:rue},"basis-open":{curve:iue},bundle:{curve:oue,tension:"beta",value:.85},cardinal:{curve:sue,tension:"tension",value:0},"cardinal-open":{curve:uue,tension:"tension",value:0},"cardinal-closed":{curve:aue,tension:"tension",value:0},"catmull-rom":{curve:lue,tension:"alpha",value:.5},"catmull-rom-closed":{curve:cue,tension:"alpha",value:.5},"catmull-rom-open":{curve:fue,tension:"alpha",value:.5},linear:{curve:aF},"linear-closed":{curve:due},monotone:{horizontal:gue,vertical:hue},natural:{curve:pue},step:{curve:mue},"step-after":{curve:bue},"step-before":{curve:yue}};function hz(e,t,n){var r=is(D8,e)&&D8[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const ode={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},sde=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,ade=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,ude=/^((\s+,?\s*)|(,\s*))/,lde=/^[01]/;function gz(e){const t=[];return(e.match(sde)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=ode[o],a=cde(o,s,r.slice(1).trim()),u=a.length;if(u<s||u&&u%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),u!==s){o==="m"&&(i=i==="M"?"L":"l");for(let l=s;l<u;l+=s)t.push([i,...a.slice(l,l+s)])}}),t}function cde(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?lde:ade,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(ude);u!==null&&(i+=u[0].length)}return r}const Ha=Math.PI/180,fde=1e-14,Vu=Math.PI/2,Qi=Math.PI*2,Bc=Math.sqrt(3)/2;var E$={},C$={},pz=[].join;function dde(e,t,n,r,i,o,s,a,u){const l=pz.call(arguments);if(E$[l])return E$[l];const c=s*Ha,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,g=d*(u-t)*.5-f*(a-e)*.5;let p=h*h/(n*n)+g*g/(r*r);p>1&&(p=Math.sqrt(p),n*=p,r*=p);const m=d/n,y=f/n,b=-f/r,x=d/r,v=m*a+y*u,_=b*a+x*u,w=m*e+y*t,$=b*e+x*t;let M=1/((w-v)*(w-v)+($-_)*($-_))-.25;M<0&&(M=0);let k=Math.sqrt(M);o==i&&(k=-k);const C=.5*(v+w)-k*($-_),N=.5*(_+$)+k*(w-v),E=Math.atan2(_-N,v-C);let F=Math.atan2($-N,w-C)-E;F<0&&o===1?F+=Qi:F>0&&o===0&&(F-=Qi);const O=Math.ceil(Math.abs(F/(Vu+.001))),R=[];for(let B=0;B<O;++B){const P=E+B*F/O,Z=E+(B+1)*F/O;R[B]=[C,N,P,Z,n,r,f,d]}return E$[l]=R}function hde(e){const t=pz.call(e);if(C$[t])return C$[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7];const c=l*s,f=-u*a,d=u*s,h=l*a,g=Math.cos(i),p=Math.sin(i),m=Math.cos(o),y=Math.sin(o),b=.5*(o-i),x=Math.sin(b*.5),v=8/3*x*x/Math.sin(b),_=n+g-v*p,w=r+p+v*g,$=n+m,A=r+y,M=$+v*y,k=A-v*m;return C$[t]=[c*_+f*w,d*_+h*w,c*M+f*k,d*M+h*k,c*$+f*A,d*$+h*A]}const Pr=["l",0,0,0,0,0,0,0];function gde(e,t,n){const r=Pr[0]=e[0];if(r==="a"||r==="A")Pr[1]=t*e[1],Pr[2]=n*e[2],Pr[3]=e[3],Pr[4]=e[4],Pr[5]=e[5],Pr[6]=t*e[6],Pr[7]=n*e[7];else if(r==="h"||r==="H")Pr[1]=t*e[1];else if(r==="v"||r==="V")Pr[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Pr[i]=(i%2==1?t:n)*e[i];return Pr}function UA(e,t,n,r,i,o){var s,a=null,u=0,l=0,c=0,f=0,d,h,g,p,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var b=0,x=t.length;b<x;++b){switch(s=t[b],(i!==1||o!==1)&&(s=gde(s,i,o)),s[0]){case"l":u+=s[1],l+=s[2],e.lineTo(u+n,l+r);break;case"L":u=s[1],l=s[2],e.lineTo(u+n,l+r);break;case"h":u+=s[1],e.lineTo(u+n,l+r);break;case"H":u=s[1],e.lineTo(u+n,l+r);break;case"v":l+=s[1],e.lineTo(u+n,l+r);break;case"V":l=s[1],e.lineTo(u+n,l+r);break;case"m":u+=s[1],l+=s[2],m=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=s[1],l=s[2],m=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+s[5],h=l+s[6],c=u+s[3],f=l+s[4],e.bezierCurveTo(u+s[1]+n,l+s[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=s[5],l=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+s[3],h=l+s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+s[1]+n,l+s[2]+r,d+n,h+r),c=u+s[1],f=l+s[2],u=d,l=h;break;case"S":d=s[3],h=s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"q":d=u+s[3],h=l+s[4],c=u+s[1],f=l+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"t":d=u+s[1],h=l+s[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-g,f=2*l-p):a[0]==="q"&&(c=2*u-c,f=2*l-f),g=c,p=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+s[1],f=l+s[2];break;case"T":d=s[1],h=s[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":M8(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+l+r]),u+=s[6],l+=s[7];break;case"A":M8(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),u=s[6],l=s[7];break;case"z":case"Z":u=m,l=y,e.closePath();break}a=s}}function M8(e,t,n,r){const i=dde(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=hde(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const O8=.5773502691896257,T8={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Qi)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Bc*n,i=r-n*O8,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Bc*n,i=r-n*O8;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Bc*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Bc*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Bc*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Bc*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function pde(e){return is(T8,e)?T8[e]:mde(e)}var S$={};function mde(e){if(!is(S$,e)){const t=gz(e);S$[e]={draw:function(n,r){UA(n,t,0,0,Math.sqrt(r)/2)}}}return S$[e]}const Gs=.448084975506;function yde(e){return e.x}function bde(e){return e.y}function vde(e){return e.width}function xde(e){return e.height}function Go(e){return typeof e=="function"?e:()=>+e}function M1(e,t,n){return Math.max(t,Math.min(e,n))}function _de(){var e=yde,t=bde,n=vde,r=xde,i=Go(0),o=i,s=i,a=i,u=null;function l(c,f,d){var h,g=f??+e.call(this,c),p=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),b=Math.min(m,y)/2,x=M1(+i.call(this,c),0,b),v=M1(+o.call(this,c),0,b),_=M1(+s.call(this,c),0,b),w=M1(+a.call(this,c),0,b);if(u||(u=h=sF()),x<=0&&v<=0&&_<=0&&w<=0)u.rect(g,p,m,y);else{var $=g+m,A=p+y;u.moveTo(g+x,p),u.lineTo($-v,p),u.bezierCurveTo($-Gs*v,p,$,p+Gs*v,$,p+v),u.lineTo($,A-w),u.bezierCurveTo($,A-Gs*w,$-Gs*w,A,$-w,A),u.lineTo(g+_,A),u.bezierCurveTo(g+Gs*_,A,g,A-Gs*_,g,A-_),u.lineTo(g,p+x),u.bezierCurveTo(g,p+Gs*x,g+Gs*x,p,g+x,p),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Go(c),l):e},l.y=function(c){return arguments.length?(t=Go(c),l):t},l.width=function(c){return arguments.length?(n=Go(c),l):n},l.height=function(c){return arguments.length?(r=Go(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Go(c),o=f!=null?Go(f):i,a=d!=null?Go(d):i,s=h!=null?Go(h):o,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function $de(){var e,t,n,r,i=null,o,s,a,u;function l(f,d,h){const g=h/2;if(o){var p=a-d,m=f-s;if(p||m){var y=Math.sqrt(p*p+m*m),b=(p/=y)*u,x=(m/=y)*u,v=Math.atan2(m,p);i.moveTo(s-b,a-x),i.lineTo(f-p*g,d-m*g),i.arc(f,d,g,v-Math.PI,v),i.lineTo(s+b,a+x),i.arc(s,a,u,v,v+Math.PI)}else i.arc(f,d,g,0,Qi);i.closePath()}else o=1;s=f,a=d,u=g}function c(f){var d,h=f.length,g,p=!1,m;for(i==null&&(i=m=sF()),d=0;d<=h;++d)!(d<h&&r(g=f[d],d,f))===p&&(p=!p)&&(o=0),p&&l(+e(g,d,f),+t(g,d,f),+n(g,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function lp(e,t){return e??t}const cp=e=>e.x||0,fp=e=>e.y||0,wde=e=>e.width||0,Ade=e=>e.height||0,Ede=e=>(e.x||0)+(e.width||0),Cde=e=>(e.y||0)+(e.height||0),Sde=e=>e.startAngle||0,Fde=e=>e.endAngle||0,kde=e=>e.padAngle||0,Dde=e=>e.innerRadius||0,Mde=e=>e.outerRadius||0,Ode=e=>e.cornerRadius||0,Tde=e=>lp(e.cornerRadiusTopLeft,e.cornerRadius)||0,Nde=e=>lp(e.cornerRadiusTopRight,e.cornerRadius)||0,Rde=e=>lp(e.cornerRadiusBottomRight,e.cornerRadius)||0,Bde=e=>lp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Lde=e=>lp(e.size,64),Pde=e=>e.size||1,$2=e=>e.defined!==!1,jde=e=>pde(e.shape||"circle"),Ide=Qae().startAngle(Sde).endAngle(Fde).padAngle(kde).innerRadius(Dde).outerRadius(Mde).cornerRadius(Ode),zde=qj().x(cp).y1(fp).y0(Cde).defined($2),Ude=qj().y(fp).x1(cp).x0(Ede).defined($2),qde=Uj().x(cp).y(fp).defined($2),Wde=_de().x(cp).y(fp).width(wde).height(Ade).cornerRadius(Tde,Nde,Rde,Bde),Hde=tue().type(jde).size(Lde),Yde=$de().x(cp).y(fp).defined($2).size(Pde);function zF(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Gde(e,t){return Ide.context(e)(t)}function Vde(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Ude:zde).curve(hz(r,n.orient,n.tension)).context(e)(t)}function Xde(e,t){const n=t[0],r=n.interpolate||"linear";return qde.curve(hz(r,n.orient,n.tension)).context(e)(t)}function vd(e,t,n,r){return Wde.context(e)(t,n,r)}function Kde(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Zde(e,t){return Hde.context(e)(t)}function Jde(e,t){return Yde.context(e)(t)}var Qde=1;function UF(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+Qde++),s=i.clipping[o]||(i.clipping[o]={id:o});return n2(r)?s.path=r(null):zF(n)?s.path=vd(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function Nr(e){this.clear(),e&&this.union(e)}Nr.prototype={clone(){return new Nr(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*s+l,u*r+a*s+c,a*o-u*i+l,u*o+a*i+c,a*o-u*s+l,u*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function qF(e){this.mark=e,this.bounds=this.bounds||new Nr}function mz(e){qF.call(this,e),this.items=this.items||[]}ii(mz,qF);function yz(e){this._pending=0,this._loader=e||gI()}function N8(e){e._pending+=1}function ih(e){e._pending-=1}yz.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return N8(t),t._loader.sanitize(e,{context:"href"}).then(n=>(ih(t),n)).catch(()=>(ih(t),null))},loadImage(e){const t=this,n=eI();return N8(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const o=new n,s=is(r,"crossOrigin")?r.crossOrigin:"anonymous";return s!=null&&(o.crossOrigin=s),o.onload=()=>ih(t),o.onerror=()=>ih(t),o.src=i,o}).catch(r=>(ih(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function fu(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?ehe(t,r):0))}return e}function ehe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const the=Qi-1e-8;let w2,wm,Am,il,qA,Em,WA,HA;const ua=(e,t)=>w2.add(e,t),Cm=(e,t)=>ua(wm=e,Am=t),R8=e=>ua(e,w2.y1),B8=e=>ua(w2.x1,e),Xu=(e,t)=>qA*e+WA*t,Ku=(e,t)=>Em*e+HA*t,F$=(e,t)=>ua(Xu(e,t),Ku(e,t)),k$=(e,t)=>Cm(Xu(e,t),Ku(e,t));function A2(e,t){return w2=e,t?(il=t*Ha,qA=HA=Math.cos(il),Em=Math.sin(il),WA=-Em):(qA=HA=1,il=Em=WA=0),nhe}const nhe={beginPath(){},closePath(){},moveTo:k$,lineTo:k$,rect(e,t,n,r){il?(F$(e+n,t),F$(e+n,t+r),F$(e,t+r),k$(e,t)):(ua(e+n,t+r),Cm(e,t))},quadraticCurveTo(e,t,n,r){const i=Xu(e,t),o=Ku(e,t),s=Xu(n,r),a=Ku(n,r);L8(wm,i,s,R8),L8(Am,o,a,B8),Cm(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=Xu(e,t),a=Ku(e,t),u=Xu(n,r),l=Ku(n,r),c=Xu(i,o),f=Ku(i,o);P8(wm,s,u,c,R8),P8(Am,a,l,f,B8),Cm(c,f)},arc(e,t,n,r,i,o){if(r+=il,i+=il,wm=n*Math.cos(i)+e,Am=n*Math.sin(i)+t,Math.abs(i-r)>the)ua(e-n,t-n),ua(e+n,t+n);else{const s=l=>ua(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(s(r),s(i),i!==r)if(r=r%Qi,r<0&&(r+=Qi),i=i%Qi,i<0&&(i+=Qi),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Qi,a=r-r%Vu,u=0;u<4&&a>i;++u,a-=Vu)s(a);else for(a=r-r%Vu+Vu,u=0;u<4&&a<i;++u,a=a+Vu)s(a)}}};function L8(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function P8(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(o)>fde?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),u=(-s+c)/o,l=(-s-c)/o)):u=.5*a/s,0<u&&u<1&&i(j8(u,e,t,n,r)),0<l&&l<1&&i(j8(l,e,t,n,r))}function j8(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var Ca=(Ca=Ts(1,1))?Ca.getContext("2d"):null;const YA=new Nr;function bz(e){return function(t,n){if(!Ca)return!0;e(Ca,t),YA.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=YA;for(let a=i;a<=s;++a)for(let u=r;u<=o;++u)if(Ca.isPointInPath(u,a))return!0;return!1}}function vz(e,t){return t.contains(e.x||0,e.y||0)}function xz(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(YA.set(n,r,n+i,r+o))}function rhe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Bh(t,n,r,i,o)}function Bh(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,g,p,m;for(m=0;m<4;++m){if(m===0&&(h=-l,g=-(o-t)),m===1&&(h=l,g=a-t),m===2&&(h=-c,g=-(s-n)),m===3&&(h=c,g=u-n),Math.abs(h)<1e-10&&g<0)return!1;if(p=g/h,h<0){if(p>d)return!1;p>f&&(f=p)}else if(h>0){if(p<f)return!1;p<d&&(d=p)}}return!0}function Cf(e,t){e.globalCompositeOperation=t.blend||"source-over"}function li(e,t){return e??t}function I8(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function ihe(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+li(t.x1,.5)*r,n.y1+li(t.y1,.5)*i,Math.max(r,i)*li(t.r1,0),n.x1+li(t.x2,.5)*r,n.y1+li(t.y2,.5)*i,Math.max(r,i)*li(t.r2,.5));else{const s=li(t.x1,0),a=li(t.y1,0),u=li(t.x2,1),l=li(t.y2,0);if(s===u||a===l||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Ts(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=I8(f.createLinearGradient(s,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return I8(o,t.stops)}function _z(e,t,n){return IF(n)?ihe(e,n,t.bounds):n}function Ty(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=_z(e,t,t.fill),!0):!1}var ohe=[];function Sf(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=_z(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||ohe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function she(e,t){return e.zindex-t.zindex||e.index-t.index}function $z(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(she)}function bo(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=$z(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function GA(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=$z(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function WF(e){return function(t,n,r){bo(n,i=>{(!r||r.intersects(i.bounds))&&wz(e,t,i,i)})}}function ahe(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&wz(e,t,n.items[0],n.items)}}function wz(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Cf(t,n),n.fill&&Ty(t,n,i)&&t.fill(),n.stroke&&Sf(t,n,i)&&t.stroke()))}function E2(e){return e=e||Tj,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,GA(n,a=>{const u=a.bounds;if(!(u&&!u.contains(o,s)||!u)&&e(t,a,r,i,o,s))return a})}}function dp(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,u=s.stroke&&n.isPointInStroke,l,c;return u&&(l=s.strokeWidth,c=s.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||u&&n.isPointInStroke(i,o)}}function HF(e){return E2(dp(e))}function ml(e,t){return"translate("+e+","+t+")"}function YF(e){return"rotate("+e+")"}function uhe(e,t){return"scale("+e+","+t+")"}function Az(e){return ml(e.x||0,e.y||0)}function lhe(e){return ml(e.x||0,e.y||0)+(e.angle?" "+YF(e.angle):"")}function che(e){return ml(e.x||0,e.y||0)+(e.angle?" "+YF(e.angle):"")+(e.scaleX||e.scaleY?" "+uhe(e.scaleX||1,e.scaleY||1):"")}function GF(e,t,n){function r(s,a){s("transform",lhe(a)),s("d",t(null,a))}function i(s,a){return t(A2(s,a.angle),a),fu(s,a).translate(a.x||0,a.y||0)}function o(s,a){var u=a.x||0,l=a.y||0,c=a.angle||0;s.translate(u,l),c&&s.rotate(c*=Ha),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:WF(o),pick:HF(o),isect:n||bz(o)}}var fhe=GF("arc",Gde);function dhe(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function hhe(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function ghe(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function VF(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(A2(u),c),fu(u,c[0]))}function o(u,l){u.beginPath(),t(u,l)}const s=dp(o);function a(u,l,c,f,d,h){var g=l.items,p=l.bounds;return!g||!g.length||p&&!p.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,s(u,g,c,f)?g[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:ahe(o),pick:a,isect:vz,tip:n}}var phe=VF("area",Vde,dhe);function mhe(e,t){var n=t.clip;e.save(),n2(n)?(e.beginPath(),n(e),e.clip()):Ez(e,t.group)}function Ez(e,t){e.beginPath(),zF(t)?vd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Cz(e){const t=li(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function yhe(e,t){e("transform",Az(t))}function Sz(e,t){const n=Cz(t);e("d",vd(null,t,n,n))}function bhe(e,t){e("class","background"),e("aria-hidden",!0),Sz(e,t)}function vhe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Sz(e,t):e("d","")}function xhe(e,t,n){const r=t.clip?UF(n,t,t):null;e("clip-path",r)}function _he(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),fu(e,t),e.translate(t.x||0,t.y||0)}function rg(e,t,n,r){const i=Cz(t);e.beginPath(),vd(e,t,(n||0)+i,(r||0)+i)}const $he=dp(rg),whe=dp(rg,!1),Ahe=dp(rg,!0);function Ehe(e,t,n){bo(t,r=>{const i=r.x||0,o=r.y||0,s=r.strokeForeground,a=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&a&&(rg(e,r,i,o),Cf(e,r),r.fill&&Ty(e,r,a)&&e.fill(),r.stroke&&!s&&Sf(e,r,a)&&e.stroke()),e.save(),e.translate(i,o),r.clip&&Ez(e,r),n&&n.translate(-i,-o),bo(r,u=>{this.draw(e,u,n)}),n&&n.translate(i,o),e.restore(),s&&r.stroke&&a&&(rg(e,r,i,o),Cf(e,r),Sf(e,r,a)&&e.stroke())})}function Che(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return GA(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),g=f+(u.height||0),p=u.clip;if(p&&(i<c||i>h||o<f||o>g))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,p&&zF(u)&&!Ahe(e,u,s,a))return e.restore(),null;const m=u.strokeForeground,y=t.interactive!==!1;return y&&m&&u.stroke&&whe(e,u,s,a)?(e.restore(),u):(l=GA(u,b=>She(b,c,f)?this.pick(b,n,r,c,f):null),!l&&y&&(u.fill||!m&&u.stroke)&&$he(e,u,s,a)&&(l=u),e.restore(),l||null)})}function She(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Fhe={type:"group",tag:"g",nested:!1,attr:yhe,bound:_he,draw:Ehe,pick:Che,isect:xz,content:xhe,background:bhe,foreground:vhe},ig={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function XF(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function KF(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function ZF(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function C2(e,t){return e==="center"?t/2:e==="right"?t:0}function S2(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function khe(e,t,n){const r=XF(t,n),i=KF(t,r),o=ZF(t,r),s=(t.x||0)-C2(t.align,i),a=(t.y||0)-S2(t.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,ig["xmlns:xlink"],"xlink:href"),e("transform",ml(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Dhe(e,t){const n=t.image,r=KF(t,n),i=ZF(t,n),o=(t.x||0)-C2(t.align,r),s=(t.y||0)-S2(t.baseline,i);return e.set(o,s,o+r,s+i)}function Mhe(e,t,n){bo(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=XF(r,this);let o=KF(r,i),s=ZF(r,i);if(o===0||s===0)return;let a=(r.x||0)-C2(r.align,o),u=(r.y||0)-S2(r.baseline,s),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,u+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Cf(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,o,s))})}var Ohe={type:"image",tag:"image",nested:!1,attr:khe,bound:Dhe,draw:Mhe,pick:E2(),isect:Tj,get:XF,xOffset:C2,yOffset:S2},The=VF("line",Xde,hhe);function Nhe(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",che(t)),e("d",t.path)}function Sm(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*Ha,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=gz(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),UA(e,u,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):UA(e,u,r,i,o,s)}function Rhe(e,t){return Sm(A2(e,t.angle),t)?e.set(0,0,0,0):fu(e,t,!0)}var Bhe={type:"path",tag:"path",nested:!1,attr:Nhe,bound:Rhe,draw:WF(Sm),pick:HF(Sm),isect:bz(Sm)};function Lhe(e,t){e("d",vd(null,t))}function Phe(e,t){var n,r;return fu(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function z8(e,t){e.beginPath(),vd(e,t)}var jhe={type:"rect",tag:"path",nested:!1,attr:Lhe,bound:Phe,draw:WF(z8),pick:HF(z8),isect:xz};function Ihe(e,t){e("transform",Az(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function zhe(e,t){var n,r;return fu(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Fz(e,t,n){var r,i,o,s;return t.stroke&&Sf(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function Uhe(e,t,n){bo(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Fz(e,r,i)&&(Cf(e,r),e.stroke())}})}function qhe(e,t,n,r){return e.isPointInStroke?Fz(e,t,1)&&e.isPointInStroke(n,r):!1}var Whe={type:"rule",tag:"line",nested:!1,attr:Ihe,bound:zhe,draw:Uhe,pick:E2(qhe),isect:rhe},Hhe=GF("shape",Kde),Yhe=GF("symbol",Zde,vz);const U8=Uae();var t0={height:Ns,measureWidth:JF,estimateWidth:VA,width:VA,canvas:kz};kz(!0);function kz(e){t0.width=e&&Ca?JF:VA}function VA(e,t){return Dz(Ya(e,t),Ns(e))}function Dz(e,t){return~~(.8*e.length*t)}function JF(e,t){return Ns(e)<=0||!(t=Ya(e,t))?0:Mz(t,QF(e))}function Mz(e,t){const n=`(${t}) ${e}`;let r=U8.get(n);return r===void 0&&(Ca.font=t,r=Ca.measureText(e).width,U8.set(n,r)),r}function Ns(e){return e.fontSize!=null?+e.fontSize||0:11}function Dl(e){return e.lineHeight!=null?e.lineHeight:Ns(e)+2}function Ghe(e){return Co(e)?e.length>1?e:e[0]:e}function hp(e){return Ghe(e.lineBreak&&e.text&&!Co(e.text)?e.text.split(e.lineBreak):e.text)}function Oz(e){const t=hp(e);return(Co(t)?t.length-1:0)*Dl(e)}function Ya(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Xhe(e,n):n}function Vhe(e){if(t0.width===JF){const t=QF(e);return n=>Mz(n,t)}else{const t=Ns(e);return n=>Dz(n,t)}}function Xhe(e,t){var n=+e.limit,r=Vhe(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,u;if(n-=r(i),o){for(;s<a;)u=s+a>>>1,r(t.slice(u))>n?s=u+1:a=u;return i+t.slice(s)}else{for(;s<a;)u=1+(s+a>>>1),r(t.slice(0,u))<n?s=u:a=u-1;return t.slice(0,s)+i}}function F2(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function QF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ns(e)+"px "+F2(e,t)}function e5(e){var t=e.baseline,n=Ns(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Dl(e):t==="line-bottom"?.29*n-.5*Dl(e):0)}const Khe={left:"start",center:"middle",right:"end"},n0=new Nr;function k2(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Vu,t+=r*Math.cos(i),n+=r*Math.sin(i)),n0.x1=t,n0.y1=n,n0}function Zhe(e,t){var n=t.dx||0,r=(t.dy||0)+e5(t),i=k2(t),o=i.x1,s=i.y1,a=t.angle||0,u;e("text-anchor",Khe[t.align]||"start"),a?(u=ml(o,s)+" "+YF(a),(n||r)&&(u+=" "+ml(n,r))):u=ml(o+n,s+r),e("transform",u)}function t5(e,t,n){var r=t0.height(t),i=t.align,o=k2(t),s=o.x1,a=o.y1,u=t.dx||0,l=(t.dy||0)+e5(t)-Math.round(.8*r),c=hp(t),f;if(Co(c)?(r+=Dl(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,t0.width(t,h)),0)):f=t0.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=s,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Ha,s,a);else if(n===2)return e.rotatedPoints(t.angle*Ha,s,a);return e}function Jhe(e,t,n){bo(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=QF(r),e.textAlign=r.align||"left",o=k2(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*Ha),s=a=0),s+=r.dx||0,a+=(r.dy||0)+e5(r),c=hp(r),Cf(e,r),Co(c))for(l=Dl(r),u=0;u<c.length;++u)f=Ya(r,c[u]),r.fill&&Ty(e,r,i)&&e.fillText(f,s,a),r.stroke&&Sf(e,r,i)&&e.strokeText(f,s,a),a+=l;else f=Ya(r,c),r.fill&&Ty(e,r,i)&&e.fillText(f,s,a),r.stroke&&Sf(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function Qhe(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=k2(t),a=s.x1,u=s.y1,l=t5(n0,t,1),c=-t.angle*Ha,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*u),g=d*i+f*o+(u-d*a-f*u);return l.contains(h,g)}function e0e(e,t){const n=t5(n0,e,2);return Bh(t,n[0],n[1],n[2],n[3])||Bh(t,n[0],n[1],n[4],n[5])||Bh(t,n[4],n[5],n[6],n[7])||Bh(t,n[2],n[3],n[6],n[7])}var t0e={type:"text",tag:"text",nested:!1,attr:Zhe,bound:t5,draw:Jhe,pick:E2(Qhe),isect:e0e},n0e=VF("trail",Jde,ghe),Ml={arc:fhe,area:phe,group:Fhe,image:Ohe,line:The,path:Bhe,rect:jhe,rule:Whe,shape:Hhe,symbol:Yhe,text:t0e,trail:n0e};function ol(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Tz(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Cr(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=ol(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function eo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Nz(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Rz(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function r0e(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Ml[i.marktype]).tip){for(s=Rz(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}function Ol(e,t){this._active=null,this._handlers={},this._loader=e||gI(),this._tooltip=t||i0e}function i0e(e,t,n,r){e.element().setAttribute("title",r||"")}Ol.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),o=ol(null,"a");for(const s in r)o.setAttribute(s,r[s]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=r0e(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),s=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:o,height:s,left:a,top:u,right:a+o,bottom:u+s}}};function Rs(e){this._el=null,this._bgcolor=null,this._loader=new yz(e)}Rs.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const o0e="keydown",s0e="keypress",a0e="keyup",Bz="dragenter",Fm="dragleave",Lz="dragover",XA="mousedown",u0e="mouseup",Ny="mousemove",r0="mouseout",Pz="mouseover",Ry="click",l0e="dblclick",c0e="wheel",jz="mousewheel",By="touchstart",Ly="touchmove",Py="touchend",f0e=[o0e,s0e,a0e,Bz,Fm,Lz,XA,u0e,Ny,r0,Pz,Ry,l0e,c0e,jz,By,Ly,Py],KA=Ny,og=r0,ZA=Ry;function d0e(e,t){Ol.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const h0e=e=>e===By||e===Ly||e===Py?[By,Ly,Py]:[e];function q8(e,t){h0e(t).forEach(n=>g0e(e,n))}function g0e(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function W8(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=o,this.fire(t,r),this.fire(e,r))}}function H8(e){return function(t){this.fire(e,t),this._active=null}}ii(d0e,Ol,{initialize(e,t,n){return this._canvas=e&&Tz(e,"canvas"),[Ry,XA,Ny,r0,Fm].forEach(r=>q8(this,r)),Ol.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:f0e,DOMMouseScroll(e){this.fire(jz,e)},mousemove:W8(Ny,Pz,r0),dragover:W8(Lz,Bz,Fm),mouseout:H8(r0),dragleave:H8(Fm),mousedown(e){this._down=this._active,this.fire(XA,e)},click(e){this._down===this._active&&(this.fire(Ry,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(By,e,!0)},touchmove(e){this.fire(Ly,e,!0)},touchend(e){this.fire(Py,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===ZA&&r&&r.href?this.handleHref(t,r,r.href):(e===KA||e===og)&&this.handleTooltip(t,r,e!==og),i)for(let o=0,s=i.length;o<s;++o)i[o].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(q8(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=Rz(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const o=this.context();return Ml[e.marktype].pick.call(this,o,e,t,n,r,i)}});function p0e(){return typeof window<"u"&&window.devicePixelRatio||1}var m0e=p0e();function y0e(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=s?m0e:i;e.width=t*u,e.height=n*u;for(const l in o)a[l]=o[l];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function b0e(e){Rs.call(this,e),this._options={},this._redraw=!1,this._dirty=new Nr,this._tempb=new Nr}const Y8=Rs.prototype,v0e=(e,t,n)=>new Nr().set(0,0,t,n).translate(-e[0],-e[1]);function x0e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}ii(b0e,Rs,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Ts(1,1,this._options.type),e&&this._canvas&&(eo(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Y8.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(Y8.resize.call(this,e,t,n,r),this._canvas)y0e(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||vs("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,s=v0e(n,r,i);t.save();const a=this._redraw||o.empty()?(this._redraw=!1,s.expand(1)):x0e(t,s.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),o.clear(),this},draw(e,t,n){const r=Ml[t.marktype];t.clip&&mhe(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function _0e(e,t){Ol.call(this,e,t);const n=this;n._hrefHandler=JA(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=JA(n,(r,i)=>{n.handleTooltip(r,i,r.type!==og)})}const JA=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ii(_0e,Ol,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(ZA,this._hrefHandler),r.removeEventListener(KA,this._tooltipHandler),r.removeEventListener(og,this._tooltipHandler)),this._svg=r=e&&Tz(e,"svg"),r&&(r.addEventListener(ZA,this._hrefHandler),r.addEventListener(KA,this._tooltipHandler),r.addEventListener(og,this._tooltipHandler)),Ol.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const o={type:e,handler:t,listener:JA(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const Iz="aria-hidden",n5="aria-label",r5="role",i5="aria-roledescription",zz="graphics-object",o5="graphics-symbol",Uz=(e,t,n)=>({[r5]:e,[i5]:t,[n5]:n||void 0}),$0e=Rj(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),G8={axis:{desc:"axis",caption:E0e},legend:{desc:"legend",caption:C0e},"title-text":{desc:"title",caption:e=>`Title text '${X8(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${X8(e)}'`}},V8={ariaRole:r5,ariaRoleDescription:i5,description:n5};function qz(e,t){const n=t.aria===!1;if(e(Iz,n||void 0),n||t.description==null)for(const r in V8)e(V8[r],void 0);else{const r=t.mark.marktype;e(n5,t.description),e(r5,t.ariaRole||(r==="group"?zz:o5)),e(i5,t.ariaRoleDescription||`${r} mark`)}}function Wz(e){return e.aria===!1?{[Iz]:!0}:$0e[e.role]?null:G8[e.role]?A0e(e,G8[e.role]):w0e(e)}function w0e(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return Uz(n?zz:o5,`${t} mark container`,e.description)}function A0e(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return Uz(t.role||o5,t.desc,n.description||r(n))}catch{return null}}function X8(e){return iF(e.text).join(" ")}function E0e(e){const t=e.datum,n=e.orient,r=t.title?Hz(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${oz(a)?"discrete":a} scale with ${fz(s,o,e)}`}function C0e(e){const t=e.datum,n=t.title?Hz(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,u=s.dataflow.locale();return F0e(r)+(n?` titled '${n}'`:"")+` for ${S0e(o)} with ${fz(u,a,e)}`}function Hz(e){try{return iF(oo(e.items).items[0].text).join(" ")}catch{return null}}function S0e(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+oo(e)}function F0e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const Yz=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),k0e=e=>Yz(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Gz(){let e="",t="",n="";const r=[],i=()=>t=n="",o=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},s=(u,l)=>(l!=null&&(t+=` ${u}="${k0e(l)}"`),a),a={open(u){o(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:s,text:u=>(n+=Yz(u),a),toString:()=>e};return a}const D0e=e=>Vz(Gz(),e)+"";function Vz(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):Vz(e,r)}return e.close()}const jy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Iy={blend:"mix-blend-mode"},Xz={fill:"none","stroke-miterlimit":10},oh=0,K8="http://www.w3.org/2000/xmlns/",Ft=ig.xmlns;function M0e(e){Rs.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const D$=Rs.prototype;ii(M0e,Rs,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Cr(e,0,"svg",Ft),this._svg.setAttributeNS(K8,"xmlns",Ft),this._svg.setAttributeNS(K8,"xmlns:xlink",ig["xmlns:xlink"]),this._svg.setAttribute("version",ig.version),this._svg.setAttribute("class","marks"),eo(e,1),this._root=Cr(this._svg,oh,"g",Ft),la(this._root,Xz),eo(this._svg,oh+1)),this.background(this._bgcolor),D$.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),D$.background.apply(this,arguments)},resize(e,t,n,r){return D$.resize.call(this,e,t,n,r),this._svg&&(la(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Cr(e,oh,"rect",Ft),la(n,{width:this._width,height:this._height,fill:t}));const r=D0e(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),eo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,s,a,u;for(s=0,a=e.length;s<a;++s)if(n=e[s],r=n.mark,r.marktype!==i&&(i=r.marktype,o=Ml[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,Z8(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,Z8(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=Ml[t.marktype],o=t.interactive===!1?"none":null,s=i.tag==="g",a=J8(t,e,n,"g",r);a.setAttribute("class",Nz(t));const u=Wz(t);for(const d in u)Nn(a,d,u[d]);s||Nn(a,"pointer-events",o),Nn(a,"clip-path",t.clip?UF(this,t,t.group):null);let l=null,c=0;const f=d=>{const h=this.isDirty(d),g=J8(d,a,l,i.tag,r);h&&(this._update(i,g,d),s&&N0e(this,g,d)),l=g,++c};return i.nested?t.items.length&&f(t.items[0]):bo(t,f),eo(a,c),a},_update(e,t,n){ds=t,pn=t.__values__,qz(i0,n),e.attr(i0,n,this);const r=B0e[e.type];r&&r.call(this,e,t,n),ds&&this.style(ds,n)},style(e,t){if(t!=null){for(const n in jy){let r=n==="font"?F2(t):t[n];if(r===pn[n])continue;const i=jy[n];r==null?e.removeAttribute(i):(IF(r)&&(r=dz(r,this._defs.gradient,Kz())),e.setAttribute(i,r+"")),pn[n]=r}for(const n in Iy)km(e,Iy[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Cr(e,oh+1,"defs",Ft)),r=O0e(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Cr(e,oh+1,"defs",Ft)),r=T0e(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):eo(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function Z8(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function O0e(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=Cr(e,n++,"pattern",Ft);la(s,{id:Oy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=Cr(s,0,"rect",Ft),la(s,{width:1,height:1,fill:`url(${Kz()}#${t.id})`}),e=Cr(e,n++,"radialGradient",Ft),la(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Cr(e,n++,"linearGradient",Ft),la(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=Cr(e,r,"stop",Ft),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return eo(e,r),n}function T0e(e,t,n){let r;return e=Cr(e,n,"clipPath",Ft),e.setAttribute("id",t.id),t.path?(r=Cr(e,0,"path",Ft),r.setAttribute("d",t.path)):(r=Cr(e,0,"rect",Ft),la(r,{x:0,y:0,width:t.width,height:t.height})),eo(e,1),n+1}function N0e(e,t,n){t=t.lastChild.previousSibling;let r,i=0;bo(n,o=>{r=e.mark(t,o,r),++i}),eo(t,1+i)}function J8(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=ol(s,r,Ft),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=ol(s,"path",Ft);o.appendChild(a),a.__data__=e;const u=ol(s,"g",Ft);o.appendChild(u),u.__data__=e;const l=ol(s,"path",Ft);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||R0e(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function R0e(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let ds=null,pn=null;const B0e={group(e,t,n){const r=ds=t.childNodes[2];pn=r.__values__,e.foreground(i0,n,this),pn=t.__values__,ds=t.childNodes[1],e.content(i0,n,this);const i=ds=t.childNodes[0];e.background(i0,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==pn.events&&(Nn(r,"pointer-events",o),Nn(i,"pointer-events",o),pn.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Nn(r,"display",null),this.style(i,n),Nn(i,"stroke",null),s&&(n.fill=null),pn=r.__values__,this.style(r,n),s&&(n.fill=s),ds=null}else Nn(r,"display","none")},image(e,t,n){n.smooth===!1?(km(t,"image-rendering","optimizeSpeed"),km(t,"image-rendering","pixelated")):km(t,"image-rendering",null)},text(e,t,n){const r=hp(n);let i,o,s,a;Co(r)?(o=r.map(u=>Ya(n,u)),i=o.join(`
`),i!==pn.text&&(eo(t,0),s=t.ownerDocument,a=Dl(n),o.forEach((u,l)=>{const c=ol(s,"tspan",Ft);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),pn.text=i)):(o=Ya(n,r),o!==pn.text&&(t.textContent=o,pn.text=o)),Nn(t,"font-family",F2(n)),Nn(t,"font-size",Ns(n)+"px"),Nn(t,"font-style",n.fontStyle),Nn(t,"font-variant",n.fontVariant),Nn(t,"font-weight",n.fontWeight)}};function i0(e,t,n){t!==pn[e]&&(n?L0e(ds,e,t,n):Nn(ds,e,t),pn[e]=t)}function km(e,t,n){n!==pn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),pn[t]=n)}function la(e,t){for(const n in t)Nn(e,n,t[n])}function Nn(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function L0e(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Kz(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function P0e(e){Rs.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ii(P0e,Rs,{svg(){return this._text},_render(e){const t=Gz();t.open("svg",r2({},ig,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Xz,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Ml[t.marktype],r=n.tag,i=[qz,n.attr];e.open("g",{class:Nz(t),"clip-path":t.clip?UF(this,t,t.group):null},Wz(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const o=s=>{const a=this.href(s);if(a&&e.open("a",a),e.open(r,this.attr(t,s,i,r!=="g"?r:null)),r==="text"){const u=hp(s);if(Co(u)){const l={x:0,dy:Dl(s)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(Ya(s,u[c])).close()}else e.text(Ya(s,u))}else if(r==="g"){const u=s.strokeForeground,l=s.fill,c=s.stroke;u&&c&&(s.stroke=null),e.open("path",this.attr(t,s,n.background,"bgrect")).close(),e.open("g",this.attr(t,s,n.content)),bo(s,f=>this.mark(e,f)),e.close(),u&&c?(l&&(s.fill=null),s.stroke=c,e.open("path",this.attr(t,s,n.foreground,"bgrect")).close(),l&&(s.fill=l)):e.open("path",this.attr(t,s,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):bo(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},o=(s,a,u,l)=>{i[l||s]=a};return Array.isArray(n)?n.forEach(s=>s(o,t,this)):n(o,t,this),r&&j0e(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const o=t[i],s=o.stops;o.gradient==="radial"?(e.open("pattern",{id:Oy+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let a=0;a<s.length;++a)e.open("stop",{offset:s[a].offset,"stop-color":s[a].color}).close();e.close()}for(const i in n){const o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function j0e(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=F2(t),e["font-size"]=Ns(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in jy){let a=t[s];const u=jy[s];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(IF(a)&&(a=dz(a,i.gradient,"")),e[u]=a)}for(const s in Iy){const a=t[s];a!=null&&(o=o||[],o.push(`${Iy[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const M$=new Nr;function I0e(e){const t=e.clip;if(n2(t))t(A2(M$.clear()));else if(t)M$.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(M$)}const Ff="top",bi="left",_i="right",Ga="bottom",z0e="top-left",U0e="top-right",q0e="bottom-left",W0e="bottom-right",s5="start",QA="middle",Bn="end",H0e="x",Y0e="y",D2="group",a5="axis",u5="title",G0e="frame",V0e="scope",l5="legend",Zz="row-header",Jz="row-footer",Qz="row-title",eU="column-header",tU="column-footer",nU="column-title",X0e="padding",K0e="symbol",rU="fit",iU="fit-x",oU="fit-y",Z0e="pad",c5="none",O1="all",eE="each",f5="flush",ca="column",fa="row";function sU(e){L.call(this,null,e)}ii(sU,L,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Ml[i],s=o.bound;let a=r.bounds,u;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=T1(r,s),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===D2||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(T1(l,s))),r.role){case a5:case l5:case u5:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(T1(l,s))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(T1(l,s))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return I0e(r),t.modifies("bounds")}});function T1(e,t,n){return t(e.bounds.clear(),e,n)}const Q8=":vega_identifier:";function d5(e){L.call(this,0,e)}d5.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ii(d5,L,{transform(e,t){const n=J0e(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function J0e(e){return e._signals[Q8]||(e._signals[Q8]=e.add(0))}function aU(e){L.call(this,null,e)}ii(aU,L,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Q0e(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===D2?mz:qF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Q0e(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function uU(e){L.call(this,null,e)}const e7={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!lU(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},lU=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),t7=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(lU(i,o=e[n].bounds,t))return!0},ege=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},tge=(e,t,n)=>{var r=e.range(),i=new Nr;return t===Ff||t===Ga?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},n7=e=>(e.forEach(t=>t.opacity=1),e),r7=(e,t)=>e.reflow(t.modified()).modifies("opacity");ii(uU,L,{transform(e,t){const n=e7[e.method]||e7.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(n7(i),t=r7(t,e)),t;if(i=i.filter(ege),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=n7(i),t=r7(t,e),o.length>=3&&t7(o,r)){do o=n(o,r);while(o.length>=3&&t7(o,r));o.length<3&&!oo(i).opacity&&(o.length>1&&(oo(o).opacity=0),oo(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=tge(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{s(u)||(u.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function cU(e){L.call(this,null,e)}ii(cU,L,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const hn=new Nr;function Xc(e,t,n){return e[t]===n?0:(e[t]=n,1)}function nge(e){var t=e.items[0].orient;return t===bi||t===_i}function rge(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function ige(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,u=rge(o),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,g=o.title&&i.items[u[2]].items[0],p=i.titlePadding,m=i.bounds,y=g&&Oz(g),b=0,x=0,v,_;switch(hn.clear().union(m),m.clear(),(v=u[0])>-1&&m.union(i.items[v].bounds),(v=u[1])>-1&&m.union(i.items[v].bounds),a){case Ff:b=f||0,x=-c,_=Math.max(d,Math.min(h,-m.y1)),m.add(0,-_).add(l,0),g&&N1(e,g,_,p,y,0,-1,m);break;case bi:b=-c,x=f||0,_=Math.max(d,Math.min(h,-m.x1)),m.add(-_,0).add(0,l),g&&N1(e,g,_,p,y,1,-1,m);break;case _i:b=n+c,x=f||0,_=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(_,l),g&&N1(e,g,_,p,y,1,1,m);break;case Ga:b=f||0,x=r+c,_=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(l,_),g&&N1(e,g,_,p,0,0,1,m);break;default:b=i.x,x=i.y}return fu(m.translate(b,x),i),Xc(i,"x",b+s)|Xc(i,"y",x+s)&&(i.bounds=hn,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function N1(e,t,n,r,i,o,s,a){const u=t.bounds;if(t.auto){const l=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const i7=(e,t)=>Math.floor(Math.min(e,t)),o7=(e,t)=>Math.ceil(Math.max(e,t));function oge(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===D2)switch(i.role){case a5:case l5:case u5:break;case Zz:s.rowheaders.push(...o);break;case Jz:s.rowfooters.push(...o);break;case eU:s.colheaders.push(...o);break;case tU:s.colfooters.push(...o);break;case Qz:s.rowtitle=o[0];break;case nU:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function sge(e){return new Nr().set(0,0,e.width||0,e.height||0)}function age(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function lt(e,t,n){const r=rF(e)?e[t]:e;return r??(n!==void 0?n:0)}function s7(e){return e<0?Math.ceil(-e):0}function fU(e,t,n){var r=!n.nodirty,i=n.bounds===f5?sge:age,o=hn.set(0,0,0,0),s=lt(n.align,ca),a=lt(n.align,fa),u=lt(n.padding,ca),l=lt(n.padding,fa),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),g=Array(c),p=0,m=Array(d),y=Array(f),b=0,x=Array(d),v=Array(d),_=Array(d),w,$,A,M,k,C,N,E,D,F,O;for($=0;$<c;++$)g[$]=0;for($=0;$<f;++$)y[$]=0;for($=0;$<d;++$)C=t[$],k=_[$]=i(C),C.x=C.x||0,x[$]=0,C.y=C.y||0,v[$]=0,A=$%c,M=~~($/c),p=Math.max(p,N=Math.ceil(k.x2)),b=Math.max(b,E=Math.ceil(k.y2)),g[A]=Math.max(g[A],N),y[M]=Math.max(y[M],E),h[$]=u+s7(k.x1),m[$]=l+s7(k.y1),r&&e.dirty(t[$]);for($=0;$<d;++$)$%c===0&&(h[$]=0),$<c&&(m[$]=0);if(s===eE)for(A=1;A<c;++A){for(O=0,$=A;$<d;$+=c)O<h[$]&&(O=h[$]);for($=A;$<d;$+=c)h[$]=O+g[A-1]}else if(s===O1){for(O=0,$=0;$<d;++$)$%c&&O<h[$]&&(O=h[$]);for($=0;$<d;++$)$%c&&(h[$]=O+p)}else for(s=!1,A=1;A<c;++A)for($=A;$<d;$+=c)h[$]+=g[A-1];if(a===eE)for(M=1;M<f;++M){for(O=0,$=M*c,w=$+c;$<w;++$)O<m[$]&&(O=m[$]);for($=M*c;$<w;++$)m[$]=O+y[M-1]}else if(a===O1){for(O=0,$=c;$<d;++$)O<m[$]&&(O=m[$]);for($=c;$<d;++$)m[$]=O+b}else for(a=!1,M=1;M<f;++M)for($=M*c,w=$+c;$<w;++$)m[$]+=y[M-1];for(D=0,$=0;$<d;++$)D=h[$]+($%c?D:0),x[$]+=D-t[$].x;for(A=0;A<c;++A)for(F=0,$=A;$<d;$+=c)F+=m[$],v[$]+=F-t[$].y;if(s&&lt(n.center,ca)&&f>1)for($=0;$<d;++$)k=s===O1?p:g[$%c],D=k-_[$].x2-t[$].x-x[$],D>0&&(x[$]+=D/2);if(a&&lt(n.center,fa)&&c!==1)for($=0;$<d;++$)k=a===O1?b:y[~~($/c)],F=k-_[$].y2-t[$].y-v[$],F>0&&(v[$]+=F/2);for($=0;$<d;++$)o.union(_[$].translate(x[$],v[$]));switch(D=lt(n.anchor,H0e),F=lt(n.anchor,Y0e),lt(n.anchor,ca)){case Bn:D-=o.width();break;case QA:D-=o.width()/2}switch(lt(n.anchor,fa)){case Bn:F-=o.height();break;case QA:F-=o.height()/2}for(D=Math.round(D),F=Math.round(F),o.clear(),$=0;$<d;++$)t[$].mark.bounds.clear();for($=0;$<d;++$)C=t[$],C.x+=x[$]+=D,C.y+=v[$]+=F,o.union(C.mark.bounds.union(C.bounds.translate(x[$],v[$]))),r&&e.dirty(C);return o}function uge(e,t,n){var r=oge(t),i=r.marks,o=n.bounds===f5?lge:cge,s=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,g,p,m;const y=fU(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(p=lt(n.headerBand,fa,null),c=R1(e,r.rowheaders,i,a,u,-lt(s,"rowHeader"),i7,0,o,"x1",0,a,1,p)),r.colheaders&&(p=lt(n.headerBand,ca,null),f=R1(e,r.colheaders,i,a,a,-lt(s,"columnHeader"),i7,1,o,"y1",0,1,a,p)),r.rowfooters&&(p=lt(n.footerBand,fa,null),d=R1(e,r.rowfooters,i,a,u,lt(s,"rowFooter"),o7,0,o,"x2",a-1,a,1,p)),r.colfooters&&(p=lt(n.footerBand,ca,null),h=R1(e,r.colfooters,i,a,a,lt(s,"columnFooter"),o7,1,o,"y2",l-a,1,a,p)),r.rowtitle&&(g=lt(n.titleAnchor,fa),m=lt(s,"rowTitle"),m=g===Bn?d+m:c-m,p=lt(n.titleBand,fa,.5),a7(e,r.rowtitle,m,0,y,p)),r.coltitle&&(g=lt(n.titleAnchor,ca),m=lt(s,"columnTitle"),m=g===Bn?h+m:f-m,p=lt(n.titleBand,ca,.5),a7(e,r.coltitle,m,1,y,p))}function lge(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function cge(e,t){return e.bounds[t]}function R1(e,t,n,r,i,o,s,a,u,l,c,f,d,h){var g=n.length,p=0,m=0,y,b,x,v,_,w,$,A,M;if(!g)return p;for(y=c;y<g;y+=f)n[y]&&(p=s(p,u(n[y],l)));if(!t.length)return p;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),p+=o,b=0,v=t.length;b<v;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(y=c,b=0,v=t.length;b<v;++b,y+=f){for(w=t[b],_=w.mark.bounds,x=y;x>=0&&($=n[x])==null;x-=d);a?(A=h==null?$.x:Math.round($.bounds.x1+h*$.bounds.width()),M=p):(A=p,M=h==null?$.y:Math.round($.bounds.y1+h*$.bounds.height())),_.union(w.bounds.translate(A-(w.x||0),M-(w.y||0))),w.x=A,w.y=M,e.dirty(w),m=s(m,_[l])}return m}function a7(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function fge(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function dge(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function hge(e,t,n,r,i,o,s){const a=fge(n,t),u=dge(e,a("offset",0)),l=a("anchor",s5),c=l===Bn?1:l===QA?.5:0,f={align:eE,bounds:a("bounds",f5),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case bi:f.anchor={x:Math.floor(r.x1)-u,column:Bn,y:c*(s||r.height()+2*r.y1),row:l};break;case _i:f.anchor={x:Math.ceil(r.x2)+u,y:c*(s||r.height()+2*r.y1),row:l};break;case Ff:f.anchor={y:Math.floor(i.y1)-u,row:Bn,x:c*(o||i.width()+2*i.x1),column:l};break;case Ga:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case z0e:f.anchor={x:u,y:u};break;case U0e:f.anchor={x:o-u,y:u,column:Bn};break;case q0e:f.anchor={x:u,y:s-u,row:Bn};break;case W0e:f.anchor={x:o-u,y:s-u,column:Bn,row:Bn};break}return f}function gge(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),mge(e,n,n.items[0].items[0]),o=pge(n,o),u=2*n.padding,l=2*n.padding,o.empty()||(u=Math.ceil(o.width()+u),l=Math.ceil(o.height()+l)),r.type===K0e&&yge(n.items[0].items[0].items[0].items),i!==c5&&(n.x=s=0,n.y=a=0),n.width=u,n.height=l,fu(o.set(s,a,s+u,a+l),n),n.mark.bounds.clear().union(o),n}function pge(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function mge(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&sh(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,u=t.titlePadding||0,l=r-s.x,c=r-s.y;switch(s.orient){case bi:i+=Math.ceil(s.bounds.width())+u;break;case _i:case Ga:break;default:o+=s.bounds.height()+u}switch((i||o)&&sh(e,n,i,o),s.orient){case bi:c+=Lc(t,n,s,a,1,1);break;case _i:l+=Lc(t,n,s,Bn,0,0)+u,c+=Lc(t,n,s,a,1,1);break;case Ga:l+=Lc(t,n,s,a,0,0),c+=Lc(t,n,s,Bn,-1,0,1)+u;break;default:l+=Lc(t,n,s,a,0,0)}(l||c)&&sh(e,s,l,c),(l=Math.round(s.bounds.x1-r))<0&&(sh(e,n,-l,0),sh(e,s,-l,0))}}function Lc(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(o||!u)&&!s?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&o?c:0,d=u&&o?0:c,h=i<=0?0:Oz(n);return Math.round(r===s5?f:r===Bn?d-h:.5*(c-h))}function sh(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function yge(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function bge(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,u=o.anchor,l=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===bi||a===_i?r:n,g=0,p=0,m=0,y=0,b=0,x;if(s!==D2?a===bi?(g=i.y2,h=i.y1):a===_i?(g=i.y1,h=i.y2):(g=i.x1,h=i.x2):a===bi&&(g=r,h=0),x=u===s5?g:u===Bn?h:(g+h)/2,d&&d.text){switch(a){case Ff:case Ga:b=f.bounds.height()+c;break;case bi:y=f.bounds.width()+c;break;case _i:y=-f.bounds.width()-c;break}hn.clear().union(d.bounds),hn.translate(y-(d.x||0),b-(d.y||0)),Xc(d,"x",y)|Xc(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(hn),d.mark.bounds.clear().union(hn),e.dirty(d)),hn.clear().union(d.bounds)}else hn.clear();switch(hn.union(f.bounds),a){case Ff:p=x,m=i.y1-hn.height()-l;break;case bi:p=i.x1-hn.width()-l,m=x;break;case _i:p=i.x2+hn.width()+l,m=x;break;case Ga:p=x,m=i.y2+l;break;default:p=o.x,m=o.y}return Xc(o,"x",p)|Xc(o,"y",m)&&(hn.translate(p,m),e.dirty(o),o.bounds.clear().union(hn),t.bounds.clear().union(hn),e.dirty(o)),o.bounds}function dU(e){L.call(this,null,e)}ii(dU,L,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&uge(n,r,e.layout),xge(n,r,e)}),vge(e.mark.group)?t.reflow():t}});function vge(e){return e&&e.mark.role!=="legend-entry"}function xge(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new Nr().set(0,0,i,o),a=s.clone(),u=s.clone(),l=[],c,f,d,h,g,p;for(g=0,p=r.length;g<p;++g)switch(f=r[g],f.role){case a5:h=nge(f)?a:u,h.union(ige(e,f,i,o));break;case u5:c=f;break;case l5:l.push(gge(e,f));break;case G0e:case V0e:case Zz:case Jz:case Qz:case eU:case tU:case nU:a.union(f.bounds),u.union(f.bounds);break;default:s.union(f.bounds)}if(l.length){const m={};l.forEach(y=>{d=y.orient||_i,d!==c5&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const b=m[y];fU(e,b,hge(b,y,n.legends,a,u,i,o))}l.forEach(y=>{const b=y.bounds;if(b.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=b,e.dirty(y)),n.autosize&&(n.autosize.type===rU||n.autosize.type===iU||n.autosize.type===oU))switch(y.orient){case bi:case _i:s.add(b.x1,0).add(b.x2,0);break;case Ff:case Ga:s.add(0,b.y1).add(0,b.y2)}else s.union(b)})}s.union(a).union(u),c&&s.union(bge(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),_ge(e,t,s,n)}function _ge(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===X0e){const g=e.padding();s-=g.left+g.right,a-=g.top+g.bottom}o===c5?(l=0,f=0,u=s,c=a):o===rU?(u=Math.max(0,s-l-d),c=Math.max(0,a-f-h)):o===iU?(u=Math.max(0,s-l-d),a=c+f+h):o===oU?(s=u+l+d,c=Math.max(0,a-f-h)):o===Z0e&&(s=u+l+d,a=c+f+h),e._resizeView(s,a,u,c,[l,f],i.resize)}const $ge=Object.freeze(Object.defineProperty({__proto__:null,bound:sU,identifier:d5,mark:aU,overlap:uU,render:cU,viewlayout:dU},Symbol.toStringTag,{value:"Module"}));function Fo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function du(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tE=Symbol("implicit");function h5(){var e=new Map,t=[],n=[],r=tE;function i(o){var s=o+"",a=e.get(s);if(!a){if(r!==tE)return r;e.set(s,a=t.push(o))}return n[(a-1)%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Map;for(const s of o){const a=s+"";e.has(a)||e.set(a,t.push(s))}return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return h5(t,n).unknown(r)},Fo.apply(i,arguments),i}function hU(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function gU(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return hU((n-r/t)*t,s,i,o,a)}}function pU(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return hU((n-r/t)*t,i,o,s,a)}}const M2=e=>()=>e;function mU(e,t){return function(n){return e+n*t}}function wge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function O2(e,t){var n=t-e;return n?mU(e,n>180||n<-180?n-360*Math.round(n/360):n):M2(isNaN(e)?t:e)}function Age(e){return(e=+e)==1?It:function(t,n){return n-t?wge(t,n,e):M2(isNaN(t)?n:t)}}function It(e,t){var n=t-e;return n?mU(e,n):M2(isNaN(e)?t:e)}const nE=function e(t){var n=Age(t);function r(i,o){var s=n((i=mr(i)).r,(o=mr(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=It(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function yU(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=mr(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=o(u),a+""}}}var Ege=yU(gU),Cge=yU(pU);function g5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function bU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Sge(e,t){return(bU(t)?g5:vU)(e,t)}function vU(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=hu(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function xU(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function pi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _U(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=hu(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var rE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O$=new RegExp(rE.source,"g");function Fge(e){return function(){return e}}function kge(e){return function(t){return e(t)+""}}function $U(e,t){var n=rE.lastIndex=O$.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=rE.exec(e))&&(i=O$.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:pi(r,i)})),n=O$.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?kge(u[0].x):Fge(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function hu(e,t){var n=typeof t,r;return t==null||n==="boolean"?M2(t):(n==="number"?pi:n==="string"?(r=Ss(t))?(t=r,nE):$U:t instanceof Ss?nE:t instanceof Date?xU:bU(t)?g5:Array.isArray(t)?vU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_U:pi)(e,t)}function Dge(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Mge(e,t){var n=O2(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function gp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var u7=180/Math.PI,iE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wU(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*u7,skewX:Math.atan(u)*u7,scaleX:s,scaleY:a}}var B1;function Oge(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?iE:wU(t.a,t.b,t.c,t.d,t.e,t.f)}function Tge(e){return e==null||(B1||(B1=document.createElementNS("http://www.w3.org/2000/svg","g")),B1.setAttribute("transform",e),!(e=B1.transform.baseVal.consolidate()))?iE:(e=e.matrix,wU(e.a,e.b,e.c,e.d,e.e,e.f))}function AU(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,h,g){if(l!==f||c!==d){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:pi(l,f)},{i:p-2,x:pi(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:pi(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:pi(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,g){if(l!==f||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");g.push({i:p-4,x:pi(l,f)},{i:p-2,x:pi(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),s(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var g=-1,p=d.length,m;++g<p;)f[(m=d[g]).i]=m.x(h);return f.join("")}}}var Nge=AU(Oge,"px, ","px)","deg)"),Rge=AU(Tge,", ",")",")"),Bge=1e-12;function l7(e){return((e=Math.exp(e))+1/e)/2}function Lge(e){return((e=Math.exp(e))-1/e)/2}function Pge(e){return((e=Math.exp(2*e))-1)/(e+1)}const jge=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],f=s[1],d=s[2],h=c-a,g=f-u,p=h*h+g*g,m,y;if(p<Bge)y=Math.log(d/l)/t,m=function($){return[a+$*h,u+$*g,l*Math.exp(t*$*y)]};else{var b=Math.sqrt(p),x=(d*d-l*l+r*p)/(2*l*n*b),v=(d*d-l*l-r*p)/(2*d*n*b),_=Math.log(Math.sqrt(x*x+1)-x),w=Math.log(Math.sqrt(v*v+1)-v);y=(w-_)/t,m=function($){var A=$*y,M=l7(_),k=l/(n*b)*(M*Pge(t*A+_)-Lge(_));return[a+k*h,u+k*g,l*M/l7(t*A+_)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);function EU(e){return function(t,n){var r=e((t=za(t)).h,(n=za(n)).h),i=It(t.s,n.s),o=It(t.l,n.l),s=It(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const Ige=EU(O2);var zge=EU(It);function Uge(e,t){var n=It((e=Ua(e)).l,(t=Ua(t)).l),r=It(e.a,t.a),i=It(e.b,t.b),o=It(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function CU(e){return function(t,n){var r=e((t=qa(t)).h,(n=qa(n)).h),i=It(t.c,n.c),o=It(t.l,n.l),s=It(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const qge=CU(O2);var Wge=CU(It);function SU(e){return function t(n){n=+n;function r(i,o){var s=e((i=kl(i)).h,(o=kl(o)).h),a=It(i.s,o.s),u=It(i.l,o.l),l=It(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Hge=SU(O2);var Yge=SU(It);function p5(e,t){t===void 0&&(t=e,e=hu);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Gge(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Vge=Object.freeze(Object.defineProperty({__proto__:null,interpolate:hu,interpolateArray:Sge,interpolateBasis:gU,interpolateBasisClosed:pU,interpolateCubehelix:Hge,interpolateCubehelixLong:Yge,interpolateDate:xU,interpolateDiscrete:Dge,interpolateHcl:qge,interpolateHclLong:Wge,interpolateHsl:Ige,interpolateHslLong:zge,interpolateHue:Mge,interpolateLab:Uge,interpolateNumber:pi,interpolateNumberArray:g5,interpolateObject:_U,interpolateRgb:nE,interpolateRgbBasis:Ege,interpolateRgbBasisClosed:Cge,interpolateRound:gp,interpolateString:$U,interpolateTransformCss:Nge,interpolateTransformSvg:Rge,interpolateZoom:jge,piecewise:p5,quantize:Gge},Symbol.toStringTag,{value:"Module"}));function Xge(e){return function(){return e}}function oE(e){return+e}var c7=[0,1];function fr(e){return e}function sE(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Xge(isNaN(t)?NaN:.5)}function Kge(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Zge(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=sE(i,r),o=n(s,o)):(r=sE(r,i),o=n(o,s)),function(a){return o(r(a))}}function Jge(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=sE(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=Zg(e,a,1,r)-1;return o[u](i[u](a))}}function pp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function T2(){var e=c7,t=c7,n=hu,r,i,o,s=fr,a,u,l;function c(){var d=Math.min(e.length,t.length);return s!==fr&&(s=Kge(e[0],e[d-1])),a=d>2?Jge:Zge,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((l||(l=a(t,e.map(r),pi)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,oE),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=gp,c()},f.clamp=function(d){return arguments.length?(s=d?!0:fr,c()):s!==fr},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function FU(){return T2()(fr,fr)}function zy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function kf(e){return e=zy(Math.abs(e)),e?e[1]:NaN}function Qge(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function epe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var tpe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tl(e){return new m5(e)}Tl.prototype=m5.prototype;function m5(e){if(!(t=tpe.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}m5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function npe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(r>0){if(!+e[n])break e;r=0}break}return r>0?e.slice(0,r)+e.slice(i+1):e}var kU;function rpe(e,t){var n=zy(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(kU=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+zy(e,Math.max(0,t+o-1))[0]}function f7(e,t){var n=zy(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const d7={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return f7(e*100,t)},r:f7,s:rpe,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function h7(e){return e}var g7=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function DU(e){var t=e.grouping&&e.thousands?Qge(e.grouping,e.thousands):h7,n=e.currency,r=e.decimal,i=e.numerals?epe(e.numerals):h7,o=e.percent||"%";function s(u){u=Tl(u);var l=u.fill,c=u.align,f=u.sign,d=u.symbol,h=u.zero,g=u.width,p=u.comma,m=u.precision,y=u.trim,b=u.type;b==="n"?(p=!0,b="g"):d7[b]||(m==null&&(m=12),y=!0,b="g"),(h||l==="0"&&c==="=")&&(h=!0,l="0",c="=");var x=d==="$"?n[0]:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",v=d==="$"?n[1]:/[%p]/.test(b)?o:"",_=d7[b],w=/[defgprs%]/.test(b);m=m==null?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));function $(A){var M=x,k=v,C,N,E;if(b==="c")k=_(A)+k,A="";else{A=+A;var D=A<0;if(A=_(Math.abs(A),m),y&&(A=npe(A)),D&&+A==0&&(D=!1),M=(D?f==="("?f:"-":f==="-"||f==="("?"":f)+M,k=(b==="s"?g7[8+kU/3]:"")+k+(D&&f==="("?")":""),w){for(C=-1,N=A.length;++C<N;)if(E=A.charCodeAt(C),48>E||E>57){k=(E===46?r+A.slice(C+1):A.slice(C))+k,A=A.slice(0,C);break}}}p&&!h&&(A=t(A,1/0));var F=M.length+A.length+k.length,O=F<g?new Array(g-F+1).join(l):"";switch(p&&h&&(A=t(O+A,O.length?g-k.length:1/0),O=""),c){case"<":A=M+A+k+O;break;case"=":A=M+O+A+k;break;case"^":A=O.slice(0,F=O.length>>1)+M+A+k+O.slice(F);break;default:A=O+M+A+k;break}return i(A)}return $.toString=function(){return u+""},$}function a(u,l){var c=s((u=Tl(u),u.type="f",u)),f=Math.max(-8,Math.min(8,Math.floor(kf(l)/3)))*3,d=Math.pow(10,-f),h=g7[8+f/3];return function(g){return c(d*g)+h}}return{format:s,formatPrefix:a}}var L1,xd,N2;MU({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function MU(e){return L1=DU(e),xd=L1.format,N2=L1.formatPrefix,L1}function y5(e){return Math.max(0,-kf(Math.abs(e)))}function b5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kf(t)/3)))*3-kf(Math.abs(e)))}function v5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,kf(t)-kf(e))+1}const ipe=Object.freeze(Object.defineProperty({__proto__:null,get format(){return xd},formatDefaultLocale:MU,formatLocale:DU,get formatPrefix(){return N2},formatSpecifier:Tl,precisionFixed:y5,precisionPrefix:b5,precisionRound:v5},Symbol.toStringTag,{value:"Module"}));function OU(e,t,n,r){var i=Ba(e,t,n),o;switch(r=Tl(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=b5(i,s))&&(r.precision=o),N2(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=v5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=y5(i))&&(r.precision=o-(r.type==="%")*2);break}}return xd(r)}function lc(e){var t=e.domain;return e.ticks=function(n){var r=t();return $A(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return OU(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=dP(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function TU(){var e=FU();return e.copy=function(){return pp(e,TU())},Fo.apply(e,arguments),lc(e)}function NU(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,oE),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return NU(e).unknown(t)},e=arguments.length?Array.from(e,oE):[0,1],lc(n)}function RU(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function p7(e){return Math.log(e)}function m7(e){return Math.exp(e)}function ope(e){return-Math.log(-e)}function spe(e){return-Math.exp(-e)}function ape(e){return isFinite(e)?+("1e"+e):e<0?0:e}function upe(e){return e===10?ape:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function lpe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function y7(e){return function(t){return-e(-t)}}function x5(e){var t=e(p7,m7),n=t.domain,r=10,i,o;function s(){return i=lpe(r),o=upe(r),n()[0]<0?(i=y7(i),o=y7(o),e(ope,spe)):e(p7,m7),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=function(a){var u=n(),l=u[0],c=u[u.length-1],f;(f=c<l)&&(d=l,l=c,c=d);var d=i(l),h=i(c),g,p,m,y=a==null?10:+a,b=[];if(!(r%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1,g=o(d);p<r;++p)if(m=g*p,!(m<l)){if(m>c)break;b.push(m)}}else for(;d<=h;++d)for(p=r-1,g=o(d);p>=1;--p)if(m=g*p,!(m<l)){if(m>c)break;b.push(m)}b.length*2<y&&(b=$A(l,c,y))}else b=$A(d,h,Math.min(h-d,y)).map(o);return f?b.reverse():b},t.tickFormat=function(a,u){if(u==null&&(u=r===10?".0e":","),typeof u!="function"&&(u=xd(u)),a===1/0)return u;a==null&&(a=10);var l=Math.max(1,r*a/t.ticks().length);return function(c){var f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=function(){return n(RU(n(),{floor:function(a){return o(Math.floor(i(a)))},ceil:function(a){return o(Math.ceil(i(a)))}}))},t}function BU(){var e=x5(T2()).domain([1,10]);return e.copy=function(){return pp(e,BU()).base(e.base())},Fo.apply(e,arguments),e}function b7(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function v7(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function _5(e){var t=1,n=e(b7(t),v7(t));return n.constant=function(r){return arguments.length?e(b7(t=+r),v7(t)):t},lc(n)}function LU(){var e=_5(T2());return e.copy=function(){return pp(e,LU()).constant(e.constant())},Fo.apply(e,arguments)}function x7(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cpe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fpe(e){return e<0?-e*e:e*e}function $5(e){var t=e(fr,fr),n=1;function r(){return n===1?e(fr,fr):n===.5?e(cpe,fpe):e(x7(n),x7(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},lc(t)}function w5(){var e=$5(T2());return e.copy=function(){return pp(e,w5()).exponent(e.exponent())},Fo.apply(e,arguments),e}function dpe(){return w5.apply(null,arguments).exponent(.5)}function PU(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=gP(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[Zg(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(cd),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return PU().domain(e).range(t).unknown(r)},Fo.apply(o,arguments)}function jU(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[Zg(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return jU().domain([e,t]).range(i).unknown(o)},Fo.apply(lc(s),arguments)}function IU(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Zg(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return IU().domain(e).range(t).unknown(n)},Fo.apply(i,arguments)}function T$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function N$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ah(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function zU(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,u=e.shortMonths,l=uh(i),c=lh(i),f=uh(o),d=lh(o),h=uh(s),g=lh(s),p=uh(a),m=lh(a),y=uh(u),b=lh(u),x={a:R,A:B,b:P,B:Z,c:null,d:C7,e:C7,f:Rpe,g:Hpe,G:Gpe,H:Ope,I:Tpe,j:Npe,L:UU,m:Bpe,M:Lpe,p:Q,q:fe,Q:k7,s:D7,S:Ppe,u:jpe,U:Ipe,V:zpe,w:Upe,W:qpe,x:null,X:null,y:Wpe,Y:Ype,Z:Vpe,"%":F7},v={a:we,A:de,b:Me,B:wt,c:null,d:S7,e:S7,f:Jpe,g:u1e,G:c1e,H:Xpe,I:Kpe,j:Zpe,L:WU,m:Qpe,M:e1e,p:On,q:ln,Q:k7,s:D7,S:t1e,u:n1e,U:r1e,V:i1e,w:o1e,W:s1e,x:null,X:null,y:a1e,Y:l1e,Z:f1e,"%":F7},_={a:k,A:C,b:N,B:E,c:D,d:A7,e:A7,f:Fpe,g:w7,G:$7,H:E7,I:E7,j:Ape,L:Spe,m:wpe,M:Epe,p:M,q:$pe,Q:Dpe,s:Mpe,S:Cpe,u:ype,U:bpe,V:vpe,w:mpe,W:xpe,x:F,X:O,y:w7,Y:$7,Z:_pe,"%":kpe};x.x=w(n,x),x.X=w(r,x),x.c=w(t,x),v.x=w(n,v),v.X=w(r,v),v.c=w(t,v);function w(T,U){return function(W){var S=[],ye=-1,K=0,xe=T.length,_e,dt,Ys;for(W instanceof Date||(W=new Date(+W));++ye<xe;)T.charCodeAt(ye)===37&&(S.push(T.slice(K,ye)),(dt=_7[_e=T.charAt(++ye)])!=null?_e=T.charAt(++ye):dt=_e==="e"?" ":"0",(Ys=U[_e])&&(_e=Ys(W,dt)),S.push(_e),K=ye+1);return S.push(T.slice(K,ye)),S.join("")}}function $(T,U){return function(W){var S=ah(1900,void 0,1),ye=A(S,T,W+="",0),K,xe;if(ye!=W.length)return null;if("Q"in S)return new Date(S.Q);if("s"in S)return new Date(S.s*1e3+("L"in S?S.L:0));if(U&&!("Z"in S)&&(S.Z=0),"p"in S&&(S.H=S.H%12+S.p*12),S.m===void 0&&(S.m="q"in S?S.q:0),"V"in S){if(S.V<1||S.V>53)return null;"w"in S||(S.w=1),"Z"in S?(K=N$(ah(S.y,0,1)),xe=K.getUTCDay(),K=xe>4||xe===0?yy.ceil(K):yy(K),K=Aa.offset(K,(S.V-1)*7),S.y=K.getUTCFullYear(),S.m=K.getUTCMonth(),S.d=K.getUTCDate()+(S.w+6)%7):(K=T$(ah(S.y,0,1)),xe=K.getDay(),K=xe>4||xe===0?py.ceil(K):py(K),K=wa.offset(K,(S.V-1)*7),S.y=K.getFullYear(),S.m=K.getMonth(),S.d=K.getDate()+(S.w+6)%7)}else("W"in S||"U"in S)&&("w"in S||(S.w="u"in S?S.u%7:"W"in S?1:0),xe="Z"in S?N$(ah(S.y,0,1)).getUTCDay():T$(ah(S.y,0,1)).getDay(),S.m=0,S.d="W"in S?(S.w+6)%7+S.W*7-(xe+5)%7:S.w+S.U*7-(xe+6)%7);return"Z"in S?(S.H+=S.Z/100|0,S.M+=S.Z%100,N$(S)):T$(S)}}function A(T,U,W,S){for(var ye=0,K=U.length,xe=W.length,_e,dt;ye<K;){if(S>=xe)return-1;if(_e=U.charCodeAt(ye++),_e===37){if(_e=U.charAt(ye++),dt=_[_e in _7?U.charAt(ye++):_e],!dt||(S=dt(T,W,S))<0)return-1}else if(_e!=W.charCodeAt(S++))return-1}return S}function M(T,U,W){var S=l.exec(U.slice(W));return S?(T.p=c.get(S[0].toLowerCase()),W+S[0].length):-1}function k(T,U,W){var S=h.exec(U.slice(W));return S?(T.w=g.get(S[0].toLowerCase()),W+S[0].length):-1}function C(T,U,W){var S=f.exec(U.slice(W));return S?(T.w=d.get(S[0].toLowerCase()),W+S[0].length):-1}function N(T,U,W){var S=y.exec(U.slice(W));return S?(T.m=b.get(S[0].toLowerCase()),W+S[0].length):-1}function E(T,U,W){var S=p.exec(U.slice(W));return S?(T.m=m.get(S[0].toLowerCase()),W+S[0].length):-1}function D(T,U,W){return A(T,t,U,W)}function F(T,U,W){return A(T,n,U,W)}function O(T,U,W){return A(T,r,U,W)}function R(T){return s[T.getDay()]}function B(T){return o[T.getDay()]}function P(T){return u[T.getMonth()]}function Z(T){return a[T.getMonth()]}function Q(T){return i[+(T.getHours()>=12)]}function fe(T){return 1+~~(T.getMonth()/3)}function we(T){return s[T.getUTCDay()]}function de(T){return o[T.getUTCDay()]}function Me(T){return u[T.getUTCMonth()]}function wt(T){return a[T.getUTCMonth()]}function On(T){return i[+(T.getUTCHours()>=12)]}function ln(T){return 1+~~(T.getUTCMonth()/3)}return{format:function(T){var U=w(T+="",x);return U.toString=function(){return T},U},parse:function(T){var U=$(T+="",!1);return U.toString=function(){return T},U},utcFormat:function(T){var U=w(T+="",v);return U.toString=function(){return T},U},utcParse:function(T){var U=$(T+="",!0);return U.toString=function(){return T},U}}}var _7={"-":"",_:" ",0:"0"},Jt=/^\s*\d+/,hpe=/^%/,gpe=/[\\^$*+?|[\]().{}]/g;function Ie(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function ppe(e){return e.replace(gpe,"\\$&")}function uh(e){return new RegExp("^(?:"+e.map(ppe).join("|")+")","i")}function lh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function mpe(e,t,n){var r=Jt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ype(e,t,n){var r=Jt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function bpe(e,t,n){var r=Jt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function vpe(e,t,n){var r=Jt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function xpe(e,t,n){var r=Jt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function $7(e,t,n){var r=Jt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function w7(e,t,n){var r=Jt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _pe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $pe(e,t,n){var r=Jt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function wpe(e,t,n){var r=Jt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function A7(e,t,n){var r=Jt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ape(e,t,n){var r=Jt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function E7(e,t,n){var r=Jt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Epe(e,t,n){var r=Jt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Cpe(e,t,n){var r=Jt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Spe(e,t,n){var r=Jt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Fpe(e,t,n){var r=Jt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function kpe(e,t,n){var r=hpe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Dpe(e,t,n){var r=Jt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Mpe(e,t,n){var r=Jt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function C7(e,t){return Ie(e.getDate(),t,2)}function Ope(e,t){return Ie(e.getHours(),t,2)}function Tpe(e,t){return Ie(e.getHours()%12||12,t,2)}function Npe(e,t){return Ie(1+wa.count(La(e),e),t,3)}function UU(e,t){return Ie(e.getMilliseconds(),t,3)}function Rpe(e,t){return UU(e,t)+"000"}function Bpe(e,t){return Ie(e.getMonth()+1,t,2)}function Lpe(e,t){return Ie(e.getMinutes(),t,2)}function Ppe(e,t){return Ie(e.getSeconds(),t,2)}function jpe(e){var t=e.getDay();return t===0?7:t}function Ipe(e,t){return Ie(dd.count(La(e)-1,e),t,2)}function qU(e){var t=e.getDay();return t>=4||t===0?yf(e):yf.ceil(e)}function zpe(e,t){return e=qU(e),Ie(yf.count(La(e),e)+(La(e).getDay()===4),t,2)}function Upe(e){return e.getDay()}function qpe(e,t){return Ie(py.count(La(e)-1,e),t,2)}function Wpe(e,t){return Ie(e.getFullYear()%100,t,2)}function Hpe(e,t){return e=qU(e),Ie(e.getFullYear()%100,t,2)}function Ype(e,t){return Ie(e.getFullYear()%1e4,t,4)}function Gpe(e,t){var n=e.getDay();return e=n>=4||n===0?yf(e):yf.ceil(e),Ie(e.getFullYear()%1e4,t,4)}function Vpe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ie(t/60|0,"0",2)+Ie(t%60,"0",2)}function S7(e,t){return Ie(e.getUTCDate(),t,2)}function Xpe(e,t){return Ie(e.getUTCHours(),t,2)}function Kpe(e,t){return Ie(e.getUTCHours()%12||12,t,2)}function Zpe(e,t){return Ie(1+Aa.count(Pa(e),e),t,3)}function WU(e,t){return Ie(e.getUTCMilliseconds(),t,3)}function Jpe(e,t){return WU(e,t)+"000"}function Qpe(e,t){return Ie(e.getUTCMonth()+1,t,2)}function e1e(e,t){return Ie(e.getUTCMinutes(),t,2)}function t1e(e,t){return Ie(e.getUTCSeconds(),t,2)}function n1e(e){var t=e.getUTCDay();return t===0?7:t}function r1e(e,t){return Ie(hd.count(Pa(e)-1,e),t,2)}function HU(e){var t=e.getUTCDay();return t>=4||t===0?bf(e):bf.ceil(e)}function i1e(e,t){return e=HU(e),Ie(bf.count(Pa(e),e)+(Pa(e).getUTCDay()===4),t,2)}function o1e(e){return e.getUTCDay()}function s1e(e,t){return Ie(yy.count(Pa(e)-1,e),t,2)}function a1e(e,t){return Ie(e.getUTCFullYear()%100,t,2)}function u1e(e,t){return e=HU(e),Ie(e.getUTCFullYear()%100,t,2)}function l1e(e,t){return Ie(e.getUTCFullYear()%1e4,t,4)}function c1e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?bf(e):bf.ceil(e),Ie(e.getUTCFullYear()%1e4,t,4)}function f1e(){return"+0000"}function F7(){return"%"}function k7(e){return+e}function D7(e){return Math.floor(+e/1e3)}var Pc,R2,YU,B2,GU;d1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function d1e(e){return Pc=zU(e),R2=Pc.format,YU=Pc.parse,B2=Pc.utcFormat,GU=Pc.utcParse,Pc}function h1e(e){return new Date(e)}function g1e(e){return e instanceof Date?+e:+new Date(+e)}function A5(e,t,n,r,i,o,s,a,u,l){var c=FU(),f=c.invert,d=c.domain,h=l(".%L"),g=l(":%S"),p=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),b=l("%b %d"),x=l("%B"),v=l("%Y");function _(w){return(u(w)<w?h:a(w)<w?g:s(w)<w?p:o(w)<w?m:r(w)<w?i(w)<w?y:b:n(w)<w?x:v)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?d(Array.from(w,g1e)):d().map(h1e)},c.ticks=function(w){var $=d();return e($[0],$[$.length-1],w??10)},c.tickFormat=function(w,$){return $==null?_:l($)},c.nice=function(w){var $=d();return(!w||typeof w.range!="function")&&(w=t($[0],$[$.length-1],w??10)),w?d(RU($,w)):c},c.copy=function(){return pp(c,A5(e,t,n,r,i,o,s,a,u,l))},c}function p1e(){return Fo.apply(A5(Tse,Nse,La,my,dd,wa,AS,wS,aa,R2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function m1e(){return Fo.apply(A5(Mse,Ose,Pa,by,hd,Aa,SS,CS,aa,B2).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function L2(){var e=0,t=1,n,r,i,o,s=fr,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(s=f,l):s};function c(f){return function(d){var h,g;return arguments.length?([h,g]=d,s=f(h,g),l):[s(0),s(1)]}}return l.range=c(hu),l.rangeRound=c(gp),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function gu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function E5(){var e=lc(L2()(fr));return e.copy=function(){return gu(e,E5())},du.apply(e,arguments)}function VU(){var e=x5(L2()).domain([1,10]);return e.copy=function(){return gu(e,VU()).base(e.base())},du.apply(e,arguments)}function XU(){var e=_5(L2());return e.copy=function(){return gu(e,XU()).constant(e.constant())},du.apply(e,arguments)}function C5(){var e=$5(L2());return e.copy=function(){return gu(e,C5()).exponent(e.exponent())},du.apply(e,arguments)}function y1e(){return C5.apply(null,arguments).exponent(.5)}function P2(){var e=0,t=.5,n=1,r=1,i,o,s,a,u,l=fr,c,f=!1,d;function h(p){return isNaN(p=+p)?d:(p=.5+((p=+c(p))-o)*(r*p<r*o?a:u),l(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(l=p,h):l};function g(p){return function(m){var y,b,x;return arguments.length?([y,b,x]=m,l=p5(p,[y,b,x]),h):[l(0),l(.5),l(1)]}}return h.range=g(hu),h.rangeRound=g(gp),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return c=p,i=p(e),o=p(t),s=p(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function KU(){var e=lc(P2()(fr));return e.copy=function(){return gu(e,KU())},du.apply(e,arguments)}function ZU(){var e=x5(P2()).domain([.1,1,10]);return e.copy=function(){return gu(e,ZU()).base(e.base())},du.apply(e,arguments)}function JU(){var e=_5(P2());return e.copy=function(){return gu(e,JU()).constant(e.constant())},du.apply(e,arguments)}function S5(){var e=$5(P2());return e.copy=function(){return gu(e,S5()).exponent(e.exponent())},du.apply(e,arguments)}function b1e(){return S5.apply(null,arguments).exponent(.5)}function F5(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const v1e="identity",Df="linear",Fs="log",mp="pow",yp="sqrt",j2="symlog",Nl="time",Rl="utc",uo="sequential",_d="diverging",Mf="quantile",I2="quantize",z2="threshold",k5="ordinal",aE="point",QU="band",D5="bin-ordinal",Bt="continuous",bp="discrete",vp="discretizing",oi="interpolating",M5="temporal";function x1e(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function _1e(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),s=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function O5(){const e=h5().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],g=F5(f,a,u);let p=r[d-0];i=(h-p)/(g||1),s&&(i=Math.floor(i)),p+=(h-p-i*(f-a))*l,o=i*(1-a),s&&(p=Math.round(p),o=Math.round(o));const m=Fr(f).map(y=>p+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),g=h.length-1;let p=+f[0],m=+f[1],y,b,x;if(!(p!==p||m!==m)&&(m<p&&(x=p,p=m,m=x),!(m<h[0]||p>r[1-d])))return y=Math.max(0,hy(h,p)-1),b=p===m?y:hy(h,m)-1,p-h[y]>o+1e-10&&++y,d&&(x=y,y=g-b,b=g-x),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return O5().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(u).align(l)},c()}function eq(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return eq(t())},e}function $1e(){return eq(O5().paddingInner(1))}var w1e=Array.prototype.map;function A1e(e){return w1e.call(e,Ma)}const E1e=Array.prototype.slice;function tq(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Zg(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=A1e(r),n):e.slice()},n.range=function(r){return arguments.length?(t=E1e.call(r),n):t.slice()},n.tickFormat=function(r,i){return OU(e[0],Ze(e),r??10,i)},n.copy=function(){return tq().domain(n.domain()).range(n.range())},n}const Uy={};function C1e(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?x1e(o):o.invertExtent?_1e(o):void 0),o.type=e,o};return r.metadata=Es(be(n)),r}function qe(e,t,n){return arguments.length>1?(Uy[e]=C1e(e,t,n),this):nq(e)?Uy[e]:void 0}qe(v1e,NU);qe(Df,TU,Bt);qe(Fs,BU,[Bt,Fs]);qe(mp,w5,Bt);qe(yp,dpe,Bt);qe(j2,LU,Bt);qe(Nl,p1e,[Bt,M5]);qe(Rl,m1e,[Bt,M5]);qe(uo,E5,[Bt,oi]);qe("".concat(uo,"-").concat(Df),E5,[Bt,oi]);qe("".concat(uo,"-").concat(Fs),VU,[Bt,oi,Fs]);qe("".concat(uo,"-").concat(mp),C5,[Bt,oi]);qe("".concat(uo,"-").concat(yp),y1e,[Bt,oi]);qe("".concat(uo,"-").concat(j2),XU,[Bt,oi]);qe("".concat(_d,"-").concat(Df),KU,[Bt,oi]);qe("".concat(_d,"-").concat(Fs),ZU,[Bt,oi,Fs]);qe("".concat(_d,"-").concat(mp),S5,[Bt,oi]);qe("".concat(_d,"-").concat(yp),b1e,[Bt,oi]);qe("".concat(_d,"-").concat(j2),JU,[Bt,oi]);qe(Mf,PU,[vp,Mf]);qe(I2,jU,vp);qe(z2,IU,vp);qe(D5,tq,[bp,vp]);qe(k5,h5,bp);qe(QU,O5,bp);qe(aE,$1e,bp);function nq(e){return ve(Uy,e)}function cc(e,t){const n=Uy[e];return n&&n.metadata[t]}function T5(e){return cc(e,Bt)}function Of(e){return cc(e,bp)}function uE(e){return cc(e,vp)}function rq(e){return cc(e,Fs)}function S1e(e){return cc(e,M5)}function iq(e){return cc(e,oi)}function oq(e){return cc(e,Mf)}const F1e=["clamp","base","constant","exponent"];function sq(e,t){const n=t[0],r=Ze(t)-n;return function(i){return e(n+i*r)}}function U2(e,t,n){return p5(N5(t||"rgb",n),e)}function aq(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function uq(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?Kr(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=qe(o)().domain([t,n]).range([0,1]),F1e.forEach(a=>e[a]?s[a](e[a]()):0),s)}function N5(e,t){const n=Vge[k1e(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function k1e(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const D1e={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},M1e={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function lq(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function cq(e,t){for(const n in e)R5(n,t(e[n]))}const M7={};cq(M1e,lq);cq(D1e,e=>U2(lq(e)));function R5(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(M7[e]=t,this):M7[e]}const Dm="symbol",O1e="discrete",T1e="gradient",N1e=e=>$e(e)?e.map(t=>String(t)):String(e),R1e=(e,t)=>e[1]-t[1],B1e=(e,t)=>t[1]-e[1];function B5(e,t,n){let r;return El(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(jv(e.domain())/n||1)))),ke(t)&&(r=t.step,t=t.interval),ut(t)&&(t=e.type===Nl?gd(t):e.type==Rl?pd(t):q("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function fq(e,t,n){let r=e.range(),i=r[0],o=Ze(r),s=R1e;if(i>o&&(r=o,o=i,i=r,s=B1e),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Ze(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function L5(e,t){return e.bins?fq(e,e.bins):e.ticks?e.ticks(t):e.domain()}function dq(e,t,n,r,i,o){const s=t.type;let a=N1e;if(s===Nl||i===Nl)a=e.timeFormat(r);else if(s===Rl||i===Rl)a=e.utcFormat(r);else if(rq(s)){const u=e.formatFloat(r);if(o||t.bins)a=u;else{const l=hq(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function hq(e,t,n){const r=L5(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/o));return l*i<i-.5&&(l*=i),l<=s};return n?r.filter(a):a}const lE={[Mf]:"quantiles",[I2]:"thresholds",[z2]:"domain"},gq={[Mf]:"quantiles",[I2]:"domain"};function pq(e,t){return e.bins?j1e(e.bins):e.type===Fs?hq(e,t,!0):lE[e.type]?P1e(e[lE[e.type]]()):L5(e,t)}function L1e(e,t,n){const r=t[gq[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function P1e(e){const t=[-1/0].concat(e);return t.max=1/0,t}function j1e(e){const t=e.slice(0,-1);return t.max=Ze(e),t}const I1e=e=>lE[e.type]||e.bins;function mq(e,t,n,r,i,o,s){const a=gq[t.type]&&o!==Nl&&o!==Rl?L1e(e,t,i):dq(e,t,n,i,o,s);return r===Dm&&I1e(t)?z1e(a):r===O1e?U1e(a):q1e(a)}const z1e=e=>(t,n,r)=>{const i=O7(r[n+1],O7(r.max,1/0)),o=T7(t,e),s=T7(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},O7=(e,t)=>e??t,U1e=e=>(t,n)=>n?e(t):null,q1e=e=>t=>e(t),T7=(e,t)=>Number.isFinite(e)?t(e):null;function W1e(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Ze(t),o=i-r;if(e.type===z2){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function H1e(e,t,n,r){const i=r||t.type;return ut(n)&&S1e(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Nl?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Rl?e.utcFormat("%A, %d %B %Y, %X UTC"):mq(e,t,5,null,n,r,!0)}function yq(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=H1e(e,t,n.format,n.formatType);if(uE(t.type)){const o=pq(t).slice(1).map(i),s=o.length;return"".concat(s," boundar").concat(s===1?"y":"ies",": ").concat(o.join(", "))}else if(Of(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return"".concat(s," value").concat(s===1?"":"s",": ").concat(a)}else{const o=t.domain();return"values from ".concat(i(o[0])," to ").concat(i(Ze(o)))}}function bq(e){L.call(this,null,e)}X(bq,L,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=B5(o,s,e.minstep),u=e.format||dq(n,o,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?fq(o,e.values,a):L5(o,a);return i&&(r.rem=i),i=l.map((c,f)=>Ue({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Ue({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function vq(e){L.call(this,null,e)}function Y1e(){return Ue({})}function G1e(e){const t=ad().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}X(vq,L,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Y1e,o=e.key||ie,s=this.value;return $e(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&q("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=G1e(o)),t.visit(t.ADD,a=>{const u=o(a);let l=s.get(u);l?l.exit?(s.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),s.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=o(a),l=s.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=o(a),l=s.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function xq(e){L.call(this,null,e)}X(xq,L,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if($e(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||Ks,u=i.enter||Ks,l=i.exit||Ks,c=(o&&!s?i[o]:a)||Ks;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Ks&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Ks&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),s||c!==Ks){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function _q(e){L.call(this,[],e)}X(_q,L,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||Dm,s=e.scale,a=+e.limit,u=B5(s,e.count==null?5:e.count,e.minstep),l=!!e.values||o===Dm,c=e.format||mq(n,s,u,o,e.formatSpecifier,e.formatType,l),f=e.values||pq(s,u),d,h,g,p,m;return i&&(r.rem=i),o===Dm?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,Ge(g=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),p=i.reduce((y,b)=>Math.max(y,g(b,e)),0)):g=Kr(p=g||8),i=i.map((y,b)=>Ue({index:b,label:c(y,b,i),value:y,offset:p,size:g(y,e)})),m&&(m=f[i.length],i.push(Ue({index:i.length,label:"".concat(f.length-i.length," entries"),value:m,offset:p,size:g(m,e)})))):o===T1e?(d=s.domain(),h=uq(s,d[0],Ze(d)),f.length<3&&!e.values&&d[0]!==Ze(d)&&(f=[d[0],Ze(d)]),i=f.map((y,b)=>Ue({index:b,label:c(y,b,f),value:y,perc:h(y)}))):(g=f.length-1,h=W1e(s),i=f.map((y,b)=>Ue({index:b,label:c(y,b,f),value:y,perc:b?h(y):0,perc2:b===g?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const V1e=e=>e.source.x,X1e=e=>e.source.y,K1e=e=>e.target.x,Z1e=e=>e.target.y;function P5(e){L.call(this,{},e)}P5.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};X(P5,L,{transform(e,t){var n=e.sourceX||V1e,r=e.sourceY||X1e,i=e.targetX||K1e,o=e.targetY||Z1e,s=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=N7.get(u+"-"+a)||N7.get(u);return l||q("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=l(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const $q=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,J1e=(e,t,n,r)=>$q(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),wq=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.sqrt(i*i+o*o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},Q1e=(e,t,n,r)=>wq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Aq=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},eme=(e,t,n,r)=>Aq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),tme=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,nme=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,rme=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},ime=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},ome=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},sme=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*s+","+u*a+" "+r*s+","+r*a},N7=ad({line:$q,"line-radial":J1e,arc:wq,"arc-radial":Q1e,curve:Aq,"curve-radial":eme,"orthogonal-horizontal":tme,"orthogonal-vertical":nme,"orthogonal-radial":rme,"diagonal-horizontal":ime,"diagonal-vertical":ome,"diagonal-radial":sme});function j5(e){L.call(this,null,e)}j5.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};X(j5,L,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||od,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(o),c=l.length,f=s,d=(a-s)/yP(l),h=Fr(c),g,p,m;for(e.sort&&h.sort((y,b)=>l[y]-l[b]),g=0;g<c;++g)m=l[h[g]],p=u[h[g]],p[r]=f,p[i]=f+=m*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const ame=5;function ume(e){const t=e.type;return!e.bins&&(t===Df||t===mp||t===yp)}function Eq(e){return T5(e)&&e!==uo}const lme=Es(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Cq(e){L.call(this,null,e),this.modified(!0)}X(Cq,L,{transform(e,t){var n=t.dataflow,r=this.value,i=cme(e);(!r||i!==r.type)&&(this.value=r=qe(i)());for(i in e)if(!lme[i]){if(i==="padding"&&Eq(r.type))continue;Ge(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return mme(r,e,pme(r,e,dme(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function cme(e){var t=e.type,n="",r;return t===uo?uo+"-"+Df:(fme(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?uo+"-":r===3?_d+"-":""),(n+t||Df).toLowerCase())}function fme(e){const t=e.type;return T5(t)&&t!==Nl&&t!==Rl&&(e.scheme||e.range&&e.range.length&&e.range.every(ut))}function dme(e,t,n){const r=hme(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&ume(e),a,u;if(!i)return 0;if(Eq(o)&&t.padding&&i[0]!==Ze(i)&&(i=gme(o,i,t.range,t.padding,t.exponent,t.constant)),(s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(Sq(o,i,n)),o===k5&&e.unknown(t.domainImplicit?tE:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&B5(e,t.nice)||null),i.length}function hme(e,t,n){return t?(e.domain(Sq(e.type,t,n)),t.length):-1}function gme(e,t,n,r,i,o){var s=Math.abs(Ze(n)-n[0]),a=s/(s-2*r),u=e===Fs?lL(t,null,a):e===yp?cA(t,null,a,.5):e===mp?cA(t,null,a,i||1):e===j2?cL(t,null,a,o||1):uL(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function Sq(e,t,n){if(rq(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+he(t))}return t}function pme(e,t,n){let r=t.bins;if(r&&!$e(r)){const i=e.domain(),o=i[0],s=Ze(i),a=r.step;let u=r.start==null?o:r.start,l=r.stop==null?s:r.stop;a||q("Scale bins parameter missing step property."),u<o&&(u=a*Math.ceil(o/a)),l>s&&(l=a*Math.floor(s/a)),r=Fr(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===D5&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function mme(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=yme(r,t,n);else if(t.scheme&&(o=bme(r,t,n),Ge(o))){if(e.interpolator)return e.interpolator(o);q("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&iq(r))return e.interpolator(U2(cE(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(N5(t.interpolate,t.interpolateGamma)):Ge(e.round)?e.round(i):Ge(e.rangeRound)&&e.interpolate(i?gp:hu),o&&e.range(cE(o,t.reverse))}function yme(e,t,n){e!==QU&&e!==aE&&q("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===aE?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*F5(n,i,r)]}function bme(e,t,n){var r=t.schemeExtent,i,o;return $e(t.scheme)?o=U2(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=R5(i),o||q("Unrecognized scheme name: ".concat(t.scheme))),n=e===z2?n+1:e===D5?n-1:e===Mf||e===I2?+t.schemeCount||ame:n,iq(e)?R7(o,r,t.reverse):Ge(o)?aq(R7(o,r),n):e===k5?o:o.slice(0,n)}function R7(e,t,n){return Ge(e)&&(t||n)?sq(e,cE(t||[0,1],n)):e}function cE(e,t){return t?e.slice().reverse():e}function Fq(e){L.call(this,null,e)}X(Fq,L,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(tc(e.sort)),this.modified(n),t}});const B7="zero",kq="center",Dq="normalize",Mq=["y0","y1"];function I5(e){L.call(this,null,e)}I5.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:B7,values:[B7,kq,Dq]},{name:"as",type:"string",array:!0,length:2,default:Mq}]};X(I5,L,{transform(e,t){var n=e.as||Mq,r=n[0],i=n[1],o=tc(e.sort),s=e.field||od,a=e.offset===kq?vme:e.offset===Dq?xme:_me,u,l,c,f;for(u=$me(t.source,e.groupby,o,s),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function vme(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,u;a<s;++a)u=e[a],u[r]=o,u[i]=o+=Math.abs(n(u))}function xme(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=s,c[i]=s=o*(l+=Math.abs(n(c)))}function _me(e,t,n,r,i){for(var o=0,s=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=s,c[i]=s+=l):(c[r]=o,c[i]=o+=l)}function $me(e,t,n,r){var i=[],o=p=>p(c),s,a,u,l,c,f,d,h,g;if(t==null)i.push(e.slice());else for(s={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,g=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>g&&(g=h),n&&d.sort(n)}return i.max=g,i}const wme=Object.freeze(Object.defineProperty({__proto__:null,axisticks:bq,datajoin:vq,encode:xq,legendentries:_q,linkpath:P5,pie:j5,scale:Cq,sortitems:Fq,stack:I5},Symbol.toStringTag,{value:"Module"}));var ae=1e-6,qy=1e-12,Ae=Math.PI,bt=Ae/2,Wy=Ae/4,Hn=Ae*2,xt=180/Ae,Ee=Ae/180,Ne=Math.abs,$d=Math.atan,Jr=Math.atan2,le=Math.cos,P1=Math.ceil,Oq=Math.exp,fE=Math.hypot,Hy=Math.log,R$=Math.pow,se=Math.sin,qr=Math.sign||function(e){return e>0?1:e<0?-1:0},Yn=Math.sqrt,z5=Math.tan;function Tq(e){return e>1?0:e<-1?Ae:Math.acos(e)}function yr(e){return e>1?bt:e<-1?-bt:Math.asin(e)}function tn(){}function Yy(e,t){e&&P7.hasOwnProperty(e.type)&&P7[e.type](e,t)}var L7={Feature:function(e,t){Yy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Yy(n[r].geometry,t)}},P7={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){dE(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)dE(n[r],t,0)},Polygon:function(e,t){j7(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)j7(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Yy(n[r],t)}};function dE(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function j7(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)dE(e[n],t,1);t.polygonEnd()}function os(e,t){e&&L7.hasOwnProperty(e.type)?L7[e.type](e,t):Yy(e,t)}var Gy=new qn,Vy=new qn,Nq,Rq,hE,gE,pE,vo={point:tn,lineStart:tn,lineEnd:tn,polygonStart:function(){Gy=new qn,vo.lineStart=Ame,vo.lineEnd=Eme},polygonEnd:function(){var e=+Gy;Vy.add(e<0?Hn+e:e),this.lineStart=this.lineEnd=this.point=tn},sphere:function(){Vy.add(Hn)}};function Ame(){vo.point=Cme}function Eme(){Bq(Nq,Rq)}function Cme(e,t){vo.point=Bq,Nq=e,Rq=t,e*=Ee,t*=Ee,hE=e,gE=le(t=t/2+Wy),pE=se(t)}function Bq(e,t){e*=Ee,t*=Ee,t=t/2+Wy;var n=e-hE,r=n>=0?1:-1,i=r*n,o=le(t),s=se(t),a=pE*s,u=gE*o+a*le(i),l=a*r*se(i);Gy.add(Jr(l,u)),hE=e,gE=o,pE=s}function Sme(e){return Vy=new qn,os(e,vo),Vy*2}function Xy(e){return[Jr(e[1],e[0]),yr(e[2])]}function Bl(e){var t=e[0],n=e[1],r=le(n);return[r*le(t),r*se(t),se(n)]}function j1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Tf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function B$(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function I1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ky(e){var t=Yn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var ht,or,pt,Er,Hu,Lq,Pq,af,o0,ea,ks,Qo={point:mE,lineStart:I7,lineEnd:z7,polygonStart:function(){Qo.point=Iq,Qo.lineStart=Fme,Qo.lineEnd=kme,o0=new qn,vo.polygonStart()},polygonEnd:function(){vo.polygonEnd(),Qo.point=mE,Qo.lineStart=I7,Qo.lineEnd=z7,Gy<0?(ht=-(pt=180),or=-(Er=90)):o0>ae?Er=90:o0<-ae&&(or=-90),ks[0]=ht,ks[1]=pt},sphere:function(){ht=-(pt=180),or=-(Er=90)}};function mE(e,t){ea.push(ks=[ht=e,pt=e]),t<or&&(or=t),t>Er&&(Er=t)}function jq(e,t){var n=Bl([e*Ee,t*Ee]);if(af){var r=Tf(af,n),i=[r[1],-r[0],0],o=Tf(i,r);Ky(o),o=Xy(o);var s=e-Hu,a=s>0?1:-1,u=o[0]*xt*a,l,c=Ne(s)>180;c^(a*Hu<u&&u<a*e)?(l=o[1]*xt,l>Er&&(Er=l)):(u=(u+360)%360-180,c^(a*Hu<u&&u<a*e)?(l=-o[1]*xt,l<or&&(or=l)):(t<or&&(or=t),t>Er&&(Er=t))),c?e<Hu?Ar(ht,e)>Ar(ht,pt)&&(pt=e):Ar(e,pt)>Ar(ht,pt)&&(ht=e):pt>=ht?(e<ht&&(ht=e),e>pt&&(pt=e)):e>Hu?Ar(ht,e)>Ar(ht,pt)&&(pt=e):Ar(e,pt)>Ar(ht,pt)&&(ht=e)}else ea.push(ks=[ht=e,pt=e]);t<or&&(or=t),t>Er&&(Er=t),af=n,Hu=e}function I7(){Qo.point=jq}function z7(){ks[0]=ht,ks[1]=pt,Qo.point=mE,af=null}function Iq(e,t){if(af){var n=e-Hu;o0.add(Ne(n)>180?n+(n>0?360:-360):n)}else Lq=e,Pq=t;vo.point(e,t),jq(e,t)}function Fme(){vo.lineStart()}function kme(){Iq(Lq,Pq),vo.lineEnd(),Ne(o0)>ae&&(ht=-(pt=180)),ks[0]=ht,ks[1]=pt,af=null}function Ar(e,t){return(t-=e)<0?t+360:t}function Dme(e,t){return e[0]-t[0]}function U7(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Mme(e){var t,n,r,i,o,s,a;if(Er=pt=-(ht=or=1/0),ea=[],os(e,Qo),n=ea.length){for(ea.sort(Dme),t=1,r=ea[0],o=[r];t<n;++t)i=ea[t],U7(r,i[0])||U7(r,i[1])?(Ar(r[0],i[1])>Ar(r[0],r[1])&&(r[1]=i[1]),Ar(i[0],r[1])>Ar(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Ar(r[1],i[0]))>s&&(s=a,ht=i[0],pt=r[1])}return ea=ks=null,ht===1/0||or===1/0?[[NaN,NaN],[NaN,NaN]]:[[ht,or],[pt,Er]]}var Lh,Zy,Jy,Qy,eb,tb,nb,rb,yE,bE,vE,zq,Uq,Ln,Pn,jn,$i={sphere:tn,point:U5,lineStart:q7,lineEnd:W7,polygonStart:function(){$i.lineStart=Nme,$i.lineEnd=Rme},polygonEnd:function(){$i.lineStart=q7,$i.lineEnd=W7}};function U5(e,t){e*=Ee,t*=Ee;var n=le(t);xp(n*le(e),n*se(e),se(t))}function xp(e,t,n){++Lh,Jy+=(e-Jy)/Lh,Qy+=(t-Qy)/Lh,eb+=(n-eb)/Lh}function q7(){$i.point=Ome}function Ome(e,t){e*=Ee,t*=Ee;var n=le(t);Ln=n*le(e),Pn=n*se(e),jn=se(t),$i.point=Tme,xp(Ln,Pn,jn)}function Tme(e,t){e*=Ee,t*=Ee;var n=le(t),r=n*le(e),i=n*se(e),o=se(t),s=Jr(Yn((s=Pn*o-jn*i)*s+(s=jn*r-Ln*o)*s+(s=Ln*i-Pn*r)*s),Ln*r+Pn*i+jn*o);Zy+=s,tb+=s*(Ln+(Ln=r)),nb+=s*(Pn+(Pn=i)),rb+=s*(jn+(jn=o)),xp(Ln,Pn,jn)}function W7(){$i.point=U5}function Nme(){$i.point=Bme}function Rme(){qq(zq,Uq),$i.point=U5}function Bme(e,t){zq=e,Uq=t,e*=Ee,t*=Ee,$i.point=qq;var n=le(t);Ln=n*le(e),Pn=n*se(e),jn=se(t),xp(Ln,Pn,jn)}function qq(e,t){e*=Ee,t*=Ee;var n=le(t),r=n*le(e),i=n*se(e),o=se(t),s=Pn*o-jn*i,a=jn*r-Ln*o,u=Ln*i-Pn*r,l=fE(s,a,u),c=yr(l),f=l&&-c/l;yE.add(f*s),bE.add(f*a),vE.add(f*u),Zy+=c,tb+=c*(Ln+(Ln=r)),nb+=c*(Pn+(Pn=i)),rb+=c*(jn+(jn=o)),xp(Ln,Pn,jn)}function Lme(e){Lh=Zy=Jy=Qy=eb=tb=nb=rb=0,yE=new qn,bE=new qn,vE=new qn,os(e,$i);var t=+yE,n=+bE,r=+vE,i=fE(t,n,r);return i<qy&&(t=tb,n=nb,r=rb,Zy<ae&&(t=Jy,n=Qy,r=eb),i=fE(t,n,r),i<qy)?[NaN,NaN]:[Jr(n,t)*xt,yr(r/i)*xt]}function xE(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function _E(e,t){return[Ne(e)>Ae?e+Math.round(-e/Hn)*Hn:e,t]}_E.invert=_E;function Wq(e,t,n){return(e%=Hn)?t||n?xE(Y7(e),G7(t,n)):Y7(e):t||n?G7(t,n):_E}function H7(e){return function(t,n){return t+=e,[t>Ae?t-Hn:t<-Ae?t+Hn:t,n]}}function Y7(e){var t=H7(e);return t.invert=H7(-e),t}function G7(e,t){var n=le(e),r=se(e),i=le(t),o=se(t);function s(a,u){var l=le(u),c=le(a)*l,f=se(a)*l,d=se(u),h=d*n+c*r;return[Jr(f*i-h*o,c*n-d*r),yr(h*i+f*o)]}return s.invert=function(a,u){var l=le(u),c=le(a)*l,f=se(a)*l,d=se(u),h=d*i-f*o;return[Jr(f*i+d*o,c*n+h*r),yr(h*n-c*r)]},s}function Pme(e){e=Wq(e[0]*Ee,e[1]*Ee,e.length>2?e[2]*Ee:0);function t(n){return n=e(n[0]*Ee,n[1]*Ee),n[0]*=xt,n[1]*=xt,n}return t.invert=function(n){return n=e.invert(n[0]*Ee,n[1]*Ee),n[0]*=xt,n[1]*=xt,n},t}function jme(e,t,n,r,i,o){if(n){var s=le(t),a=se(t),u=r*n;i==null?(i=t+r*Hn,o=t-u/2):(i=V7(s,i),o=V7(s,o),(r>0?i<o:i>o)&&(i+=r*Hn));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Xy([s,-a*le(c),-a*se(c)]),e.point(l[0],l[1])}}function V7(e,t){t=Bl(t),t[0]-=e,Ky(t);var n=Tq(-t[1]);return((-t[2]<0?-n:n)+Hn-ae)%Hn}function Hq(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:tn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Mm(e,t){return Ne(e[0]-t[0])<ae&&Ne(e[1]-t[1])<ae}function z1(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Yq(e,t,n,r,i){var o=[],s=[],a,u;if(e.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],y=g[p],b;if(Mm(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<p;++a)i.point((m=g[a])[0],m[1]);i.lineEnd();return}y[0]+=2*ae}o.push(b=new z1(m,g,null,!0)),s.push(b.o=new z1(m,null,b,!1)),o.push(b=new z1(y,g,null,!1)),s.push(b.o=new z1(y,null,b,!0))}}),!!o.length){for(s.sort(t),X7(o),X7(s),a=0,u=s.length;a<u;++a)s[a].e=n=!n;for(var l=o[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function X7(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function L$(e){return Ne(e[0])<=Ae?e[0]:qr(e[0])*((Ne(e[0])+Ae)%Hn-Ae)}function Ime(e,t){var n=L$(t),r=t[1],i=se(r),o=[se(n),-le(n),0],s=0,a=0,u=new qn;i===1?r=bt+ae:i===-1&&(r=-bt-ae);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],g=L$(h),p=h[1]/2+Wy,m=se(p),y=le(p),b=0;b<d;++b,g=v,m=w,y=$,h=x){var x=f[b],v=L$(x),_=x[1]/2+Wy,w=se(_),$=le(_),A=v-g,M=A>=0?1:-1,k=M*A,C=k>Ae,N=m*w;if(u.add(Jr(N*M*se(k),y*$+N*le(k))),s+=C?A+M*Hn:A,C^g>=n^v>=n){var E=Tf(Bl(h),Bl(x));Ky(E);var D=Tf(o,E);Ky(D);var F=(C^A>=0?-1:1)*yr(D[2]);(r>F||r===F&&(E[0]||E[1]))&&(a+=C^A>=0?1:-1)}}return(s<-ae||s<ae&&u<-qy)^a&1}function Gq(e,t,n,r){return function(i){var o=t(i),s=Hq(),a=t(s),u=!1,l,c,f,d={point:h,lineStart:p,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=x,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=p,d.lineEnd=m,c=mP(c);var v=Ime(l,r);c.length?(u||(i.polygonStart(),u=!0),Yq(c,Ume,v,n,i)):v&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(v,_){e(v,_)&&i.point(v,_)}function g(v,_){o.point(v,_)}function p(){d.point=g,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(v,_){f.push([v,_]),a.point(v,_)}function b(){a.lineStart(),f=[]}function x(){y(f[0][0],f[0][1]),a.lineEnd();var v=a.clean(),_=s.result(),w,$=_.length,A,M,k;if(f.pop(),l.push(f),f=null,!!$){if(v&1){if(M=_[0],(A=M.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),w=0;w<A;++w)i.point((k=M[w])[0],k[1]);i.lineEnd()}return}$>1&&v&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(zme))}}return d}}function zme(e){return e.length>1}function Ume(e,t){return((e=e.x)[0]<0?e[1]-bt-ae:bt-e[1])-((t=t.x)[0]<0?t[1]-bt-ae:bt-t[1])}const K7=Gq(function(){return!0},qme,Hme,[-Ae,-bt]);function qme(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Ae:-Ae,u=Ne(o-t);Ne(u-Ae)<ae?(e.point(t,n=(n+s)/2>0?bt:-bt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&u>=Ae&&(Ne(t-r)<ae&&(t-=r*ae),Ne(o-a)<ae&&(o-=a*ae),n=Wme(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Wme(e,t,n,r){var i,o,s=se(e-n);return Ne(s)>ae?$d((se(t)*(o=le(r))*se(n)-se(r)*(i=le(t))*se(e))/(i*o*s)):(t+r)/2}function Hme(e,t,n,r){var i;if(e==null)i=n*bt,r.point(-Ae,i),r.point(0,i),r.point(Ae,i),r.point(Ae,0),r.point(Ae,-i),r.point(0,-i),r.point(-Ae,-i),r.point(-Ae,0),r.point(-Ae,i);else if(Ne(e[0]-t[0])>ae){var o=e[0]<t[0]?Ae:-Ae;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Yme(e){var t=le(e),n=6*Ee,r=t>0,i=Ne(t)>ae;function o(c,f,d,h){jme(h,e,n,d,c,f)}function s(c,f){return le(c)*le(f)>t}function a(c){var f,d,h,g,p;return{lineStart:function(){g=h=!1,p=1},point:function(m,y){var b=[m,y],x,v=s(m,y),_=r?v?0:l(m,y):v?l(m+(m<0?Ae:-Ae),y):0;if(!f&&(g=h=v)&&c.lineStart(),v!==h&&(x=u(f,b),(!x||Mm(f,x)||Mm(b,x))&&(b[2]=1)),v!==h)p=0,v?(c.lineStart(),x=u(b,f),c.point(x[0],x[1])):(x=u(f,b),c.point(x[0],x[1],2),c.lineEnd()),f=x;else if(i&&f&&r^v){var w;!(_&d)&&(w=u(b,f,!0))&&(p=0,r?(c.lineStart(),c.point(w[0][0],w[0][1]),c.point(w[1][0],w[1][1]),c.lineEnd()):(c.point(w[1][0],w[1][1]),c.lineEnd(),c.lineStart(),c.point(w[0][0],w[0][1],3)))}v&&(!f||!Mm(f,b))&&c.point(b[0],b[1]),f=b,h=v,d=_},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return p|(g&&h)<<1}}}function u(c,f,d){var h=Bl(c),g=Bl(f),p=[1,0,0],m=Tf(h,g),y=j1(m,m),b=m[0],x=y-b*b;if(!x)return!d&&c;var v=t*y/x,_=-t*b/x,w=Tf(p,m),$=I1(p,v),A=I1(m,_);B$($,A);var M=w,k=j1($,M),C=j1(M,M),N=k*k-C*(j1($,$)-1);if(!(N<0)){var E=Yn(N),D=I1(M,(-k-E)/C);if(B$(D,$),D=Xy(D),!d)return D;var F=c[0],O=f[0],R=c[1],B=f[1],P;O<F&&(P=F,F=O,O=P);var Z=O-F,Q=Ne(Z-Ae)<ae,fe=Q||Z<ae;if(!Q&&B<R&&(P=R,R=B,B=P),fe?Q?R+B>0^D[1]<(Ne(D[0]-F)<ae?R:B):R<=D[1]&&D[1]<=B:Z>Ae^(F<=D[0]&&D[0]<=O)){var we=I1(M,(-k+E)/C);return B$(we,$),[D,Xy(we)]}}}function l(c,f){var d=r?e:Ae-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Gq(s,a,o,r?[0,-e]:[-Ae,e-Ae])}function Gme(e,t,n,r,i,o){var s=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-s,h=l-a,g;if(g=n-s,!(!d&&g>0)){if(g/=d,d<0){if(g<c)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>c&&(c=g)}if(g=i-s,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>c&&(c=g)}else if(d>0){if(g<c)return;g<f&&(f=g)}if(g=r-a,!(!h&&g>0)){if(g/=h,h<0){if(g<c)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>c&&(c=g)}if(g=o-a,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>c&&(c=g)}else if(h>0){if(g<c)return;g<f&&(f=g)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var Ph=1e9,U1=-Ph;function Vq(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function o(l,c,f,d){var h=0,g=0;if(l==null||(h=s(l,f))!==(g=s(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==g);else d.point(c[0],c[1])}function s(l,c){return Ne(l[0]-e)<ae?c>0?0:3:Ne(l[0]-n)<ae?c>0?2:1:Ne(l[1]-t)<ae?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=s(l,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Hq(),d,h,g,p,m,y,b,x,v,_,w,$={point:A,lineStart:N,lineEnd:E,polygonStart:k,polygonEnd:C};function A(F,O){i(F,O)&&c.point(F,O)}function M(){for(var F=0,O=0,R=h.length;O<R;++O)for(var B=h[O],P=1,Z=B.length,Q=B[0],fe,we,de=Q[0],Me=Q[1];P<Z;++P)fe=de,we=Me,Q=B[P],de=Q[0],Me=Q[1],we<=r?Me>r&&(de-fe)*(r-we)>(Me-we)*(e-fe)&&++F:Me<=r&&(de-fe)*(r-we)<(Me-we)*(e-fe)&&--F;return F}function k(){c=f,d=[],h=[],w=!0}function C(){var F=M(),O=w&&F,R=(d=mP(d)).length;(O||R)&&(l.polygonStart(),O&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),R&&Yq(d,a,F,o,l),l.polygonEnd()),c=l,d=h=g=null}function N(){$.point=D,h&&h.push(g=[]),_=!0,v=!1,b=x=NaN}function E(){d&&(D(p,m),y&&v&&f.rejoin(),d.push(f.result())),$.point=A,v&&c.lineEnd()}function D(F,O){var R=i(F,O);if(h&&g.push([F,O]),_)p=F,m=O,y=R,_=!1,R&&(c.lineStart(),c.point(F,O));else if(R&&v)c.point(F,O);else{var B=[b=Math.max(U1,Math.min(Ph,b)),x=Math.max(U1,Math.min(Ph,x))],P=[F=Math.max(U1,Math.min(Ph,F)),O=Math.max(U1,Math.min(Ph,O))];Gme(B,P,e,t,n,r)?(v||(c.lineStart(),c.point(B[0],B[1])),c.point(P[0],P[1]),R||c.lineEnd(),w=!1):R&&(c.lineStart(),c.point(F,O),w=!1)}b=F,x=O,v=R}return $}}function Z7(e,t,n){var r=Fr(e,t-ae,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function J7(e,t,n){var r=Fr(e,t-ae,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function Vme(){var e,t,n,r,i,o,s,a,u=10,l=u,c=90,f=360,d,h,g,p,m=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return Fr(P1(r/c)*c,n,c).map(g).concat(Fr(P1(a/f)*f,s,f).map(p)).concat(Fr(P1(t/u)*u,e,u).filter(function(x){return Ne(x%c)>ae}).map(d)).concat(Fr(P1(o/l)*l,i,l).filter(function(x){return Ne(x%f)>ae}).map(h))}return y.lines=function(){return b().map(function(x){return{type:"LineString",coordinates:x}})},y.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(p(s).slice(1),g(n).reverse().slice(1),p(a).reverse().slice(1))]}},y.extent=function(x){return arguments.length?y.extentMajor(x).extentMinor(x):y.extentMinor()},y.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],s=+x[1][1],r>n&&(x=r,r=n,n=x),a>s&&(x=a,a=s,s=x),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],o=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),o>i&&(x=o,o=i,i=x),y.precision(m)):[[t,o],[e,i]]},y.step=function(x){return arguments.length?y.stepMajor(x).stepMinor(x):y.stepMinor()},y.stepMajor=function(x){return arguments.length?(c=+x[0],f=+x[1],y):[c,f]},y.stepMinor=function(x){return arguments.length?(u=+x[0],l=+x[1],y):[u,l]},y.precision=function(x){return arguments.length?(m=+x,d=Z7(o,i,90),h=J7(t,e,m),g=Z7(a,s,90),p=J7(r,n,m),y):m},y.extentMajor([[-180,-90+ae],[180,90-ae]]).extentMinor([[-180,-80-ae],[180,80+ae]])}const sg=e=>e;var P$=new qn,$E=new qn,Xq,Kq,wE,AE,oa={point:tn,lineStart:tn,lineEnd:tn,polygonStart:function(){oa.lineStart=Xme,oa.lineEnd=Zme},polygonEnd:function(){oa.lineStart=oa.lineEnd=oa.point=tn,P$.add(Ne($E)),$E=new qn},result:function(){var e=P$/2;return P$=new qn,e}};function Xme(){oa.point=Kme}function Kme(e,t){oa.point=Zq,Xq=wE=e,Kq=AE=t}function Zq(e,t){$E.add(AE*e-wE*t),wE=e,AE=t}function Zme(){Zq(Xq,Kq)}const Q7=oa;var Nf=1/0,ib=Nf,ag=-Nf,ob=ag,Jme={point:Qme,lineStart:tn,lineEnd:tn,polygonStart:tn,polygonEnd:tn,result:function(){var e=[[Nf,ib],[ag,ob]];return ag=ob=-(ib=Nf=1/0),e}};function Qme(e,t){e<Nf&&(Nf=e),e>ag&&(ag=e),t<ib&&(ib=t),t>ob&&(ob=t)}const sb=Jme;var EE=0,CE=0,jh=0,ab=0,ub=0,Kc=0,SE=0,FE=0,Ih=0,Jq,Qq,to,no,vi={point:Ll,lineStart:e9,lineEnd:t9,polygonStart:function(){vi.lineStart=nye,vi.lineEnd=rye},polygonEnd:function(){vi.point=Ll,vi.lineStart=e9,vi.lineEnd=t9},result:function(){var e=Ih?[SE/Ih,FE/Ih]:Kc?[ab/Kc,ub/Kc]:jh?[EE/jh,CE/jh]:[NaN,NaN];return EE=CE=jh=ab=ub=Kc=SE=FE=Ih=0,e}};function Ll(e,t){EE+=e,CE+=t,++jh}function e9(){vi.point=eye}function eye(e,t){vi.point=tye,Ll(to=e,no=t)}function tye(e,t){var n=e-to,r=t-no,i=Yn(n*n+r*r);ab+=i*(to+e)/2,ub+=i*(no+t)/2,Kc+=i,Ll(to=e,no=t)}function t9(){vi.point=Ll}function nye(){vi.point=iye}function rye(){eW(Jq,Qq)}function iye(e,t){vi.point=eW,Ll(Jq=to=e,Qq=no=t)}function eW(e,t){var n=e-to,r=t-no,i=Yn(n*n+r*r);ab+=i*(to+e)/2,ub+=i*(no+t)/2,Kc+=i,i=no*e-to*t,SE+=i*(to+e),FE+=i*(no+t),Ih+=i*3,Ll(to=e,no=t)}const n9=vi;function tW(e){this._context=e}tW.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Hn);break}}},result:tn};var kE=new qn,j$,nW,rW,zh,Uh,lb={point:tn,lineStart:function(){lb.point=oye},lineEnd:function(){j$&&iW(nW,rW),lb.point=tn},polygonStart:function(){j$=!0},polygonEnd:function(){j$=null},result:function(){var e=+kE;return kE=new qn,e}};function oye(e,t){lb.point=iW,nW=zh=e,rW=Uh=t}function iW(e,t){zh-=e,Uh-=t,kE.add(Yn(zh*zh+Uh*Uh)),zh=e,Uh=t}const r9=lb;function oW(){this._string=[]}oW.prototype={_radius:4.5,_circle:i9(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=i9(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function i9(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function sW(e,t){var n=4.5,r,i;function o(s){return s&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),os(s,r(i))),i.result()}return o.area=function(s){return os(s,r(Q7)),Q7.result()},o.measure=function(s){return os(s,r(r9)),r9.result()},o.bounds=function(s){return os(s,r(sb)),sb.result()},o.centroid=function(s){return os(s,r(n9)),n9.result()},o.projection=function(s){return arguments.length?(r=s==null?(e=null,sg):(e=s).stream,o):e},o.context=function(s){return arguments.length?(i=s==null?(t=null,new oW):new tW(t=s),typeof n!="function"&&i.pointRadius(n),o):t},o.pointRadius=function(s){return arguments.length?(n=typeof s=="function"?s:(i.pointRadius(+s),+s),o):n},o.projection(e).context(t)}function q2(e){return function(t){var n=new DE;for(var r in e)n[r]=e[r];return n.stream=t,n}}function DE(){}DE.prototype={constructor:DE,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function q5(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),os(n,e.stream(sb)),t(sb.result()),r!=null&&e.clipExtent(r),e}function W2(e,t,n){return q5(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,u])},n)}function W5(e,t,n){return W2(e,[[0,0],t],n)}function H5(e,t,n){return q5(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function Y5(e,t,n){return q5(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var o9=16,sye=le(30*Ee);function s9(e,t){return+t?uye(e,t):aye(e)}function aye(e){return q2({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function uye(e,t){function n(r,i,o,s,a,u,l,c,f,d,h,g,p,m){var y=l-r,b=c-i,x=y*y+b*b;if(x>4*t&&p--){var v=s+d,_=a+h,w=u+g,$=Yn(v*v+_*_+w*w),A=yr(w/=$),M=Ne(Ne(w)-1)<ae||Ne(o-f)<ae?(o+f)/2:Jr(_,v),k=e(M,A),C=k[0],N=k[1],E=C-r,D=N-i,F=b*E-y*D;(F*F/x>t||Ne((y*E+b*D)/x-.5)>.3||s*d+a*h+u*g<sye)&&(n(r,i,o,s,a,u,C,N,M,v/=$,_/=$,w,p,m),m.point(C,N),n(C,N,M,v,_,w,l,c,f,d,h,g,p,m))}}return function(r){var i,o,s,a,u,l,c,f,d,h,g,p,m={point:y,lineStart:b,lineEnd:v,polygonStart:function(){r.polygonStart(),m.lineStart=_},polygonEnd:function(){r.polygonEnd(),m.lineStart=b}};function y(A,M){A=e(A,M),r.point(A[0],A[1])}function b(){f=NaN,m.point=x,r.lineStart()}function x(A,M){var k=Bl([A,M]),C=e(A,M);n(f,d,c,h,g,p,f=C[0],d=C[1],c=A,h=k[0],g=k[1],p=k[2],o9,r),r.point(f,d)}function v(){m.point=y,r.lineEnd()}function _(){b(),m.point=w,m.lineEnd=$}function w(A,M){x(i=A,M),o=f,s=d,a=h,u=g,l=p,m.point=x}function $(){n(f,d,c,h,g,p,o,s,i,a,u,l,o9,r),m.lineEnd=v,v()}return m}}var lye=q2({point:function(e,t){this.stream.point(e*Ee,t*Ee)}});function cye(e){return q2({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function fye(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function a9(e,t,n,r,i,o){if(!o)return fye(e,t,n,r,i);var s=le(o),a=se(o),u=s*e,l=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function g(p,m){return p*=r,m*=i,[u*p-l*m+t,n-l*p-u*m]}return g.invert=function(p,m){return[r*(c*p-f*m+d),i*(h-f*p-c*m)]},g}function ko(e){return aW(function(){return e})()}function aW(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,u=0,l=0,c,f=0,d=1,h=1,g=null,p=K7,m=null,y,b,x,v=sg,_=.5,w,$,A,M,k;function C(F){return A(F[0]*Ee,F[1]*Ee)}function N(F){return F=A.invert(F[0],F[1]),F&&[F[0]*xt,F[1]*xt]}C.stream=function(F){return M&&k===F?M:M=lye(cye(c)(p(w(v(k=F)))))},C.preclip=function(F){return arguments.length?(p=F,g=void 0,D()):p},C.postclip=function(F){return arguments.length?(v=F,m=y=b=x=null,D()):v},C.clipAngle=function(F){return arguments.length?(p=+F?Yme(g=F*Ee):(g=null,K7),D()):g*xt},C.clipExtent=function(F){return arguments.length?(v=F==null?(m=y=b=x=null,sg):Vq(m=+F[0][0],y=+F[0][1],b=+F[1][0],x=+F[1][1]),D()):m==null?null:[[m,y],[b,x]]},C.scale=function(F){return arguments.length?(n=+F,E()):n},C.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],E()):[r,i]},C.center=function(F){return arguments.length?(o=F[0]%360*Ee,s=F[1]%360*Ee,E()):[o*xt,s*xt]},C.rotate=function(F){return arguments.length?(a=F[0]%360*Ee,u=F[1]%360*Ee,l=F.length>2?F[2]%360*Ee:0,E()):[a*xt,u*xt,l*xt]},C.angle=function(F){return arguments.length?(f=F%360*Ee,E()):f*xt},C.reflectX=function(F){return arguments.length?(d=F?-1:1,E()):d<0},C.reflectY=function(F){return arguments.length?(h=F?-1:1,E()):h<0},C.precision=function(F){return arguments.length?(w=s9($,_=F*F),D()):Yn(_)},C.fitExtent=function(F,O){return W2(C,F,O)},C.fitSize=function(F,O){return W5(C,F,O)},C.fitWidth=function(F,O){return H5(C,F,O)},C.fitHeight=function(F,O){return Y5(C,F,O)};function E(){var F=a9(n,0,0,d,h,f).apply(null,t(o,s)),O=a9(n,r-F[0],i-F[1],d,h,f);return c=Wq(a,u,l),$=xE(t,O),A=xE(c,$),w=s9($,_),D()}function D(){return M=k=null,C}return function(){return t=e.apply(this,arguments),C.invert=t.invert&&N,E()}}function G5(e){var t=0,n=Ae/3,r=aW(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ee,n=o[1]*Ee):[t*xt,n*xt]},i}function dye(e){var t=le(e);function n(r,i){return[r*t,se(i)/t]}return n.invert=function(r,i){return[r/t,yr(i*t)]},n}function hye(e,t){var n=se(e),r=(n+se(t))/2;if(Ne(r)<ae)return dye(e);var i=1+n*(2*r-n),o=Yn(i)/r;function s(a,u){var l=Yn(i-2*r*se(u))/r;return[l*se(a*=r),o-l*le(a)]}return s.invert=function(a,u){var l=o-u,c=Jr(a,Ne(l))*qr(l);return l*r<0&&(c-=Ae*qr(a)*qr(l)),[c/r,yr((i-(a*a+l*l)*r*r)/(2*r))]},s}function cb(){return G5(hye).scale(155.424).center([0,33.6442])}function uW(){return cb().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function gye(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function pye(){var e,t,n=uW(),r,i=cb().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=cb().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],g=d[1];return u=null,r.point(h,g),u||(o.point(h,g),u)||(a.point(h,g),u)}c.invert=function(d){var h=n.scale(),g=n.translate(),p=(d[0]-g[0])/h,m=(d[1]-g[1])/h;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?i:m>=.166&&m<.234&&p>=-.214&&p<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=gye([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),g=+d[0],p=+d[1];return r=n.translate(d).clipExtent([[g-.455*h,p-.238*h],[g+.455*h,p+.238*h]]).stream(l),o=i.translate([g-.307*h,p+.201*h]).clipExtent([[g-.425*h+ae,p+.12*h+ae],[g-.214*h-ae,p+.234*h-ae]]).stream(l),a=s.translate([g-.205*h,p+.212*h]).clipExtent([[g-.214*h+ae,p+.166*h+ae],[g-.115*h-ae,p+.234*h-ae]]).stream(l),f()},c.fitExtent=function(d,h){return W2(c,d,h)},c.fitSize=function(d,h){return W5(c,d,h)},c.fitWidth=function(d,h){return H5(c,d,h)},c.fitHeight=function(d,h){return Y5(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function lW(e){return function(t,n){var r=le(t),i=le(n),o=e(r*i);return o===1/0?[2,0]:[o*i*se(t),o*se(n)]}}function _p(e){return function(t,n){var r=Yn(t*t+n*n),i=e(r),o=se(i),s=le(i);return[Jr(t*o,r*s),yr(r&&n*o/r)]}}var cW=lW(function(e){return Yn(2/(1+e))});cW.invert=_p(function(e){return 2*yr(e/2)});function mye(){return ko(cW).scale(124.75).clipAngle(180-.001)}var fW=lW(function(e){return(e=Tq(e))&&e/se(e)});fW.invert=_p(function(e){return e});function yye(){return ko(fW).scale(79.4188).clipAngle(180-.001)}function H2(e,t){return[e,Hy(z5((bt+t)/2))]}H2.invert=function(e,t){return[e,2*$d(Oq(t))-bt]};function bye(){return dW(H2).scale(961/Hn)}function dW(e){var t=ko(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=u=l=null:(s=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):s==null?null:[[s,a],[u,l]]};function c(){var f=Ae*r(),d=t(Pme(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===H2?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,u),l]]:[[s,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function q1(e){return z5((bt+e)/2)}function vye(e,t){var n=le(e),r=e===t?se(e):Hy(n/le(t))/Hy(q1(t)/q1(e)),i=n*R$(q1(e),r)/r;if(!r)return H2;function o(s,a){i>0?a<-bt+ae&&(a=-bt+ae):a>bt-ae&&(a=bt-ae);var u=i/R$(q1(a),r);return[u*se(r*s),i-u*le(r*s)]}return o.invert=function(s,a){var u=i-a,l=qr(r)*Yn(s*s+u*u),c=Jr(s,Ne(u))*qr(u);return u*r<0&&(c-=Ae*qr(s)*qr(u)),[c/r,2*$d(R$(i/l,1/r))-bt]},o}function xye(){return G5(vye).scale(109.5).parallels([30,30])}function fb(e,t){return[e,t]}fb.invert=fb;function _ye(){return ko(fb).scale(152.63)}function $ye(e,t){var n=le(e),r=e===t?se(e):(n-le(t))/(t-e),i=n/r+e;if(Ne(r)<ae)return fb;function o(s,a){var u=i-a,l=r*s;return[u*se(l),i-u*le(l)]}return o.invert=function(s,a){var u=i-a,l=Jr(s,Ne(u))*qr(u);return u*r<0&&(l-=Ae*qr(s)*qr(u)),[l/r,i-qr(r)*Yn(s*s+u*u)]},o}function wye(){return G5($ye).scale(131.154).center([0,13.9389])}var s0=1.340264,a0=-.081106,u0=893e-6,l0=.003796,db=Yn(3)/2,Aye=12;function hW(e,t){var n=yr(db*se(t)),r=n*n,i=r*r*r;return[e*le(n)/(db*(s0+3*a0*r+i*(7*u0+9*l0*r))),n*(s0+a0*r+i*(u0+l0*r))]}hW.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,u;o<Aye&&(a=n*(s0+a0*r+i*(u0+l0*r))-t,u=s0+3*a0*r+i*(7*u0+9*l0*r),n-=s=a/u,r=n*n,i=r*r*r,!(Ne(s)<qy));++o);return[db*e*(s0+3*a0*r+i*(7*u0+9*l0*r))/le(n),yr(se(n)/db)]};function Eye(){return ko(hW).scale(177.158)}function gW(e,t){var n=le(t),r=le(e)*n;return[n*se(e)/r,se(t)/r]}gW.invert=_p($d);function Cye(){return ko(gW).scale(144.049).clipAngle(60)}function Sye(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,u=null,l,c,f,d=1,h=1,g=q2({point:function(v,_){var w=x([v,_]);this.stream.point(w[0],w[1])}}),p=sg,m,y;function b(){return d=e*r,h=e*i,m=y=null,x}function x(v){var _=v[0]*d,w=v[1]*h;if(o){var $=w*s-_*a;_=_*s+w*a,w=$}return[_+t,w+n]}return x.invert=function(v){var _=v[0]-t,w=v[1]-n;if(o){var $=w*s+_*a;_=_*s-w*a,w=$}return[_/d,w/h]},x.stream=function(v){return m&&y===v?m:m=g(p(y=v))},x.postclip=function(v){return arguments.length?(p=v,u=l=c=f=null,b()):p},x.clipExtent=function(v){return arguments.length?(p=v==null?(u=l=c=f=null,sg):Vq(u=+v[0][0],l=+v[0][1],c=+v[1][0],f=+v[1][1]),b()):u==null?null:[[u,l],[c,f]]},x.scale=function(v){return arguments.length?(e=+v,b()):e},x.translate=function(v){return arguments.length?(t=+v[0],n=+v[1],b()):[t,n]},x.angle=function(v){return arguments.length?(o=v%360*Ee,a=se(o),s=le(o),b()):o*xt},x.reflectX=function(v){return arguments.length?(r=v?-1:1,b()):r<0},x.reflectY=function(v){return arguments.length?(i=v?-1:1,b()):i<0},x.fitExtent=function(v,_){return W2(x,v,_)},x.fitSize=function(v,_){return W5(x,v,_)},x.fitWidth=function(v,_){return H5(x,v,_)},x.fitHeight=function(v,_){return Y5(x,v,_)},x}function pW(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}pW.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(Ne(i)>ae&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Fye(){return ko(pW).scale(175.295)}function mW(e,t){return[le(t)*se(e),se(t)]}mW.invert=_p(yr);function kye(){return ko(mW).scale(249.5).clipAngle(90+ae)}function yW(e,t){var n=le(t),r=1+le(e)*n;return[n*se(e)/r,se(t)/r]}yW.invert=_p(function(e){return 2*$d(e)});function Dye(){return ko(yW).scale(250).clipAngle(142)}function bW(e,t){return[Hy(z5((bt+t)/2)),-e]}bW.invert=function(e,t){return[-t,2*$d(Oq(e))-bt]};function Mye(){var e=dW(bW),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Oye=Math.abs,ME=Math.cos,hb=Math.sin,Tye=1e-6,vW=Math.PI,OE=vW/2,u9=Nye(2);function l9(e){return e>1?OE:e<-1?-OE:Math.asin(e)}function Nye(e){return e>0?Math.sqrt(e):0}function Rye(e,t){var n=e*hb(t),r=30,i;do t-=i=(t+hb(t)-n)/(1+ME(t));while(Oye(i)>Tye&&--r>0);return t/2}function Bye(e,t,n){function r(i,o){return[e*i*ME(o=Rye(n,o)),t*hb(o)]}return r.invert=function(i,o){return o=l9(o/t),[i/(e*ME(o)),l9((2*o+hb(2*o))/n)]},r}var Lye=Bye(u9/OE,u9,vW);function Pye(){return ko(Lye).scale(169.529)}const jye=sW(),TE=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Iye(e,t){return function n(){const r=t();return r.type=e,r.path=sW().projection(r),r.copy=r.copy||function(){const i=n();return TE.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},r}}function V5(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(gb[e]=Iye(e,t),this):gb[e]||null}function xW(e){return e&&e.path||jye}const gb={albers:uW,albersusa:pye,azimuthalequalarea:mye,azimuthalequidistant:yye,conicconformal:xye,conicequalarea:cb,conicequidistant:wye,equalEarth:Eye,equirectangular:_ye,gnomonic:Cye,identity:Sye,mercator:bye,mollweide:Pye,naturalEarth1:Fye,orthographic:kye,stereographic:Dye,transversemercator:Mye};for(const e in gb)V5(e,gb[e]);function zye(){}const Vo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function _W(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return o(u,l,d=>{n(d,u,l),Uye(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,g=c.length,p;h<g;++h)if(qye((p=c[h])[0],d)!==-1){p.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function o(u,l,c){var f=new Array,d=new Array,h,g,p,m,y,b;for(h=g=-1,m=u[0]>=l,Vo[m<<1].forEach(x);++h<e-1;)p=m,m=u[h+1]>=l,Vo[p|m<<1].forEach(x);for(Vo[m<<0].forEach(x);++g<t-1;){for(h=-1,m=u[g*e+e]>=l,y=u[g*e]>=l,Vo[m<<1|y<<2].forEach(x);++h<e-1;)p=m,m=u[g*e+e+h+1]>=l,b=y,y=u[g*e+h+1]>=l,Vo[p|m<<1|y<<2|b<<3].forEach(x);Vo[m|y<<3].forEach(x)}for(h=-1,y=u[g*e]>=l,Vo[y<<2].forEach(x);++h<e-1;)b=y,y=u[g*e+h+1]>=l,Vo[y<<2|b<<3].forEach(x);Vo[y<<3].forEach(x);function x(v){var _=[v[0][0]+h,v[0][1]+g],w=[v[1][0]+h,v[1][1]+g],$=s(_),A=s(w),M,k;(M=d[$])?(k=f[A])?(delete d[M.end],delete f[k.start],M===k?(M.ring.push(w),c(M.ring)):f[M.start]=d[k.end]={start:M.start,end:k.end,ring:M.ring.concat(k.ring)}):(delete d[M.end],M.ring.push(w),d[M.end=A]=M):(M=f[A])?(k=d[$])?(delete f[M.start],delete d[k.end],M===k?(M.ring.push(w),c(M.ring)):f[k.start]=d[M.end]={start:k.start,end:M.end,ring:k.ring.concat(M.ring)}):(delete f[M.start],M.ring.unshift(_),f[M.start=$]=M):f[$]=d[A]={start:$,end:A,ring:[_,w]}}}function s(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],g=d|0,p=h|0,m,y=l[p*e+g];d>0&&d<e&&g===d&&(m=l[p*e+g-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&p===h&&(m=l[(p-1)*e+g],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||q("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:zye,r):n===a},r}function Uye(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function qye(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Wye(e,t[n]))return i;return 0}function Wye(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var u=e[o],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Hye(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Hye(e,t,n){var r;return Yye(e,t,n)&&Gye(e[r=+(e[0]===t[0])],n[r],t[r])}function Yye(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Gye(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function $W(e,t,n){return function(r){var i=Oa(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,u=t?Ba(o,s,e):a/(e+1);return Fr(o+u,s,u)}}function X5(e){L.call(this,null,e)}X5.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};X(X5,L,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Xr,o=_W().smooth(e.smooth!==!1),s=e.thresholds||Vye(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=o.size([c.width,c.height])(c.values,$e(s)?s:s(c.values));Xye(f,c,l,e),f.forEach(d=>{u.push(Yv(l,Ue(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Vye(e,t,n){const r=$W(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>hl(t(i).values)))}function Xye(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ge(i)&&(i=i(n,r)),Ge(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(El(i)?i:i[0])||1,a=(El(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(wW(t,s,a,u,l))}function wW(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(u),f}}function c9(e,t,n){const r=e>=0?e:aS(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function I$(e){return Ge(e)?e:Kr(+e)}function AW(){var e=u=>u[0],t=u=>u[1],n=od,r=[-1,-1],i=960,o=500,s=2;function a(u,l){const c=c9(r[0],u,e)>>s,f=c9(r[1],u,t)>>s,d=c?c+2:0,h=f?f+2:0,g=2*d+(i>>s),p=2*h+(o>>s),m=new Float32Array(g*p),y=new Float32Array(g*p);let b=m;u.forEach(v=>{const _=d+(+e(v)>>s),w=h+(+t(v)>>s);_>=0&&_<g&&w>=0&&w<p&&(m[_+w*g]+=+n(v))}),c>0&&f>0?(jc(g,p,m,y,c),Ic(g,p,y,m,f),jc(g,p,m,y,c),Ic(g,p,y,m,f),jc(g,p,m,y,c),Ic(g,p,y,m,f)):c>0?(jc(g,p,m,y,c),jc(g,p,y,m,c),jc(g,p,m,y,c),b=y):f>0&&(Ic(g,p,m,y,f),Ic(g,p,y,m,f),Ic(g,p,m,y,f),b=y);const x=l?Math.pow(2,-2*s):1/yP(b);for(let v=0,_=g*p;v<_;++v)b[v]*=x;return{values:b,scale:1<<s,width:g,height:p,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(u){return arguments.length?(e=I$(u),a):e},a.y=function(u){return arguments.length?(t=I$(u),a):t},a.weight=function(u){return arguments.length?(n=I$(u),a):n},a.size=function(u){if(!arguments.length)return[i,o];var l=+u[0],c=+u[1];return l>=0&&c>=0||q("invalid size"),i=l,o=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||q("invalid cell size"),s=Math.floor(Math.log(u)/Math.LN2),a):1<<s},a.bandwidth=function(u){return arguments.length?(u=be(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&q("invalid bandwidth"),r=u,a):r},a}function jc(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+s*e]),a>=i&&(a>=o&&(u-=n[a-o+s*e]),r[a-i+s*e]=u/Math.min(a+1,e-1+o-a,o))}function Ic(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[s+a*e]),a>=i&&(a>=o&&(u-=n[s+(a-o)*e]),r[s+(a-i)*e]=u/Math.min(a+1,t-1+o-a,o))}function K5(e){L.call(this,null,e)}K5.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Kye=["x","y","weight","size","cellSize","bandwidth"];function EW(e,t){return Kye.forEach(n=>t[n]!=null?e[n](t[n]):0),e}X(K5,L,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Zye(r,e.groupby),o=(e.groupby||[]).map(vt),s=EW(AW(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return u=i.map(c=>Ue(l({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Zye(e,t){var n=[],r=c=>c(a),i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Z5(e){L.call(this,null,e)}Z5.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};X(Z5,L,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=_W().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||$W(e.count||10,e.nice,!!i),s=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=EW(AW(),e)(i,!0),u=wW(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=$e(o)?o:o(i),i=r.size(s)(i,o),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ue),n}});const NE="Feature",J5="FeatureCollection",Jye="MultiPoint";function Q5(e){L.call(this,null,e)}Q5.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};X(Q5,L,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Xr,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(wn(a))||o&&t.modified(wn(o))||s&&t.modified(wn(s)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),o&&s&&(t.visit(u,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:NE,geometry:{type:Jye,coordinates:r}})),this.value={type:J5,features:n}}});function ek(e){L.call(this,null,e)}ek.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};X(ek,L,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Xr,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=xW(e.projection),n.materialize().reflow()):s=i===Xr||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Qye(r,e.pointRadius);return n.visit(s,u=>u[o]=r(i(u))),r.pointRadius(a),n.modifies(o)}});function Qye(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function tk(e){L.call(this,null,e)}tk.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};X(tk,L,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function nk(e){L.call(this,null,e)}nk.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};X(nk,L,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=ebe(xW(e.projection),e.field||Da("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function ebe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function rk(e){L.call(this,[],e),this.generator=Vme()}rk.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};X(rk,L,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Ge(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(iP(n[0],i)):t.add.push(Ue(i)),n[0]=i,t}});function ik(e){L.call(this,null,e)}ik.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};X(ik,L,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Xr,o=nbe(e.opacity,e),s=tbe(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?hl(n.map(l=>hl(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=De({},l,u);r||(f.$max=hl(c.values||[])),l[a]=rbe(c,f,s.dep?s:Kr(s(f)),o.dep?o:Kr(o(f)))}),t.reflow(!0).modifies(a)}});function tbe(e,t){let n;return Ge(e)?(n=r=>mr(e(r,t)),n.dep=CW(e)):n=Kr(mr(e||"#888")),n}function nbe(e,t){let n;return Ge(e)?(n=r=>e(r,t),n.dep=CW(e)):e?n=Kr(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function CW(e){if(!Ge(e))return!1;const t=Es(wn(e));return t.$x||t.$y||t.$value||t.$max}function rbe(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?m=>c[m]:ia,d=Ts(u-s,l-a),h=d.getContext("2d"),g=h.getImageData(0,0,u-s,l-a),p=g.data;for(let m=a,y=0;m<l;++m){t.$y=m-a;for(let b=s,x=m*i;b<u;++b,y+=4){t.$x=b-s,t.$value=f(b+x);const v=n(t);p[y+0]=v.r,p[y+1]=v.g,p[y+2]=v.b,p[y+3]=~~(255*r(t))}}return h.putImageData(g,0,0),d}function SW(e){L.call(this,null,e),this.modified(!0)}X(SW,L,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=obe(e.type),TE.forEach(r=>{e[r]!=null&&f9(n,r,e[r])})):TE.forEach(r=>{e.modified(r)&&f9(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&ibe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ibe(e,t){const n=sbe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function obe(e){const t=V5((e||"mercator").toLowerCase());return t||q("Unrecognized projection type: "+e),t()}function f9(e,t,n){Ge(e[t])&&e[t](n)}function sbe(e){return e=be(e),e.length===1?e[0]:{type:J5,features:e.reduce((t,n)=>t.concat(abe(n)),[])}}function abe(e){return e.type===J5?e.features:be(e).filter(t=>t!=null).map(t=>t.type===NE?t:{type:NE,geometry:t})}const ube=Object.freeze(Object.defineProperty({__proto__:null,contour:Z5,geojson:Q5,geopath:ek,geopoint:tk,geoshape:nk,graticule:rk,heatmap:ik,isocontour:X5,kde2d:K5,projection:SW},Symbol.toStringTag,{value:"Module"}));function lbe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,u=0,l=0;for(o=0;o<s;++o)a=n[o],u+=a.x,l+=a.y;for(u=(u/s-e)*r,l=(l/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=u,a.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function cbe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return FW(this.cover(t,n),t,n,e)}function FW(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,g,p,m,y,b;if(!o)return e._root=s,e;for(;o.length;)if((p=t>=(f=(a+l)/2))?a=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d,i=o,!(o=o[y=m<<1|p]))return i[y]=s,e;if(h=+e._x.call(null,o.data),g=+e._y.call(null,o.data),t===h&&n===g)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(p=t>=(f=(a+l)/2))?a=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d;while((y=m<<1|p)===(b=(g>=d)<<1|h>=f));return i[b]=o,i[y]=s,e}function fbe(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>f&&(f=o));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)FW(this,s[n],a[n],e[n]);return this}function dbe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,s*=2,l){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function hbe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function gbe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function zn(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function pbe(e,t,n){var r,i=this._x0,o=this._y0,s,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,g,p;for(h&&d.push(new zn(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);g=d.pop();)if(!(!(h=g.node)||(s=g.x0)>c||(a=g.y0)>f||(u=g.x1)<i||(l=g.y1)<o))if(h.length){var m=(s+u)/2,y=(a+l)/2;d.push(new zn(h[3],m,y,u,l),new zn(h[2],s,y,m,l),new zn(h[1],m,a,u,y),new zn(h[0],s,a,m,y)),(p=(t>=y)<<1|e>=m)&&(g=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=g)}else{var b=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),v=b*b+x*x;if(v<n){var _=Math.sqrt(n=v);i=e-_,o=t-_,c=e+_,f=t+_,r=h.data}}return r}function mbe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,g,p,m,y;if(!n)return this;if(n.length)for(;;){if((g=c>=(d=(s+u)/2))?s=d:u=d,(p=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[m=p<<1|g]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function ybe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function bbe(){return this._root}function vbe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function xbe(e){var t=[],n,r=this._root,i,o,s,a,u;for(r&&t.push(new zn(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(o+a)/2,c=(s+u)/2;(i=r[3])&&t.push(new zn(i,l,c,a,u)),(i=r[2])&&t.push(new zn(i,o,c,l,u)),(i=r[1])&&t.push(new zn(i,l,s,a,c)),(i=r[0])&&t.push(new zn(i,o,s,l,c))}return this}function _be(e){var t=[],n=[],r;for(this._root&&t.push(new zn(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(s+u)/2,f=(a+l)/2;(o=i[0])&&t.push(new zn(o,s,a,c,f)),(o=i[1])&&t.push(new zn(o,c,a,u,f)),(o=i[2])&&t.push(new zn(o,s,f,c,l)),(o=i[3])&&t.push(new zn(o,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function $be(e){return e[0]}function wbe(e){return arguments.length?(this._x=e,this):this._x}function Abe(e){return e[1]}function Ebe(e){return arguments.length?(this._y=e,this):this._y}function ok(e,t,n){var r=new sk(t??$be,n??Abe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function sk(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function d9(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Zn=ok.prototype=sk.prototype;Zn.copy=function(){var e=new sk(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=d9(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=d9(r));return e};Zn.add=cbe;Zn.addAll=fbe;Zn.cover=dbe;Zn.data=hbe;Zn.extent=gbe;Zn.find=pbe;Zn.remove=mbe;Zn.removeAll=ybe;Zn.root=bbe;Zn.size=vbe;Zn.visit=xbe;Zn.visitAfter=_be;Zn.x=wbe;Zn.y=Ebe;function Un(e){return function(){return e}}function da(e){return(e()-.5)*1e-6}function Cbe(e){return e.x+e.vx}function Sbe(e){return e.y+e.vy}function Fbe(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Un(e==null?1:+e));function s(){for(var l,c=t.length,f,d,h,g,p,m,y=0;y<o;++y)for(f=ok(t,Cbe,Sbe).visitAfter(a),l=0;l<c;++l)d=t[l],p=n[d.index],m=p*p,h=d.x+d.vx,g=d.y+d.vy,f.visit(b);function b(x,v,_,w,$){var A=x.data,M=x.r,k=p+M;if(A){if(A.index>d.index){var C=h-A.x-A.vx,N=g-A.y-A.vy,E=C*C+N*N;E<k*k&&(C===0&&(C=da(r),E+=C*C),N===0&&(N=da(r),E+=N*N),E=(k-(E=Math.sqrt(E)))/E*i,d.vx+=(C*=E)*(k=(M*=M)/(m+M)),d.vy+=(N*=E)*k,A.vx-=C*(k=1-k),A.vy-=N*k)}return}return v>h+k||w<h-k||_>g+k||$<g-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return s.initialize=function(l,c){t=l,r=c,u()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Un(+l),u(),s):e},s}function kbe(e){return e.index}function h9(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Dbe(e){var t=kbe,n=f,r,i=Un(30),o,s,a,u,l,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,b=e.length;y<c;++y)for(var x=0,v,_,w,$,A,M,k;x<b;++x)v=e[x],_=v.source,w=v.target,$=w.x+w.vx-_.x-_.vx||da(l),A=w.y+w.vy-_.y-_.vy||da(l),M=Math.sqrt($*$+A*A),M=(M-o[x])/M*m*r[x],$*=M,A*=M,w.vx-=$*(k=u[x]),w.vy-=A*k,_.vx+=$*(k=1-k),_.vy+=A*k}function h(){if(s){var m,y=s.length,b=e.length,x=new Map(s.map((_,w)=>[t(_,w,s),_])),v;for(m=0,a=new Array(y);m<b;++m)v=e[m],v.index=m,typeof v.source!="object"&&(v.source=h9(x,v.source)),typeof v.target!="object"&&(v.target=h9(x,v.target)),a[v.source.index]=(a[v.source.index]||0)+1,a[v.target.index]=(a[v.target.index]||0)+1;for(m=0,u=new Array(b);m<b;++m)v=e[m],u[m]=a[v.source.index]/(a[v.source.index]+a[v.target.index]);r=new Array(b),g(),o=new Array(b),p()}}function g(){if(s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function p(){if(s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,l=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Un(+m),g(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Un(+m),p(),d):i},d}var Mbe={value:()=>{}};function kW(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Om(n)}function Om(e){this._=e}function Obe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Om.prototype=kW.prototype={constructor:Om,on:function(e,t){var n=this._,r=Obe(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Tbe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=g9(n[i],e.name,t);else if(t==null)for(i in n)n[i]=g9(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Om(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Tbe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function g9(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Mbe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Rf=0,qh=0,ch=0,DW=1e3,pb,Wh,mb=0,Pl=0,Y2=0,ug=typeof performance=="object"&&performance.now?performance:Date,MW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ak(){return Pl||(MW(Nbe),Pl=ug.now()+Y2)}function Nbe(){Pl=0}function yb(){this._call=this._time=this._next=null}yb.prototype=OW.prototype={constructor:yb,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ak():+n)+(t==null?0:+t),!this._next&&Wh!==this&&(Wh?Wh._next=this:pb=this,Wh=this),this._call=e,this._time=n,RE()},stop:function(){this._call&&(this._call=null,this._time=1/0,RE())}};function OW(e,t,n){var r=new yb;return r.restart(e,t,n),r}function Rbe(){ak(),++Rf;for(var e=pb,t;e;)(t=Pl-e._time)>=0&&e._call.call(null,t),e=e._next;--Rf}function p9(){Pl=(mb=ug.now())+Y2,Rf=qh=0;try{Rbe()}finally{Rf=0,Lbe(),Pl=0}}function Bbe(){var e=ug.now(),t=e-mb;t>DW&&(Y2-=t,mb=e)}function Lbe(){for(var e,t=pb,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:pb=n);Wh=e,RE(r)}function RE(e){if(!Rf){qh&&(qh=clearTimeout(qh));var t=e-Pl;t>24?(e<1/0&&(qh=setTimeout(p9,e-ug.now()-Y2)),ch&&(ch=clearInterval(ch))):(ch||(mb=ug.now(),ch=setInterval(Bbe,DW)),Rf=1,MW(p9))}}function Pbe(e,t,n){var r=new yb,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?ak():+a,r._restart(function u(l){l+=i,r._restart(u,i+=s,a),o(l)},s,a)},r.restart(e,t,n),r)}const jbe=1664525,Ibe=1013904223,m9=4294967296;function zbe(){let e=1;return()=>(e=(jbe*e+Ibe)%m9)/m9}function Ube(e){return e.x}function qbe(e){return e.y}var Wbe=10,Hbe=Math.PI*(3-Math.sqrt(5));function Ybe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,u=OW(f),l=kW("tick","end"),c=zbe();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(p){var m,y=e.length,b;p===void 0&&(p=1);for(var x=0;x<p;++x)for(n+=(o-n)*i,a.forEach(function(v){v(n)}),m=0;m<y;++m)b=e[m],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return t}function h(){for(var p=0,m=e.length,y;p<m;++p){if(y=e[p],y.index=p,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=Wbe*Math.sqrt(.5+p),x=p*Hbe;y.x=b*Math.cos(x),y.y=b*Math.sin(x)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function g(p){return p.initialize&&p.initialize(e,c),p}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(p){return arguments.length?(e=p,h(),a.forEach(g),t):e},alpha:function(p){return arguments.length?(n=+p,t):n},alphaMin:function(p){return arguments.length?(r=+p,t):r},alphaDecay:function(p){return arguments.length?(i=+p,t):+i},alphaTarget:function(p){return arguments.length?(o=+p,t):o},velocityDecay:function(p){return arguments.length?(s=1-p,t):1-s},randomSource:function(p){return arguments.length?(c=p,a.forEach(g),t):c},force:function(p,m){return arguments.length>1?(m==null?a.delete(p):a.set(p,g(m)),t):a.get(p)},find:function(p,m,y){var b=0,x=e.length,v,_,w,$,A;for(y==null?y=1/0:y*=y,b=0;b<x;++b)$=e[b],v=p-$.x,_=m-$.y,w=v*v+_*_,w<y&&(A=$,y=w);return A},on:function(p,m){return arguments.length>1?(l.on(p,m),t):l.on(p)}}}function Gbe(){var e,t,n,r,i=Un(-30),o,s=1,a=1/0,u=.81;function l(h){var g,p=e.length,m=ok(e,Ube,qbe).visitAfter(f);for(r=h,g=0;g<p;++g)t=e[g],m.visit(d)}function c(){if(e){var h,g=e.length,p;for(o=new Array(g),h=0;h<g;++h)p=e[h],o[p.index]=+i(p,h,e)}}function f(h){var g=0,p,m,y=0,b,x,v;if(h.length){for(b=x=v=0;v<4;++v)(p=h[v])&&(m=Math.abs(p.value))&&(g+=p.value,y+=m,b+=m*p.x,x+=m*p.y);h.x=b/y,h.y=x/y}else{p=h,p.x=p.data.x,p.y=p.data.y;do g+=o[p.data.index];while(p=p.next)}h.value=g}function d(h,g,p,m){if(!h.value)return!0;var y=h.x-t.x,b=h.y-t.y,x=m-g,v=y*y+b*b;if(x*x/u<v)return v<a&&(y===0&&(y=da(n),v+=y*y),b===0&&(b=da(n),v+=b*b),v<s&&(v=Math.sqrt(s*v)),t.vx+=y*h.value*r/v,t.vy+=b*h.value*r/v),!0;if(h.length||v>=a)return;(h.data!==t||h.next)&&(y===0&&(y=da(n),v+=y*y),b===0&&(b=da(n),v+=b*b),v<s&&(v=Math.sqrt(s*v)));do h.data!==t&&(x=o[h.data.index]*r/v,t.vx+=y*x,t.vy+=b*x);while(h=h.next)}return l.initialize=function(h,g){e=h,n=g,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Un(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Vbe(e){var t=Un(.1),n,r,i;typeof e!="function"&&(e=Un(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Un(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Un(+a),s(),o):e},o}function Xbe(e){var t=Un(.1),n,r,i;typeof e!="function"&&(e=Un(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Un(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Un(+a),s(),o):e},o}const y9={center:lbe,collide:Fbe,nbody:Gbe,link:Dbe,x:Vbe,y:Xbe},Hh="forces",BE=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Kbe=["static","iterations"],TW=["x","y","vx","vy"];function uk(e){L.call(this,null,e)}uk.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:TW}]};X(uk,L,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(BE),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&NW(n,e,0,t)):(this.value=n=Jbe(t.source,e),n.on("tick",Zbe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Kbe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==Hh||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(TW)}});function Zbe(e,t){return()=>e.touch(t).run()}function Jbe(e,t){const n=Ybe(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),NW(n,t,!0).on("end",()=>o=!0)}function NW(e,t,n,r){var i=be(t.forces),o,s,a,u;for(o=0,s=BE.length;o<s;++o)a=BE[o],a!==Hh&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)u=Hh+o,a=n||t.modified(Hh,o)?eve(i[o]):r&&Qbe(i[o],r)?e.force(u):null,a&&e.force(u,a);for(s=e.numForces||0;o<s;++o)e.force(Hh+o,null);return e.numForces=i.length,e}function Qbe(e,t){var n,r;for(n in e)if(Ge(r=e[n])&&t.modified(wn(r)))return 1;return 0}function eve(e){var t,n;ve(y9,e.force)||q("Unrecognized force: "+e.force),t=y9[e.force]();for(n in e)Ge(t[n])&&tve(t[n],e[n],e);return t}function tve(e,t,n){e(Ge(t)?r=>t(r,n):t)}const nve=Object.freeze(Object.defineProperty({__proto__:null,force:uk},Symbol.toStringTag,{value:"Module"}));function rve(e,t){return e.parent===t.parent?1:2}function ive(e){return e.reduce(ove,0)/e.length}function ove(e,t){return e+t.x}function sve(e){return 1+e.reduce(ave,0)}function ave(e,t){return Math.max(e,t.y)}function uve(e){for(var t;t=e.children;)e=t[0];return e}function lve(e){for(var t;t=e.children;)e=t[t.length-1];return e}function cve(){var e=rve,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=ive(h),d.y=sve(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var u=uve(o),l=lve(o),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function fve(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function dve(){return this.eachAfter(fve)}function hve(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function gve(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function pve(e,t){for(var n=this,r=[n],i=[],o,s,a,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function mve(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function yve(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function bve(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function vve(e){for(var t=this,n=xve(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function xve(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function _ve(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function $ve(){return Array.from(this)}function wve(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ave(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Eve(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function lk(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Fve)):t===void 0&&(t=Sve);for(var n=new Bf(e),r,i=[n],o,s,a,u;r=i.pop();)if((s=t(r.data))&&(u=(s=Array.from(s)).length))for(r.children=s,a=u-1;a>=0;--a)i.push(o=s[a]=new Bf(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(RW)}function Cve(){return lk(this).eachBefore(kve)}function Sve(e){return e.children}function Fve(e){return Array.isArray(e)?e[1]:null}function kve(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function RW(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Bf(e){this.data=e,this.depth=this.height=0,this.parent=null}Bf.prototype=lk.prototype={constructor:Bf,count:dve,each:hve,eachAfter:pve,eachBefore:gve,find:mve,sum:yve,sort:bve,path:vve,ancestors:_ve,descendants:$ve,leaves:wve,links:Ave,copy:Cve,[Symbol.iterator]:Eve};function Dve(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Mve(e){for(var t=e.length,n,r;t;)r=Math.random()*t--|0,n=e[t],e[t]=e[r],e[r]=n;return e}function Ove(e){for(var t=0,n=(e=Mve(Array.from(e))).length,r=[],i,o;t<n;)i=e[t],o&&BW(o,i)?++t:(o=Nve(r=Tve(r,i)),t=0);return o}function Tve(e,t){var n,r;if(z$(t,e))return[t];for(n=0;n<e.length;++n)if(W1(t,e[n])&&z$(Yh(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(W1(Yh(e[n],e[r]),t)&&W1(Yh(e[n],t),e[r])&&W1(Yh(e[r],t),e[n])&&z$(LW(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function W1(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function BW(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function z$(e,t){for(var n=0;n<t.length;++n)if(!BW(e,t[n]))return!1;return!0}function Nve(e){switch(e.length){case 1:return Rve(e[0]);case 2:return Yh(e[0],e[1]);case 3:return LW(e[0],e[1],e[2])}}function Rve(e){return{x:e.x,y:e.y,r:e.r}}function Yh(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,u=o-n,l=s-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+s+l/f*c)/2,r:(f+i+a)/2}}function LW(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-s,h=r-l,g=i-a,p=i-c,m=u-o,y=f-o,b=r*r+i*i-o*o,x=b-s*s-a*a+u*u,v=b-l*l-c*c+f*f,_=h*g-d*p,w=(g*v-p*x)/(_*2)-r,$=(p*m-g*y)/_,A=(h*x-d*v)/(_*2)-i,M=(d*y-h*m)/_,k=$*$+M*M-1,C=2*(o+w*$+A*M),N=w*w+A*A-o*o,E=-(k?(C+Math.sqrt(C*C-4*k*N))/(2*k):N/C);return{x:r+w+$*E,y:i+A+M*E,r:E}}function b9(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,u,l=r*r+s*s;l?(o=t.r+n.r,o*=o,u=e.r+n.r,u*=u,o>u?(i=(l+u-o)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(l+o-u)/(2*l),a=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function v9(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function x9(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function H1(e){this._=e,this.next=null,this.previous=null}function Bve(e){if(!(i=(e=Dve(e)).length))return 0;var t,n,r,i,o,s,a,u,l,c,f;if(t=e[0],t.x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;b9(n,t,r=e[2]),t=new H1(t),n=new H1(n),r=new H1(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(a=3;a<i;++a){b9(t._,n._,r=e[a]),r=new H1(r),u=n.next,l=t.previous,c=n._.r,f=t._.r;do if(c<=f){if(v9(u._,r._)){n=u,t.next=n,n.previous=t,--a;continue e}c+=u._.r,u=u.next}else{if(v9(l._,r._)){t=l,t.next=n,n.previous=t,--a;continue e}f+=l._.r,l=l.previous}while(u!==l.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,o=x9(t);(r=r.next)!==n;)(s=x9(r))<o&&(t=r,o=s);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=Ove(t),a=0;a<i;++a)t=e[a],t.x-=r.x,t.y-=r.y;return r.r}function Lve(e){return e==null?null:bb(e)}function bb(e){if(typeof e!="function")throw new Error;return e}function Zu(){return 0}function Yc(e){return function(){return e}}function Pve(e){return Math.sqrt(e.value)}function jve(){var e=null,t=1,n=1,r=Zu;function i(o){return o.x=t/2,o.y=n/2,e?o.eachBefore(_9(e)).eachAfter(U$(r,.5)).eachBefore($9(1)):o.eachBefore(_9(Pve)).eachAfter(U$(Zu,1)).eachAfter(U$(r,o.r/Math.min(t,n))).eachBefore($9(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Lve(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Yc(+o),i):r},i}function _9(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function U$(e,t){return function(n){if(r=n.children){var r,i,o=r.length,s=e(n)*t||0,a;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=Bve(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function $9(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function PW(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function $p(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(r-t)/e.value;++a<u;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*l}function Ive(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(PW),s}function o(s,a){return function(u){u.children&&$p(u,u.x0,s*(u.depth+1)/a,u.x1,s*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var zve={depth:-1},w9={};function Uve(e){return e.id}function qve(e){return e.parentId}function A9(){var e=Uve,t=qve;function n(r){var i=Array.from(r),o=i.length,s,a,u,l,c,f,d,h=new Map;for(a=0;a<o;++a)s=i[a],c=i[a]=new Bf(s),(f=e(s,a,r))!=null&&(f+="")&&(d=c.id=f,h.set(d,h.has(d)?w9:c)),(f=t(s,a,r))!=null&&(f+="")&&(c.parent=f);for(a=0;a<o;++a)if(c=i[a],f=c.parent){if(l=h.get(f),!l)throw new Error("missing: "+f);if(l===w9)throw new Error("ambiguous: "+f);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(u)throw new Error("multiple roots");u=c}if(!u)throw new Error("no root");if(u.parent=zve,u.eachBefore(function(g){g.depth=g.parent.depth+1,--o}).eachBefore(RW),u.parent=null,o>0)throw new Error("cycle");return u}return n.id=function(r){return arguments.length?(e=bb(r),n):e},n.parentId=function(r){return arguments.length?(t=bb(r),n):t},n}function Wve(e,t){return e.parent===t.parent?1:2}function q$(e){var t=e.children;return t?t[0]:e.t}function W$(e){var t=e.children;return t?t[t.length-1]:e.t}function Hve(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Yve(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Gve(e,t,n){return e.a.parent===t.parent?e.a:n}function Tm(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Tm.prototype=Object.create(Bf.prototype);function Vve(e){for(var t=new Tm(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new Tm(o[s],s)),i.parent=n;return(t.parent=new Tm(null,0)).children=[t],t}function Xve(){var e=Wve,t=1,n=1,r=null;function i(l){var c=Vve(l);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var g=f===d?1:e(f,d)/2,p=g-f.x,m=t/(d.x+g+p),y=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+p)*m,b.y=b.depth*y})}return l}function o(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Yve(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,g=c,p=d.parent.children[0],m=d.m,y=h.m,b=g.m,x=p.m,v;g=W$(g),d=q$(d),g&&d;)p=q$(p),h=W$(h),h.a=l,v=g.z+b-d.z-m+e(g._,d._),v>0&&(Hve(Gve(g,l,f),l,v),m+=v,y+=v),b+=g.m,m+=d.m,x+=p.m,y+=h.m;g&&!W$(h)&&(h.t=g,h.m+=b-y),d&&!q$(p)&&(p.t=d,p.m+=m-x,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function G2(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(i-n)/e.value;++a<u;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*l}var jW=(1+Math.sqrt(5))/2;function IW(e,t,n,r,i,o){for(var s=[],a=t.children,u,l,c=0,f=0,d=a.length,h,g,p=t.value,m,y,b,x,v,_,w;c<d;){h=i-n,g=o-r;do m=a[f++].value;while(!m&&f<d);for(y=b=m,_=Math.max(g/h,h/g)/(p*e),w=m*m*_,v=Math.max(b/w,w/y);f<d;++f){if(m+=l=a[f].value,l<y&&(y=l),l>b&&(b=l),w=m*m*_,x=Math.max(b/w,w/y),x>v){m-=l;break}v=x}s.push(u={value:m,dice:h<g,children:a.slice(c,f)}),u.dice?$p(u,n,r,i,p?r+=g*m/p:o):G2(u,n,r,p?n+=h*m/p:i,o),p-=m,c=f}return s}const zW=function e(t){function n(r,i,o,s,a){IW(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(jW);function Kve(){var e=zW,t=!1,n=1,r=1,i=[0],o=Zu,s=Zu,a=Zu,u=Zu,l=Zu;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(PW),d}function f(d){var h=i[d.depth],g=d.x0+h,p=d.y0+h,m=d.x1-h,y=d.y1-h;m<g&&(g=m=(g+m)/2),y<p&&(p=y=(p+y)/2),d.x0=g,d.y0=p,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,g+=l(d)-h,p+=s(d)-h,m-=a(d)-h,y-=u(d)-h,m<g&&(g=m=(g+m)/2),y<p&&(p=y=(p+y)/2),e(d,g,p,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=bb(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:Yc(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:Yc(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Yc(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:Yc(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Yc(+d),c):l},c}function Zve(e,t,n,r,i){var o=e.children,s,a=o.length,u,l=new Array(a+1);for(l[0]=u=s=0;s<a;++s)l[s+1]=u+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,g,p,m,y){if(f>=d-1){var b=o[f];b.x0=g,b.y0=p,b.x1=m,b.y1=y;return}for(var x=l[f],v=h/2+x,_=f+1,w=d-1;_<w;){var $=_+w>>>1;l[$]<v?_=$+1:w=$}v-l[_-1]<l[_]-v&&f+1<_&&--_;var A=l[_]-x,M=h-A;if(m-g>y-p){var k=h?(g*M+m*A)/h:m;c(f,_,A,g,p,k,y),c(_,d,M,k,p,m,y)}else{var C=h?(p*M+y*A)/h:y;c(f,_,A,g,p,m,C),c(_,d,M,g,C,m,y)}}}function Jve(e,t,n,r,i){(e.depth&1?G2:$p)(e,t,n,r,i)}const Qve=function e(t){function n(r,i,o,s,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,g=u.length,p=r.value;++d<g;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?$p(l,i,o,s,p?o+=(a-o)*l.value/p:a):G2(l,i,o,p?i+=(s-i)*l.value/p:s,a),p-=l.value}else r._squarify=u=IW(t,r,i,o,s,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(jW);function LE(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function ck(e){L.call(this,null,e)}ck.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const e2e=e=>e.values;X(ck,L,{transform(e,t){t.source||q("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&Hv(s.data)&&i.rem.push(s.data)}),this.value=o=lk({values:be(e.keys).reduce((s,a)=>(s.key(a),s),t2e()).entries(i.source)},e2e),n&&o.each(s=>{s.children&&(s=Ue(s.data),i.add.push(s),i.source.push(s))}),LE(o,ie,ie)),i.source.root=o,i}});function t2e(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],u={},l={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],o);return l}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Bs(e){L.call(this,null,e)}const n2e=(e,t)=>e.parent===t.parent?1:2;X(Bs,L,{transform(e,t){(!t.source||!t.source.root)&&q(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(tc(e.sort,s=>s.data)),r2e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?n2e:od);try{this.value=n(i)}catch(s){q(s)}return i.each(s=>i2e(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function r2e(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function i2e(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const PE=["x","y","r","depth","children"];function fk(e){Bs.call(this,e)}fk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:PE.length,default:PE}]};X(fk,Bs,{layout:jve,params:["radius","size","padding"],fields:PE});const jE=["x0","y0","x1","y1","depth","children"];function dk(e){Bs.call(this,e)}dk.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jE.length,default:jE}]};X(dk,Bs,{layout:Ive,params:["size","round","padding"],fields:jE});function hk(e){L.call(this,null,e)}hk.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};X(hk,L,{transform(e,t){t.source||q("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?LE(A9().id(e.key).parentId(e.parentKey)(i.source),e.key,sd):LE(A9()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const E9={tidy:Xve,cluster:cve},IE=["x","y","depth","children"];function gk(e){Bs.call(this,e)}gk.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:IE.length,default:IE}]};X(gk,Bs,{layout(e){const t=e||"tidy";if(ve(E9,t))return E9[t]();q("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:IE});function pk(e){L.call(this,[],e)}pk.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};X(pk,L,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||q("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[ie(s)]=1),r.each(s=>{const a=s.data,u=s.parent&&s.parent.data;u&&o[ie(a)]&&o[ie(u)]&&i.add.push(Ue({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[ie(s)]=1),n.forEach(s=>{(o[ie(s.source)]||o[ie(s.target)])&&i.mod.push(s)})),i}});const C9={binary:Zve,dice:$p,slice:G2,slicedice:Jve,squarify:zW,resquarify:Qve},zE=["x0","y0","x1","y1","depth","children"];function mk(e){Bs.call(this,e)}mk.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zE.length,default:zE}]};X(mk,Bs,{layout(){const e=Kve();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ve(C9,t)?e.tile(C9[t]):q("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:zE});const o2e=Object.freeze(Object.defineProperty({__proto__:null,nest:ck,pack:fk,partition:dk,stratify:hk,tree:gk,treelinks:pk,treemap:mk},Symbol.toStringTag,{value:"Module"})),UE=Math.PI,qE=2*UE,Yu=1e-6,s2e=qE-Yu;function WE(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function fc(){return new WE}WE.prototype=fc.prototype={constructor:WE,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,a=n-e,u=r-t,l=o-e,c=s-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Yu)if(!(Math.abs(c*a-u*l)>Yu)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=n-o,h=r-s,g=a*a+u*u,p=d*d+h*h,m=Math.sqrt(g),y=Math.sqrt(f),b=i*Math.tan((UE-Math.acos((g+f-p)/(2*m*y)))/2),x=b/y,v=b/m;Math.abs(x-1)>Yu&&(this._+="L"+(e+x*l)+","+(t+x*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+v*a)+","+(this._y1=t+v*u)}},arc:function(e,t,n,r,i,o){e=+e,t=+t,n=+n,o=!!o;var s=n*Math.cos(r),a=n*Math.sin(r),u=e+s,l=t+a,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>Yu||Math.abs(this._y1-l)>Yu)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%qE+qE),f>s2e?this._+="A"+n+","+n+",0,1,"+c+","+(e-s)+","+(t-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>Yu&&(this._+="A"+n+","+n+",0,"+ +(f>=UE)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function He(e){return function(){return e}}var S9=Math.abs,fn=Math.atan2,Du=Math.cos,a2e=Math.max,H$=Math.min,Yi=Math.sin,Zc=Math.sqrt,gn=1e-12,Lf=Math.PI,vb=Lf/2,UW=2*Lf;function u2e(e){return e>1?0:e<-1?Lf:Math.acos(e)}function F9(e){return e>=1?vb:e<=-1?-vb:Math.asin(e)}function l2e(e){return e.innerRadius}function c2e(e){return e.outerRadius}function f2e(e){return e.startAngle}function d2e(e){return e.endAngle}function h2e(e){return e&&e.padAngle}function g2e(e,t,n,r,i,o,s,a){var u=n-e,l=r-t,c=s-i,f=a-o,d=f*u-c*l;if(!(d*d<gn))return d=(c*(t-o)-f*(e-i))/d,[e+d*u,t+d*l]}function Y1(e,t,n,r,i,o,s){var a=e-n,u=t-r,l=(s?o:-o)/Zc(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,g=n+c,p=r+f,m=(d+g)/2,y=(h+p)/2,b=g-d,x=p-h,v=b*b+x*x,_=i-o,w=d*p-g*h,$=(x<0?-1:1)*Zc(a2e(0,_*_*v-w*w)),A=(w*x-b*$)/v,M=(-w*b-x*$)/v,k=(w*x+b*$)/v,C=(-w*b+x*$)/v,N=A-m,E=M-y,D=k-m,F=C-y;return N*N+E*E>D*D+F*F&&(A=k,M=C),{cx:A,cy:M,x01:-c,y01:-f,x11:A*(i/_-1),y11:M*(i/_-1)}}function p2e(){var e=l2e,t=c2e,n=He(0),r=null,i=f2e,o=d2e,s=h2e,a=null;function u(){var l,c,f=+e.apply(this,arguments),d=+t.apply(this,arguments),h=i.apply(this,arguments)-vb,g=o.apply(this,arguments)-vb,p=S9(g-h),m=g>h;if(a||(a=l=fc()),d<f&&(c=d,d=f,f=c),!(d>gn))a.moveTo(0,0);else if(p>UW-gn)a.moveTo(d*Du(h),d*Yi(h)),a.arc(0,0,d,h,g,!m),f>gn&&(a.moveTo(f*Du(g),f*Yi(g)),a.arc(0,0,f,g,h,m));else{var y=h,b=g,x=h,v=g,_=p,w=p,$=s.apply(this,arguments)/2,A=$>gn&&(r?+r.apply(this,arguments):Zc(f*f+d*d)),M=H$(S9(d-f)/2,+n.apply(this,arguments)),k=M,C=M,N,E;if(A>gn){var D=F9(A/f*Yi($)),F=F9(A/d*Yi($));(_-=D*2)>gn?(D*=m?1:-1,x+=D,v-=D):(_=0,x=v=(h+g)/2),(w-=F*2)>gn?(F*=m?1:-1,y+=F,b-=F):(w=0,y=b=(h+g)/2)}var O=d*Du(y),R=d*Yi(y),B=f*Du(v),P=f*Yi(v);if(M>gn){var Z=d*Du(b),Q=d*Yi(b),fe=f*Du(x),we=f*Yi(x),de;if(p<Lf&&(de=g2e(O,R,fe,we,Z,Q,B,P))){var Me=O-de[0],wt=R-de[1],On=Z-de[0],ln=Q-de[1],T=1/Yi(u2e((Me*On+wt*ln)/(Zc(Me*Me+wt*wt)*Zc(On*On+ln*ln)))/2),U=Zc(de[0]*de[0]+de[1]*de[1]);k=H$(M,(f-U)/(T-1)),C=H$(M,(d-U)/(T+1))}}w>gn?C>gn?(N=Y1(fe,we,O,R,d,C,m),E=Y1(Z,Q,B,P,d,C,m),a.moveTo(N.cx+N.x01,N.cy+N.y01),C<M?a.arc(N.cx,N.cy,C,fn(N.y01,N.x01),fn(E.y01,E.x01),!m):(a.arc(N.cx,N.cy,C,fn(N.y01,N.x01),fn(N.y11,N.x11),!m),a.arc(0,0,d,fn(N.cy+N.y11,N.cx+N.x11),fn(E.cy+E.y11,E.cx+E.x11),!m),a.arc(E.cx,E.cy,C,fn(E.y11,E.x11),fn(E.y01,E.x01),!m))):(a.moveTo(O,R),a.arc(0,0,d,y,b,!m)):a.moveTo(O,R),!(f>gn)||!(_>gn)?a.lineTo(B,P):k>gn?(N=Y1(B,P,Z,Q,f,-k,m),E=Y1(O,R,fe,we,f,-k,m),a.lineTo(N.cx+N.x01,N.cy+N.y01),k<M?a.arc(N.cx,N.cy,k,fn(N.y01,N.x01),fn(E.y01,E.x01),!m):(a.arc(N.cx,N.cy,k,fn(N.y01,N.x01),fn(N.y11,N.x11),!m),a.arc(0,0,f,fn(N.cy+N.y11,N.cx+N.x11),fn(E.cy+E.y11,E.cx+E.x11),m),a.arc(E.cx,E.cy,k,fn(E.y11,E.x11),fn(E.y01,E.x01),!m))):a.arc(0,0,f,v,x,m)}if(a.closePath(),l)return a=null,l+""||null}return u.centroid=function(){var l=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Lf/2;return[Du(c)*l,Yi(c)*l]},u.innerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:He(+l),u):e},u.outerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:He(+l),u):t},u.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:He(+l),u):n},u.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:He(+l),u):r},u.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:He(+l),u):i},u.endAngle=function(l){return arguments.length?(o=typeof l=="function"?l:He(+l),u):o},u.padAngle=function(l){return arguments.length?(s=typeof l=="function"?l:He(+l),u):s},u.context=function(l){return arguments.length?(a=l??null,u):a},u}function qW(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function WW(e){this._context=e}WW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yk(e){return new WW(e)}function HW(e){return e[0]}function YW(e){return e[1]}function GW(e,t){var n=He(!0),r=null,i=yk,o=null;e=typeof e=="function"?e:e===void 0?HW:He(e),t=typeof t=="function"?t:t===void 0?YW:He(t);function s(a){var u,l=(a=qW(a)).length,c,f=!1,d;for(r==null&&(o=i(d=fc())),u=0;u<=l;++u)!(u<l&&n(c=a[u],u,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(c,u,a),+t(c,u,a));if(d)return o=null,d+""||null}return s.x=function(a){return arguments.length?(e=typeof a=="function"?a:He(+a),s):e},s.y=function(a){return arguments.length?(t=typeof a=="function"?a:He(+a),s):t},s.defined=function(a){return arguments.length?(n=typeof a=="function"?a:He(!!a),s):n},s.curve=function(a){return arguments.length?(i=a,r!=null&&(o=i(r)),s):i},s.context=function(a){return arguments.length?(a==null?r=o=null:o=i(r=a),s):r},s}function VW(e,t,n){var r=null,i=He(!0),o=null,s=yk,a=null;e=typeof e=="function"?e:e===void 0?HW:He(+e),t=typeof t=="function"?t:He(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?YW:He(+n);function u(c){var f,d,h,g=(c=qW(c)).length,p,m=!1,y,b=new Array(g),x=new Array(g);for(o==null&&(a=s(y=fc())),f=0;f<=g;++f){if(!(f<g&&i(p=c[f],f,c))===m)if(m=!m)d=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=f-1;h>=d;--h)a.point(b[h],x[h]);a.lineEnd(),a.areaEnd()}m&&(b[f]=+e(p,f,c),x[f]=+t(p,f,c),a.point(r?+r(p,f,c):b[f],n?+n(p,f,c):x[f]))}if(y)return a=null,y+""||null}function l(){return GW().defined(i).curve(s).context(o)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:He(+c),r=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:He(+c),u):e},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:He(+c),u):r},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:He(+c),n=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:He(+c),u):t},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:He(+c),u):n},u.lineX0=u.lineY0=function(){return l().x(e).y(t)},u.lineY1=function(){return l().x(e).y(n)},u.lineX1=function(){return l().x(r).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:He(!!c),u):i},u.curve=function(c){return arguments.length?(s=c,o!=null&&(a=s(o)),u):s},u.context=function(c){return arguments.length?(c==null?o=a=null:a=s(o=c),u):o},u}const m2e={draw:function(e,t){var n=Math.sqrt(t/Lf);e.moveTo(n,0),e.arc(0,0,n,0,UW)}};function y2e(e,t){var n=null;e=typeof e=="function"?e:He(e||m2e),t=typeof t=="function"?t:He(t===void 0?64:+t);function r(){var i;if(n||(n=i=fc()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:He(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:He(+i),r):t},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function Va(){}function xb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function V2(e){this._context=e}V2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b2e(e){return new V2(e)}function XW(e){this._context=e}XW.prototype={areaStart:Va,areaEnd:Va,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v2e(e){return new XW(e)}function KW(e){this._context=e}KW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function x2e(e){return new KW(e)}function ZW(e,t){this._basis=new V2(e),this._beta=t}ZW.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*o),this._beta*t[a]+(1-this._beta)*(i+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const _2e=function e(t){function n(r){return t===1?new V2(r):new ZW(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function _b(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function bk(e,t){this._context=e,this._k=(1-t)/6}bk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_b(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:_b(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $2e=function e(t){function n(r){return new bk(r,t)}return n.tension=function(r){return e(+r)},n}(0);function vk(e,t){this._context=e,this._k=(1-t)/6}vk.prototype={areaStart:Va,areaEnd:Va,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_b(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const w2e=function e(t){function n(r){return new vk(r,t)}return n.tension=function(r){return e(+r)},n}(0);function xk(e,t){this._context=e,this._k=(1-t)/6}xk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_b(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A2e=function e(t){function n(r){return new xk(r,t)}return n.tension=function(r){return e(+r)},n}(0);function _k(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>gn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>gn){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function JW(e,t){this._context=e,this._alpha=t}JW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:_k(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E2e=function e(t){function n(r){return t?new JW(r,t):new bk(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function QW(e,t){this._context=e,this._alpha=t}QW.prototype={areaStart:Va,areaEnd:Va,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_k(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const C2e=function e(t){function n(r){return t?new QW(r,t):new vk(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function eH(e,t){this._context=e,this._alpha=t}eH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_k(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S2e=function e(t){function n(r){return t?new eH(r,t):new xk(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function tH(e){this._context=e}tH.prototype={areaStart:Va,areaEnd:Va,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function F2e(e){return new tH(e)}function k9(e){return e<0?-1:1}function D9(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(k9(o)+k9(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function M9(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Y$(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function $b(e){this._context=e}$b.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Y$(this,this._t0,M9(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Y$(this,M9(this,n=D9(this,e,t)),n);break;default:Y$(this,this._t0,n=D9(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function nH(e){this._context=new rH(e)}(nH.prototype=Object.create($b.prototype)).point=function(e,t){$b.prototype.point.call(this,t,e)};function rH(e){this._context=e}rH.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function k2e(e){return new $b(e)}function D2e(e){return new nH(e)}function iH(e){this._context=e}iH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=O9(e),i=O9(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function O9(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function M2e(e){return new iH(e)}function X2(e,t){this._context=e,this._t=t}X2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function O2e(e){return new X2(e,.5)}function T2e(e){return new X2(e,0)}function N2e(e){return new X2(e,1)}var T9={},G$={},V$=34,fh=10,X$=13;function oH(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function R2e(e,t){var n=oH(e);return function(r,i){return t(n(r),i,e)}}function N9(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function tr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function B2e(e){return e<0?"-"+tr(-e,6):e>9999?"+"+tr(e,6):tr(e,4)}function L2e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":B2e(e.getUTCFullYear())+"-"+tr(e.getUTCMonth()+1,2)+"-"+tr(e.getUTCDate(),2)+(i?"T"+tr(t,2)+":"+tr(n,2)+":"+tr(r,2)+"."+tr(i,3)+"Z":r?"T"+tr(t,2)+":"+tr(n,2)+":"+tr(r,2)+"Z":n||t?"T"+tr(t,2)+":"+tr(n,2)+"Z":"")}function P2e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,g,p=i(f,function(m,y){if(h)return h(m,y-1);g=m,h=d?R2e(m,d):oH(m)});return p.columns=g||[],p}function i(f,d){var h=[],g=f.length,p=0,m=0,y,b=g<=0,x=!1;f.charCodeAt(g-1)===fh&&--g,f.charCodeAt(g-1)===X$&&--g;function v(){if(b)return G$;if(x)return x=!1,T9;var w,$=p,A;if(f.charCodeAt($)===V$){for(;p++<g&&f.charCodeAt(p)!==V$||f.charCodeAt(++p)===V$;);return(w=p)>=g?b=!0:(A=f.charCodeAt(p++))===fh?x=!0:A===X$&&(x=!0,f.charCodeAt(p)===fh&&++p),f.slice($+1,w-1).replace(/""/g,'"')}for(;p<g;){if((A=f.charCodeAt(w=p++))===fh)x=!0;else if(A===X$)x=!0,f.charCodeAt(p)===fh&&++p;else if(A!==n)continue;return f.slice($,w)}return b=!0,f.slice($,g)}for(;(y=v())!==G$;){for(var _=[];y!==T9&&y!==G$;)_.push(y),y=v();d&&(_=d(_,m++))==null||h.push(_)}return h}function o(f,d){return f.map(function(h){return d.map(function(g){return c(h[g])}).join(e)})}function s(f,d){return d==null&&(d=N9(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=N9(f)),o(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?L2e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function j2e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Pf(e){return e=wb(Math.abs(e)),e?e[1]:NaN}function I2e(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function z2e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var U2e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lg(e){if(!(t=U2e.exec(e)))throw new Error("invalid format: "+e);var t;return new $k({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lg.prototype=$k.prototype;function $k(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$k.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function q2e(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var sH;function W2e(e,t){var n=wb(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(sH=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+wb(e,Math.max(0,t+o-1))[0]}function R9(e,t){var n=wb(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const B9={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:j2e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>R9(e*100,t),r:R9,s:W2e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function L9(e){return e}var P9=Array.prototype.map,j9=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function aH(e){var t=e.grouping===void 0||e.thousands===void 0?L9:I2e(P9.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?L9:z2e(P9.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=lg(f);var d=f.fill,h=f.align,g=f.sign,p=f.symbol,m=f.zero,y=f.width,b=f.comma,x=f.precision,v=f.trim,_=f.type;_==="n"?(b=!0,_="g"):B9[_]||(x===void 0&&(x=12),v=!0,_="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var w=p==="$"?n:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",$=p==="$"?r:/[%p]/.test(_)?s:"",A=B9[_],M=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function k(C){var N=w,E=$,D,F,O;if(_==="c")E=A(C)+E,C="";else{C=+C;var R=C<0||1/C<0;if(C=isNaN(C)?u:A(Math.abs(C),x),v&&(C=q2e(C)),R&&+C==0&&g!=="+"&&(R=!1),N=(R?g==="("?g:a:g==="-"||g==="("?"":g)+N,E=(_==="s"?j9[8+sH/3]:"")+E+(R&&g==="("?")":""),M){for(D=-1,F=C.length;++D<F;)if(O=C.charCodeAt(D),48>O||O>57){E=(O===46?i+C.slice(D+1):C.slice(D))+E,C=C.slice(0,D);break}}}b&&!m&&(C=t(C,1/0));var B=N.length+C.length+E.length,P=B<y?new Array(y-B+1).join(d):"";switch(b&&m&&(C=t(P+C,P.length?y-E.length:1/0),P=""),h){case"<":C=N+C+E+P;break;case"=":C=N+P+C+E;break;case"^":C=P.slice(0,B=P.length>>1)+N+C+E+P.slice(B);break;default:C=P+N+C+E;break}return o(C)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=lg(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Pf(d)/3)))*3,p=Math.pow(10,-g),m=j9[8+g/3];return function(y){return h(p*y)+m}}return{format:l,formatPrefix:c}}var G1,uH,lH;H2e({thousands:",",grouping:[3],currency:["$",""]});function H2e(e){return G1=aH(e),uH=G1.format,lH=G1.formatPrefix,G1}function Y2e(e){return Math.max(0,-Pf(Math.abs(e)))}function G2e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pf(t)/3)))*3-Pf(Math.abs(e)))}function V2e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Pf(t)-Pf(e))+1}function Gh(e){const t={};return n=>t[n]||(t[n]=e(n))}function X2e(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=K2e(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function K2e(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function cH(e){const t=Gh(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=lg(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return X2e(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=lg(s??",f");const a=Ba(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(s.precision==null)switch(s.type){case"s":return isNaN(l=G2e(a,u))||(s.precision=l),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=V2e(a,u))||(s.precision=l-(s.type==="e"));break}case"f":case"%":{isNaN(l=Y2e(a))||(s.precision=l-(s.type==="%")*2);break}}return t(s)}}}let HE;fH();function fH(){return HE=cH({format:uH,formatPrefix:lH})}function dH(e){return cH(aH(e))}function Ab(e){return arguments.length?HE=dH(e):HE}function I9(e,t,n){n=n||{},ke(n)||q("Invalid time multi-format specifier: ".concat(n));const r=t(Zr),i=t(Tr),o=t(Or),s=t(pr),a=t(Dt),u=t(En),l=t(gr),c=t(sn),f=e(n[Di]||".%L"),d=e(n[Zr]||":%S"),h=e(n[Tr]||"%I:%M"),g=e(n[Or]||"%I %p"),p=e(n[pr]||n[bn]||"%a %d"),m=e(n[Dt]||"%b %d"),y=e(n[En]||"%B"),b=e(n[gr]||"%B"),x=e(n[sn]||"%Y");return v=>(r(v)<v?f:i(v)<v?d:o(v)<v?h:s(v)<v?g:u(v)<v?a(v)<v?p:m:c(v)<v?l(v)<v?y:b:x)(v)}function hH(e){const t=Gh(e.format),n=Gh(e.utcFormat);return{timeFormat:r=>ut(r)?t(r):I9(t,gd,r),utcFormat:r=>ut(r)?n(r):I9(n,pd,r),timeParse:Gh(e.parse),utcParse:Gh(e.utcParse)}}let YE;gH();function gH(){return YE=hH({format:R2,parse:YU,utcFormat:B2,utcParse:GU})}function pH(e){return hH(zU(e))}function cg(e){return arguments.length?YE=pH(e):YE}const GE=(e,t)=>De({},e,t);function mH(e,t){const n=e?dH(e):Ab(),r=t?pH(t):cg();return GE(n,r)}function yH(e,t){const n=arguments.length;return n&&n!==2&&q("defaultLocale expects either zero or two arguments."),n?GE(Ab(e),cg(t)):GE(Ab(),cg())}function Z2e(){return fH(),gH(),yH()}const J2e=/^(data:|([A-Za-z]+:)?\/\/)/,Q2e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,exe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,z9="file://";function txe(e,t){return n=>({options:n||{},sanitize:rxe,load:nxe,fileAccess:!!t,file:ixe(t),http:sxe(e)})}async function nxe(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function rxe(e,t){t=De({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=Q2e.test(e.replace(exe,""));(e==null||typeof e!="string"||!a)&&q("Sanitize failure, invalid URI: "+he(e));const u=J2e.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(z9))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(z9.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function ixe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):oxe}async function oxe(){q("No file system access.")}function sxe(e){return e?async function(t,n){const r=De({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Ge(o[i])?o[i]():o.text():q(o.status+""+o.statusText)}:axe}async function axe(){q("No HTTP fetch method available.")}const uxe=e=>e!=null&&e===e,lxe=e=>e==="true"||e==="false"||e===!0||e===!1,cxe=e=>!Number.isNaN(Date.parse(e)),bH=e=>!Number.isNaN(+e)&&!(e instanceof Date),fxe=e=>bH(e)&&Number.isInteger(+e),VE={boolean:vL,integer:Ma,number:Ma,date:xL,string:_L,unknown:Xr},V1=[lxe,fxe,bH,cxe],dxe=["boolean","integer","number","date"];function vH(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=V1.length,i=V1.map((o,s)=>s+1);for(let o=0,s=0,a,u;o<n;++o)for(u=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&uxe(u)&&!V1[a](u)&&(i[a]=0,++s,s===V1.length))return"string";return dxe[i.reduce((o,s)=>o===0?s:o,0)-1]}function xH(e,t){return t.reduce((n,r)=>(n[r]=vH(e,r),n),{})}function U9(e){const t=function(n,r){const i={delimiter:e};return wk(n,r?De(r,i):i)};return t.responseType="text",t}function wk(e,t){return t.header&&(e=t.header.map(he).join(t.delimiter)+`
`+e),P2e(t.delimiter).parse(e+"")}wk.responseType="text";function hxe(e){return typeof Buffer=="function"&&Ge(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Ak(e,t){const n=t&&t.property?Da(t.property):Xr;return ke(e)&&!hxe(e)?gxe(n(e),t):n(JSON.parse(e))}Ak.responseType="json";function gxe(e,t){return!$e(e)&&pL(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const pxe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function _H(e,t){let n,r,i,o;return e=Ak(e,t),t&&t.feature?(n=CL,i=t.feature):t&&t.mesh?(n=FL,i=t.mesh,o=pxe[t.filter]):q("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):q("Invalid TopoJSON object: "+i),r&&r.features||[r]}_H.responseType="json";const Nm={dsv:wk,csv:U9(","),tsv:U9("	"),json:Ak,topojson:_H};function Ek(e,t){return arguments.length>1?(Nm[e]=t,this):ve(Nm,e)?Nm[e]:null}function mxe(e){const t=Ek(e);return t&&t.responseType||"text"}function yxe(e,t,n,r){t=t||{};const i=Ek(t.type||"json");return i||q("Unknown data format type: "+t.type),e=i(e,t),t.parse&&bxe(e,t.parse,n,r),ve(e,"columns")&&delete e.columns,e}function bxe(e,t,n,r){if(!e.length)return;const i=cg();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,u,l,c,f;t==="auto"&&(t=xH(e,o)),o=Object.keys(t);const d=o.map(h=>{const g=t[h];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?r:n)(m);if(!VE[g])throw Error("Illegal format pattern: "+h+":"+g);return VE[g]});for(u=0,c=e.length,f=o.length;u<c;++u)for(s=e[u],l=0;l<f;++l)a=o[l],s[a]=d[l](s[a])}const Ck=txe(typeof fetch<"u"&&fetch,null);let $H=0;function vxe(){$H=0}const Eb="p_";function Sk(e){return e&&e.gradient}function wH(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?Eb:"";return i||(i=e.id="gradient_"+$H++,r==="radial"?(e.x1=Gi(e.x1,.5),e.y1=Gi(e.y1,.5),e.r1=Gi(e.r1,0),e.x2=Gi(e.x2,.5),e.y2=Gi(e.y2,.5),e.r2=Gi(e.r2,.5),o=Eb):(e.x1=Gi(e.x1,0),e.y1=Gi(e.y1,0),e.x2=Gi(e.x2,1),e.y2=Gi(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Gi(e,t){return e??t}function AH(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const q9={basis:{curve:b2e},"basis-closed":{curve:v2e},"basis-open":{curve:x2e},bundle:{curve:_2e,tension:"beta",value:.85},cardinal:{curve:$2e,tension:"tension",value:0},"cardinal-open":{curve:A2e,tension:"tension",value:0},"cardinal-closed":{curve:w2e,tension:"tension",value:0},"catmull-rom":{curve:E2e,tension:"alpha",value:.5},"catmull-rom-closed":{curve:C2e,tension:"alpha",value:.5},"catmull-rom-open":{curve:S2e,tension:"alpha",value:.5},linear:{curve:yk},"linear-closed":{curve:F2e},monotone:{horizontal:D2e,vertical:k2e},natural:{curve:M2e},step:{curve:O2e},"step-after":{curve:N2e},"step-before":{curve:T2e}};function Fk(e,t,n){var r=ve(q9,e)&&q9[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const xxe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},dh=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function jf(e){const t=[];let n,r,i,o,s,a,u,l,c,f;const d=e.slice().replace(dh[0],"###$1").split(dh[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=d[u],r=n.slice(1).trim().replace(dh[2],"$1###$2").replace(dh[3],"$1###$2").split(dh[4]),s=n.charAt(0),i=[s],l=0,f=r.length;l<f;++l)(o=+r[l])===o&&i.push(o);if(a=xxe[s.toLowerCase()],i.length-1>a){const h=i.length;for(l=1,t.push([s].concat(i.slice(l,l+=a))),s=s==="M"?"L":s==="m"?"l":s;l<h;l+=a)t.push([s].concat(i.slice(l,l+a)))}else t.push(i)}return t}const Xa=Math.PI/180,_xe=1e-14,Ju=Math.PI/2,ro=Math.PI*2,zc=Math.sqrt(3)/2;var K$={},Z$={},EH=[].join;function $xe(e,t,n,r,i,o,s,a,u){const l=EH.call(arguments);if(K$[l])return K$[l];const c=s*Xa,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,g=d*(u-t)*.5-f*(a-e)*.5;let p=h*h/(n*n)+g*g/(r*r);p>1&&(p=Math.sqrt(p),n*=p,r*=p);const m=d/n,y=f/n,b=-f/r,x=d/r,v=m*a+y*u,_=b*a+x*u,w=m*e+y*t,$=b*e+x*t;let M=1/((w-v)*(w-v)+($-_)*($-_))-.25;M<0&&(M=0);let k=Math.sqrt(M);o==i&&(k=-k);const C=.5*(v+w)-k*($-_),N=.5*(_+$)+k*(w-v),E=Math.atan2(_-N,v-C);let F=Math.atan2($-N,w-C)-E;F<0&&o===1?F+=ro:F>0&&o===0&&(F-=ro);const O=Math.ceil(Math.abs(F/(Ju+.001))),R=[];for(let B=0;B<O;++B){const P=E+B*F/O,Z=E+(B+1)*F/O;R[B]=[C,N,P,Z,n,r,f,d]}return K$[l]=R}function wxe(e){const t=EH.call(e);if(Z$[t])return Z$[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7];const c=l*s,f=-u*a,d=u*s,h=l*a,g=Math.cos(i),p=Math.sin(i),m=Math.cos(o),y=Math.sin(o),b=.5*(o-i),x=Math.sin(b*.5),v=8/3*x*x/Math.sin(b),_=n+g-v*p,w=r+p+v*g,$=n+m,A=r+y,M=$+v*y,k=A-v*m;return Z$[t]=[c*_+f*w,d*_+h*w,c*M+f*k,d*M+h*k,c*$+f*A,d*$+h*A]}const jr=["l",0,0,0,0,0,0,0];function Axe(e,t,n){const r=jr[0]=e[0];if(r==="a"||r==="A")jr[1]=t*e[1],jr[2]=n*e[2],jr[3]=e[3],jr[4]=e[4],jr[5]=e[5],jr[6]=t*e[6],jr[7]=n*e[7];else if(r==="h"||r==="H")jr[1]=t*e[1];else if(r==="v"||r==="V")jr[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)jr[i]=(i%2==1?t:n)*e[i];return jr}function fg(e,t,n,r,i,o){var s,a=null,u=0,l=0,c=0,f=0,d,h,g,p;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var m=0,y=t.length;m<y;++m){switch(s=t[m],(i!==1||o!==1)&&(s=Axe(s,i,o)),s[0]){case"l":u+=s[1],l+=s[2],e.lineTo(u+n,l+r);break;case"L":u=s[1],l=s[2],e.lineTo(u+n,l+r);break;case"h":u+=s[1],e.lineTo(u+n,l+r);break;case"H":u=s[1],e.lineTo(u+n,l+r);break;case"v":l+=s[1],e.lineTo(u+n,l+r);break;case"V":l=s[1],e.lineTo(u+n,l+r);break;case"m":u+=s[1],l+=s[2],e.moveTo(u+n,l+r);break;case"M":u=s[1],l=s[2],e.moveTo(u+n,l+r);break;case"c":d=u+s[5],h=l+s[6],c=u+s[3],f=l+s[4],e.bezierCurveTo(u+s[1]+n,l+s[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=s[5],l=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+s[3],h=l+s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+s[1]+n,l+s[2]+r,d+n,h+r),c=u+s[1],f=l+s[2],u=d,l=h;break;case"S":d=s[3],h=s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"q":d=u+s[3],h=l+s[4],c=u+s[1],f=l+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"t":d=u+s[1],h=l+s[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-g,f=2*l-p):a[0]==="q"&&(c=2*u-c,f=2*l-f),g=c,p=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+s[1],f=l+s[2];break;case"T":d=s[1],h=s[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":W9(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+l+r]),u+=s[6],l+=s[7];break;case"A":W9(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),u=s[6],l=s[7];break;case"z":case"Z":e.closePath();break}a=s}}function W9(e,t,n,r){const i=$xe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=wxe(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const H9=.5773502691896257,Y9={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ro)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=zc*n,i=r-n*H9,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=zc*n,i=r-n*H9;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=zc*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=zc*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=zc*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=zc*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function CH(e){return ve(Y9,e)?Y9[e]:Exe(e)}var J$={};function Exe(e){if(!ve(J$,e)){const t=jf(e);J$[e]={draw:function(n,r){fg(n,t,0,0,Math.sqrt(r)/2)}}}return J$[e]}const Vs=.448084975506;function Cxe(e){return e.x}function Sxe(e){return e.y}function Fxe(e){return e.width}function kxe(e){return e.height}function Xo(e){return typeof e=="function"?e:()=>+e}function X1(e,t,n){return Math.max(t,Math.min(e,n))}function SH(){var e=Cxe,t=Sxe,n=Fxe,r=kxe,i=Xo(0),o=i,s=i,a=i,u=null;function l(c,f,d){var h,g=f??+e.call(this,c),p=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),b=Math.min(m,y)/2,x=X1(+i.call(this,c),0,b),v=X1(+o.call(this,c),0,b),_=X1(+s.call(this,c),0,b),w=X1(+a.call(this,c),0,b);if(u||(u=h=fc()),x<=0&&v<=0&&_<=0&&w<=0)u.rect(g,p,m,y);else{var $=g+m,A=p+y;u.moveTo(g+x,p),u.lineTo($-v,p),u.bezierCurveTo($-Vs*v,p,$,p+Vs*v,$,p+v),u.lineTo($,A-w),u.bezierCurveTo($,A-Vs*w,$-Vs*w,A,$-w,A),u.lineTo(g+_,A),u.bezierCurveTo(g+Vs*_,A,g,A-Vs*_,g,A-_),u.lineTo(g,p+x),u.bezierCurveTo(g,p+Vs*x,g+Vs*x,p,g+x,p),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Xo(c),l):e},l.y=function(c){return arguments.length?(t=Xo(c),l):t},l.width=function(c){return arguments.length?(n=Xo(c),l):n},l.height=function(c){return arguments.length?(r=Xo(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Xo(c),o=f!=null?Xo(f):i,a=d!=null?Xo(d):i,s=h!=null?Xo(h):o,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function FH(){var e,t,n,r,i=null,o,s,a,u;function l(f,d,h){const g=h/2;if(o){var p=a-d,m=f-s;if(p||m){var y=Math.sqrt(p*p+m*m),b=(p/=y)*u,x=(m/=y)*u,v=Math.atan2(m,p);i.moveTo(s-b,a-x),i.lineTo(f-p*g,d-m*g),i.arc(f,d,g,v-Math.PI,v),i.lineTo(s+b,a+x),i.arc(s,a,u,v,v+Math.PI)}else i.arc(f,d,g,0,ro);i.closePath()}else o=1;s=f,a=d,u=g}function c(f){var d,h=f.length,g,p=!1,m;for(i==null&&(i=m=fc()),d=0;d<=h;++d)!(d<h&&r(g=f[d],d,f))===p&&(p=!p)&&(o=0),p&&l(+e(g,d,f),+t(g,d,f),+n(g,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function wp(e,t){return e??t}const Ap=e=>e.x||0,Ep=e=>e.y||0,Dxe=e=>e.width||0,Mxe=e=>e.height||0,Oxe=e=>(e.x||0)+(e.width||0),Txe=e=>(e.y||0)+(e.height||0),Nxe=e=>e.startAngle||0,Rxe=e=>e.endAngle||0,Bxe=e=>e.padAngle||0,Lxe=e=>e.innerRadius||0,Pxe=e=>e.outerRadius||0,jxe=e=>e.cornerRadius||0,Ixe=e=>wp(e.cornerRadiusTopLeft,e.cornerRadius)||0,zxe=e=>wp(e.cornerRadiusTopRight,e.cornerRadius)||0,Uxe=e=>wp(e.cornerRadiusBottomRight,e.cornerRadius)||0,qxe=e=>wp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Wxe=e=>wp(e.size,64),Hxe=e=>e.size||1,K2=e=>e.defined!==!1,Yxe=e=>CH(e.shape||"circle"),Gxe=p2e().startAngle(Nxe).endAngle(Rxe).padAngle(Bxe).innerRadius(Lxe).outerRadius(Pxe).cornerRadius(jxe),Vxe=VW().x(Ap).y1(Ep).y0(Txe).defined(K2),Xxe=VW().y(Ep).x1(Ap).x0(Oxe).defined(K2),Kxe=GW().x(Ap).y(Ep).defined(K2),Zxe=SH().x(Ap).y(Ep).width(Dxe).height(Mxe).cornerRadius(Ixe,zxe,Uxe,qxe),Jxe=y2e().type(Yxe).size(Wxe),Qxe=FH().x(Ap).y(Ep).defined(K2).size(Hxe);function kk(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function e_e(e,t){return Gxe.context(e)(t)}function t_e(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Xxe:Vxe).curve(Fk(r,n.orient,n.tension)).context(e)(t)}function n_e(e,t){const n=t[0],r=n.interpolate||"linear";return Kxe.curve(Fk(r,n.orient,n.tension)).context(e)(t)}function wd(e,t,n,r){return Zxe.context(e)(t,n,r)}function r_e(e,t){return(t.mark.shape||t.shape).context(e)(t)}function i_e(e,t){return Jxe.context(e)(t)}function o_e(e,t){return Qxe.context(e)(t)}var kH=1;function DH(){kH=1}function Dk(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+kH++),s=i.clipping[o]||(i.clipping[o]={id:o});return Ge(r)?s.path=r(null):kk(n)?s.path=wd(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function Gn(e){this.clear(),e&&this.union(e)}Gn.prototype={clone(){return new Gn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*s+l,u*r+a*s+c,a*o-u*i+l,u*o+a*i+c,a*o-u*s+l,u*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Mk(e){this.mark=e,this.bounds=this.bounds||new Gn}function Ok(e){Mk.call(this,e),this.items=this.items||[]}X(Ok,Mk);function Tk(e){this._pending=0,this._loader=e||Ck()}function G9(e){e._pending+=1}function hh(e){e._pending-=1}Tk.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return G9(t),t._loader.sanitize(e,{context:"href"}).then(n=>(hh(t),n)).catch(()=>(hh(t),null))},loadImage(e){const t=this,n=eI();return G9(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const o=new n,s=ve(r,"crossOrigin")?r.crossOrigin:"anonymous";return s!=null&&(o.crossOrigin=s),o.onload=()=>hh(t),o.onerror=()=>hh(t),o.src=i,o}).catch(r=>(hh(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function dc(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?s_e(t,r):0))}return e}function s_e(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const a_e=ro-1e-8;let Z2,Rm,Bm,sl,XE,Lm,KE,ZE;const ha=(e,t)=>Z2.add(e,t),Pm=(e,t)=>ha(Rm=e,Bm=t),V9=e=>ha(e,Z2.y1),X9=e=>ha(Z2.x1,e),Qu=(e,t)=>XE*e+KE*t,el=(e,t)=>Lm*e+ZE*t,Q$=(e,t)=>ha(Qu(e,t),el(e,t)),ew=(e,t)=>Pm(Qu(e,t),el(e,t));function Cp(e,t){return Z2=e,t?(sl=t*Xa,XE=ZE=Math.cos(sl),Lm=Math.sin(sl),KE=-Lm):(XE=ZE=1,sl=Lm=KE=0),u_e}const u_e={beginPath(){},closePath(){},moveTo:ew,lineTo:ew,rect(e,t,n,r){sl?(Q$(e+n,t),Q$(e+n,t+r),Q$(e,t+r),ew(e,t)):(ha(e+n,t+r),Pm(e,t))},quadraticCurveTo(e,t,n,r){const i=Qu(e,t),o=el(e,t),s=Qu(n,r),a=el(n,r);K9(Rm,i,s,V9),K9(Bm,o,a,X9),Pm(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=Qu(e,t),a=el(e,t),u=Qu(n,r),l=el(n,r),c=Qu(i,o),f=el(i,o);Z9(Rm,s,u,c,V9),Z9(Bm,a,l,f,X9),Pm(c,f)},arc(e,t,n,r,i,o){if(r+=sl,i+=sl,Rm=n*Math.cos(i)+e,Bm=n*Math.sin(i)+t,Math.abs(i-r)>a_e)ha(e-n,t-n),ha(e+n,t+n);else{const s=l=>ha(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(s(r),s(i),i!==r)if(r=r%ro,r<0&&(r+=ro),i=i%ro,i<0&&(i+=ro),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=ro,a=r-r%Ju,u=0;u<4&&a>i;++u,a-=Ju)s(a);else for(a=r-r%Ju+Ju,u=0;u<4&&a<i;++u,a=a+Ju)s(a)}}};function K9(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Z9(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(o)>_xe?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),u=(-s+c)/o,l=(-s-c)/o)):u=.5*a/s,0<u&&u<1&&i(J9(u,e,t,n,r)),0<l&&l<1&&i(J9(l,e,t,n,r))}function J9(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var Sa=(Sa=Ts(1,1))?Sa.getContext("2d"):null;const JE=new Gn;function Nk(e){return function(t,n){if(!Sa)return!0;e(Sa,t),JE.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=JE;for(let a=i;a<=s;++a)for(let u=r;u<=o;++u)if(Sa.isPointInPath(u,a))return!0;return!1}}function Rk(e,t){return t.contains(e.x||0,e.y||0)}function MH(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(JE.set(n,r,n+i,r+o))}function OH(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Jc(t,n,r,i,o)}function Jc(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,g,p,m;for(m=0;m<4;++m){if(m===0&&(h=-l,g=-(o-t)),m===1&&(h=l,g=a-t),m===2&&(h=-c,g=-(s-n)),m===3&&(h=c,g=u-n),Math.abs(h)<1e-10&&g<0)return!1;if(p=g/h,h<0){if(p>d)return!1;p>f&&(f=p)}else if(h>0){if(p<f)return!1;p<d&&(d=p)}}return!0}function If(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ci(e,t){return e??t}function Q9(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function l_e(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+ci(t.x1,.5)*r,n.y1+ci(t.y1,.5)*i,Math.max(r,i)*ci(t.r1,0),n.x1+ci(t.x2,.5)*r,n.y1+ci(t.y2,.5)*i,Math.max(r,i)*ci(t.r2,.5));else{const s=ci(t.x1,0),a=ci(t.y1,0),u=ci(t.x2,1),l=ci(t.y2,0);if(s===u||a===l||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Ts(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Q9(f.createLinearGradient(s,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Q9(o,t.stops)}function TH(e,t,n){return Sk(n)?l_e(e,n,t.bounds):n}function Cb(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=TH(e,t,t.fill),!0):!1}var c_e=[];function zf(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=TH(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||c_e),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function f_e(e,t){return e.zindex-t.zindex||e.index-t.index}function Bk(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(f_e)}function Mi(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=Bk(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function Sb(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=Bk(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Lk(e){return function(t,n,r){Mi(n,i=>{(!r||r.intersects(i.bounds))&&NH(e,t,i,i)})}}function d_e(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&NH(e,t,n.items[0],n.items)}}function NH(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(If(t,n),n.fill&&Cb(t,n,i)&&t.fill(),n.stroke&&zf(t,n,i)&&t.stroke()))}function J2(e){return e=e||sd,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,Sb(n,a=>{const u=a.bounds;if(!(u&&!u.contains(o,s)||!u)&&e(t,a,r,i,o,s))return a})}}function Sp(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,u=s.stroke&&n.isPointInStroke,l,c;return u&&(l=s.strokeWidth,c=s.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||u&&n.isPointInStroke(i,o)}}function Pk(e){return J2(Sp(e))}function yl(e,t){return"translate("+e+","+t+")"}function jk(e){return"rotate("+e+")"}function h_e(e,t){return"scale("+e+","+t+")"}function RH(e){return yl(e.x||0,e.y||0)}function g_e(e){return yl(e.x||0,e.y||0)+(e.angle?" "+jk(e.angle):"")}function p_e(e){return yl(e.x||0,e.y||0)+(e.angle?" "+jk(e.angle):"")+(e.scaleX||e.scaleY?" "+h_e(e.scaleX||1,e.scaleY||1):"")}function Ik(e,t,n){function r(s,a){s("transform",g_e(a)),s("d",t(null,a))}function i(s,a){return t(Cp(s,a.angle),a),dc(s,a).translate(a.x||0,a.y||0)}function o(s,a){var u=a.x||0,l=a.y||0,c=a.angle||0;s.translate(u,l),c&&s.rotate(c*=Xa),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Lk(o),pick:Pk(o),isect:n||Nk(o)}}var m_e=Ik("arc",e_e);function y_e(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function b_e(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function v_e(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function zk(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Cp(u),c),dc(u,c[0]))}function o(u,l){u.beginPath(),t(u,l)}const s=Sp(o);function a(u,l,c,f,d,h){var g=l.items,p=l.bounds;return!g||!g.length||p&&!p.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,s(u,g,c,f)?g[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:d_e(o),pick:a,isect:Rk,tip:n}}var x_e=zk("area",t_e,y_e);function __e(e,t){var n=t.clip;e.save(),Ge(n)?(e.beginPath(),n(e),e.clip()):BH(e,t.group)}function BH(e,t){e.beginPath(),kk(t)?wd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function LH(e){const t=ci(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function $_e(e,t){e("transform",RH(t))}function PH(e,t){const n=LH(t);e("d",wd(null,t,n,n))}function w_e(e,t){e("class","background"),e("aria-hidden",!0),PH(e,t)}function A_e(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?PH(e,t):e("d","")}function E_e(e,t,n){const r=t.clip?Dk(n,t,t):null;e("clip-path",r)}function C_e(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),dc(e,t),e.translate(t.x||0,t.y||0)}function dg(e,t,n,r){const i=LH(t);e.beginPath(),wd(e,t,(n||0)+i,(r||0)+i)}const S_e=Sp(dg),F_e=Sp(dg,!1),k_e=Sp(dg,!0);function D_e(e,t,n){Mi(t,r=>{const i=r.x||0,o=r.y||0,s=r.strokeForeground,a=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&a&&(dg(e,r,i,o),If(e,r),r.fill&&Cb(e,r,a)&&e.fill(),r.stroke&&!s&&zf(e,r,a)&&e.stroke()),e.save(),e.translate(i,o),r.clip&&BH(e,r),n&&n.translate(-i,-o),Mi(r,u=>{this.draw(e,u,n)}),n&&n.translate(i,o),e.restore(),s&&r.stroke&&a&&(dg(e,r,i,o),If(e,r),zf(e,r,a)&&e.stroke())})}function M_e(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return Sb(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),g=f+(u.height||0),p=u.clip;if(p&&(i<c||i>h||o<f||o>g))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,p&&kk(u)&&!k_e(e,u,s,a))return e.restore(),null;const m=u.strokeForeground,y=t.interactive!==!1;return y&&m&&u.stroke&&F_e(e,u,s,a)?(e.restore(),u):(l=Sb(u,b=>O_e(b,c,f)?this.pick(b,n,r,c,f):null),!l&&y&&(u.fill||!m&&u.stroke)&&S_e(e,u,s,a)&&(l=u),e.restore(),l||null)})}function O_e(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var T_e={type:"group",tag:"g",nested:!1,attr:$_e,bound:C_e,draw:D_e,pick:M_e,isect:MH,content:E_e,background:w_e,foreground:A_e},hg={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Uk(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function qk(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Wk(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Q2(e,t){return e==="center"?t/2:e==="right"?t:0}function ex(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function N_e(e,t,n){const r=Uk(t,n),i=qk(t,r),o=Wk(t,r),s=(t.x||0)-Q2(t.align,i),a=(t.y||0)-ex(t.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,hg["xmlns:xlink"],"xlink:href"),e("transform",yl(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function R_e(e,t){const n=t.image,r=qk(t,n),i=Wk(t,n),o=(t.x||0)-Q2(t.align,r),s=(t.y||0)-ex(t.baseline,i);return e.set(o,s,o+r,s+i)}function B_e(e,t,n){Mi(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Uk(r,this);let o=qk(r,i),s=Wk(r,i);if(o===0||s===0)return;let a=(r.x||0)-Q2(r.align,o),u=(r.y||0)-ex(r.baseline,s),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,u+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(If(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,o,s))})}var L_e={type:"image",tag:"image",nested:!1,attr:N_e,bound:R_e,draw:B_e,pick:J2(),isect:sd,get:Uk,xOffset:Q2,yOffset:ex},P_e=zk("line",n_e,b_e);function j_e(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",p_e(t)),e("d",t.path)}function jm(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*Xa,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=jf(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),fg(e,u,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):fg(e,u,r,i,o,s)}function I_e(e,t){return jm(Cp(e,t.angle),t)?e.set(0,0,0,0):dc(e,t,!0)}var z_e={type:"path",tag:"path",nested:!1,attr:j_e,bound:I_e,draw:Lk(jm),pick:Pk(jm),isect:Nk(jm)};function U_e(e,t){e("d",wd(null,t))}function q_e(e,t){var n,r;return dc(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function eT(e,t){e.beginPath(),wd(e,t)}var W_e={type:"rect",tag:"path",nested:!1,attr:U_e,bound:q_e,draw:Lk(eT),pick:Pk(eT),isect:MH};function H_e(e,t){e("transform",RH(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Y_e(e,t){var n,r;return dc(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function jH(e,t,n){var r,i,o,s;return t.stroke&&zf(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function G_e(e,t,n){Mi(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&jH(e,r,i)&&(If(e,r),e.stroke())}})}function V_e(e,t,n,r){return e.isPointInStroke?jH(e,t,1)&&e.isPointInStroke(n,r):!1}var X_e={type:"rule",tag:"line",nested:!1,attr:H_e,bound:Y_e,draw:G_e,pick:J2(V_e),isect:OH},K_e=Ik("shape",r_e),Z_e=Ik("symbol",i_e,Rk);const tT=yL();var lo={height:Do,measureWidth:Hk,estimateWidth:QE,width:QE,canvas:IH};IH(!0);function IH(e){lo.width=e&&Sa?Hk:QE}function QE(e,t){return zH(Za(e,t),Do(e))}function zH(e,t){return~~(.8*e.length*t)}function Hk(e,t){return Do(e)<=0||!(t=Za(e,t))?0:UH(t,tx(e))}function UH(e,t){const n=`(${t}) ${e}`;let r=tT.get(n);return r===void 0&&(Sa.font=t,r=Sa.measureText(e).width,tT.set(n,r)),r}function Do(e){return e.fontSize!=null?+e.fontSize||0:11}function Ka(e){return e.lineHeight!=null?e.lineHeight:Do(e)+2}function J_e(e){return $e(e)?e.length>1?e:e[0]:e}function Fp(e){return J_e(e.lineBreak&&e.text&&!$e(e.text)?e.text.split(e.lineBreak):e.text)}function Q_e(e){const t=Fp(e);return($e(t)?t.length-1:0)*Ka(e)}function Za(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?t$e(e,n):n}function e$e(e){if(lo.width===Hk){const t=tx(e);return n=>UH(n,t)}else{const t=Do(e);return n=>zH(n,t)}}function t$e(e,t){var n=+e.limit,r=e$e(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,u;if(n-=r(i),o){for(;s<a;)u=s+a>>>1,r(t.slice(u))>n?s=u+1:a=u;return i+t.slice(s)}else{for(;s<a;)u=1+(s+a>>>1),r(t.slice(0,u))<n?s=u:a=u-1;return t.slice(0,s)+i}}function kp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function tx(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Do(e)+"px "+kp(e,t)}function Yk(e){var t=e.baseline,n=Do(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ka(e):t==="line-bottom"?.29*n-.5*Ka(e):0)}const n$e={left:"start",center:"middle",right:"end"},c0=new Gn;function nx(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Ju,t+=r*Math.cos(i),n+=r*Math.sin(i)),c0.x1=t,c0.y1=n,c0}function r$e(e,t){var n=t.dx||0,r=(t.dy||0)+Yk(t),i=nx(t),o=i.x1,s=i.y1,a=t.angle||0,u;e("text-anchor",n$e[t.align]||"start"),a?(u=yl(o,s)+" "+jk(a),(n||r)&&(u+=" "+yl(n,r))):u=yl(o+n,s+r),e("transform",u)}function Gk(e,t,n){var r=lo.height(t),i=t.align,o=nx(t),s=o.x1,a=o.y1,u=t.dx||0,l=(t.dy||0)+Yk(t)-Math.round(.8*r),c=Fp(t),f;if($e(c)?(r+=Ka(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,lo.width(t,h)),0)):f=lo.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=s,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Xa,s,a);else if(n===2)return e.rotatedPoints(t.angle*Xa,s,a);return e}function i$e(e,t,n){Mi(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=tx(r),e.textAlign=r.align||"left",o=nx(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*Xa),s=a=0),s+=r.dx||0,a+=(r.dy||0)+Yk(r),c=Fp(r),If(e,r),$e(c))for(l=Ka(r),u=0;u<c.length;++u)f=Za(r,c[u]),r.fill&&Cb(e,r,i)&&e.fillText(f,s,a),r.stroke&&zf(e,r,i)&&e.strokeText(f,s,a),a+=l;else f=Za(r,c),r.fill&&Cb(e,r,i)&&e.fillText(f,s,a),r.stroke&&zf(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function o$e(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=nx(t),a=s.x1,u=s.y1,l=Gk(c0,t,1),c=-t.angle*Xa,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*u),g=d*i+f*o+(u-d*a-f*u);return l.contains(h,g)}function s$e(e,t){const n=Gk(c0,e,2);return Jc(t,n[0],n[1],n[2],n[3])||Jc(t,n[0],n[1],n[4],n[5])||Jc(t,n[4],n[5],n[6],n[7])||Jc(t,n[2],n[3],n[6],n[7])}var a$e={type:"text",tag:"text",nested:!1,attr:r$e,bound:Gk,draw:i$e,pick:J2(o$e),isect:s$e},u$e=zk("trail",o_e,v_e),Qr={arc:m_e,area:x_e,group:T_e,image:L_e,line:P_e,path:z_e,rect:W_e,rule:X_e,shape:K_e,symbol:Z_e,text:a$e,trail:u$e};function eC(e,t,n){var r=Qr[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Gn),e,n)}var nT={mark:null};function qH(e,t,n){var r=Qr[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,u,l,c;if(r.nested)return s?l=o[0]:(nT.mark=e,l=nT),c=eC(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Gn,s)for(a=0,u=o.length;a<u;++a)t.union(eC(o[a],i,n));return e.bounds=t}const l$e=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function WH(e,t){return JSON.stringify(e,l$e,t)}function HH(e){const t=typeof e=="string"?JSON.parse(e):e;return YH(t)}function YH(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&YH(n[i]);return t&&qH(e),e}function Vk(e){arguments.length?this.root=HH(e):(this.root=GH({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ok(this.root)])}Vk.prototype={toJSON(e){return WH(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=GH(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function GH(e,t){const n={bounds:new Gn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function ga(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Xk(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function sr(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=ga(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function xi(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function VH(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function rx(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function c$e(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Qr[i.marktype]).tip){for(s=rx(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}function Ja(e,t){this._active=null,this._handlers={},this._loader=e||Ck(),this._tooltip=t||f$e}function f$e(e,t,n,r){e.element().setAttribute("title",r||"")}Ja.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),o=ga(null,"a");for(const s in r)o.setAttribute(s,r[s]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=c$e(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),s=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:o,height:s,left:a,top:u,right:a+o,bottom:u+s}}};function Mo(e){this._el=null,this._bgcolor=null,this._loader=new Tk(e)}Mo.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const d$e="keydown",h$e="keypress",g$e="keyup",XH="dragenter",Im="dragleave",KH="dragover",tC="mousedown",p$e="mouseup",Fb="mousemove",f0="mouseout",ZH="mouseover",kb="click",m$e="dblclick",y$e="wheel",JH="mousewheel",Db="touchstart",Mb="touchmove",Ob="touchend",b$e=[d$e,h$e,g$e,XH,Im,KH,tC,p$e,Fb,f0,ZH,kb,m$e,y$e,JH,Db,Mb,Ob],nC=Fb,gg=f0,rC=kb;function Dp(e,t){Ja.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const v$e=e=>e===Db||e===Mb||e===Ob?[Db,Mb,Ob]:[e];function rT(e,t){v$e(t).forEach(n=>x$e(e,n))}function x$e(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function iT(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=o,this.fire(t,r),this.fire(e,r))}}function oT(e){return function(t){this.fire(e,t),this._active=null}}X(Dp,Ja,{initialize(e,t,n){return this._canvas=e&&Xk(e,"canvas"),[kb,tC,Fb,f0,Im].forEach(r=>rT(this,r)),Ja.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:b$e,DOMMouseScroll(e){this.fire(JH,e)},mousemove:iT(Fb,ZH,f0),dragover:iT(KH,XH,Im),mouseout:oT(f0),dragleave:oT(Im),mousedown(e){this._down=this._active,this.fire(tC,e)},click(e){this._down===this._active&&(this.fire(kb,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Db,e,!0)},touchmove(e){this.fire(Mb,e,!0)},touchend(e){this.fire(Ob,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===rC&&r&&r.href?this.handleHref(t,r,r.href):(e===nC||e===gg)&&this.handleTooltip(t,r,e!==gg),i)for(let o=0,s=i.length;o<s;++o)i[o].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(rT(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=rx(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const o=this.context();return Qr[e.marktype].pick.call(this,o,e,t,n,r,i)}});function _$e(){return typeof window<"u"&&window.devicePixelRatio||1}var $$e=_$e();function w$e(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=s?$$e:i;e.width=t*u,e.height=n*u;for(const l in o)a[l]=o[l];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function Tb(e){Mo.call(this,e),this._options={},this._redraw=!1,this._dirty=new Gn,this._tempb=new Gn}const sT=Mo.prototype,A$e=(e,t,n)=>new Gn().set(0,0,t,n).translate(-e[0],-e[1]);function E$e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}X(Tb,Mo,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Ts(1,1,this._options.type),e&&this._canvas&&(xi(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),sT.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(sT.resize.call(this,e,t,n,r),this._canvas)w$e(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||q("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,s=A$e(n,r,i);t.save();const a=this._redraw||o.empty()?(this._redraw=!1,s.expand(1)):E$e(t,s.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),o.clear(),this},draw(e,t,n){const r=Qr[t.marktype];t.clip&&__e(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function Kk(e,t){Ja.call(this,e,t);const n=this;n._hrefHandler=iC(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=iC(n,(r,i)=>{n.handleTooltip(r,i,r.type!==gg)})}const iC=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};X(Kk,Ja,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(rC,this._hrefHandler),r.removeEventListener(nC,this._tooltipHandler),r.removeEventListener(gg,this._tooltipHandler)),this._svg=r=e&&Xk(e,"svg"),r&&(r.addEventListener(rC,this._hrefHandler),r.addEventListener(nC,this._tooltipHandler),r.addEventListener(gg,this._tooltipHandler)),Ja.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const o={type:e,handler:t,listener:iC(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const QH="aria-hidden",Zk="aria-label",Jk="role",Qk="aria-roledescription",eY="graphics-object",eD="graphics-symbol",tY=(e,t,n)=>({[Jk]:e,[Qk]:t,[Zk]:n||void 0}),C$e=Es(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),aT={axis:{desc:"axis",caption:k$e},legend:{desc:"legend",caption:D$e},"title-text":{desc:"title",caption:e=>`Title text '${lT(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${lT(e)}'`}},uT={ariaRole:Jk,ariaRoleDescription:Qk,description:Zk};function nY(e,t){const n=t.aria===!1;if(e(QH,n||void 0),n||t.description==null)for(const r in uT)e(uT[r],void 0);else{const r=t.mark.marktype;e(Zk,t.description),e(Jk,t.ariaRole||(r==="group"?eY:eD)),e(Qk,t.ariaRoleDescription||`${r} mark`)}}function rY(e){return e.aria===!1?{[QH]:!0}:C$e[e.role]?null:aT[e.role]?F$e(e,aT[e.role]):S$e(e)}function S$e(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return tY(n?eY:eD,`${t} mark container`,e.description)}function F$e(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return tY(t.role||eD,t.desc,n.description||r(n))}catch{return null}}function lT(e){return be(e.text).join(" ")}function k$e(e){const t=e.datum,n=e.orient,r=t.title?iY(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Of(a)?"discrete":a} scale with ${yq(s,o,e)}`}function D$e(e){const t=e.datum,n=t.title?iY(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,u=s.dataflow.locale();return O$e(r)+(n?` titled '${n}'`:"")+` for ${M$e(o)} with ${yq(u,a,e)}`}function iY(e){try{return be(Ze(e.items).items[0].text).join(" ")}catch{return null}}function M$e(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ze(e)}function O$e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const oY=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),T$e=e=>oY(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function tD(){let e="",t="",n="";const r=[],i=()=>t=n="",o=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},s=(u,l)=>(l!=null&&(t+=` ${u}="${T$e(l)}"`),a),a={open(u,...l){o(u),t="<"+u;for(const c of l)for(const f in c)s(f,c[f]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:s,text:u=>(n+=oY(u),a),toString:()=>e};return a}const sY=e=>aY(tD(),e)+"";function aY(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes,r=n.length;for(let i=0;i<r;i++){const o=n[i];o.nodeType===3?e.text(o.nodeValue):aY(e,o)}}return e.close()}const Nb={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},uY={fill:"none","stroke-miterlimit":10},gh=0,cT="http://www.w3.org/2000/xmlns/",kt=hg.xmlns;function nD(e){Mo.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const tw=Mo.prototype;X(nD,Mo,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=sr(e,0,"svg",kt),this._svg.setAttributeNS(cT,"xmlns",kt),this._svg.setAttributeNS(cT,"xmlns:xlink",hg["xmlns:xlink"]),this._svg.setAttribute("version",hg.version),this._svg.setAttribute("class","marks"),xi(e,1),this._root=sr(this._svg,gh,"g",kt),pa(this._root,uY),xi(this._svg,gh+1)),this.background(this._bgcolor),tw.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),tw.background.apply(this,arguments)},resize(e,t,n,r){return tw.resize.call(this,e,t,n,r),this._svg&&(pa(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=sr(e,gh,"rect",kt),pa(n,{width:this._width,height:this._height,fill:t}));const r=sY(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),xi(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,s,a,u;for(s=0,a=e.length;s<a;++s)if(n=e[s],r=n.mark,r.marktype!==i&&(i=r.marktype,o=Qr[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,fT(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,fT(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=Qr[t.marktype],o=t.interactive===!1?"none":null,s=i.tag==="g";let a=null,u=0;const l=dT(t,e,n,"g",r);l.setAttribute("class",VH(t));const c=rY(t);for(const d in c)Rn(l,d,c[d]);s||Rn(l,"pointer-events",o),Rn(l,"clip-path",t.clip?Dk(this,t,t.group):null);const f=d=>{const h=this.isDirty(d),g=dT(d,l,a,i.tag,r);h&&(this._update(i,g,d),s&&B$e(this,g,d)),a=g,++u};return i.nested?t.items.length&&f(t.items[0]):Mi(t,f),xi(l,u),l},_update(e,t,n){hs=t,mn=t.__values__,nY(d0,n),e.attr(d0,n,this);const r=P$e[e.type];r&&r.call(this,e,t,n),hs&&this.style(hs,n)},style(e,t){if(t!=null)for(const n in Nb){let r=n==="font"?kp(t):t[n];if(r===mn[n])continue;const i=Nb[n];r==null?e.removeAttribute(i):(Sk(r)&&(r=wH(r,this._defs.gradient,lY())),e.setAttribute(i,r+"")),mn[n]=r}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=sr(e,gh+1,"defs",kt)),r=N$e(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=sr(e,gh+1,"defs",kt)),r=R$e(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):xi(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function fT(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function N$e(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=sr(e,n++,"pattern",kt);pa(s,{id:Eb+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=sr(s,0,"rect",kt),pa(s,{width:1,height:1,fill:`url(${lY()}#${t.id})`}),e=sr(e,n++,"radialGradient",kt),pa(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=sr(e,n++,"linearGradient",kt),pa(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=sr(e,r,"stop",kt),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return xi(e,r),n}function R$e(e,t,n){let r;return e=sr(e,n,"clipPath",kt),e.setAttribute("id",t.id),t.path?(r=sr(e,0,"path",kt),r.setAttribute("d",t.path)):(r=sr(e,0,"rect",kt),pa(r,{x:0,y:0,width:t.width,height:t.height})),xi(e,1),n+1}function B$e(e,t,n){t=t.lastChild.previousSibling;let r,i=0;Mi(n,o=>{r=e.mark(t,o,r),++i}),xi(t,1+i)}function dT(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=ga(s,r,kt),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=ga(s,"path",kt);o.appendChild(a),a.__data__=e;const u=ga(s,"g",kt);o.appendChild(u),u.__data__=e;const l=ga(s,"path",kt);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||L$e(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function L$e(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let hs=null,mn=null;const P$e={group(e,t,n){const r=hs=t.childNodes[2];mn=r.__values__,e.foreground(d0,n,this),mn=t.__values__,hs=t.childNodes[1],e.content(d0,n,this);const i=hs=t.childNodes[0];e.background(d0,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==mn.events&&(Rn(r,"pointer-events",o),Rn(i,"pointer-events",o),mn.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Rn(r,"display",null),this.style(i,n),Rn(i,"stroke",null),s&&(n.fill=null),mn=r.__values__,this.style(r,n),s&&(n.fill=s),hs=null}else Rn(r,"display","none")},image(e,t,n){n.smooth===!1?(nw(t,"image-rendering","optimizeSpeed"),nw(t,"image-rendering","pixelated")):nw(t,"image-rendering",null)},text(e,t,n){const r=Fp(n);let i,o,s,a;$e(r)?(o=r.map(u=>Za(n,u)),i=o.join(`
`),i!==mn.text&&(xi(t,0),s=t.ownerDocument,a=Ka(n),o.forEach((u,l)=>{const c=ga(s,"tspan",kt);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),mn.text=i)):(o=Za(n,r),o!==mn.text&&(t.textContent=o,mn.text=o)),Rn(t,"font-family",kp(n)),Rn(t,"font-size",Do(n)+"px"),Rn(t,"font-style",n.fontStyle),Rn(t,"font-variant",n.fontVariant),Rn(t,"font-weight",n.fontWeight)}};function d0(e,t,n){t!==mn[e]&&(n?j$e(hs,e,t,n):Rn(hs,e,t),mn[e]=t)}function nw(e,t,n){n!==mn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),mn[t]=n)}function pa(e,t){for(const n in t)Rn(e,n,t[n])}function Rn(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function j$e(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function lY(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function rD(e){Mo.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}X(rD,Mo,{svg(){return this._text},_render(e){const t=tD();t.open("svg",De({},hg,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",uY,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Qr[t.marktype],r=n.tag,i=[nY,n.attr];e.open("g",{class:VH(t),"clip-path":t.clip?Dk(this,t,t.group):null},rY(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const o=s=>{const a=this.href(s);if(a&&e.open("a",a),e.open(r,this.attr(t,s,i,r!=="g"?r:null)),r==="text"){const u=Fp(s);if($e(u)){const l={x:0,dy:Ka(s)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(Za(s,u[c])).close()}else e.text(Za(s,u))}else if(r==="g"){const u=s.strokeForeground,l=s.fill,c=s.stroke;u&&c&&(s.stroke=null),e.open("path",this.attr(t,s,n.background,"bgrect")).close(),e.open("g",this.attr(t,s,n.content)),Mi(s,f=>this.mark(e,f)),e.close(),u&&c?(l&&(s.fill=null),s.stroke=c,e.open("path",this.attr(t,s,n.foreground,"bgrect")).close(),l&&(s.fill=l)):e.open("path",this.attr(t,s,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):Mi(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},o=(s,a,u,l)=>{i[l||s]=a};return Array.isArray(n)?n.forEach(s=>s(o,t,this)):n(o,t,this),r&&I$e(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const o=t[i],s=o.stops;o.gradient==="radial"?(e.open("pattern",{id:Eb+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let a=0;a<s.length;++a)e.open("stop",{offset:s[a].offset,"stop-color":s[a].color}).close();e.close()}for(const i in n){const o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function I$e(e,t,n,r,i){if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),r==="text"&&(e["font-family"]=kp(t),e["font-size"]=Do(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Nb){let s=t[o];const a=Nb[o];s==="transparent"&&(a==="fill"||a==="stroke")||s!=null&&(Sk(s)&&(s=wH(s,i.gradient,"")),e[a]=s)}return e}const cY="canvas",fY="png",dY="svg",hY="none",ma={Canvas:cY,PNG:fY,SVG:dY,None:hY},Uf={};Uf[cY]=Uf[fY]={renderer:Tb,headless:Tb,handler:Dp};Uf[dY]={renderer:nD,headless:rD,handler:Kk};Uf[hY]={};function ix(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Uf[e]=t,this):Uf[e]}function gY(e,t,n){const r=[],i=new Gn().union(t),o=e.marktype;return o?pY(e,i,n,r):o==="group"?mY(e,i,n,r):q("Intersect scene must be mark node or group item.")}function pY(e,t,n,r){if(z$e(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)mY(i[a],t,n,r);else for(const u=Qr[o].isect;a<s;++a){const l=i[a];yY(l,t,u)&&r.push(l)}}return r}function z$e(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function mY(e,t,n,r){n&&n(e.mark)&&yY(e,t,Qr.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let u=0;u<o;++u)pY(i[u],t,n,r);t.translate(s,a)}return r}function yY(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const rw=new Gn;function U$e(e){const t=e.clip;if(Ge(t))t(Cp(rw.clear()));else if(t)rw.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(rw)}const q$e=1e-9;function iD(e,t,n){return e===t?!0:n==="path"?bY(e,t):e instanceof Date&&t instanceof Date?+e==+t:El(e)&&El(t)?Math.abs(e-t)<=q$e:!e||!t||!ke(e)&&!ke(t)?e==t:W$e(e,t)}function bY(e,t){return iD(jf(e),jf(t))}function W$e(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!iD(e[i],t[i],i))return!1;return typeof e==typeof t}function H$e(){DH(),vxe()}const Y$e=4278190080,G$e=268435456,V$e=.0625;function X$e(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function K$e(e,t,n,r){const i=e.width,o=e.height,s=n||r,a=Ts(i,o).getContext("2d");t.forEach(m=>vY(a,m,s));const u=new Uint32Array(a.getImageData(0,0,i,o).data.buffer),l=e.bitmap(),c=s&&e.bitmap();let f,d,h,g,p;for(d=0;d<o;++d)for(f=0;f<i;++f)p=u[d*i+f]&Y$e,p&&(h=e(f),g=e(d),r||l.set(h,g),s&&p^G$e&&c.set(h,g));return[l,c]}function vY(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>vY(e,o.items,n))}):Qr[r].draw(e,{items:n?t.map(Z$e):t})}function Z$e(e){const t=Yv(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=V$e,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}const Ko=5,Tn=31,pg=32,ta=new Uint32Array(pg+1),mi=new Uint32Array(pg+1);mi[0]=0;ta[0]=~mi[0];for(let e=1;e<=pg;++e)mi[e]=mi[e-1]<<1|1,ta[e]=~mi[e];function J$e(e,t){const n=new Uint32Array(~~((e*t+pg)/pg));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Ko]&1<<(a&Tn)},set:(o,s)=>{const a=s*e+o;r(a>>>Ko,1<<(a&Tn))},clear:(o,s)=>{const a=s*e+o;i(a>>>Ko,~(1<<(a&Tn)))},getRange:(o,s,a,u)=>{let l=u,c,f,d,h;for(;l>=s;--l)if(c=l*e+o,f=l*e+a,d=c>>>Ko,h=f>>>Ko,d===h){if(n[d]&ta[c&Tn]&mi[(f&Tn)+1])return!0}else{if(n[d]&ta[c&Tn]||n[h]&mi[(f&Tn)+1])return!0;for(let g=d+1;g<h;++g)if(n[g])return!0}return!1},setRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>Ko,d=c>>>Ko,f===d)r(f,ta[l&Tn]&mi[(c&Tn)+1]);else for(r(f,ta[l&Tn]),r(d,mi[(c&Tn)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>Ko,d=c>>>Ko,f===d)i(f,mi[l&Tn]|ta[(c&Tn)+1]);else for(i(f,mi[l&Tn]),i(d,ta[(c&Tn)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,u)=>o<0||s<0||u>=t||a>=e}}function Q$e(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>J$e(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function ewe(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,u=a.length,l=s.datum.fontSize,c=lo.width(s.datum,s.datum.text);let f=0,d,h,g,p,m,y,b;for(let x=0;x<u;++x)d=a[x].x,g=a[x].y,h=a[x].x2===void 0?d:a[x].x2,p=a[x].y2===void 0?g:a[x].y2,m=(d+h)/2,y=(g+p)/2,b=Math.abs(h-d+p-g),b>=f&&(f=b,s.x=m,s.y=y);return m=c/2,y=l/2,d=s.x-m,h=s.x+m,g=s.y-y,p=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",g<0&&p<=o?s.baseline="top":0<=g&&o<p&&(s.baseline="bottom"),!0}}function Rb(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function ya(e,t,n,r,i,o,s,a){const u=i*o/(r*2),l=e(t-u),c=e(t+u),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(l,f,c,d)||s.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function twe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function u(l,c,f,d,h){const g=e.invert(l),p=e.invert(c);let m=f,y=o,b;if(!Rb(g,p,d,h,i,o)&&!ya(e,g,p,h,d,m,s,a)&&!ya(e,g,p,h,d,h,s,null)){for(;y-m>=1;)b=(m+y)/2,ya(e,g,p,h,d,b,s,a)?y=b:m=b;if(m>f)return[g,p,m,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=lo.width(l.datum,l.datum.text);let g=n?d:0,p=!1,m=!1,y=0,b,x,v,_,w,$,A,M,k,C,N,E,D,F,O,R,B;for(let P=0;P<f;++P){for(b=c[P].x,v=c[P].y,x=c[P].x2===void 0?b:c[P].x2,_=c[P].y2===void 0?v:c[P].y2,b>x&&(B=b,b=x,x=B),v>_&&(B=v,v=_,_=B),k=e(b),N=e(x),C=~~((k+N)/2),E=e(v),F=e(_),D=~~((E+F)/2),A=C;A>=k;--A)for(M=D;M>=E;--M)R=u(A,M,g,h,d),R&&([l.x,l.y,g,p]=R);for(A=C;A<=N;++A)for(M=D;M<=F;++M)R=u(A,M,g,h,d),R&&([l.x,l.y,g,p]=R);!p&&!n&&(O=Math.abs(x-b+_-v),w=(b+x)/2,$=(v+_)/2,O>=y&&!Rb(w,$,h,d,i,o)&&!ya(e,w,$,d,h,d,s,null)&&(y=O,l.x=w,l.y=$,m=!0))}return p||m?(w=h/2,$=d/2,s.setRange(e(l.x-w),e(l.y-$),e(l.x+w),e(l.y+$)),l.align="center",l.baseline="middle",!0):!1}}const nwe=[-1,-1,1,1],rwe=[-1,1,-1,1];function iwe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=lo.width(l.datum,l.datum.text),g=[];let p=n?d:0,m=!1,y=!1,b=0,x,v,_,w,$,A,M,k,C,N,E,D;for(let F=0;F<f;++F){for(x=c[F].x,_=c[F].y,v=c[F].x2===void 0?x:c[F].x2,w=c[F].y2===void 0?_:c[F].y2,g.push([e((x+v)/2),e((_+w)/2)]);g.length;)if([M,k]=g.pop(),!(s.get(M,k)||a.get(M,k)||u.get(M,k))){u.set(M,k);for(let O=0;O<4;++O)$=M+nwe[O],A=k+rwe[O],u.outOfBounds($,A,$,A)||g.push([$,A]);if($=e.invert(M),A=e.invert(k),C=p,N=o,!Rb($,A,h,d,i,o)&&!ya(e,$,A,d,h,C,s,a)&&!ya(e,$,A,d,h,d,s,null)){for(;N-C>=1;)E=(C+N)/2,ya(e,$,A,d,h,E,s,a)?N=E:C=E;C>p&&(l.x=$,l.y=A,p=C,m=!0)}}!m&&!n&&(D=Math.abs(v-x+w-_),$=(x+v)/2,A=(_+w)/2,D>=b&&!Rb($,A,h,d,i,o)&&!ya(e,$,A,d,h,d,s,null)&&(b=D,l.x=$,l.y=A,y=!0))}return m||y?($=h/2,A=d/2,s.setRange(e(l.x-$),e(l.y-A),e(l.x+$),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const owe=["right","center","left"],swe=["bottom","middle","top"];function awe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=0,h,g,p,m,y,b,x,v,_,w,$,A,M,k,C;for(let N=0;N<u;++N){if(h=(n[N]&3)-1,g=(n[N]>>>2&3)-1,p=h===0&&g===0||r[N]<0,m=h&&g?Math.SQRT1_2:1,y=r[N]<0?-1:1,b=c[1+h]+r[N]*h*m,$=c[4+g]+y*f*g/2+r[N]*g*m,v=$-f/2,_=$+f/2,A=e(b),k=e(v),C=e(_),!d)if(hT(A,A,k,C,s,a,b,b,v,_,c,p))d=lo.width(l.datum,l.datum.text);else continue;if(w=b+y*d*h/2,b=w-d/2,x=w+d/2,A=e(b),M=e(x),hT(A,M,k,C,s,a,b,x,v,_,c,p))return l.x=h?h*y<0?x:b:w,l.y=g?g*y<0?_:v:$,l.align=owe[h*y+1],l.baseline=swe[g*y+1],s.setRange(A,k,M,C),!0}return!1}}function hT(e,t,n,r,i,o,s,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o?o.getRange(e,n,t,r)||!uwe(s,u,a,l,c):i.getRange(e,n,t,r)))}function uwe(e,t,n,r,i){return i[0]<=e&&n<=i[2]&&i[3]<=t&&r<=i[5]}const iw=0,ow=4,sw=8,aw=0,uw=1,lw=2,lwe={"top-left":iw+aw,top:iw+uw,"top-right":iw+lw,left:ow+aw,middle:ow+uw,right:ow+lw,"bottom-left":sw+aw,bottom:sw+uw,"bottom-right":sw+lw},cwe={naive:ewe,"reduced-search":twe,floodfill:iwe};function fwe(e,t,n,r,i,o,s,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=dwe(r,f),h=hwe(i,f),g=gwe(e[0].datum),p=g==="group"&&e[0].datum.items[u].marktype,m=p==="area",y=pwe(g,p,a,u),b=Q$e(t[0],t[1],l),x=m&&c==="naive",v=e.map($=>({datum:$,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y($)}));let _;if(!x){n&&v.sort((A,M)=>n(A.datum,M.datum));let $=!1;for(let A=0;A<h.length&&!$;++A)$=h[A]===5||d[A]<0;g&&(s||m)&&(o=[e.map(A=>A.datum)].concat(o)),_=o.length?K$e(b,o,$,m):X$e(b,s&&v)}const w=m?cwe[c](b,_,s,u):awe(b,_,h,d);return v.forEach($=>$.opacity=+w($)),v}function dwe(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function hwe(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=lwe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function gwe(e){return e&&e.mark&&e.mark.marktype}function pwe(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const oC=["x","y","opacity","align","baseline"],xY=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function oD(e){L.call(this,null,e)}oD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:xY},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:oC.length,default:oC}]};X(oD,L,{transform(e,t){function n(o){const s=e[o];return Ge(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&q("Size parameter should be specified as a [width, height] array.");const i=e.as||oC;return fwe(t.materialize(t.SOURCE).source,e.size,e.sort,be(e.offset||1),be(e.anchor||xY),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const mwe=Object.freeze(Object.defineProperty({__proto__:null,label:oD},Symbol.toStringTag,{value:"Module"}));function _Y(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function sD(e){L.call(this,null,e)}sD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};X(sD,L,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=_Y(r,e.groupby),o=(e.groupby||[]).map(vt),s=o.length,a=e.as||[vt(e.x),vt(e.y)],u=[];i.forEach(l=>{DP(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Ue(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const sC={linear:vS,log:CP,exp:SP,pow:FP,quad:xS,poly:kP},ywe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function aD(e){L.call(this,null,e)}aD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(sC)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};X(aD,L,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=_Y(r,e.groupby),o=(e.groupby||[]).map(vt),s=e.method||"linear",a=e.order||3,u=ywe(s,a),l=e.as||[vt(e.x),vt(e.y)],c=sC[s],f=[];let d=e.extent;ve(sC,s)||q("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const p=c(h,e.x,e.y,a);if(e.params){f.push(Ue({keys:h.dims,coef:p.coef,rSquared:p.rSquared}));return}const m=d||Oa(h,e.x),y=b=>{const x={};for(let v=0;v<o.length;++v)x[o[v]]=h.dims[v];x[l[0]]=b[0],x[l[1]]=b[1],f.push(Ue(x))};s==="linear"?m.forEach(b=>y([b,p.predict(b)])):Qv(p.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const bwe=Object.freeze(Object.defineProperty({__proto__:null,loess:sD,regression:aD},Symbol.toStringTag,{value:"Module"})),gT=Math.pow(2,-52),K1=new Uint32Array(512);class Bb{static from(t,n=wwe,r=Awe){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new Bb(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let k=0;k<s;k++){const C=t[2*k],N=t[2*k+1];C<a&&(a=C),N<u&&(u=N),C>l&&(l=C),N>c&&(c=N),this._ids[k]=k}const f=(a+l)/2,d=(u+c)/2;let h=1/0,g,p,m;for(let k=0;k<s;k++){const C=cw(f,d,t[2*k],t[2*k+1]);C<h&&(g=k,h=C)}const y=t[2*g],b=t[2*g+1];h=1/0;for(let k=0;k<s;k++){if(k===g)continue;const C=cw(y,b,t[2*k],t[2*k+1]);C<h&&C>0&&(p=k,h=C)}let x=t[2*p],v=t[2*p+1],_=1/0;for(let k=0;k<s;k++){if(k===g||k===p)continue;const C=_we(y,b,x,v,t[2*k],t[2*k+1]);C<_&&(m=k,_=C)}let w=t[2*m],$=t[2*m+1];if(_===1/0){for(let N=0;N<s;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];Qc(this._ids,this._dists,0,s-1);const k=new Uint32Array(s);let C=0;for(let N=0,E=-1/0;N<s;N++){const D=this._ids[N];this._dists[D]>E&&(k[C++]=D,E=this._dists[D])}this.hull=k.subarray(0,C),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Z1(y,b,x,v,w,$)){const k=p,C=x,N=v;p=m,x=w,v=$,m=k,w=C,$=N}const A=$we(y,b,x,v,w,$);this._cx=A.x,this._cy=A.y;for(let k=0;k<s;k++)this._dists[k]=cw(t[2*k],t[2*k+1],A.x,A.y);Qc(this._ids,this._dists,0,s-1),this._hullStart=g;let M=3;r[g]=n[m]=p,r[p]=n[g]=m,r[m]=n[p]=g,i[g]=0,i[p]=1,i[m]=2,o.fill(-1),o[this._hashKey(y,b)]=g,o[this._hashKey(x,v)]=p,o[this._hashKey(w,$)]=m,this.trianglesLen=0,this._addTriangle(g,p,m,-1,-1,-1);for(let k=0,C,N;k<this._ids.length;k++){const E=this._ids[k],D=t[2*E],F=t[2*E+1];if(k>0&&Math.abs(D-C)<=gT&&Math.abs(F-N)<=gT||(C=D,N=F,E===g||E===p||E===m))continue;let O=0;for(let Q=0,fe=this._hashKey(D,F);Q<this._hashSize&&(O=o[(fe+Q)%this._hashSize],!(O!==-1&&O!==r[O]));Q++);O=n[O];let R=O,B;for(;B=r[R],!Z1(D,F,t[2*R],t[2*R+1],t[2*B],t[2*B+1]);)if(R=B,R===O){R=-1;break}if(R===-1)continue;let P=this._addTriangle(R,E,r[R],-1,-1,i[R]);i[E]=this._legalize(P+2),i[R]=P,M++;let Z=r[R];for(;B=r[Z],Z1(D,F,t[2*Z],t[2*Z+1],t[2*B],t[2*B+1]);)P=this._addTriangle(Z,E,B,i[E],-1,i[Z]),i[E]=this._legalize(P+2),r[Z]=Z,M--,Z=B;if(R===O)for(;B=n[R],Z1(D,F,t[2*B],t[2*B+1],t[2*R],t[2*R+1]);)P=this._addTriangle(B,E,R,-1,i[R],i[B]),this._legalize(P+2),i[B]=P,r[R]=R,M--,R=B;this._hullStart=n[E]=R,r[R]=n[Z]=E,r[E]=Z,o[this._hashKey(D,F)]=E,o[this._hashKey(t[2*R],t[2*R+1])]=R}this.hull=new Uint32Array(M);for(let k=0,C=this._hullStart;k<M;k++)this.hull[k]=C,C=r[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(vwe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],u=t-t%3;if(s=u+(t+2)%3,a===-1){if(o===0)break;t=K1[--o];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[s],h=n[t],g=n[c],p=n[f];if(xwe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*g],i[2*g+1],i[2*p],i[2*p+1])){n[t]=p,n[a]=d;const y=r[f];if(y===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const b=l+(a+1)%3;o<K1.length&&(K1[o++]=b)}else{if(o===0)break;t=K1[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function vwe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function cw(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function fw(e,t,n,r,i,o){const s=(r-t)*(i-e),a=(n-e)*(o-t);return Math.abs(s-a)>=33306690738754716e-32*Math.abs(s+a)?s-a:0}function Z1(e,t,n,r,i,o){return(fw(i,o,e,t,n,r)||fw(e,t,n,r,i,o)||fw(n,r,i,o,e,t))<0}function xwe(e,t,n,r,i,o,s,a){const u=e-s,l=t-a,c=n-s,f=r-a,d=i-s,h=o-a,g=u*u+l*l,p=c*c+f*f,m=d*d+h*h;return u*(f*m-p*h)-l*(c*m-p*d)+g*(c*h-f*d)<0}function _we(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=(l*c-a*f)*d,g=(s*f-u*c)*d;return h*h+g*g}function $we(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=e+(l*c-a*f)*d,g=t+(s*f-u*c)*d;return{x:h,y:g}}function Qc(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;ph(e,i,o),t[e[n]]>t[e[r]]&&ph(e,n,r),t[e[o]]>t[e[r]]&&ph(e,o,r),t[e[n]]>t[e[o]]&&ph(e,n,o);const a=e[o],u=t[a];for(;;){do o++;while(t[e[o]]<u);do s--;while(t[e[s]]>u);if(s<o)break;ph(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Qc(e,t,o,r),Qc(e,t,n,s-1)):(Qc(e,t,n,s-1),Qc(e,t,o,r))}}function ph(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function wwe(e){return e[0]}function Awe(e){return e[1]}const pT=1e-6;class al{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>pT||Math.abs(this._y1-o)>pT)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class aC{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Ewe=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let h=0,g=0,p=r.length,m,y;h<p;h+=3,g+=2){const b=r[h]*2,x=r[h+1]*2,v=r[h+2]*2,_=t[b],w=t[b+1],$=t[x],A=t[x+1],M=t[v],k=t[v+1],C=$-_,N=A-w,E=M-_,D=k-w,F=C*C+N*N,O=E*E+D*D,R=(C*D-N*E)*2;if(!R)m=(_+M)/2-1e8*D,y=(w+k)/2+1e8*E;else if(Math.abs(R)<1e-8)m=(_+M)/2,y=(w+k)/2;else{const B=1/R;m=_+(D*F-N*O)*B,y=w+(C*O-E*F)*B}o[g]=m,o[g+1]=y}let s=n[n.length-1],a,u=s*4,l,c=t[2*s],f,d=t[2*s+1];i.fill(0);for(let h=0;h<n.length;++h)s=n[h],a=u,l=c,f=d,u=s*4,c=t[2*s],d=t[2*s+1],i[a+2]=i[u]=f-d,i[a+3]=i[u+1]=c-l}render(t){const n=t==null?t=new al:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,g=Math.floor(d/3)*2,p=s[h],m=s[h+1],y=s[g],b=s[g+1];this._renderSegment(p,m,y,b,t)}let u,l=o[o.length-1];for(let c=0;c<o.length;++c){u=l,l=o[c];const f=Math.floor(i[l]/3)*2,d=s[f],h=s[f+1],g=u*4,p=this._project(d,h,a[g+2],a[g+3]);p&&this._renderSegment(d,h,p[0],p[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new al:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new al:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new aC;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,u))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[o]==i[a]&&n[o+1]==i[a+1]&&n[(o+2)%s]==i[(a+u-2)%u]&&n[(o+3)%s]==i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let u=s;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,o[u]!==t)break;u=i[u]}while(u!==s&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n)}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d;for(let h=0;h<r;h+=2)if(o=a,s=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let g,p,m,y,b;if(l===0){if((g=this._clipSegment(o,s,a,u,l,c))===null)continue;[p,m,y,b]=g}else{if((g=this._clipSegment(a,u,o,s,c,l))===null)continue;[y,b,p,m]=g,f=d,d=this._edgecode(p,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(p,m):i=[p,m]}f=d,d=this._edgecode(y,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,b):i=[y,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){for(;;){if(o===0&&s===0)return[t,n,r,i];if(o&s)return null;let a,u,l=o||s;l&8?(a=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):l&4?(a=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):l&2?(u=n+(i-n)*(this.xmax-t)/(r-t),a=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),a=this.xmin),o?(t=a,n=u,o=this._regioncode(t,n)):(r=a,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}if(i.length>4)for(let s=0;s<i.length;s+=2){const a=(s+2)%i.length,u=(s+4)%i.length;(i[s]===i[a]&&i[a]===i[u]||i[s+1]===i[a+1]&&i[a+1]===i[u+1])&&(i.splice(a,2),s-=2)}return o}_project(t,n,r,i){let o=1/0,s,a,u;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(u=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(u=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,u=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,u=n+(o=s)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}};const Cwe=2*Math.PI,Uc=Math.pow;function Swe(e){return e[0]}function Fwe(e){return e[1]}function kwe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function Dwe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class uD{static from(t,n=Swe,r=Fwe,i){return new uD("length"in t?Mwe(t,n,r,i):Float64Array.from(Owe(t,n,r,i)))}constructor(t){this._delaunator=new Bb(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&kwe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const g=Dwe(n[2*d],n[2*d+1],f);n[2*d]=g[0],n[2*d+1]=g[1]}this._delaunator=new Bb(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=o[u%3===2?u-2:u+1];(r[u]===-1||s[c]===-1)&&(s[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],s[i[0]]=1,i.length===2&&(s[i[1]]=0))}voronoi(t){return new Ewe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=o[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Uc(n-l[t*2],2)+Uc(r-l[t*2+1],2);const d=i[t];let h=d;do{let g=u[h];const p=Uc(n-l[g*2],2)+Uc(r-l[g*2+1],2);if(p<f&&(f=p,c=g),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==g&&Uc(n-l[h*2],2)+Uc(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new al:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const u=i[s];if(u<s)continue;const l=o[s]*2,c=o[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n=2){const r=t==null?t=new al:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],u=i[o+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Cwe)}return r&&r.value()}renderHull(t){const n=t==null?t=new al:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new aC;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new al:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,u=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new aC;return this.renderTriangle(t,n),n.value()}}function Mwe(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*Owe(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function lD(e){L.call(this,null,e)}lD.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Twe=[-1e5,-1e5,1e5,1e5];X(lD,L,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Twe;const o=this.value=uD.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const u=o.cellPolygon(s);r[s][n]=u?Nwe(u):null}return t.reflow(e.modified()).modifies(n)}});function Nwe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}const Rwe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:lD},Symbol.toStringTag,{value:"Module"}));function Ad(e,t,n){return e.fields=t||[],e.fname=n,e}function Bwe(e){return e.length===1?Lwe(e[0]):Pwe(e)}const Lwe=e=>function(t){return t[e]},Pwe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function zm(e){throw Error(e)}function jwe(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||zm("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&zm("Access path missing closing bracket: "+e),r&&zm("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function Iwe(e,t,n){const r=jwe(e);return e=r.length===1?r[0]:e,Ad((n&&n.get||Bwe)(r),[e],t||e)}Iwe("id");Ad(e=>e,[],"identity");Ad(()=>0,[],"zero");Ad(()=>1,[],"one");Ad(()=>!0,[],"true");Ad(()=>!1,[],"false");var zwe=Array.isArray;function Uwe(e){return e[e.length-1]}function qwe(e){return e==null||e===""?null:+e}function Wwe(e){return e!=null?zwe(e)?e:[e]:[]}function uC(e){return typeof e=="function"}function Hwe(e){return uC(e)?e:()=>e}function Ywe(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Gwe(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function Vwe(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ywe(r,n)}function Xwe(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function h0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kwe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cD(e){let t,n,r;e.length!==2?(t=h0,n=(a,u)=>h0(e(a),u),r=(a,u)=>e(a)-u):(t=e===h0||e===Kwe?e:Zwe,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function Zwe(){return 0}function $Y(e){return e===null?NaN:+e}const Jwe=cD(h0),lC=Jwe.right;cD($Y).center;const Mp=lC,Qwe=Math.sqrt(50),eAe=Math.sqrt(10),tAe=Math.sqrt(2);function Lb(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Qwe?10:o>=eAe?5:o>=tAe?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?Lb(e,t,n*2):[a,u,l]}function cC(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?Lb(t,e,n):Lb(e,t,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)u[l]=(o-l)/-s;else for(let l=0;l<a;++l)u[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)u[l]=(i+l)/-s;else for(let l=0;l<a;++l)u[l]=(i+l)*s;return u}function fC(e,t,n){return t=+t,e=+e,n=+n,Lb(e,t,n)[2]}function dC(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?fC(t,e,n):fC(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function nAe(e,t,n=$Y){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function rAe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Oo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function pu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mT=Symbol("implicit");function fD(){var e=new ay,t=[],n=[],r=mT;function i(o){let s=e.get(o);if(s===void 0){if(r!==mT)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new ay;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return fD(t,n).unknown(r)},Oo.apply(i,arguments),i}function wY(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function AY(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return wY((n-r/t)*t,s,i,o,a)}}function EY(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return wY((n-r/t)*t,i,o,s,a)}}const ox=e=>()=>e;function CY(e,t){return function(n){return e+n*t}}function iAe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function sx(e,t){var n=t-e;return n?CY(e,n>180||n<-180?n-360*Math.round(n/360):n):ox(isNaN(e)?t:e)}function oAe(e){return(e=+e)==1?zt:function(t,n){return n-t?iAe(t,n,e):ox(isNaN(t)?n:t)}}function zt(e,t){var n=t-e;return n?CY(e,n):ox(isNaN(e)?t:e)}const hC=function e(t){var n=oAe(t);function r(i,o){var s=n((i=mr(i)).r,(o=mr(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=zt(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function SY(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=mr(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=o(u),a+""}}}var sAe=SY(AY),aAe=SY(EY);function dD(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function FY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uAe(e,t){return(FY(t)?dD:kY)(e,t)}function kY(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=hc(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function DY(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function yi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function MY(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=hc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var gC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dw=new RegExp(gC.source,"g");function lAe(e){return function(){return e}}function cAe(e){return function(t){return e(t)+""}}function OY(e,t){var n=gC.lastIndex=dw.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=gC.exec(e))&&(i=dw.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:yi(r,i)})),n=dw.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?cAe(u[0].x):lAe(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function hc(e,t){var n=typeof t,r;return t==null||n==="boolean"?ox(t):(n==="number"?yi:n==="string"?(r=Ss(t))?(t=r,hC):OY:t instanceof Ss?hC:t instanceof Date?DY:FY(t)?dD:Array.isArray(t)?kY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?MY:yi)(e,t)}function fAe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function dAe(e,t){var n=sx(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function ax(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var yT=180/Math.PI,pC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function TY(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*yT,skewX:Math.atan(u)*yT,scaleX:s,scaleY:a}}var J1;function hAe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pC:TY(t.a,t.b,t.c,t.d,t.e,t.f)}function gAe(e){return e==null||(J1||(J1=document.createElementNS("http://www.w3.org/2000/svg","g")),J1.setAttribute("transform",e),!(e=J1.transform.baseVal.consolidate()))?pC:(e=e.matrix,TY(e.a,e.b,e.c,e.d,e.e,e.f))}function NY(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,h,g){if(l!==f||c!==d){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:yi(l,f)},{i:p-2,x:yi(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:yi(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:yi(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,g){if(l!==f||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");g.push({i:p-4,x:yi(l,f)},{i:p-2,x:yi(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),s(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var g=-1,p=d.length,m;++g<p;)f[(m=d[g]).i]=m.x(h);return f.join("")}}}var pAe=NY(hAe,"px, ","px)","deg)"),mAe=NY(gAe,", ",")",")"),yAe=1e-12;function bT(e){return((e=Math.exp(e))+1/e)/2}function bAe(e){return((e=Math.exp(e))-1/e)/2}function vAe(e){return((e=Math.exp(2*e))-1)/(e+1)}const xAe=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],f=s[1],d=s[2],h=c-a,g=f-u,p=h*h+g*g,m,y;if(p<yAe)y=Math.log(d/l)/t,m=function($){return[a+$*h,u+$*g,l*Math.exp(t*$*y)]};else{var b=Math.sqrt(p),x=(d*d-l*l+r*p)/(2*l*n*b),v=(d*d-l*l-r*p)/(2*d*n*b),_=Math.log(Math.sqrt(x*x+1)-x),w=Math.log(Math.sqrt(v*v+1)-v);y=(w-_)/t,m=function($){var A=$*y,M=bT(_),k=l/(n*b)*(M*vAe(t*A+_)-bAe(_));return[a+k*h,u+k*g,l*M/bT(t*A+_)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);function RY(e){return function(t,n){var r=e((t=za(t)).h,(n=za(n)).h),i=zt(t.s,n.s),o=zt(t.l,n.l),s=zt(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const _Ae=RY(sx);var $Ae=RY(zt);function wAe(e,t){var n=zt((e=Ua(e)).l,(t=Ua(t)).l),r=zt(e.a,t.a),i=zt(e.b,t.b),o=zt(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function BY(e){return function(t,n){var r=e((t=qa(t)).h,(n=qa(n)).h),i=zt(t.c,n.c),o=zt(t.l,n.l),s=zt(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const AAe=BY(sx);var EAe=BY(zt);function LY(e){return function t(n){n=+n;function r(i,o){var s=e((i=kl(i)).h,(o=kl(o)).h),a=zt(i.s,o.s),u=zt(i.l,o.l),l=zt(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const CAe=LY(sx);var SAe=LY(zt);function hD(e,t){t===void 0&&(t=e,e=hc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function FAe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const kAe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:hc,interpolateArray:uAe,interpolateBasis:AY,interpolateBasisClosed:EY,interpolateCubehelix:CAe,interpolateCubehelixLong:SAe,interpolateDate:DY,interpolateDiscrete:fAe,interpolateHcl:AAe,interpolateHclLong:EAe,interpolateHsl:_Ae,interpolateHslLong:$Ae,interpolateHue:dAe,interpolateLab:wAe,interpolateNumber:yi,interpolateNumberArray:dD,interpolateObject:MY,interpolateRgb:hC,interpolateRgbBasis:sAe,interpolateRgbBasisClosed:aAe,interpolateRound:ax,interpolateString:OY,interpolateTransformCss:pAe,interpolateTransformSvg:mAe,interpolateZoom:xAe,piecewise:hD,quantize:FAe},Symbol.toStringTag,{value:"Module"}));function DAe(e){return function(){return e}}function mC(e){return+e}var vT=[0,1];function dr(e){return e}function yC(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:DAe(isNaN(t)?NaN:.5)}function MAe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function OAe(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=yC(i,r),o=n(s,o)):(r=yC(r,i),o=n(o,s)),function(a){return o(r(a))}}function TAe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=yC(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=Mp(e,a,1,r)-1;return o[u](i[u](a))}}function Op(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ux(){var e=vT,t=vT,n=hc,r,i,o,s=dr,a,u,l;function c(){var d=Math.min(e.length,t.length);return s!==dr&&(s=MAe(e[0],e[d-1])),a=d>2?TAe:OAe,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((l||(l=a(t,e.map(r),yi)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,mC),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=ax,c()},f.clamp=function(d){return arguments.length?(s=d?!0:dr,c()):s!==dr},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function PY(){return ux()(dr,dr)}function jY(e,t,n,r){var i=dC(e,t,n),o;switch(r=Tl(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=b5(i,s))&&(r.precision=o),N2(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=v5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=y5(i))&&(r.precision=o-(r.type==="%")*2);break}}return xd(r)}function gc(e){var t=e.domain;return e.ticks=function(n){var r=t();return cC(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return jY(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=fC(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function IY(){var e=PY();return e.copy=function(){return Op(e,IY())},Oo.apply(e,arguments),gc(e)}function zY(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,mC),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return zY(e).unknown(t)},e=arguments.length?Array.from(e,mC):[0,1],gc(n)}function UY(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function xT(e){return Math.log(e)}function _T(e){return Math.exp(e)}function NAe(e){return-Math.log(-e)}function RAe(e){return-Math.exp(-e)}function BAe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function LAe(e){return e===10?BAe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function PAe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function $T(e){return(t,n)=>-e(-t,n)}function gD(e){const t=e(xT,_T),n=t.domain;let r=10,i,o;function s(){return i=PAe(r),o=LAe(r),n()[0]<0?(i=$T(i),o=$T(o),e(NAe,RAe)):e(xT,_T),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),g,p;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(g=1;g<r;++g)if(p=d<0?g/o(-d):g*o(d),!(p<l)){if(p>c)break;y.push(p)}}else for(;d<=h;++d)for(g=r-1;g>=1;--g)if(p=d>0?g/o(-d):g*o(d),!(p<l)){if(p>c)break;y.push(p)}y.length*2<m&&(y=cC(l,c,m))}else y=cC(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Tl(u)).precision==null&&(u.trim=!0),u=xd(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(UY(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function qY(){const e=gD(ux()).domain([1,10]);return e.copy=()=>Op(e,qY()).base(e.base()),Oo.apply(e,arguments),e}function wT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function AT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pD(e){var t=1,n=e(wT(t),AT(t));return n.constant=function(r){return arguments.length?e(wT(t=+r),AT(t)):t},gc(n)}function WY(){var e=pD(ux());return e.copy=function(){return Op(e,WY()).constant(e.constant())},Oo.apply(e,arguments)}function ET(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function jAe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function IAe(e){return e<0?-e*e:e*e}function mD(e){var t=e(dr,dr),n=1;function r(){return n===1?e(dr,dr):n===.5?e(jAe,IAe):e(ET(n),ET(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},gc(t)}function yD(){var e=mD(ux());return e.copy=function(){return Op(e,yD()).exponent(e.exponent())},Oo.apply(e,arguments),e}function zAe(){return yD.apply(null,arguments).exponent(.5)}function HY(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=nAe(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[Mp(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(h0),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return HY().domain(e).range(t).unknown(r)},Oo.apply(o,arguments)}function YY(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[Mp(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return YY().domain([e,t]).range(i).unknown(o)},Oo.apply(gc(s),arguments)}function GY(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Mp(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return GY().domain(e).range(t).unknown(n)},Oo.apply(i,arguments)}const hw=new Date,gw=new Date;function Lt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let l;do u.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return u},i.filter=o=>Lt(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(hw.setTime(+o),gw.setTime(+s),e(hw),e(gw),Math.floor(n(hw,gw))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const qf=Lt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);qf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Lt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):qf);qf.range;const gs=1e3,Wr=gs*60,ps=Wr*60,Ds=ps*24,bD=Ds*7,CT=Ds*30,pw=Ds*365,ms=Lt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*gs)},(e,t)=>(t-e)/gs,e=>e.getUTCSeconds());ms.range;const lx=Lt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gs)},(e,t)=>{e.setTime(+e+t*Wr)},(e,t)=>(t-e)/Wr,e=>e.getMinutes());lx.range;const cx=Lt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Wr)},(e,t)=>(t-e)/Wr,e=>e.getUTCMinutes());cx.range;const fx=Lt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gs-e.getMinutes()*Wr)},(e,t)=>{e.setTime(+e+t*ps)},(e,t)=>(t-e)/ps,e=>e.getHours());fx.range;const dx=Lt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ps)},(e,t)=>(t-e)/ps,e=>e.getUTCHours());dx.range;const uf=Lt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Wr)/Ds,e=>e.getDate()-1);uf.range;const g0=Lt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ds,e=>e.getUTCDate()-1);g0.range;const VY=Lt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ds,e=>Math.floor(e/Ds));VY.range;function pc(e){return Lt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Wr)/bD)}const hx=pc(0),UAe=pc(1),qAe=pc(2),WAe=pc(3),HAe=pc(4),YAe=pc(5),GAe=pc(6);hx.range;UAe.range;qAe.range;WAe.range;HAe.range;YAe.range;GAe.range;function mc(e){return Lt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/bD)}const gx=mc(0),VAe=mc(1),XAe=mc(2),KAe=mc(3),ZAe=mc(4),JAe=mc(5),QAe=mc(6);gx.range;VAe.range;XAe.range;KAe.range;ZAe.range;JAe.range;QAe.range;const mg=Lt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mg.range;const yg=Lt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());yg.range;const Tp=Lt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Tp.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Lt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Tp.range;const Np=Lt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Np.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Lt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Np.range;function XY(e,t,n,r,i,o){const s=[[ms,1,gs],[ms,5,5*gs],[ms,15,15*gs],[ms,30,30*gs],[o,1,Wr],[o,5,5*Wr],[o,15,15*Wr],[o,30,30*Wr],[i,1,ps],[i,3,3*ps],[i,6,6*ps],[i,12,12*ps],[r,1,Ds],[r,2,2*Ds],[n,1,bD],[t,1,CT],[t,3,3*CT],[e,1,pw]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),g=h?h.range(l,+c+1):[];return d?g.reverse():g}function u(l,c,f){const d=Math.abs(c-l)/f,h=cD(([,,m])=>m).right(s,d);if(h===s.length)return e.every(dC(l/pw,c/pw,f));if(h===0)return qf.every(Math.max(dC(l,c,f),1));const[g,p]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return g.every(p)}return[a,u]}const[eEe,tEe]=XY(Np,yg,gx,VY,dx,cx),[nEe,rEe]=XY(Tp,mg,hx,uf,fx,lx);function iEe(e){return new Date(e)}function oEe(e){return e instanceof Date?+e:+new Date(+e)}function vD(e,t,n,r,i,o,s,a,u,l){var c=PY(),f=c.invert,d=c.domain,h=l(".%L"),g=l(":%S"),p=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),b=l("%b %d"),x=l("%B"),v=l("%Y");function _(w){return(u(w)<w?h:a(w)<w?g:s(w)<w?p:o(w)<w?m:r(w)<w?i(w)<w?y:b:n(w)<w?x:v)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?d(Array.from(w,oEe)):d().map(iEe)},c.ticks=function(w){var $=d();return e($[0],$[$.length-1],w??10)},c.tickFormat=function(w,$){return $==null?_:l($)},c.nice=function(w){var $=d();return(!w||typeof w.range!="function")&&(w=t($[0],$[$.length-1],w??10)),w?d(UY($,w)):c},c.copy=function(){return Op(c,vD(e,t,n,r,i,o,s,a,u,l))},c}function sEe(){return Oo.apply(vD(nEe,rEe,Tp,mg,hx,uf,fx,lx,ms,R2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aEe(){return Oo.apply(vD(eEe,tEe,Np,yg,gx,g0,dx,cx,ms,B2).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function px(){var e=0,t=1,n,r,i,o,s=dr,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(s=f,l):s};function c(f){return function(d){var h,g;return arguments.length?([h,g]=d,s=f(h,g),l):[s(0),s(1)]}}return l.range=c(hc),l.rangeRound=c(ax),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function mu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function xD(){var e=gc(px()(dr));return e.copy=function(){return mu(e,xD())},pu.apply(e,arguments)}function KY(){var e=gD(px()).domain([1,10]);return e.copy=function(){return mu(e,KY()).base(e.base())},pu.apply(e,arguments)}function ZY(){var e=pD(px());return e.copy=function(){return mu(e,ZY()).constant(e.constant())},pu.apply(e,arguments)}function _D(){var e=mD(px());return e.copy=function(){return mu(e,_D()).exponent(e.exponent())},pu.apply(e,arguments)}function uEe(){return _D.apply(null,arguments).exponent(.5)}function mx(){var e=0,t=.5,n=1,r=1,i,o,s,a,u,l=dr,c,f=!1,d;function h(p){return isNaN(p=+p)?d:(p=.5+((p=+c(p))-o)*(r*p<r*o?a:u),l(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(l=p,h):l};function g(p){return function(m){var y,b,x;return arguments.length?([y,b,x]=m,l=hD(p,[y,b,x]),h):[l(0),l(.5),l(1)]}}return h.range=g(hc),h.rangeRound=g(ax),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return c=p,i=p(e),o=p(t),s=p(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function JY(){var e=gc(mx()(dr));return e.copy=function(){return mu(e,JY())},pu.apply(e,arguments)}function QY(){var e=gD(mx()).domain([.1,1,10]);return e.copy=function(){return mu(e,QY()).base(e.base())},pu.apply(e,arguments)}function eG(){var e=pD(mx());return e.copy=function(){return mu(e,eG()).constant(e.constant())},pu.apply(e,arguments)}function $D(){var e=mD(mx());return e.copy=function(){return mu(e,$D()).exponent(e.exponent())},pu.apply(e,arguments)}function lEe(){return $D.apply(null,arguments).exponent(.5)}const wD="year",AD="quarter",ED="month",CD="week",SD="date",FD="day",kD="dayofyear",DD="hours",MD="minutes",OD="seconds",TD="milliseconds",cEe=[wD,AD,ED,CD,SD,FD,kD,DD,MD,OD,TD];cEe.reduce((e,t,n)=>(e[t]=1+n,e),{});wD+"",AD+"",mg.every(3),ED+"",CD+"",SD+"",FD+"",kD+"",DD+"",MD+"",OD+"",TD+"";wD+"",AD+"",yg.every(3),ED+"",CD+"",SD+"",FD+"",kD+"",DD+"",MD+"",OD+"",TD+"";function fEe(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const dEe="identity",ND="linear",Wf="log",RD="pow",BD="sqrt",LD="symlog",hEe="time",gEe="utc",Ed="sequential",Rp="diverging",ST="quantile",pEe="quantize",mEe="threshold",yEe="ordinal",bEe="point",vEe="band",xEe="bin-ordinal",Qt="continuous",yx="discrete",bx="discretizing",Ri="interpolating",tG="temporal";function _Ee(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function $Ee(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),s=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function PD(){const e=fD().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],g=fEe(f,a,u);let p=r[d-0];i=(h-p)/(g||1),s&&(i=Math.floor(i)),p+=(h-p-i*(f-a))*l,o=i*(1-a),s&&(p=Math.round(p),o=Math.round(o));const m=rAe(f).map(y=>p+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),g=h.length-1;let p=+f[0],m=+f[1],y,b,x;if(!(p!==p||m!==m)&&(m<p&&(x=p,p=m,m=x),!(m<h[0]||p>r[1-d])))return y=Math.max(0,lC(h,p)-1),b=p===m?y:lC(h,m)-1,p-h[y]>o+1e-10&&++y,d&&(x=y,y=g-b,b=g-x),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return PD().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(u).align(l)},c()}function nG(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return nG(t())},e}function wEe(){return nG(PD().paddingInner(1))}var AEe=Array.prototype.map;function EEe(e){return AEe.call(e,qwe)}const CEe=Array.prototype.slice;function rG(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Mp(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=EEe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=CEe.call(r),n):t.slice()},n.tickFormat=function(r,i){return jY(e[0],Uwe(e),r??10,i)},n.copy=function(){return rG().domain(n.domain()).range(n.range())},n}const bC=new Map,SEe=Symbol("vega_scale");function FEe(e){return e[SEe]=!0,e}function kEe(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?_Ee(o):o.invertExtent?$Ee(o):void 0),o.type=e,FEe(o)};return r.metadata=Xwe(Wwe(n)),r}function nt(e,t,n){return arguments.length>1?(bC.set(e,kEe(e,t,n)),this):DEe(e)?bC.get(e):void 0}nt(dEe,zY);nt(ND,IY,Qt);nt(Wf,qY,[Qt,Wf]);nt(RD,yD,Qt);nt(BD,zAe,Qt);nt(LD,WY,Qt);nt(hEe,sEe,[Qt,tG]);nt(gEe,aEe,[Qt,tG]);nt(Ed,xD,[Qt,Ri]);nt(`${Ed}-${ND}`,xD,[Qt,Ri]);nt(`${Ed}-${Wf}`,KY,[Qt,Ri,Wf]);nt(`${Ed}-${RD}`,_D,[Qt,Ri]);nt(`${Ed}-${BD}`,uEe,[Qt,Ri]);nt(`${Ed}-${LD}`,ZY,[Qt,Ri]);nt(`${Rp}-${ND}`,JY,[Qt,Ri]);nt(`${Rp}-${Wf}`,QY,[Qt,Ri,Wf]);nt(`${Rp}-${RD}`,$D,[Qt,Ri]);nt(`${Rp}-${BD}`,lEe,[Qt,Ri]);nt(`${Rp}-${LD}`,eG,[Qt,Ri]);nt(ST,HY,[bx,ST]);nt(pEe,YY,bx);nt(mEe,GY,bx);nt(xEe,rG,[yx,bx]);nt(yEe,fD,yx);nt(vEe,PD,yx);nt(bEe,wEe,yx);function DEe(e){return bC.has(e)}function MEe(e,t,n){return hD(OEe(t||"rgb",n),e)}function OEe(e,t){const n=kAe[TEe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function TEe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const NEe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},REe={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function iG(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function oG(e,t){for(const n in e)BEe(n,t(e[n]))}const FT={};oG(REe,iG);oG(NEe,e=>MEe(iG(e)));function BEe(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(FT[e]=t,this):FT[e]}var LEe=Math.random,mw=Math.PI/180,Vh=64,Um=2048;function PEe(){var e=[256,256],t,n,r,i,o,s,a,u=sG,l=[],c=Math.random,f={};f.layout=function(){for(var g=d(Ts()),p=WEe((e[0]>>5)*e[1]),m=null,y=l.length,b=-1,x=[],v=l.map(w=>({text:t(w),font:n(w),style:i(w),weight:o(w),rotate:s(w),size:~~(r(w)+1e-14),padding:a(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,$)=>$.size-w.size);++b<y;){var _=v[b];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,jEe(g,_,v,b),_.hasText&&h(p,_,m)&&(x.push(_),m?zEe(m,_):m=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return x};function d(g){g.width=g.height=1;var p=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(Vh<<5)/p,g.height=Um/p;var m=g.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:p}}function h(g,p,m){for(var y=p.x,b=p.y,x=Math.sqrt(e[0]*e[0]+e[1]*e[1]),v=u(e),_=c()<.5?1:-1,w=-_,$,A,M;($=v(w+=_))&&(A=~~$[0],M=~~$[1],!(Math.min(Math.abs(A),Math.abs(M))>=x));)if(p.x=y+A,p.y=b+M,!(p.x+p.x0<0||p.y+p.y0<0||p.x+p.x1>e[0]||p.y+p.y1>e[1])&&(!m||!IEe(p,g,e[0]))&&(!m||UEe(p,m))){for(var k=p.sprite,C=p.width>>5,N=e[0]>>5,E=p.x-(C<<4),D=E&127,F=32-D,O=p.y1-p.y0,R=(p.y+p.y0)*N+(E>>5),B,P=0;P<O;P++){B=0;for(var Z=0;Z<=C;Z++)g[R+Z]|=B<<F|(Z<C?(B=k[P*C+Z])>>>D:0);R+=N}return p.sprite=null,!0}return!1}return f.words=function(g){return arguments.length?(l=g,f):l},f.size=function(g){return arguments.length?(e=[+g[0],+g[1]],f):e},f.font=function(g){return arguments.length?(n=Mu(g),f):n},f.fontStyle=function(g){return arguments.length?(i=Mu(g),f):i},f.fontWeight=function(g){return arguments.length?(o=Mu(g),f):o},f.rotate=function(g){return arguments.length?(s=Mu(g),f):s},f.text=function(g){return arguments.length?(t=Mu(g),f):t},f.spiral=function(g){return arguments.length?(u=HEe[g]||g,f):u},f.fontSize=function(g){return arguments.length?(r=Mu(g),f):r},f.padding=function(g){return arguments.length?(a=Mu(g),f):a},f.random=function(g){return arguments.length?(c=g,f):c},f}function jEe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Vh<<5)/o,Um/o);var s=0,a=0,u=0,l=n.length,c,f,d,h,g;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var p=Math.sin(t.rotate*mw),m=Math.cos(t.rotate*mw),y=c*m,b=c*p,x=d*m,v=d*p;c=Math.max(Math.abs(y+v),Math.abs(y-v))+31>>5<<5,d=~~Math.max(Math.abs(b+x),Math.abs(b-x))}else c=c+31>>5<<5;if(d>u&&(u=d),s+c>=Vh<<5&&(s=0,a+=u,u=0),a+d>=Um)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*mw),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var _=i.getImageData(0,0,(Vh<<5)/o,Um/o).data,w=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)w[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var $=0,A=-1;for(g=0;g<d;g++){for(h=0;h<c;h++){var M=f*g+(h>>5),k=_[(a+g)*(Vh<<5)+(s+h)<<2]?1<<31-h%32:0;w[M]|=k,$|=k}$?A=g:(t.y0++,d--,g--,a++)}t.y1=t.y0+A,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function IEe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,u=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[l+d])return!0;l+=n}return!1}function zEe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function UEe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function sG(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function qEe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function WEe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Mu(e){return typeof e=="function"?e:function(){return e}}var HEe={archimedean:sG,rectangular:qEe};const aG=["x","y","font","fontSize","fontStyle","fontWeight","angle"],YEe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function jD(e){L.call(this,PEe(),e)}jD.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:aG}]};Vwe(jD,L,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&zm("Wordcloud size dimensions must be non-zero.");function n(g){const p=e[g];return uC(p)&&t.modified(p.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||YEe.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||aG;let a=e.fontSize||14,u;if(uC(a)?u=e.fontSizeRange:a=Hwe(a),u){const g=a,p=nt("sqrt")().domain(Gwe(i,g)).range(u);a=m=>p(g(m))}i.forEach(g=>{g[s[0]]=NaN,g[s[1]]=NaN,g[s[3]]=0});const l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(LEe).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let g=0,p,m;g<h;++g)p=l[g],m=p.datum,m[s[0]]=p.x+f,m[s[1]]=p.y+d,m[s[2]]=p.font,m[s[3]]=p.size,m[s[4]]=p.style,m[s[5]]=p.weight,m[s[6]]=p.rotate;return t.reflow(r).modifies(s)}});const GEe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:jD},Symbol.toStringTag,{value:"Module"})),VEe=e=>new Uint8Array(e),XEe=e=>new Uint16Array(e),p0=e=>new Uint32Array(e);function KEe(){let e=8,t=[],n=p0(0),r=Q1(0,e),i=Q1(0,e);return{data:()=>t,seen:()=>n=ZEe(n,t.length),add(o){for(let s=0,a=t.length,u=o.length,l;s<u;++s)l=o[s],l._index=a++,t.push(l)},remove(o,s){const a=t.length,u=Array(a-o),l=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=Q1(o,e,r),i=Q1(o,e))}}}function ZEe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Q1(e,t,n){const r=(t<257?VEe:t<65537?XEe:p0)(e);return n&&r.set(n),r}function kT(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)o[u[d]]|=r;for(d=c;d<f;++d)o[u[d]]|=r;return s}}}function DT(){let e=p0(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=p0(f);let h=Array(f),g,p,m;for(m=0;m<f;++m)h[m]=a(u[m]),d[m]=m;if(h=JEe(h,d),c)g=t,p=e,t=Array(c+f),e=p0(c+f),QEe(l,g,p,c,h,d,f,t,e);else{if(l>0)for(m=0;m<f;++m)d[m]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function o(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function s(a,u){let l;return u?l=u.length:(u=t,l=n),[rse(u,a[0],0,l),hy(u,a[1],0,l)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function JEe(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),sse(e,t)}function QEe(e,t,n,r,i,o,s,a,u){let l=0,c=0,f;for(f=0;l<r&&c<s;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=o[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<s;++c,++f)a[f]=i[c],u[f]=o[c]+e}function ID(e){L.call(this,KEe(),e),this._indices=null,this._dims=null}ID.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};X(ID,L,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,u,l;for(;a<s;++a)u=n[a].fname,l=i[u]||(i[u]=DT()),o.push(kT(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,g={};let p,m,y,b,x,v,_,w,$;if(l.set(u),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(v={},b=t.mod,_=0,w=b.length;_<w;++_)v[b[_]._index]=1;for(_=0;_<h;++_)$=r[_],(!s[_]||e.modified("fields",_)||t.modified($.fields))&&(y=$.fname,(p=g[y])||(o[y]=m=DT(),g[y]=p=m.insert($,t.source,0)),s[_]=kT(m,_,i[_]).onAdd(p,u));for(_=0,w=a.data().length;_<w;++_)x[_]||(l[_]!==u[_]?f.push(_):v[_]&&u[_]!==c&&d.push(_));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,g,p;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),b=i.all();for(h=0;h<f;++h)g=a[h].fname,p=u[g]||(u[g]=s[g].insert(a[h],r,d)),o[h].onAdd(p,m);for(;d<c;++d)y[d]=b,m[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,u,l;for(a=0,u=s.length;a<u;++a)l=s[a]._index,i[l]!==o&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,g;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,s[h]=g=o[h],o[h]=a,g!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,u,l;for(n.filters=0,l=0;l<s;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<s;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],g=l[1],p=e.one;let m,y,b;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)b=u[m],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;else if(f>h)for(m=h,y=Math.min(f,g);m<y;++m)b=u[m],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;if(d>g)for(m=Math.max(f,g),y=d;m<y;++m)b=u[m],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;else if(d<g)for(m=Math.max(h,d),y=g;m<y;++m)b=u[m],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let g,p,m;if(l<f)for(g=l,p=Math.min(f,c);g<p;++g)m=s[g],o[m]^=h,n.push(m);else if(l>f)for(g=f,p=Math.min(l,d);g<p;++g)m=s[g],o[m]^=h,r.push(m);if(c>d)for(g=Math.max(l,d),p=c;g<p;++g)m=s[g],o[m]^=h,n.push(m);else if(c<d)for(g=Math.max(f,c),p=d;g<p;++g)m=s[g],o[m]^=h,r.push(m);e.range=t.slice()}});function zD(e){L.call(this,null,e)}zD.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};X(zD,L,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:s[c];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?s[c]:null})):(o.filter(o.ADD,l),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>l(c._index))}});const eCe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:ID,resolvefilter:zD},Symbol.toStringTag,{value:"Module"}));function Cd(e,t,n){return e.fields=t||[],e.fname=n,e}function tCe(e){return e.length===1?nCe(e[0]):rCe(e)}const nCe=e=>function(t){return t[e]},rCe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function vn(e){throw Error(e)}function iCe(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||vn("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&vn("Access path missing closing bracket: "+e),r&&vn("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function uG(e,t,n){const r=iCe(e);return e=r.length===1?r[0]:e,Cd((n&&n.get||tCe)(r),[e],t||e)}uG("id");const UD=Cd(e=>e,[],"identity");Cd(()=>0,[],"zero");Cd(()=>1,[],"one");const lG=Cd(()=>!0,[],"true");Cd(()=>!1,[],"false");var Ms=Array.isArray;function Pb(e){return e===Object(e)}function Qa(e){return e[e.length-1]}function qD(e){return e==null||e===""?null:+e}const cG=e=>t=>e*Math.exp(t),fG=e=>t=>Math.log(e*t),dG=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),hG=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,jb=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function vx(e,t,n,r){const i=n(e[0]),o=n(Qa(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function oCe(e,t){return vx(e,t,qD,UD)}function sCe(e,t){var n=Math.sign(e[0]);return vx(e,t,fG(n),cG(n))}function aCe(e,t,n){return vx(e,t,jb(n),jb(1/n))}function uCe(e,t,n){return vx(e,t,dG(n),hG(n))}function xx(e,t,n,r,i){const o=r(e[0]),s=r(Qa(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function lCe(e,t,n){return xx(e,t,n,qD,UD)}function cCe(e,t,n){const r=Math.sign(e[0]);return xx(e,t,n,fG(r),cG(r))}function fCe(e,t,n,r){return xx(e,t,n,jb(r),jb(1/r))}function dCe(e,t,n,r){return xx(e,t,n,dG(r),hG(r))}function hCe(e){return 1+~~(new Date(e).getMonth()/3)}function gCe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function MT(e){return e!=null?Ms(e)?e:[e]:[]}function pCe(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ib(e){return typeof e=="function"}function WD(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function mCe(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}const yCe=Object.prototype.hasOwnProperty;function ba(e,t){return yCe.call(e,t)}function bCe(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],u=Qa(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=s?r:c<=s?i:o}function vCe(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function xCe(e){return typeof e=="boolean"}function gG(e){return Object.prototype.toString.call(e)==="[object Date]"}function pG(e){return typeof e=="number"}function _Ce(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Sd(e){return typeof e=="string"}function $Ce(e,t){const n=e[0],r=Qa(e),i=+t;return i?i===1?r:n+i*(r-n):n}function em(e,t){let n="";for(;--t>=0;)n+=e;return n}function wCe(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?em(i,s)+o:r==="center"?em(i,~~(s/2))+o+em(i,Math.ceil(s/2)):o+em(i,s)}function ACe(e){return e&&Qa(e)-e[0]||0}function bg(e){return Ms(e)?"["+e.map(bg)+"]":Pb(e)||Sd(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function ECe(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const CCe=e=>pG(e)||gG(e)?e:Date.parse(e);function SCe(e,t){return t=t||CCe,e==null||e===""?null:t(e)}function FCe(e){return e==null||e===""?null:e+""}function OT(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function kCe(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}const DCe="RawCode",Hf="Literal",MCe="Property",OCe="Identifier",TCe="ArrayExpression",NCe="BinaryExpression",mG="CallExpression",RCe="ConditionalExpression",BCe="LogicalExpression",LCe="MemberExpression",PCe="ObjectExpression",jCe="UnaryExpression";function Bi(e){this.type=e}Bi.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=ICe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function ICe(e){switch(e.type){case TCe:return e.elements;case NCe:case BCe:return[e.left,e.right];case mG:return[e.callee].concat(e.arguments);case RCe:return[e.test,e.consequent,e.alternate];case LCe:return[e.object,e.property];case PCe:return e.properties;case MCe:return[e.key,e.value];case jCe:return[e.argument];case OCe:case Hf:case DCe:default:return[]}}var To,ee,j,Cn,Ve,_x=1,Bp=2,jl=3,yu=4,$x=5,yc=6,nr=7,Lp=8,zCe=9;To={};To[_x]="Boolean";To[Bp]="<end>";To[jl]="Identifier";To[yu]="Keyword";To[$x]="Null";To[yc]="Numeric";To[nr]="Punctuator";To[Lp]="String";To[zCe]="RegularExpression";var UCe="ArrayExpression",qCe="BinaryExpression",WCe="CallExpression",HCe="ConditionalExpression",yG="Identifier",YCe="Literal",GCe="LogicalExpression",VCe="MemberExpression",XCe="ObjectExpression",KCe="Property",ZCe="UnaryExpression",Ut="Unexpected token %0",JCe="Unexpected number",QCe="Unexpected string",e3e="Unexpected identifier",t3e="Unexpected reserved word",n3e="Unexpected end of input",vC="Invalid regular expression",yw="Invalid regular expression: missing /",bG="Octal literals are not allowed in strict mode.",r3e="Duplicate data property in object literal not allowed in strict mode",nn="ILLEGAL",vg="Disabled.",i3e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),o3e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function wx(e,t){if(!e)throw new Error("ASSERT: "+t)}function es(e){return e>=48&&e<=57}function HD(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function m0(e){return"01234567".indexOf(e)>=0}function s3e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function xg(e){return e===10||e===13||e===8232||e===8233}function Pp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&i3e.test(String.fromCharCode(e))}function zb(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&o3e.test(String.fromCharCode(e))}const a3e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function vG(){for(;j<Cn;){const e=ee.charCodeAt(j);if(s3e(e)||xg(e))++j;else break}}function xC(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)j<Cn&&HD(ee[j])?(r=ee[j++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Be({},Ut,nn);return String.fromCharCode(i)}function u3e(){var e,t,n,r;for(e=ee[j],t=0,e==="}"&&Be({},Ut,nn);j<Cn&&(e=ee[j++],!!HD(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Be({},Ut,nn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function xG(){var e,t;for(e=ee.charCodeAt(j++),t=String.fromCharCode(e),e===92&&(ee.charCodeAt(j)!==117&&Be({},Ut,nn),++j,e=xC("u"),(!e||e==="\\"||!Pp(e.charCodeAt(0)))&&Be({},Ut,nn),t=e);j<Cn&&(e=ee.charCodeAt(j),!!zb(e));)++j,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ee.charCodeAt(j)!==117&&Be({},Ut,nn),++j,e=xC("u"),(!e||e==="\\"||!zb(e.charCodeAt(0)))&&Be({},Ut,nn),t+=e);return t}function l3e(){var e,t;for(e=j++;j<Cn;){if(t=ee.charCodeAt(j),t===92)return j=e,xG();if(zb(t))++j;else break}return ee.slice(e,j)}function c3e(){var e,t,n;return e=j,t=ee.charCodeAt(j)===92?xG():l3e(),t.length===1?n=jl:a3e.hasOwnProperty(t)?n=yu:t==="null"?n=$x:t==="true"||t==="false"?n=_x:n=jl,{type:n,value:t,start:e,end:j}}function bw(){var e=j,t=ee.charCodeAt(j),n,r=ee[j],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++j,{type:nr,value:String.fromCharCode(t),start:e,end:j};default:if(n=ee.charCodeAt(j+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return j+=2,{type:nr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:j};case 33:case 61:return j+=2,ee.charCodeAt(j)===61&&++j,{type:nr,value:ee.slice(e,j),start:e,end:j}}}if(s=ee.substr(j,4),s===">>>=")return j+=4,{type:nr,value:s,start:e,end:j};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return j+=3,{type:nr,value:o,start:e,end:j};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return j+=2,{type:nr,value:i,start:e,end:j};if(i==="//"&&Be({},Ut,nn),"<>=!+-*%&|^/".indexOf(r)>=0)return++j,{type:nr,value:r,start:e,end:j};Be({},Ut,nn)}function f3e(e){let t="";for(;j<Cn&&HD(ee[j]);)t+=ee[j++];return t.length===0&&Be({},Ut,nn),Pp(ee.charCodeAt(j))&&Be({},Ut,nn),{type:yc,value:parseInt("0x"+t,16),start:e,end:j}}function d3e(e){let t="0"+ee[j++];for(;j<Cn&&m0(ee[j]);)t+=ee[j++];return(Pp(ee.charCodeAt(j))||es(ee.charCodeAt(j)))&&Be({},Ut,nn),{type:yc,value:parseInt(t,8),octal:!0,start:e,end:j}}function TT(){var e,t,n;if(n=ee[j],wx(es(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=j,e="",n!=="."){if(e=ee[j++],n=ee[j],e==="0"){if(n==="x"||n==="X")return++j,f3e(t);if(m0(n))return d3e(t);n&&es(n.charCodeAt(0))&&Be({},Ut,nn)}for(;es(ee.charCodeAt(j));)e+=ee[j++];n=ee[j]}if(n==="."){for(e+=ee[j++];es(ee.charCodeAt(j));)e+=ee[j++];n=ee[j]}if(n==="e"||n==="E")if(e+=ee[j++],n=ee[j],(n==="+"||n==="-")&&(e+=ee[j++]),es(ee.charCodeAt(j)))for(;es(ee.charCodeAt(j));)e+=ee[j++];else Be({},Ut,nn);return Pp(ee.charCodeAt(j))&&Be({},Ut,nn),{type:yc,value:parseFloat(e),start:t,end:j}}function h3e(){var e="",t,n,r,i,o=!1;for(t=ee[j],wx(t==="'"||t==='"',"String literal must starts with a quote"),n=j,++j;j<Cn;)if(r=ee[j++],r===t){t="";break}else if(r==="\\")if(r=ee[j++],!r||!xg(r.charCodeAt(0)))switch(r){case"u":case"x":ee[j]==="{"?(++j,e+=u3e()):e+=xC(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:m0(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),j<Cn&&m0(ee[j])&&(o=!0,i=i*8+"01234567".indexOf(ee[j++]),"0123".indexOf(r)>=0&&j<Cn&&m0(ee[j])&&(i=i*8+"01234567".indexOf(ee[j++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ee[j]===`
`&&++j;else{if(xg(r.charCodeAt(0)))break;e+=r}return t!==""&&Be({},Ut,nn),{type:Lp,value:e,octal:o,start:n,end:j}}function g3e(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Be({},vC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Be({},vC)}try{return new RegExp(e,t)}catch{return null}}function p3e(){var e,t,n,r,i;for(e=ee[j],wx(e==="/","Regular expression literal must start with a slash"),t=ee[j++],n=!1,r=!1;j<Cn;)if(e=ee[j++],t+=e,e==="\\")e=ee[j++],xg(e.charCodeAt(0))&&Be({},yw),t+=e;else if(xg(e.charCodeAt(0)))Be({},yw);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Be({},yw),i=t.substr(1,t.length-2),{value:i,literal:t}}function m3e(){var e,t,n;for(t="",n="";j<Cn&&(e=ee[j],!!zb(e.charCodeAt(0)));)++j,e==="\\"&&j<Cn?Be({},Ut,nn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Be({},vC,n),{value:n,literal:t}}function y3e(){var e,t,n,r;return Ve=null,vG(),e=j,t=p3e(),n=m3e(),r=g3e(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:j}}function b3e(e){return e.type===jl||e.type===yu||e.type===_x||e.type===$x}function _G(){if(vG(),j>=Cn)return{type:Bp,start:j,end:j};const e=ee.charCodeAt(j);return Pp(e)?c3e():e===40||e===41||e===59?bw():e===39||e===34?h3e():e===46?es(ee.charCodeAt(j+1))?TT():bw():es(e)?TT():bw()}function ar(){const e=Ve;return j=e.end,Ve=_G(),j=e.end,e}function $G(){const e=j;Ve=_G(),j=e}function v3e(e){const t=new Bi(UCe);return t.elements=e,t}function NT(e,t,n){const r=new Bi(e==="||"||e==="&&"?GCe:qCe);return r.operator=e,r.left=t,r.right=n,r}function x3e(e,t){const n=new Bi(WCe);return n.callee=e,n.arguments=t,n}function _3e(e,t,n){const r=new Bi(HCe);return r.test=e,r.consequent=t,r.alternate=n,r}function YD(e){const t=new Bi(yG);return t.name=e,t}function Xh(e){const t=new Bi(YCe);return t.value=e.value,t.raw=ee.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function RT(e,t,n){const r=new Bi(VCe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function $3e(e){const t=new Bi(XCe);return t.properties=e,t}function BT(e,t,n){const r=new Bi(KCe);return r.key=t,r.value=n,r.kind=e,r}function w3e(e,t){const n=new Bi(ZCe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Be(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(wx(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=j,n.description=i,n}function Ax(e){e.type===Bp&&Be(e,n3e),e.type===yc&&Be(e,JCe),e.type===Lp&&Be(e,QCe),e.type===jl&&Be(e,e3e),e.type===yu&&Be(e,t3e),Be(e,Ut,e.value)}function Sn(e){const t=ar();(t.type!==nr||t.value!==e)&&Ax(t)}function ot(e){return Ve.type===nr&&Ve.value===e}function vw(e){return Ve.type===yu&&Ve.value===e}function A3e(){const e=[];for(j=Ve.start,Sn("[");!ot("]");)ot(",")?(ar(),e.push(null)):(e.push(Il()),ot("]")||Sn(","));return ar(),v3e(e)}function LT(){j=Ve.start;const e=ar();return e.type===Lp||e.type===yc?(e.octal&&Be(e,bG),Xh(e)):YD(e.value)}function E3e(){var e,t,n,r;if(j=Ve.start,e=Ve,e.type===jl)return n=LT(),Sn(":"),r=Il(),BT("init",n,r);if(e.type===Bp||e.type===nr)Ax(e);else return t=LT(),Sn(":"),r=Il(),BT("init",t,r)}function C3e(){var e=[],t,n,r,i={},o=String;for(j=Ve.start,Sn("{");!ot("}");)t=E3e(),t.key.type===yG?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Be({},r3e):i[r]=!0,e.push(t),ot("}")||Sn(",");return Sn("}"),$3e(e)}function S3e(){Sn("(");const e=GD();return Sn(")"),e}const F3e={if:1};function k3e(){var e,t,n;if(ot("("))return S3e();if(ot("["))return A3e();if(ot("{"))return C3e();if(e=Ve.type,j=Ve.start,e===jl||F3e[Ve.value])n=YD(ar().value);else if(e===Lp||e===yc)Ve.octal&&Be(Ve,bG),n=Xh(ar());else{if(e===yu)throw new Error(vg);e===_x?(t=ar(),t.value=t.value==="true",n=Xh(t)):e===$x?(t=ar(),t.value=null,n=Xh(t)):ot("/")||ot("/=")?(n=Xh(y3e()),$G()):Ax(ar())}return n}function D3e(){const e=[];if(Sn("("),!ot(")"))for(;j<Cn&&(e.push(Il()),!ot(")"));)Sn(",");return Sn(")"),e}function M3e(){j=Ve.start;const e=ar();return b3e(e)||Ax(e),YD(e.value)}function O3e(){return Sn("."),M3e()}function T3e(){Sn("[");const e=GD();return Sn("]"),e}function N3e(){var e,t,n;for(e=k3e();;)if(ot("."))n=O3e(),e=RT(".",e,n);else if(ot("("))t=D3e(),e=x3e(e,t);else if(ot("["))n=T3e(),e=RT("[",e,n);else break;return e}function PT(){const e=N3e();if(Ve.type===nr&&(ot("++")||ot("--")))throw new Error(vg);return e}function qm(){var e,t;if(Ve.type!==nr&&Ve.type!==yu)t=PT();else{if(ot("++")||ot("--"))throw new Error(vg);if(ot("+")||ot("-")||ot("~")||ot("!"))e=ar(),t=qm(),t=w3e(e.value,t);else{if(vw("delete")||vw("void")||vw("typeof"))throw new Error(vg);t=PT()}}return t}function jT(e){let t=0;if(e.type!==nr&&e.type!==yu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function R3e(){var e,t,n,r,i,o,s,a,u,l;if(e=Ve,u=qm(),r=Ve,i=jT(r),i===0)return u;for(r.prec=i,ar(),t=[e,Ve],s=qm(),o=[u,r,s];(i=jT(Ve))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),t.pop(),n=NT(a,u,s),o.push(n);r=ar(),r.prec=i,o.push(r),t.push(Ve),n=qm(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=NT(o[l-1].value,o[l-2],n),l-=2;return n}function Il(){var e,t,n;return e=R3e(),ot("?")&&(ar(),t=Il(),Sn(":"),n=Il(),e=_3e(e,t,n)),e}function GD(){const e=Il();if(ot(","))throw new Error(vg);return e}function B3e(e){ee=e,j=0,Cn=ee.length,Ve=null,$G();const t=GD();if(Ve.type!==Bp)throw new Error("Unexpect token after expression.");return t}var wG={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function AG(e){function t(s,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,u){return l=>t(s,l,a,u)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&vn("Missing arguments to clamp function."),s.length>3&&vn("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&vn("Missing arguments to if function."),s.length>3&&vn("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function L3e(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function P3e(e){e=e||{};const t=e.allowed?OT(e.allowed):{},n=e.forbidden?OT(e.forbidden):{},r=e.constants||wG,i=(e.functions||AG)(f),o=e.globalvar,s=e.fieldvar,a=Ib(o)?o:g=>`${o}["${g}"]`;let u={},l={},c=0;function f(g){if(Sd(g))return g;const p=d[g.type];return p==null&&vn("Unsupported type: "+g.type),p(g)}const d={Literal:g=>g.raw,Identifier:g=>{const p=g.name;return c>0?p:ba(n,p)?vn("Illegal identifier: "+p):ba(r,p)?r[p]:ba(t,p)?p:(u[p]=1,a(p))},MemberExpression:g=>{const p=!g.computed,m=f(g.object);p&&(c+=1);const y=f(g.property);return m===s&&(l[L3e(y)]=1),p&&(c-=1),m+(p?"."+y:"["+y+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&vn("Illegal callee type: "+g.callee.type);const p=g.callee.name,m=g.arguments,y=ba(i,p)&&i[p];return y||vn("Unrecognized function: "+p),Ib(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(f).join(",")+"]",BinaryExpression:g=>"("+f(g.left)+" "+g.operator+" "+f(g.right)+")",UnaryExpression:g=>"("+g.operator+f(g.argument)+")",ConditionalExpression:g=>"("+f(g.test)+"?"+f(g.consequent)+":"+f(g.alternate)+")",LogicalExpression:g=>"("+f(g.left)+g.operator+f(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(f).join(",")+"}",Property:g=>{c+=1;const p=f(g.key);return c-=1,p+":"+f(g.value)}};function h(g){const p={code:f(g),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},p}return h.functions=i,h.constants=r,h}function xw(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function j3e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function I3e(e){let t,n,r;e.length!==2?(t=xw,n=(a,u)=>xw(e(a),u),r=(a,u)=>e(a)-u):(t=e===xw||e===j3e?e:z3e,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function z3e(){return 0}function U3e(e,...t){e=new uy(e),t=t.map(q3e);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function q3e(e){return e instanceof uy?e:new uy(e)}function W3e(...e){const t=new uy;for(const n of e)for(const r of n)t.add(r);return t}function Fd(e,t,n){return e.fields=t||[],e.fname=n,e}function H3e(e){return e.length===1?Y3e(e[0]):G3e(e)}const Y3e=e=>function(t){return t[e]},G3e=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Wm(e){throw Error(e)}function V3e(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||Wm("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&Wm("Access path missing closing bracket: "+e),r&&Wm("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function _g(e,t,n){const r=V3e(e);return e=r.length===1?r[0]:e,Fd((n&&n.get||H3e)(r),[e],t||e)}_g("id");Fd(e=>e,[],"identity");Fd(()=>0,[],"zero");Fd(()=>1,[],"one");Fd(()=>!0,[],"true");Fd(()=>!1,[],"false");var EG=Array.isArray;function X3e(e){return e[e.length-1]}function ul(e){return e==null||e===""?null:+e}function IT(e){return e!=null?EG(e)?e:[e]:[]}function K3e(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}const Z3e=Object.prototype.hasOwnProperty;function zT(e,t){return Z3e.call(e,t)}function tm(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function _w(e){return Object.prototype.toString.call(e)==="[object Date]"}const J3e="Literal";var No,Q3e=1,eSe=2,tSe=3,nSe=4,rSe=5,iSe=6,oSe=7,sSe=8,aSe=9;No={};No[Q3e]="Boolean";No[eSe]="<end>";No[tSe]="Identifier";No[nSe]="Keyword";No[rSe]="Null";No[iSe]="Numeric";No[oSe]="Punctuator";No[sSe]="String";No[aSe]="RegularExpression";const VD="intersect",UT="union",uSe="vlMulti",lSe="vlPoint",qT="or",cSe="and",Zi="_vgsid_",$g=_g(Zi),fSe="E",dSe="R",hSe="R-E",gSe="R-LE",pSe="R-RE",Ub="index:unit";function WT(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],a.getter=_g.getter||_g(a.field),s=a.getter(e),_w(s)&&(s=ul(s)),_w(r[o])&&(r[o]=ul(r[o])),_w(r[o][0])&&(r[o]=r[o].map(ul)),a.type===fSe){if(EG(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===dSe){if(!tm(s,r[o]))return!1}else if(a.type===pSe){if(!tm(s,r[o],!0,!1))return!1}else if(a.type===hSe){if(!tm(s,r[o],!1,!1))return!1}else if(a.type===gSe&&!tm(s,r[o],!1,!0))return!1;return!0}function mSe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[Ub]&&r[Ub].value:void 0,s=n===VD,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],o&&s){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=WT(t,l),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=WT(t,l),s^h)return h;return a&&s}const CG=I3e($g),ySe=CG.left,bSe=CG.right;function vSe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[Ub]&&r[Ub].value:void 0,s=n===VD,a=$g(t),u=ySe(i,a);if(u===i.length||$g(i[u])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(bSe(i,a)-u<o.size)return!1}return!0}function xSe(e,t){return e.map(n=>K3e(t.fields?{values:t.fields.map(r=>(r.getter||(r.getter=_g(r.field)))(n.datum))}:{[Zi]:$g(n.datum)},t))}function _Se(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},u={},l,c,f,d,h,g,p,m,y,b,x=o.length,v=0,_,w;v<x;++v)if(l=o[v],d=l.unit,c=l.fields,f=l.values,c&&f){for(_=0,w=c.length;_<w;++_)h=c[_],p=s[h.field]||(s[h.field]={}),m=p[d]||(p[d]=[]),u[h.field]=y=h.type.charAt(0),b=$w[`${y}_union`],p[d]=b(m,IT(f[_]));n&&(m=a[d]||(a[d]=[]),m.push(IT(f).reduce(($,A,M)=>($[c[M].field]=A,$),{})))}else h=Zi,g=$g(l),p=s[h]||(s[h]={}),m=p[d]||(p[d]=[]),m.push(g),n&&(m=a[d]||(a[d]=[]),m.push({[Zi]:g}));if(t=t||UT,s[Zi]?s[Zi]=$w[`${Zi}_${t}`](...Object.values(s[Zi])):Object.keys(s).forEach($=>{s[$]=Object.keys(s[$]).map(A=>s[$][A]).reduce((A,M)=>A===void 0?M:$w[`${u[$]}_${t}`](A,M))}),o=Object.keys(a),n&&o.length){const $=r?lSe:uSe;s[$]=t===UT?{[qT]:o.reduce((A,M)=>(A.push(...a[M]),A),[])}:{[cSe]:o.map(A=>({[qT]:a[A]}))}}return s}var $w={[`${Zi}_union`]:W3e,[`${Zi}_intersect`]:U3e,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ul(t[0]),r=ul(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ul(t[0]),r=ul(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const $Se=":",wSe="@";function XD(e,t,n,r){t[0].type!==J3e&&Wm("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&X3e(t).value,s="unit",a=wSe+s,u=$Se+i;o===VD&&!zT(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),zT(r,u)||(r[u]=n.getData(i).tuplesRef())}function SG(e){const t=this.context.data[e];return t?t.values.value:[]}function ASe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function ESe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(lG).insert(t)),1}function CSe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const jp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},SSe=jp("format"),FG=jp("timeFormat"),FSe=jp("utcFormat"),kSe=jp("timeParse"),DSe=jp("utcParse"),nm=new Date(2e3,0,1);function Ex(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(nm.setYear(2e3),nm.setMonth(e),nm.setDate(t),FG.call(this,nm,n))}function MSe(e){return Ex.call(this,e,1,"%B")}function OSe(e){return Ex.call(this,e,1,"%b")}function TSe(e){return Ex.call(this,0,2+e,"%A")}function NSe(e){return Ex.call(this,0,2+e,"%a")}const RSe=":",BSe="@",_C="%",kG="$";function KD(e,t,n,r){t[0].type!==Hf&&vn("First argument to data functions must be a string literal.");const i=t[0].value,o=RSe+i;if(!ba(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function LSe(e,t,n,r){t[0].type!==Hf&&vn("First argument to indata must be a string literal."),t[1].type!==Hf&&vn("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=BSe+o;ba(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function hr(e,t,n,r){if(t[0].type===Hf)HT(n,r,t[0].value);else for(e in n.scales)HT(n,r,e)}function HT(e,t,n){const r=_C+n;if(!ba(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Ls(e,t){let n;return Ib(e)?e:Sd(e)?(n=t.scales[e])&&n.value:void 0}function PSe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=hr,n._range=hr,n._scale=hr;const r=i=>"_["+(i.type===Hf?bg(_C+i.value):bg(_C)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function ZD(e,t){return function(n,r,i){if(n){const o=Ls(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const jSe=ZD("area",Sme),ISe=ZD("bounds",Mme),zSe=ZD("centroid",Lme);function USe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function JD(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function qSe(){return JD(this.context.dataflow,"warn",arguments)}function WSe(){return JD(this.context.dataflow,"info",arguments)}function HSe(){return JD(this.context.dataflow,"debug",arguments)}function ww(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $C(e){const t=mr(e),n=ww(t.r),r=ww(t.g),i=ww(t.b);return .2126*n+.7152*r+.0722*i}function YSe(e,t){const n=$C(e),r=$C(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function GSe(){const e=[].slice.call(arguments);return e.unshift({}),WD(...e)}function DG(e,t){return e===t||e!==e&&t!==t?!0:Ms(e)?Ms(t)&&e.length===t.length?VSe(e,t):!1:Pb(e)&&Pb(t)?MG(e,t):!1}function VSe(e,t){for(let n=0,r=e.length;n<r;++n)if(!DG(e[n],t[n]))return!1;return!0}function MG(e,t){for(const n in e)if(!DG(e[n],t[n]))return!1;return!0}function YT(e){return t=>MG(e,t)}function XSe(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],u=a.input,l=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=s.changeset(),c.stamp=l,s.runAfter(()=>{a.modified=!0,s.pulse(u,c).run()},!0,1)),n&&(f=n===!0?lG:Ms(n)||Hv(n)?n:YT(n),c.remove(f)),t&&c.insert(t),r&&(f=YT(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function KSe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function ZSe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const GT={};function JSe(e,t){const n=GT[t]||(GT[t]=uG(t));return Ms(e)?e.map(n):n(e)}function QD(e){return Ms(e)||ArrayBuffer.isView(e)?e:null}function e6(e){return QD(e)||(Sd(e)?e:null)}function QSe(e,...t){return QD(e).join(...t)}function eFe(e,...t){return e6(e).indexOf(...t)}function tFe(e,...t){return e6(e).lastIndexOf(...t)}function nFe(e,...t){return e6(e).slice(...t)}function rFe(e,t,n){return Ib(n)&&vn("Function argument passed to replace."),String(e).replace(t,n)}function iFe(e){return QD(e).slice().reverse()}function oFe(e,t,n){return F5(e||0,t||0,n||0)}function sFe(e,t){const n=Ls(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function aFe(e,t){const n=Ls(e,(t||this).context);return n?n.copy():void 0}function uFe(e,t){const n=Ls(e,(t||this).context);return n?n.domain():[]}function lFe(e,t,n){const r=Ls(e,(n||this).context);return r?Ms(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function cFe(e,t){const n=Ls(e,(t||this).context);return n&&n.range?n.range():[]}function fFe(e,t,n){const r=Ls(e,(n||this).context);return r?r(t):void 0}function dFe(e,t,n,r,i){e=Ls(e,(i||this).context);const o=AH(t,n);let s=e.domain(),a=s[0],u=Qa(s),l=UD;return u-a?l=uq(e,a,u):e=(e.interpolator?qe("sequential")().interpolator(e.interpolator()):qe("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),u!==Qa(s)&&s.push(u)),s.forEach(c=>o.stop(l(c),e(c))),o}function hFe(e,t,n){const r=Ls(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function gFe(e){let t=null;return function(n){return n?fg(n,t=t||jf(e)):e}}const OG=e=>e.data;function TG(e,t){const n=SG.call(t,e);return n.root&&n.root.lookup||{}}function pFe(e,t,n){const r=TG(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(OG):void 0}function mFe(e,t){const n=TG(e,this)[t];return n?n.ancestors().map(OG):void 0}const NG=()=>typeof window<"u"&&window||null;function yFe(){const e=NG();return e?e.screen:{}}function bFe(){const e=NG();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function vFe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function xFe(e,t,n){if(!e)return[];const[r,i]=e,o=new Gn().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return gY(s,o,_Fe(t))}function _Fe(e){let t=null;if(e){const n=MT(e.marktype),r=MT(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}const wg={random(){return ki()},cumulativeNormal:Kv,cumulativeLogNormal:hS,cumulativeUniform:yS,densityNormal:uS,densityLogNormal:dS,densityUniform:mS,quantileNormal:Zv,quantileLogNormal:gS,quantileUniform:bS,sampleNormal:Xv,sampleLogNormal:fS,sampleUniform:pS,isArray:Ms,isBoolean:xCe,isDate:gG,isDefined(e){return e!==void 0},isNumber:pG,isObject:Pb,isRegExp:_Ce,isString:Sd,isTuple:Hv,isValid(e){return e!=null&&e===e},toBoolean:ECe,toDate:SCe,toNumber:qD,toString:FCe,indexof:eFe,join:QSe,lastindexof:tFe,replace:rFe,reverse:iFe,slice:nFe,flush:bCe,lerp:$Ce,merge:GSe,pad:wCe,peek:Qa,pluck:JSe,span:ACe,inrange:vCe,truncate:kCe,rgb:mr,lab:Ua,hcl:qa,hsl:za,luminance:$C,contrast:YSe,sequence:Fr,format:SSe,utcFormat:FSe,utcParse:DSe,utcOffset:QP,utcSequence:nj,timeFormat:FG,timeParse:kSe,timeOffset:JP,timeSequence:tj,timeUnitSpecifier:zP,monthFormat:MSe,monthAbbrevFormat:OSe,dayFormat:TSe,dayAbbrevFormat:NSe,quarter:hCe,utcquarter:gCe,week:qP,utcweek:YP,dayofyear:UP,utcdayofyear:HP,warn:qSe,info:WSe,debug:HSe,extent:mCe,inScope:USe,intersect:xFe,clampRange:pCe,pinchDistance:KSe,pinchAngle:ZSe,screen:yFe,containerSize:vFe,windowSize:bFe,bandspace:oFe,setdata:ESe,pathShape:gFe,panLinear:oCe,panLog:sCe,panPow:aCe,panSymlog:uCe,zoomLinear:lCe,zoomLog:cCe,zoomPow:fCe,zoomSymlog:dCe,encode:CSe,modify:XSe},$Fe=["view","item","group","xy","x","y"],wFe="event.vega.",RG="this.",t6={},BG={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${bg(kG+e)}]`,functions:AFe,constants:wG,visitors:t6},wC=P3e(BG);function AFe(e){const t=AG(e);$Fe.forEach(n=>t[n]=wFe+n);for(const n in wg)t[n]=RG+n;return WD(t,PSe(e,wg,t6)),t}function St(e,t,n){return arguments.length===1?wg[e]:(wg[e]=t,n&&(t6[e]=n),wC&&(wC.functions[e]=RG+e),this)}St("bandwidth",sFe,hr);St("copy",aFe,hr);St("domain",uFe,hr);St("range",cFe,hr);St("invert",lFe,hr);St("scale",fFe,hr);St("gradient",dFe,hr);St("geoArea",jSe,hr);St("geoBounds",ISe,hr);St("geoCentroid",zSe,hr);St("geoShape",hFe,hr);St("indata",ASe,LSe);St("data",SG,KD);St("treePath",pFe,KD);St("treeAncestors",mFe,KD);St("vlSelectionTest",mSe,XD);St("vlSelectionIdTest",vSe,XD);St("vlSelectionResolve",_Se,XD);St("vlSelectionTuples",xSe);function xo(e,t){const n={};let r;try{e=Sd(e)?e:bg(e)+"",r=B3e(e)}catch{vn("Expression parse error: "+e)}r.visit(o=>{if(o.type!==mG)return;const s=o.callee.name,a=BG.visitors[s];a&&a(s,o.arguments,t,n)});const i=wC(r);return i.globals.forEach(o=>{const s=kG+o;!ba(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:WD({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Ro(e,t,n){return e.fields=t||[],e.fname=n,e}function EFe(e){return e==null?null:e.fields}function LG(e){return e.length===1?CFe(e[0]):SFe(e)}const CFe=e=>function(t){return t[e]},SFe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function bl(e){throw Error(e)}function PG(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||bl("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&bl("Access path missing closing bracket: "+e),r&&bl("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function n6(e,t,n){const r=PG(e);return e=r.length===1?r[0]:e,Ro((n&&n.get||LG)(r),[e],t||e)}n6("id");Ro(e=>e,[],"identity");Ro(()=>0,[],"zero");Ro(()=>1,[],"one");const FFe=Ro(()=>!0,[],"true");Ro(()=>!1,[],"false");var r6=Array.isArray;function i6(e){return e===Object(e)}function Ag(e){return e!=null?r6(e)?e:[e]:[]}function kFe(e){return typeof e=="function"}const DFe="descending";function MFe(e,t,n){n=n||{},t=Ag(t)||[];const r=[],i=[],o={},s=n.comparator||OFe;return Ag(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===DFe?-1:1),i.push(a=kFe(a)?a:n6(a,null,n)),(EFe(a)||[]).forEach(l=>o[l]=1))}),i.length===0?null:Ro(s(i,r),Object.keys(o))}const jG=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),OFe=(e,t)=>e.length===1?TFe(e[0],t[0]):NFe(e,t,e.length),TFe=(e,t)=>function(n,r){return jG(e(n),e(r))*t},NFe=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=jG(o(r),o(i));return s*t[a]}),RFe=Object.prototype.hasOwnProperty;function BFe(e,t){return RFe.call(e,t)}function LFe(e){return typeof e=="string"}function PFe(e,t,n){e&&(e=t?Ag(e).map(a=>a.replace(/\\(.)/g,"$1")):Ag(e));const r=e&&e.length,i=n&&n.get||LG,o=a=>i(t?[a]:PG(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(u){return""+a(u)}}else{const a=e.map(o);s=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Ro(s,e,"key")}function AC(e){return r6(e)?"["+e.map(AC)+"]":i6(e)||LFe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function IG(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function jFe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const IFe=IG(["rule"]),VT=IG(["group","image","rect"]);function zFe(e,t){let n="";return IFe[t]||(e.x2&&(e.x?(VT[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(VT[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function o6(e){return(e+"").toLowerCase()}function UFe(e){return o6(e)==="operator"}function qFe(e){return o6(e)==="collect"}function mh(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function WFe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var HFe={operator:(e,t)=>mh(e,["_"],t.code),parameter:(e,t)=>mh(e,["datum","_"],t.code),event:(e,t)=>mh(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return mh(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+AC(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=zFe(r,n),i+="return m;",mh(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(AC).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let u,l;return o.path?(u=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+s]=o,u=`this.f${s}(a)`,l=`this.f${s}(b)`),WFe(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function YFe(e){const t=this;UFe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function GFe(e){const t=this;if(e.params){const n=t.get(e.id);n||bl("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function VFe(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=r6(i)?i.map(o=>XT(o,n,t)):XT(i,n,t)}return t}function XT(e,t,n){if(!e||!i6(e))return e;for(let r=0,i=KT.length,o;r<i;++r)if(o=KT[r],BFe(e,o.key))return o.parse(e,t,n);return e}var KT=[{key:"$ref",parse:XFe},{key:"$key",parse:ZFe},{key:"$expr",parse:KFe},{key:"$field",parse:JFe},{key:"$encode",parse:e5e},{key:"$compare",parse:QFe},{key:"$context",parse:t5e},{key:"$subflow",parse:n5e},{key:"$tupleid",parse:r5e}];function XFe(e,t){return t.get(e.$ref)||bl("Operator not defined: "+e.$ref)}function KFe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ro(t.parameterExpression(e.$expr),e.$fields))}function ZFe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=PFe(e.$key,e.$flat,t.expr.codegen))}function JFe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=n6(e.$field,e.$name,t.expr.codegen))}function QFe(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Ag(e.$compare).map(i=>i&&i.$tupleid?ie:i);return t.fn[n]||(t.fn[n]=MFe(r,e.$order,t.expr.codegen))}function e5e(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Ro(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function t5e(e,t){return t}function n5e(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),u=s.signals.parent;return u&&u.set(o),a.detachSubflow=()=>t.detach(s),a}}function r5e(){return ie}function i5e(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&bl("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function o5e(e){var t=this,n=i6(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||bl("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const s5e={skip:!0};function a5e(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function u5e(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],s5e)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(FFe).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function zG(e,t,n,r){return new UG(e,t,n,r)}function UG(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||HFe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function ZT(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}UG.prototype=ZT.prototype={fork(){const e=new ZT(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),qFe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[o6(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:jFe,parseOperator:YFe,parseOperatorParameters:GFe,parseParameters:VFe,parseStream:i5e,parseUpdate:o5e,getState:a5e,setState:u5e};function l5e(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),qG(t,e.description()))}function qG(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function c5e(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const Aw="default";function f5e(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:Aw,item:null}));e.on(e.events("view","mousemove"),t,(n,r)=>{const i=t.value,o=i?ut(i)?i:i.user:Aw,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return ut(r)||(i=r.item,r=r.user),EC(e,r&&r!==Aw?r:i||r),i},{cursor:t})}function EC(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function qb(e,t){var n=e._runtime.data;return ve(n,t)||q("Unrecognized data set: "+t),n[t]}function d5e(e,t){return arguments.length<2?qb(this,e).values.value:Cx.call(this,e,nc().remove(sd).insert(t))}function Cx(e,t){oP(t)||q("Second argument to changes must be a changeset.");const n=qb(this,e);return n.modified=!0,this.pulse(n.input,t)}function h5e(e,t){return Cx.call(this,e,nc().insert(t))}function g5e(e,t){return Cx.call(this,e,nc().remove(t))}function WG(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function HG(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Sx(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function p5e(e){var t=Sx(e),n=WG(e),r=HG(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function m5e(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=Sx(e),s=t.changedTouches?t.changedTouches[0]:t,o=rx(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=y5e(e,n,o),t}function y5e(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,u;if(s){for(u=t;u;u=u.mark.group)if(u.mark.name===s){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;ut(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:Kr(e),item:Kr(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const JT="view",b5e="timer",v5e="window",x5e={trap:!1};function _5e(e){const t=De({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{$e(r[o])&&(r[o]=Es(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function YG(e,t,n,r){e._eventListeners.push({type:n,sources:be(t),handler:r})}function $5e(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function rm(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ke(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function w5e(e,t,n){var r=this,i=new Vv(n),o=function(l,c){r.runAsync(null,()=>{e===JT&&$5e(r,t)&&l.preventDefault(),i.receive(m5e(r,l,c))})},s;if(e===b5e)rm(r,"timer",t)&&r.timer(o,t);else if(e===JT)rm(r,"view",t)&&r.addEventListener(t,o,x5e);else if(e===v5e?rm(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&rm(r,"selector",t)&&(s=document.querySelectorAll(e)),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=s.length;a<u;++a)s[a].addEventListener(t,o);YG(r,s,t,o)}return i}function QT(e){return e.item}function eN(e){return e.item.mark.source}function tN(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function A5e(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",QT),eN,tN(e)),this.on(this.events("view","mouseout",QT),eN,tN(t)),this}function E5e(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function Dr(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const C5e="vega-bind",S5e="vega-bind-name",F5e="vega-bind-radio";function k5e(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=dL(r.debounce,i.update))),(r.input==null&&r.element?D5e:O5e)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function D5e(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),YG(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(M5e(i))}}function M5e(e){return typeof Event<"u"?new Event(e):{type:e}}function O5e(e,t,n,r){const i=r.signal(n.signal),o=Dr("div",{class:C5e}),s=n.input==="radio"?o:o.appendChild(Dr("label"));s.appendChild(Dr("span",{class:S5e},n.name||n.signal)),t.appendChild(o);let a=T5e;switch(n.input){case"checkbox":a=N5e;break;case"select":a=R5e;break;case"radio":a=B5e;break;case"range":a=L5e;break}a(e,s,n,i)}function T5e(e,t,n,r){const i=Dr("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function N5e(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Dr("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function R5e(e,t,n,r){const i=Dr("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const u={value:s};Wb(s,r)&&(u.selected=!0),i.appendChild(Dr("option",u,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,u=n.options.length;a<u;++a)if(Wb(n.options[a],s)){i.selectedIndex=a;return}}}function B5e(e,t,n,r){const i=Dr("span",{class:F5e}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const u={type:"radio",name:n.signal,value:s};Wb(s,r)&&(u.checked=!0);const l=Dr("input",u);l.addEventListener("change",()=>e.update(s));const c=Dr("label",{},(o[a]||s)+"");return c.prepend(l),i.appendChild(c),l}),e.set=s=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)Wb(a[l].value,s)&&(a[l].checked=!0)}}function L5e(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||Ba(o,i,100),a=Dr("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const u=Dr("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function Wb(e,t){return e===t||e+""==t+""}function GG(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,WG(e),HG(e),Sx(e),i,o).background(e.background())}function s6(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function P5e(e,t,n,r){const i=new r(e.loader(),s6(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Sx(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function j5e(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=ix(r);e=n._el=e?Ew(n,e,!0):null,l5e(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||Dp,a=e?o.renderer:o.headless;return n._renderer=a?GG(n,n._renderer,e,a):null,n._handler=P5e(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=Ew(n,t,!0):e.appendChild(Dr("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=Ew(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{k5e(n,u.element||t,u)})),n}function Ew(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.innerHTML=""}catch(r){t=null,e.error(r)}return t}const yh=e=>+e||0,I5e=e=>({top:e,bottom:e,left:e,right:e});function nN(e){return ke(e)?{top:yh(e.top),bottom:yh(e.bottom),left:yh(e.left),right:yh(e.right)}:I5e(yh(e))}async function a6(e,t,n,r){const i=ix(t),o=i&&i.headless;return o||q("Unrecognized renderer type: "+t),await e.runAsync(),GG(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function z5e(e,t){e!==ma.Canvas&&e!==ma.SVG&&e!==ma.PNG&&q("Unrecognized image type: "+e);const n=await a6(this,e,t);return e===ma.SVG?U5e(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function U5e(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function q5e(e,t){return(await a6(this,ma.Canvas,e,t)).canvas()}async function W5e(e){return(await a6(this,ma.SVG,e)).svg()}function H5e(e,t,n){return zG(e,mf,wg,n).parse(t)}function Y5e(e){var t=this._runtime.scales;return ve(t,e)||q("Unrecognized scale or projection: "+e),t[e].value}var VG="width",XG="height",u6="padding",rN={skip:!0};function KG(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===u6?r.left+r.right:0)}function ZG(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===u6?r.top+r.bottom:0)}function G5e(e){var t=e._signals,n=t[VG],r=t[XG],i=t[u6];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=KG(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=ZG(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function V5e(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(VG,n,rN),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(XG,r,rN),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(u=>u.resize())},!1,1)}function X5e(e){return this._runtime.getState(e||{data:K5e,signals:Z5e,recurse:!0})}function K5e(e,t){return t.modified&&$e(t.input.value)&&e.indexOf("_:vega:_")}function Z5e(e,t){return!(e==="parent"||t instanceof mf.proxy)}function J5e(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Q5e(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Pbe(n,t))}function eke(e,t,n,r){const i=e.element();i&&i.setAttribute("title",tke(r))}function tke(e){return e==null?"":$e(e)?JG(e):ke(e)&&!Pv(e)?nke(e):e+""}function nke(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+($e(n)?JG(n):QG(n))}).join(`
`)}function JG(e){return"["+e.map(QG).join(", ")+"]"}function QG(e){return $e(e)?"[]":ke(e)&&!Pv(e)?"{}":e}function eV(e,t){const n=this;if(t=t||{},rf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=De({},e.locale,t.locale);n.locale(mH(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||ma.Canvas,n._scenegraph=new Vk;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||eke,n._redraw=!0,n._handler=new Dp().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=_5e(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=H5e(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:De({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=KG(n,n._width),n._viewHeight=ZG(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,G5e(n),c5e(n),f5e(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function im(e,t){return ve(e._signals,t)?e._signals[t]:q("Unrecognized signal name: "+he(t))}function tV(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function iN(e,t,n,r){let i=tV(n,r);return i||(i=s6(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function oN(e,t,n){const r=tV(t,n);return r&&t._targets.remove(r),e}X(eV,rf,{async evaluate(e,t,n){if(await rf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,p5e(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&_m(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&qG(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=im(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",nN(e)):nN(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(ix(e)||q("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(rf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(im(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:V5e,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=s6(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return iN(this,e,im(this,e),t)},removeSignalListener(e,t){return oN(this,im(this,e),t)},addDataListener(e,t){return iN(this,e,qb(this,e).values,t)},removeDataListener(e,t){return oN(this,qb(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=EC(this,null);this._globalCursor=!!e,t&&EC(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Q5e,events:w5e,finalize:E5e,hover:A5e,data:d5e,change:Cx,insert:h5e,remove:g5e,scale:Y5e,initialize:j5e,toImageURL:z5e,toCanvas:q5e,toSVG:W5e,getState:X5e,setState:J5e});const rke="view",Hb="[",Yb="]",nV="{",rV="}",ike=":",iV=",",oke="@",ske=">",ake=/[[\]{}]/,uke={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let oV,sV;function lke(e,t,n){return oV=t||rke,sV=n||uke,aV(e.trim()).map(CC)}function cke(e){return sV[e]}function y0(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function aV(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=y0(e,i,iV,Hb+nV,Yb+rV),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function CC(e){return e[0]==="["?fke(e):dke(e)}function fke(e){const t=e.length;let n=1,r;if(n=y0(e,n,Yb,Hb,Yb),n===t)throw"Empty between selector: "+e;if(r=aV(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==ske)throw"Expected '>' after between selector: "+e;r=r.map(CC);const i=CC(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function dke(e){const t={source:oV},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,u,l;if(e[s-1]===rV){if(a=e.lastIndexOf(nV),a>=0){try{r=hke(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===oke&&(i=++a),u=y0(e,a,ike),u<s&&(n.push(e.substring(o,u).trim()),o=a=++u),a=y0(e,a,Hb),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),l=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=y0(e,a,Yb),a===s)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==Hb)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||ake.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):cke(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function hke(e){const t=e.split(iV);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function gke(e){return ke(e)?e:{type:e||"pad"}}const bh=e=>+e||0,pke=e=>({top:e,bottom:e,left:e,right:e});function mke(e){return ke(e)?e.signal?e:{top:bh(e.top),bottom:bh(e.bottom),left:bh(e.left),right:bh(e.right)}:pke(bh(e))}const qt=e=>ke(e)&&!$e(e)?De({},e):{value:e};function sN(e,t,n,r){return n!=null?(ke(n)&&!$e(n)||$e(n)&&n.length&&ke(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function an(e,t,n){for(const r in t)sN(e,r,t[r]);for(const r in n)sN(e,r,n[r],"update")}function kd(e,t,n){for(const r in t)n&&ve(n,r)||(e[r]=De(e[r]||{},t[r]));return e}function Gc(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const l6="mark",c6="frame",f6="scope",yke="axis",bke="axis-domain",vke="axis-grid",xke="axis-label",_ke="axis-tick",$ke="axis-title",wke="legend",Ake="legend-band",Eke="legend-entry",Cke="legend-gradient",uV="legend-label",Ske="legend-symbol",Fke="legend-title",kke="title",Dke="title-text",Mke="title-subtitle";function Oke(e,t,n,r,i){const o={},s={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Gc(u,e)&&Cw(o,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===c6?i.group:n===l6?De({},i.mark,i[t]):null;for(u in c)l=Gc(u,e)||(u==="fill"||u==="stroke")&&(Gc("fill",e)||Gc("stroke",e)),l||Cw(o,u,c[u]);be(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Gc(h,e)||Cw(o,h,d[h])}),e=De({},e);for(u in o)c=o[u],c.signal?(a=a||{})[u]=c:s[u]=c;return e.enter=De(s,e.enter),a&&(e.update=De(a,e.update)),e}function Cw(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const lV=e=>ut(e)?he(e):e.signal?`(${e.signal})`:cV(e);function Fx(e){if(e.gradient!=null)return Nke(e);let t=e.signal?`(${e.signal})`:e.color?Tke(e.color):e.field!=null?cV(e.field):e.value!==void 0?he(e.value):void 0;return e.scale!=null&&(t=Rke(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Hm(e.exponent)})`),e.mult!=null&&(t+=`*${Hm(e.mult)}`),e.offset!=null&&(t+=`+${Hm(e.offset)}`),e.round&&(t=`round(${t})`),t}const om=(e,t,n,r)=>`(${e}(${[t,n,r].map(Fx).join(",")})+'')`;function Tke(e){return e.c?om("hcl",e.h,e.c,e.l):e.h||e.s?om("hsl",e.h,e.s,e.l):e.l||e.a?om("lab",e.l,e.a,e.b):e.r||e.g||e.b?om("rgb",e.r,e.g,e.b):null}function Nke(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:he(n));for(;t.length&&Ze(t)==null;)t.pop();return t.unshift(lV(e.gradient)),`gradient(${t.join(",")})`}function Hm(e){return ke(e)?"("+Fx(e)+")":e}function cV(e){return fV(ke(e)?e:{datum:e})}function fV(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):q("Invalid field reference: "+he(e));return e.signal||(r=ut(r)?Ov(r).map(he).join("]["):fV(r)),t+"["+r+"]"}function Rke(e,t){const n=lV(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Hm(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Bke(e){let t="";return e.forEach(n=>{const r=Fx(n);t+=n.test?`(${n.test})?${r}:`:r}),Ze(t)===":"&&(t+="null"),t}function dV(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=Oke(e,t,n,r,i.config);for(const a in e)s[a]=Lke(e[a],t,o,i);return o}function Lke(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=jke(Pke(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function Pke(e){return $e(e)?Bke(e):Fx(e)}function jke(e,t,n,r){const i=xo(e,t);return i.$fields.forEach(o=>r[o]=1),De(n,i.$params),i.$expr}const Ike="outer",zke=["value","update","init","react","bind"];function aN(e,t){q(e+' for "outer" push: '+he(t))}function hV(e,t){const n=e.name;if(e.push===Ike)t.signals[n]||aN("No prior signal definition",n),zke.forEach(r=>{e[r]!==void 0&&aN("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function SC(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function kx(e,t,n,r){return new SC(e,t,n,r)}function Gb(e,t){return kx("operator",e,t)}function re(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Eg(e,t){return t?{$field:e,$name:t}:{$field:e}}const FC=Eg("key");function uN(e,t){return{$compare:e,$order:t}}function Uke(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const qke="ascending",Wke="descending";function Hke(e){return ke(e)?(e.order===Wke?"-":"+")+Dx(e.op,e.field):""}function Dx(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const d6="scope",kC="view";function Ot(e){return e&&e.signal}function Yke(e){return e&&e.expr}function Ym(e){if(Ot(e))return!0;if(ke(e)){for(const t in e)if(Ym(e[t]))return!0}return!1}function hi(e,t){return e??t}function vl(e){return e&&e.signal||e}const lN="timer";function Cg(e,t){return(e.merge?Vke:e.stream?Xke:e.type?Kke:q("Invalid stream specification: "+he(e)))(e,t)}function Gke(e){return e===d6?kC:e||kC}function Vke(e,t){const n=e.merge.map(i=>Cg(i,t)),r=h6({merge:n},e,t);return t.addStream(r).id}function Xke(e,t){const n=Cg(e.stream,t),r=h6({stream:n},e,t);return t.addStream(r).id}function Kke(e,t){let n;e.type===lN?(n=t.event(lN,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Gke(e.source),e.type);const r=h6({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function h6(e,t,n){let r=t.between;return r&&(r.length!==2&&q('Stream "between" parameter must have 2 entries: '+he(t)),e.between=[Cg(r[0],n),Cg(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Zke(t.marktype,t.markname,t.markrole)),t.source===d6&&r.push("inScope(event.item)"),r.length&&(e.filter=xo("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Zke(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Jke={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Qke(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||q("Signal update missing events specification."),ut(o)&&(o=lke(o,t.isSubscope()?d6:kC)),o=be(o).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[tDe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&q("Signal encode and update are mutually exclusive."),s="encode(item(),"+he(r)+")"),i.update=ut(s)?xo(s,t):s.expr!=null?xo(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:Jke,$params:{$value:t.signalRef(s.signal)}}:q("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(De(eDe(u,t),i)))}function eDe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Cg(e,t)}}function tDe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function nDe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?q("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=xo(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Qke(i,t,n.id))}const Je=e=>(t,n,r)=>kx(e,n,t||void 0,r),gV=Je("aggregate"),rDe=Je("axisticks"),pV=Je("bound"),Li=Je("collect"),cN=Je("compare"),iDe=Je("datajoin"),mV=Je("encode"),oDe=Je("expression"),sDe=Je("facet"),aDe=Je("field"),uDe=Je("key"),lDe=Je("legendentries"),cDe=Je("load"),fDe=Je("mark"),dDe=Je("multiextent"),hDe=Je("multivalues"),gDe=Je("overlap"),pDe=Je("params"),yV=Je("prefacet"),mDe=Je("projection"),yDe=Je("proxy"),bDe=Je("relay"),bV=Je("render"),vDe=Je("scale"),bc=Je("sieve"),xDe=Je("sortitems"),vV=Je("viewlayout"),_De=Je("values");let $De=0;const xV={min:"min",max:"max",count:"sum"};function wDe(e,t){const n=e.type||"linear";nq(n)||q("Unrecognized scale type: "+he(n)),t.addScale(e.name,{type:n,domain:void 0})}function ADe(e,t){const n=t.getScale(e.name).params;let r;n.domain=_V(e.domain,e,t),e.range!=null&&(n.range=wV(e,t,n)),e.interpolate!=null&&NDe(e.interpolate,n),e.nice!=null&&(n.nice=TDe(e.nice)),e.bins!=null&&(n.bins=ODe(e.bins,t));for(r in e)ve(n,r)||r==="name"||(n[r]=Hr(e[r],t))}function Hr(e,t){return ke(e)?e.signal?t.signalRef(e.signal):q("Unsupported object: "+he(e)):e}function Gm(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Hr(n,t))}function Mx(e){q("Can not find data set: "+he(e))}function _V(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&q("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):($e(e)?EDe:e.fields?SDe:CDe)(e,t,n)}function EDe(e,t,n){return e.map(r=>Hr(r,n))}function CDe(e,t,n){const r=n.getData(e.data);return r||Mx(e.data),Of(t.type)?r.valuesRef(n,e.field,$V(e.sort,!1)):oq(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function SDe(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=ut(s)?{data:r,field:s}:$e(s)||s.signal?FDe(s,n):s,o.push(s),o),[]);return(Of(t.type)?kDe:oq(t.type)?DDe:MDe)(e,n,i)}function FDe(e,t){const n="_:vega:_"+$De++,r=Li({});if($e(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+he(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,bc({})]),{data:n,field:"data"}}function kDe(e,t,n){const r=$V(e.sort,!0);let i,o;const s=n.map(l=>{const c=t.getData(l.data);return c||Mx(l.data),c.countsRef(t,l.field,r)}),a={groupby:FC,pulse:s};r&&(i=r.op||"count",o=r.field?Dx(i,r.field):"count",a.ops=[xV[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(gV(a));const u=t.add(Li({pulse:re(i)}));return o=t.add(_De({field:FC,sort:t.sortRef(r),pulse:re(u)})),re(o)}function $V(e,t){return e&&(!e.field&&!e.op?ke(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?q("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!xV[e.op]&&q("Multiple domain scales can not be sorted using "+e.op)),e}function DDe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Mx(i.data),o.domainRef(t,i.field)});return re(t.add(hDe({values:r})))}function MDe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Mx(i.data),o.extentRef(t,i.field)});return re(t.add(dDe({extents:r})))}function ODe(e,t){return e.signal||$e(e)?Gm(e,t):t.objectProperty(e)}function TDe(e){return ke(e)?{interval:Hr(e.interval),step:Hr(e.step)}:Hr(e)}function NDe(e,t){t.interpolate=Hr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Hr(e.gamma))}function wV(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(ut(i)){if(r&&ve(r,i))return e=De({},e,{range:r[i]}),wV(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Of(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:q("Unrecognized scale range value: "+he(i))}else if(i.scheme){n.scheme=$e(i.scheme)?Gm(i.scheme,t):Hr(i.scheme,t),i.extent&&(n.schemeExtent=Gm(i.extent,t)),i.count&&(n.schemeCount=Hr(i.count,t));return}else if(i.step){n.rangeStep=Hr(i.step,t);return}else{if(Of(e.type)&&!$e(i))return _V(i,e,t);$e(i)||q("Unsupported range type: "+he(i))}return i.map(o=>($e(o)?Gm:Hr)(o,t))}function RDe(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=DC(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=DC(n[i],i,t));t.addProjection(e.name,r)}function DC(e,t,n){return $e(e)?e.map(r=>DC(r,t,n)):ke(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:q("Unsupported parameter object: "+he(e)):e}const Pi="top",Dd="left",Md="right",eu="bottom",AV="center",BDe="vertical",LDe="start",PDe="middle",jDe="end",MC="index",g6="label",IDe="offset",Yf="perc",zDe="perc2",Gr="value",Ip="guide-label",p6="guide-title",UDe="group-title",qDe="group-subtitle",fN="symbol",Vm="gradient",OC="discrete",TC="size",WDe="shape",HDe="fill",YDe="stroke",GDe="strokeWidth",VDe="strokeDash",XDe="opacity",m6=[TC,WDe,HDe,YDe,GDe,VDe,XDe],zp={name:1,style:1,interactive:1},Oe={value:0},Vr={value:1},Ox="group",EV="rect",y6="rule",KDe="symbol",vc="text";function Sg(e){return e.type=Ox,e.interactive=e.interactive||!1,e}function $r(e,t){const n=(r,i)=>hi(e[r],hi(t[r],i));return n.isVertical=r=>BDe===hi(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>hi(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>hi(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>hi(e.columns,hi(t.columns,+n.isVertical(!0))),n}function CV(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function ZDe(e,t,n){const r=t.config.style[n];return r&&r[e]}function Tx(e,t,n){return`item.anchor === '${LDe}' ? ${e} : item.anchor === '${jDe}' ? ${t} : ${n}`}const b6=Tx(he(Dd),he(Md),he(AV));function JDe(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ke(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function SV(e,t){return t?e?ke(e)?Object.assign({},e,{offset:SV(e.offset,t)}):{value:e,offset:t}:t:e}function Rr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=kd(e.encode,t,zp)):e.interactive=!1,e}function QDe(e,t,n,r){const i=$r(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=s,d=a):(l=[0,0],c=[1,0],f=a,d=s);const h={enter:u={opacity:Oe,x:Oe,y:Oe,width:qt(f),height:qt(d)},update:De({},u,{opacity:Vr,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Oe}};return an(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Rr({type:EV,role:Cke,encode:h},r)}function e6e(e,t,n,r,i){const o=$r(e,n),s=o.isVertical(),a=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";s?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const g={opacity:Oe,fill:{scale:t,field:Gr}};g[l]={signal:h+"datum."+Yf,mult:u},g[c]=Oe,g[f]={signal:h+"datum."+zDe,mult:u},g[d]=qt(a);const p={enter:g,update:De({},g,{opacity:Vr}),exit:{opacity:Oe}};return an(p,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Rr({type:EV,role:Ake,key:Gr,from:i,encode:p},r)}const t6e=`datum.${Yf}<=0?"${Dd}":datum.${Yf}>=1?"${Md}":"${AV}"`,n6e=`datum.${Yf}<=0?"${eu}":datum.${Yf}>=1?"${Pi}":"${PDe}"`;function dN(e,t,n,r){const i=$r(e,t),o=i.isVertical(),s=qt(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const g={enter:l={opacity:Oe},update:c={opacity:Vr,text:{field:g6}},exit:{opacity:Oe}};return an(g,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:hi(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=c.baseline={signal:n6e},f="y",d="x",h="1-"):(l.align=c.align={signal:t6e},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Yf,mult:a},l[d]=c[d]=s,s.offset=hi(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+MC}:void 0,Rr({type:vc,role:uV,style:Ip,key:Gr,from:r,encode:g,overlap:u},n)}function r6e(e,t,n,r,i){const o=$r(e,t),s=n.entries,a=!!(s&&s.interactive),u=s?s.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${IDe} : datum.${TC}`,h=l?qt(l):{field:TC},g=`datum.${MC}`,p=`max(1, ${i})`;let m,y,b,x,v;h.mult=.5,m={enter:y={opacity:Oe,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:Vr,x:y.x,y:y.y},exit:{opacity:Oe}};let _=null,w=null;e.fill||(_=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),an(m,{fill:o("symbolFillColor",_),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",w),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),m6.forEach(k=>{e[k]&&(b[k]=y[k]={scale:e[k],field:Gr})});const $=Rr({type:KDe,role:Ske,key:Gr,from:f,clip:l?!0:void 0,encode:m},n.symbols),A=qt(c);A.offset=o("labelOffset"),m={enter:y={opacity:Oe,x:{signal:d,offset:A},y:h},update:b={opacity:Vr,text:{field:g6},x:y.x,y:y.y},exit:{opacity:Oe}},an(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const M=Rr({type:vc,role:uV,style:Ip,key:Gr,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!l},width:Oe,height:l?qt(l):Oe,opacity:Oe},exit:{opacity:Oe},update:b={opacity:Vr,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(x=`ceil(item.mark.items.length / ${p})`,b.row.signal=`${g}%${x}`,b.column.signal=`floor(${g} / ${x})`,v={field:["row",g]}):(b.row.signal=`floor(${g} / ${p})`,b.column.signal=`${g} % ${p}`,v={field:g}),b.column.signal=`(${i})?${b.column.signal}:${g}`,r={facet:{data:r,name:"value",groupby:MC}},Sg({role:f6,from:r,encode:kd(m,s,zp),marks:[$,M],name:u,interactive:a,sort:v})}function i6e(e,t){const n=$r(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const v6='item.orient === "left"',x6='item.orient === "right"',Nx=`(${v6} || ${x6})`,o6e=`datum.vgrad && ${Nx}`,s6e=Tx('"top"','"bottom"','"middle"'),a6e=Tx('"right"','"left"','"center"'),u6e=`datum.vgrad && ${x6} ? (${a6e}) : (${Nx} && !(datum.vgrad && ${v6})) ? "left" : ${b6}`,l6e=`item._anchor || (${Nx} ? "middle" : "start")`,c6e=`${o6e} ? (${v6} ? -90 : 90) : 0`,f6e=`${Nx} ? (datum.vgrad ? (${x6} ? "bottom" : "top") : ${s6e}) : "top"`;function d6e(e,t,n,r){const i=$r(e,t),o={enter:{opacity:Oe},update:{opacity:Vr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Oe}};return an(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:l6e},angle:{signal:c6e},align:{signal:u6e},baseline:{signal:f6e},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Rr({type:vc,role:Fke,style:p6,from:r,encode:o},n)}function h6e(e,t){let n;return ke(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+hN(e.path)+")":e.sphere&&(n="geoShape("+hN(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function hN(e){return ke(e)&&e.signal?e.signal:he(e)}function FV(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===Ox?f6:t||l6}function g6e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||FV(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function p6e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function _6(e,t){const n=uP(e.type);n||q("Unrecognized transform type: "+he(e.type));const r=kx(n.type.toLowerCase(),null,kV(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function kV(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=m6e(s,t,n)}return r}function m6e(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return y6e(e,t,n);if(i===void 0){e.required&&q("Missing required "+he(t.type)+" parameter: "+he(e.name));return}else{if(r==="param")return b6e(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Ot(i)?i.map(o=>gN(e,o,n)):gN(e,i,n)}function gN(e,t,n){const r=e.type;if(Ot(t))return mN(r)?q("Expression references can not be signals."):Sw(r)?n.fieldRef(t):yN(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Sw(r);return i&&v6e(t)?n.exprRef(t.expr,t.as):i&&x6e(t)?Eg(t.field,t.as):mN(r)?xo(t,n):_6e(r)?re(n.getData(t).values):Sw(r)?Eg(t):yN(r)?n.compareRef(t):t}}function y6e(e,t,n){return ut(t.from)||q('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function b6e(e,t,n){const r=t[e.name];return e.array?($e(r)||q("Expected an array of sub-parameters. Instead: "+he(r)),r.map(i=>pN(e,i,n))):pN(e,r,n)}function pN(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||q("Unsupported parameter: "+he(t));const o=De(kV(i,t,n),i.key);return re(n.add(pDe(o)))}const v6e=e=>e&&e.expr,x6e=e=>e&&e.field,_6e=e=>e==="data",mN=e=>e==="expr",Sw=e=>e==="field",yN=e=>e==="compare";function $6e(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||q("Only group marks can be faceted."),r.field!=null?s=a=Xm(r,n):(e.data?a=re(n.getData(e.data).aggregate):(o=_6(De({type:"aggregate",groupby:be(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=Xm(r,n),s=a=re(n.add(o))),i=n.keyRef(r.groupby,!0))):s=re(n.add(Li(null,[{}]))),s||(s=Xm(e,n)),{key:i,pulse:s,parent:a}}function Xm(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:re(t.getData(e.data).output)}function zl(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}zl.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=re(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new zl(e,o,i,r,s)};function DV(e){return ut(e)?e:null}function bN(e,t,n){const r=Dx(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function vh(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),u=Hke(o);let l=DV(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=o?{field:FC,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:re(t.output)};u&&(d.sort=e.sortRef(o)),f=e.add(kx(r,void 0,d)),s&&(t.index[i]=f),c=re(f),l!=null&&(a[l]=c)}return c}zl.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=DV(t);let s,a,u;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&bN(e,s.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:re(r.output)},n&&n.field&&bN(e,u,n),a=e.add(gV(u)),s=e.add(Li({pulse:re(a)})),s={agg:a,ref:re(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return re(this.values)},extentRef(e,t){return vh(e,this,"extent","extent",t,!1)},domainRef(e,t){return vh(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return vh(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return vh(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return vh(e,this,"indata","tupleindex",t,!0,!0)}};function w6e(e,t,n){const r=e.from.facet,i=r.name,o=Xm(r,t);let s;r.name||q("Facet must have a name: "+he(r)),r.data||q("Facet must reference a data set: "+he(r)),r.field?s=t.add(yV({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(sDe({key:t.keyRef(r.groupby),group:re(t.proxy(n.parent)),pulse:o})):q("Facet must specify groupby or field: "+he(r));const a=t.fork(),u=a.add(Li()),l=a.add(bc({pulse:re(u)}));a.addData(i,new zl(a,u,u,l)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function A6e(e,t,n){const r=t.add(yV({pulse:n.pulse})),i=t.fork();i.add(bc()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function MV(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,u=t.add(Gb()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=xo(l,t);u.update=c.$expr,u.params=c.$params}function Rx(e,t){const n=FV(e),r=e.type===Ox,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===f6||n===c6,a,u,l,c,f,d,h;const g=n===l6||s||i,p=$6e(e.from,r,t);u=t.add(iDe({key:p.key||(e.key?Eg(e.key):void 0),pulse:p.pulse,clean:!r}));const m=re(u);u=l=t.add(Li({pulse:m})),u=t.add(fDe({markdef:g6e(e),interactive:p6e(e.interactive,t),clip:h6e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:re(u)}));const y=re(u);u=c=t.add(mV(dV(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const $=_6(w,t),A=$.metadata;(A.generates||A.changes)&&q("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),$.params.pulse=re(u),t.add(u=$)}),e.sort&&(u=t.add(xDe({sort:t.compareRef(e.sort),pulse:re(u)})));const b=re(u);(i||s)&&(s=t.add(vV({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:b})),d=re(s));const x=t.add(pV({mark:y,pulse:d||b}));h=re(x),r&&(g&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(b,d||h,m),i?w6e(e,t,p):g?A6e(e,t,p):t.parse(e),t.popState(),g&&(s&&a.push(s),a.push(x))),o&&(h=E6e(o,h,t));const v=t.add(bV({pulse:h})),_=t.add(bc({pulse:re(v)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new zl(t,l,v,_)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&q("Marks only support modify triggers."),MV(w,t,f)}))}function E6e(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:Ot(o)?n.signalRef(o.signal):o,method:Ot(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=Ot(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return re(n.add(gDe(s)))}function C6e(e,t){const n=t.config.legend,r=e.encode||{},i=$r(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,u=o.style,l={};let c=0,f,d,h;m6.forEach(x=>e[x]?(l[x]=e[x],c=c||e[x]):0),c||q("Missing valid scale for legend.");const g=S6e(e,t.scaleType(c)),p={title:e.title!=null,scales:l,type:g,vgrad:g!=="symbol"&&i.isVertical()},m=re(t.add(Li(null,[p]))),y={enter:{x:{value:0},y:{value:0}}},b=re(t.add(lDe(d={type:g,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return g===Vm?(h=[QDe(e,c,n,r.gradient),dN(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${vl(i.gradientLength())})/100))`)):g===OC?h=[e6e(e,c,n,r.gradient,b),dN(e,n,r.labels,b)]:(f=i6e(e,n),h=[r6e(e,n,r,b,vl(f.columns))],d.size=D6e(e,t,h[0].marks)),h=[Sg({role:Eke,from:m,encode:y,marks:h,layout:f,interactive:a})],p.title&&h.push(d6e(e,n,r.title,m)),Rx(Sg({role:wke,from:m,encode:kd(k6e(i,e,n),o,zp),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:u}),t)}function S6e(e,t){let n=e.type||fN;return!e.type&&F6e(e)===1&&(e.fill||e.stroke)&&(n=T5(t)?Vm:uE(t)?OC:fN),n!==Vm?n:uE(t)?OC:Vm}function F6e(e){return m6.reduce((t,n)=>t+(e[n]?1:0),0)}function k6e(e,t,n){const r={enter:{},update:{}};return an(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function D6e(e,t,n){const r=vl(vN("size",e,n)),i=vl(vN("strokeWidth",e,n)),o=vl(M6e(n[1].encode,t,Ip));return xo(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function vN(e,t,n){return t[e]?`scale("${t[e]}",datum)`:CV(e,n[0].encode)}function M6e(e,t,n){return CV("fontSize",e)||ZDe("fontSize",t,n)}const O6e=`item.orient==="${Dd}"?-90:item.orient==="${Md}"?90:0`;function T6e(e,t){e=ut(e)?{text:e}:e;const n=$r(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,u=[],l={},c=re(t.add(Li(null,[l])));return u.push(B6e(e,n,N6e(e),c)),e.subtitle&&u.push(L6e(e,n,r.subtitle,c)),Rx(Sg({role:kke,from:c,encode:R6e(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function N6e(e){const t=e.encode;return t&&t.title||De({name:e.name,interactive:e.interactive,style:e.style},t)}function R6e(e,t){const n={enter:{},update:{}};return an(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:b6},angle:{signal:O6e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),kd(n,t,zp)}function B6e(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return an(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Rr({type:vc,role:Dke,style:UDe,from:r,encode:s},n)}function L6e(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return an(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Rr({type:vc,role:Mke,style:qDe,from:r,encode:s},n)}function P6e(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(_6(r,t))}),e.on&&e.on.forEach(r=>{MV(r,t,e.name)}),t.addDataPipeline(e.name,j6e(e,t,n))}function j6e(e,t,n){const r=[];let i=null,o=!1,s=!1,a,u,l,c,f;for(e.values?Ot(e.values)||Ym(e.format)?(r.push(xN(t,e)),r.push(i=Ou())):r.push(i=Ou({$ingest:e.values,$format:e.format})):e.url?Ym(e.url)||Ym(e.format)?(r.push(xN(t,e)),r.push(i=Ou())):r.push(i=Ou({$request:e.url,$format:e.format})):e.source&&(i=a=be(e.source).map(d=>re(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Ou()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=bDe({derive:o,pulse:l?a:a[0]}),(o||l)&&r.splice(1,0,Ou())),i||r.push(Ou()),r.push(bc({})),r}function Ou(e){const t=Li({},e);return t.metadata={source:!0},t}function xN(e,t){return cDe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const OV=e=>e===eu||e===Pi,Bx=(e,t,n)=>Ot(e)?q6e(e.signal,t,n):e===Dd||e===Pi?t:n,Wt=(e,t,n)=>Ot(e)?z6e(e.signal,t,n):OV(e)?t:n,Ei=(e,t,n)=>Ot(e)?U6e(e.signal,t,n):OV(e)?n:t,TV=(e,t,n)=>Ot(e)?W6e(e.signal,t,n):e===Pi?{value:t}:{value:n},I6e=(e,t,n)=>Ot(e)?H6e(e.signal,t,n):e===Md?{value:t}:{value:n},z6e=(e,t,n)=>NV(`${e} === '${Pi}' || ${e} === '${eu}'`,t,n),U6e=(e,t,n)=>NV(`${e} !== '${Pi}' && ${e} !== '${eu}'`,t,n),q6e=(e,t,n)=>$6(`${e} === '${Dd}' || ${e} === '${Pi}'`,t,n),W6e=(e,t,n)=>$6(`${e} === '${Pi}'`,t,n),H6e=(e,t,n)=>$6(`${e} === '${Md}'`,t,n),NV=(e,t,n)=>(t=t!=null?qt(t):t,n=n!=null?qt(n):n,_N(t)&&_N(n)?(t=t?t.signal||he(t.value):null,n=n?n.signal||he(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[De({test:e},t)].concat(n||[])),_N=e=>e==null||Object.keys(e).length===1,$6=(e,t,n)=>({signal:`${e} ? (${ef(t)}) : (${ef(n)})`}),Y6e=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Dd}' ? (${ef(r)}) : `:"")+(n!=null?`${e} === '${eu}' ? (${ef(n)}) : `:"")+(i!=null?`${e} === '${Md}' ? (${ef(i)}) : `:"")+(t!=null?`${e} === '${Pi}' ? (${ef(t)}) : `:"")+"(null)"}),ef=e=>Ot(e)?e.signal:e==null?null:he(e),G6e=(e,t)=>t===0?0:Ot(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},lf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function qc(e,t,n,r){let i;if(t&&ve(t,e))return t[e];if(ve(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[p6][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Ip][i]}return null}function $N(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function V6e(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,u,l;if(Ot(s)){const f=$N([n.axisX,n.axisY]),d=$N([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Wt(s,qc(l,n.axisX,i,r),qc(l,n.axisY,i,r));u={};for(l of d)u[l]=Y6e(s.signal,qc(l,n.axisTop,i,r),qc(l,n.axisBottom,i,r),qc(l,n.axisLeft,i,r),qc(l,n.axisRight,i,r))}else a=s===Pi||s===eu?n.axisX:n.axisY,u=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||u||o?De({},i,a,u,o):i}function X6e(e,t,n,r){const i=$r(e,t),o=e.orient;let s,a;const u={enter:s={opacity:Oe},update:a={opacity:Vr},exit:{opacity:Oe}};an(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=wN(e,0),c=wN(e,1);return s.x=a.x=Wt(o,l,Oe),s.x2=a.x2=Wt(o,c),s.y=a.y=Ei(o,l,Oe),s.y2=a.y2=Ei(o,c),Rr({type:y6,role:bke,from:r,encode:u},n)}function wN(e,t){return{scale:e.scale,range:t}}function K6e(e,t,n,r,i){const o=$r(e,t),s=e.orient,a=e.gridScale,u=Bx(s,1,-1),l=Z6e(e.offset,u);let c,f,d;const h={enter:c={opacity:Oe},update:d={opacity:Vr},exit:f={opacity:Oe}};an(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const g={scale:e.scale,field:Gr,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},p=Wt(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:De(p,{mult:u,offset:l});return c.x=d.x=Wt(s,g,m),c.y=d.y=Ei(s,g,m),c.x2=d.x2=Ei(s,y),c.y2=d.y2=Wt(s,y),f.x=Wt(s,g),f.y=Ei(s,g),Rr({type:y6,role:vke,key:Gr,from:r,encode:h},n)}function Z6e(e,t){if(t!==1)if(!ke(e))e=Ot(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=De({},e);for(;n.mult!=null;)if(ke(n.mult))n=n.mult=De({},n.mult);else return n.mult=Ot(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function J6e(e,t,n,r,i,o){const s=$r(e,t),a=e.orient,u=Bx(a,-1,1);let l,c,f;const d={enter:l={opacity:Oe},update:f={opacity:Vr},exit:c={opacity:Oe}};an(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=qt(i);h.mult=u;const g={scale:e.scale,field:Gr,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=l.y=Wt(a,Oe,g),f.y2=l.y2=Wt(a,h),c.x=Wt(a,g),f.x=l.x=Ei(a,Oe,g),f.x2=l.x2=Ei(a,h),c.y=Ei(a,g),Rr({type:y6,role:_ke,key:Gr,from:r,encode:d},n)}function Fw(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Q6e(e,t,n,r,i,o){const s=$r(e,t),a=e.orient,u=e.scale,l=Bx(a,-1,1),c=vl(s("labelFlush")),f=vl(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let g=c===0||!!c,p;const m=qt(i);m.mult=l,m.offset=qt(s("labelPadding")||0),m.offset.mult=l;const y={scale:u,field:Gr,band:.5,offset:SV(o.offset,s("labelOffset"))},b=Wt(a,g?Fw(u,c,'"left"','"right"','"center"'):{value:"center"},I6e(a,"left","right")),x=Wt(a,TV(a,"bottom","top"),g?Fw(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),v=Fw(u,c,`-(${f})`,f,0);g=g&&f;const _={opacity:Oe,x:Wt(a,y,m),y:Ei(a,y,m)},w={enter:_,update:p={opacity:Vr,text:{field:g6},x:_.x,y:_.y,align:b,baseline:x},exit:{opacity:Oe,x:_.x,y:_.y}};an(w,{dx:!d&&g?Wt(a,v):null,dy:!h&&g?Ei(a,v):null}),an(w,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const $=s("labelBound");let A=s("labelOverlap");return A=A||$?{separation:s("labelSeparation"),method:A,order:"datum.index",bound:$?{scale:u,orient:a,tolerance:$}:null}:void 0,p.align!==b&&(p.align=lf(p.align,b)),p.baseline!==x&&(p.baseline=lf(p.baseline,x)),Rr({type:vc,role:xke,style:Ip,key:Gr,from:r,encode:w,overlap:A},n)}function eMe(e,t,n,r){const i=$r(e,t),o=e.orient,s=Bx(o,-1,1);let a,u;const l={enter:a={opacity:Oe,anchor:qt(i("titleAnchor",null)),align:{signal:b6}},update:u=De({},a,{opacity:Vr,text:qt(e.title)}),exit:{opacity:Oe}},c={signal:`lerp(range("${e.scale}"), ${Tx(0,1,.5)})`};return u.x=Wt(o,c),u.y=Ei(o,c),a.angle=Wt(o,Oe,G6e(s,90)),a.baseline=Wt(o,TV(o,eu,Pi),{value:eu}),u.angle=a.angle,u.baseline=a.baseline,an(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),tMe(i,o,l,n),l.update.align=lf(l.update.align,a.align),l.update.angle=lf(l.update.angle,a.angle),l.update.baseline=lf(l.update.baseline,a.baseline),Rr({type:vc,role:$ke,style:p6,from:r,encode:l},n)}function tMe(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=lf(qt(a),n.update[u]),!1):!Gc(u,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?qt(s):Wt(t,qt(s),qt(o))}function nMe(e,t){const n=V6e(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,u=$r(e,n),l=JDe(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=re(t.add(Li({},[c]))),d=re(t.add(rDe({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let g;return c.grid&&h.push(K6e(e,n,r.grid,d,l)),c.ticks&&(g=u("tickSize"),h.push(J6e(e,n,r.ticks,d,g,l))),c.labels&&(g=c.ticks?g:0,h.push(Q6e(e,n,r.labels,d,g,l))),c.domain&&h.push(X6e(e,n,r.domain,f)),c.title&&h.push(eMe(e,n,r.title,f)),Rx(Sg({role:yke,from:f,encode:kd(rMe(u,e),i,zp),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:s,style:a}),t)}function rMe(e,t){const n={enter:{},update:{}};return an(n,{orient:e("orient"),offset:e("offset")||0,position:hi(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function RV(e,t,n){const r=be(e.signals),i=be(e.scales);return n||r.forEach(o=>hV(o,t)),be(e.projections).forEach(o=>RDe(o,t)),i.forEach(o=>wDe(o,t)),be(e.data).forEach(o=>P6e(o,t)),i.forEach(o=>ADe(o,t)),(n||r).forEach(o=>nDe(o,t)),be(e.axes).forEach(o=>nMe(o,t)),be(e.marks).forEach(o=>Rx(o,t)),be(e.legends).forEach(o=>C6e(o,t)),e.title&&T6e(e.title,t),t.parseLambdas(),t}const iMe=e=>kd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function oMe(e,t){const n=t.config,r=re(t.root=t.add(Gb())),i=sMe(e,n);i.forEach(l=>hV(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Li()),s=t.add(mV(dV(iMe(e.encode),Ox,c6,e.style,t,{pulse:re(o)}))),a=t.add(vV({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:re(s)}));t.operators.pop(),t.pushState(re(s),re(a),null),RV(e,t,i),t.operators.push(a);let u=t.add(pV({mark:r,pulse:re(a)}));return u=t.add(bV({pulse:re(u)})),u=t.add(bc({pulse:re(u)})),t.addData("root",new zl(t,o,o,u)),t}function xh(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function sMe(e,t){const n=s=>hi(e[s],t[s]),r=[xh("background",n("background")),xh("autosize",gke(n("autosize"))),xh("padding",mke(n("padding"))),xh("width",n("width")||0),xh("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return be(e.signals).forEach(s=>{ve(i,s.name)?s=De(i[s.name],s):r.push(s),o[s.name]=s}),be(t.signals).forEach(s=>{!ve(o,s.name)&&!ve(i,s.name)&&r.push(s)}),r}function BV(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function AN(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}BV.prototype=AN.prototype={parse(e){return RV(e,this)},fork(){return new AN(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof SC?re(e):e;return this.add(yDe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(re(this.add(bc({pulse:e})))),this._parent.push(t),this._lookup.push(n?re(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ze(this._parent)},encode(){return Ze(this._encode)},lookup(){return Ze(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ut(e))return Eg(e,t);e.signal||q("Unsupported field reference: "+he(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=re(this.add(aDe(i)))}return r},compareRef(e){let t=!1;const n=o=>Ot(o)?(t=!0,this.signalRef(o.signal)):Yke(o)?(t=!0,this.exprRef(o.expr)):o,r=be(e.field).map(n),i=be(e.order).map(n);return t?re(this.add(cN({fields:r,orders:i}))):uN(r,i)},keyRef(e,t){let n=!1;const r=o=>Ot(o)?(n=!0,re(i[o.signal])):o,i=this.signals;return e=be(e).map(r),n?re(this.add(uDe({fields:e,flat:t}))):Uke(e,t)},sortRef(e){if(!e)return e;const t=Dx(e.op,e.field),n=e.order||qke;return n.signal?re(this.add(cN({fields:t,orders:this.signalRef(n.signal)}))):uN(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return ve(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&q("Duplicate signal name: "+he(e));const n=t instanceof SC?t:this.add(Gb(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||q("Unrecognized signal name: "+he(e)),this.signals[e]},signalRef(e){return this.signals[e]?re(this.signals[e]):(ve(this.lambdas,e)||(this.lambdas[e]=this.add(Gb(null))),re(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=xo(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ke(e)?e:this.signalRef(e.signal||w6(e))},exprRef(e,t){const n={expr:xo(e,this)};return t&&(n.expr.$name=t),re(this.add(oDe(n)))},addBinding(e,t){this.bindings||q("Nested signals do not support binding: "+he(e)),this.bindings.push(De({signal:e},t))},addScaleProj(e,t){ve(this.scales,e)&&q("Duplicate scale or projection name: "+he(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,vDe(t))},addProjection(e,t){this.addScaleProj(e,mDe(t))},getScale(e){return this.scales[e]||q("Unrecognized scale name: "+he(e)),this.scales[e]},scaleRef(e){return re(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ve(this.data,e)&&q("Duplicate data set name: "+he(e)),this.data[e]=t},getData(e){return this.data[e]||q("Undefined data set name: "+he(e)),this.data[e]},addDataPipeline(e,t){return ve(this.data,e)&&q("Duplicate data set name: "+he(e)),this.addData(e,zl.fromEntries(this,t))}};function w6(e){return($e(e)?aMe:uMe)(e)}function aMe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ke(i)?i.signal||w6(i):he(i))}return n+"]"}function uMe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+he(r)+":"+(ke(i)?i.signal||w6(i):he(i));return t+"}"}function lMe(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function cMe(e,t,n){return ke(e)||q("Input Vega specification must be an object."),t=Tv(lMe(),t,e.config),oMe(e,new BV(t,n)).toRuntime()}const fMe="RawCode",dMe="Literal",hMe="Property",gMe="Identifier",pMe="ArrayExpression",mMe="BinaryExpression",yMe="CallExpression",bMe="ConditionalExpression",vMe="LogicalExpression",xMe="MemberExpression",_Me="ObjectExpression",$Me="UnaryExpression";function ji(e){this.type=e}ji.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=wMe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function wMe(e){switch(e.type){case pMe:return e.elements;case mMe:case vMe:return[e.left,e.right];case yMe:return[e.callee].concat(e.arguments);case bMe:return[e.test,e.consequent,e.alternate];case xMe:return[e.object,e.property];case _Me:return e.properties;case hMe:return[e.key,e.value];case $Me:return[e.argument];case gMe:case dMe:case fMe:default:return[]}}var Bo,te,I,Fn,Xe,Lx=1,Up=2,Ul=3,bu=4,Px=5,xc=6,rr=7,qp=8,AMe=9;Bo={};Bo[Lx]="Boolean";Bo[Up]="<end>";Bo[Ul]="Identifier";Bo[bu]="Keyword";Bo[Px]="Null";Bo[xc]="Numeric";Bo[rr]="Punctuator";Bo[qp]="String";Bo[AMe]="RegularExpression";var EMe="ArrayExpression",CMe="BinaryExpression",SMe="CallExpression",FMe="ConditionalExpression",LV="Identifier",kMe="Literal",DMe="LogicalExpression",MMe="MemberExpression",OMe="ObjectExpression",TMe="Property",NMe="UnaryExpression",Ht="Unexpected token %0",RMe="Unexpected number",BMe="Unexpected string",LMe="Unexpected identifier",PMe="Unexpected reserved word",jMe="Unexpected end of input",NC="Invalid regular expression",kw="Invalid regular expression: missing /",PV="Octal literals are not allowed in strict mode.",IMe="Duplicate data property in object literal not allowed in strict mode",rn="ILLEGAL",Fg="Disabled.",zMe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),UMe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function jx(e,t){if(!e)throw new Error("ASSERT: "+t)}function ts(e){return e>=48&&e<=57}function A6(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function b0(e){return"01234567".indexOf(e)>=0}function qMe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function kg(e){return e===10||e===13||e===8232||e===8233}function Wp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&zMe.test(String.fromCharCode(e))}function Vb(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&UMe.test(String.fromCharCode(e))}const WMe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function jV(){for(;I<Fn;){const e=te.charCodeAt(I);if(qMe(e)||kg(e))++I;else break}}function RC(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)I<Fn&&A6(te[I])?(r=te[I++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Le({},Ht,rn);return String.fromCharCode(i)}function HMe(){var e,t,n,r;for(e=te[I],t=0,e==="}"&&Le({},Ht,rn);I<Fn&&(e=te[I++],!!A6(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Le({},Ht,rn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function IV(){var e,t;for(e=te.charCodeAt(I++),t=String.fromCharCode(e),e===92&&(te.charCodeAt(I)!==117&&Le({},Ht,rn),++I,e=RC("u"),(!e||e==="\\"||!Wp(e.charCodeAt(0)))&&Le({},Ht,rn),t=e);I<Fn&&(e=te.charCodeAt(I),!!Vb(e));)++I,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),te.charCodeAt(I)!==117&&Le({},Ht,rn),++I,e=RC("u"),(!e||e==="\\"||!Vb(e.charCodeAt(0)))&&Le({},Ht,rn),t+=e);return t}function YMe(){var e,t;for(e=I++;I<Fn;){if(t=te.charCodeAt(I),t===92)return I=e,IV();if(Vb(t))++I;else break}return te.slice(e,I)}function GMe(){var e,t,n;return e=I,t=te.charCodeAt(I)===92?IV():YMe(),t.length===1?n=Ul:WMe.hasOwnProperty(t)?n=bu:t==="null"?n=Px:t==="true"||t==="false"?n=Lx:n=Ul,{type:n,value:t,start:e,end:I}}function Dw(){var e=I,t=te.charCodeAt(I),n,r=te[I],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++I,{type:rr,value:String.fromCharCode(t),start:e,end:I};default:if(n=te.charCodeAt(I+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return I+=2,{type:rr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:I};case 33:case 61:return I+=2,te.charCodeAt(I)===61&&++I,{type:rr,value:te.slice(e,I),start:e,end:I}}}if(s=te.substr(I,4),s===">>>=")return I+=4,{type:rr,value:s,start:e,end:I};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return I+=3,{type:rr,value:o,start:e,end:I};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return I+=2,{type:rr,value:i,start:e,end:I};if(i==="//"&&Le({},Ht,rn),"<>=!+-*%&|^/".indexOf(r)>=0)return++I,{type:rr,value:r,start:e,end:I};Le({},Ht,rn)}function VMe(e){let t="";for(;I<Fn&&A6(te[I]);)t+=te[I++];return t.length===0&&Le({},Ht,rn),Wp(te.charCodeAt(I))&&Le({},Ht,rn),{type:xc,value:parseInt("0x"+t,16),start:e,end:I}}function XMe(e){let t="0"+te[I++];for(;I<Fn&&b0(te[I]);)t+=te[I++];return(Wp(te.charCodeAt(I))||ts(te.charCodeAt(I)))&&Le({},Ht,rn),{type:xc,value:parseInt(t,8),octal:!0,start:e,end:I}}function EN(){var e,t,n;if(n=te[I],jx(ts(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=I,e="",n!=="."){if(e=te[I++],n=te[I],e==="0"){if(n==="x"||n==="X")return++I,VMe(t);if(b0(n))return XMe(t);n&&ts(n.charCodeAt(0))&&Le({},Ht,rn)}for(;ts(te.charCodeAt(I));)e+=te[I++];n=te[I]}if(n==="."){for(e+=te[I++];ts(te.charCodeAt(I));)e+=te[I++];n=te[I]}if(n==="e"||n==="E")if(e+=te[I++],n=te[I],(n==="+"||n==="-")&&(e+=te[I++]),ts(te.charCodeAt(I)))for(;ts(te.charCodeAt(I));)e+=te[I++];else Le({},Ht,rn);return Wp(te.charCodeAt(I))&&Le({},Ht,rn),{type:xc,value:parseFloat(e),start:t,end:I}}function KMe(){var e="",t,n,r,i,o=!1;for(t=te[I],jx(t==="'"||t==='"',"String literal must starts with a quote"),n=I,++I;I<Fn;)if(r=te[I++],r===t){t="";break}else if(r==="\\")if(r=te[I++],!r||!kg(r.charCodeAt(0)))switch(r){case"u":case"x":te[I]==="{"?(++I,e+=HMe()):e+=RC(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:b0(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),I<Fn&&b0(te[I])&&(o=!0,i=i*8+"01234567".indexOf(te[I++]),"0123".indexOf(r)>=0&&I<Fn&&b0(te[I])&&(i=i*8+"01234567".indexOf(te[I++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&te[I]===`
`&&++I;else{if(kg(r.charCodeAt(0)))break;e+=r}return t!==""&&Le({},Ht,rn),{type:qp,value:e,octal:o,start:n,end:I}}function ZMe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Le({},NC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Le({},NC)}try{return new RegExp(e,t)}catch{return null}}function JMe(){var e,t,n,r,i;for(e=te[I],jx(e==="/","Regular expression literal must start with a slash"),t=te[I++],n=!1,r=!1;I<Fn;)if(e=te[I++],t+=e,e==="\\")e=te[I++],kg(e.charCodeAt(0))&&Le({},kw),t+=e;else if(kg(e.charCodeAt(0)))Le({},kw);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Le({},kw),i=t.substr(1,t.length-2),{value:i,literal:t}}function QMe(){var e,t,n;for(t="",n="";I<Fn&&(e=te[I],!!Vb(e.charCodeAt(0)));)++I,e==="\\"&&I<Fn?Le({},Ht,rn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Le({},NC,n),{value:n,literal:t}}function eOe(){var e,t,n,r;return Xe=null,jV(),e=I,t=JMe(),n=QMe(),r=ZMe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:I}}function tOe(e){return e.type===Ul||e.type===bu||e.type===Lx||e.type===Px}function zV(){if(jV(),I>=Fn)return{type:Up,start:I,end:I};const e=te.charCodeAt(I);return Wp(e)?GMe():e===40||e===41||e===59?Dw():e===39||e===34?KMe():e===46?ts(te.charCodeAt(I+1))?EN():Dw():ts(e)?EN():Dw()}function ur(){const e=Xe;return I=e.end,Xe=zV(),I=e.end,e}function UV(){const e=I;Xe=zV(),I=e}function nOe(e){const t=new ji(EMe);return t.elements=e,t}function CN(e,t,n){const r=new ji(e==="||"||e==="&&"?DMe:CMe);return r.operator=e,r.left=t,r.right=n,r}function rOe(e,t){const n=new ji(SMe);return n.callee=e,n.arguments=t,n}function iOe(e,t,n){const r=new ji(FMe);return r.test=e,r.consequent=t,r.alternate=n,r}function E6(e){const t=new ji(LV);return t.name=e,t}function Kh(e){const t=new ji(kMe);return t.value=e.value,t.raw=te.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function SN(e,t,n){const r=new ji(MMe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function oOe(e){const t=new ji(OMe);return t.properties=e,t}function FN(e,t,n){const r=new ji(TMe);return r.key=t,r.value=n,r.kind=e,r}function sOe(e,t){const n=new ji(NMe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Le(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(jx(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=I,n.description=i,n}function Ix(e){e.type===Up&&Le(e,jMe),e.type===xc&&Le(e,RMe),e.type===qp&&Le(e,BMe),e.type===Ul&&Le(e,LMe),e.type===bu&&Le(e,PMe),Le(e,Ht,e.value)}function kn(e){const t=ur();(t.type!==rr||t.value!==e)&&Ix(t)}function st(e){return Xe.type===rr&&Xe.value===e}function Mw(e){return Xe.type===bu&&Xe.value===e}function aOe(){const e=[];for(I=Xe.start,kn("[");!st("]");)st(",")?(ur(),e.push(null)):(e.push(ql()),st("]")||kn(","));return ur(),nOe(e)}function kN(){I=Xe.start;const e=ur();return e.type===qp||e.type===xc?(e.octal&&Le(e,PV),Kh(e)):E6(e.value)}function uOe(){var e,t,n,r;if(I=Xe.start,e=Xe,e.type===Ul)return n=kN(),kn(":"),r=ql(),FN("init",n,r);if(e.type===Up||e.type===rr)Ix(e);else return t=kN(),kn(":"),r=ql(),FN("init",t,r)}function lOe(){var e=[],t,n,r,i={},o=String;for(I=Xe.start,kn("{");!st("}");)t=uOe(),t.key.type===LV?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Le({},IMe):i[r]=!0,e.push(t),st("}")||kn(",");return kn("}"),oOe(e)}function cOe(){kn("(");const e=C6();return kn(")"),e}const fOe={if:1};function dOe(){var e,t,n;if(st("("))return cOe();if(st("["))return aOe();if(st("{"))return lOe();if(e=Xe.type,I=Xe.start,e===Ul||fOe[Xe.value])n=E6(ur().value);else if(e===qp||e===xc)Xe.octal&&Le(Xe,PV),n=Kh(ur());else{if(e===bu)throw new Error(Fg);e===Lx?(t=ur(),t.value=t.value==="true",n=Kh(t)):e===Px?(t=ur(),t.value=null,n=Kh(t)):st("/")||st("/=")?(n=Kh(eOe()),UV()):Ix(ur())}return n}function hOe(){const e=[];if(kn("("),!st(")"))for(;I<Fn&&(e.push(ql()),!st(")"));)kn(",");return kn(")"),e}function gOe(){I=Xe.start;const e=ur();return tOe(e)||Ix(e),E6(e.value)}function pOe(){return kn("."),gOe()}function mOe(){kn("[");const e=C6();return kn("]"),e}function yOe(){var e,t,n;for(e=dOe();;)if(st("."))n=pOe(),e=SN(".",e,n);else if(st("("))t=hOe(),e=rOe(e,t);else if(st("["))n=mOe(),e=SN("[",e,n);else break;return e}function DN(){const e=yOe();if(Xe.type===rr&&(st("++")||st("--")))throw new Error(Fg);return e}function Km(){var e,t;if(Xe.type!==rr&&Xe.type!==bu)t=DN();else{if(st("++")||st("--"))throw new Error(Fg);if(st("+")||st("-")||st("~")||st("!"))e=ur(),t=Km(),t=sOe(e.value,t);else{if(Mw("delete")||Mw("void")||Mw("typeof"))throw new Error(Fg);t=DN()}}return t}function MN(e){let t=0;if(e.type!==rr&&e.type!==bu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function bOe(){var e,t,n,r,i,o,s,a,u,l;if(e=Xe,u=Km(),r=Xe,i=MN(r),i===0)return u;for(r.prec=i,ur(),t=[e,Xe],s=Km(),o=[u,r,s];(i=MN(Xe))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),t.pop(),n=CN(a,u,s),o.push(n);r=ur(),r.prec=i,o.push(r),t.push(Xe),n=Km(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=CN(o[l-1].value,o[l-2],n),l-=2;return n}function ql(){var e,t,n;return e=bOe(),st("?")&&(ur(),t=ql(),kn(":"),n=ql(),e=iOe(e,t,n)),e}function C6(){const e=ql();if(st(","))throw new Error(Fg);return e}function vOe(e){te=e,I=0,Fn=te.length,Xe=null,UV();const t=C6();if(Xe.type!==Up)throw new Error("Unexpect token after expression.");return t}var xOe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function _Oe(e){function t(s,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,u){return l=>t(s,l,a,u)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&q("Missing arguments to clamp function."),s.length>3&&q("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&q("Missing arguments to if function."),s.length>3&&q("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function $Oe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function wOe(e){e=e||{};const t=e.allowed?Es(e.allowed):{},n=e.forbidden?Es(e.forbidden):{},r=e.constants||xOe,i=(e.functions||_Oe)(f),o=e.globalvar,s=e.fieldvar,a=Ge(o)?o:g=>"".concat(o,'["').concat(g,'"]');let u={},l={},c=0;function f(g){if(ut(g))return g;const p=d[g.type];return p==null&&q("Unsupported type: "+g.type),p(g)}const d={Literal:g=>g.raw,Identifier:g=>{const p=g.name;return c>0?p:ve(n,p)?q("Illegal identifier: "+p):ve(r,p)?r[p]:ve(t,p)?p:(u[p]=1,a(p))},MemberExpression:g=>{const p=!g.computed,m=f(g.object);p&&(c+=1);const y=f(g.property);return m===s&&(l[$Oe(y)]=1),p&&(c-=1),m+(p?"."+y:"["+y+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&q("Illegal callee type: "+g.callee.type);const p=g.callee.name,m=g.arguments,y=ve(i,p)&&i[p];return y||q("Unrecognized function: "+p),Ge(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(f).join(",")+"]",BinaryExpression:g=>"("+f(g.left)+" "+g.operator+" "+f(g.right)+")",UnaryExpression:g=>"("+g.operator+f(g.argument)+")",ConditionalExpression:g=>"("+f(g.test)+"?"+f(g.consequent)+":"+f(g.alternate)+")",LogicalExpression:g=>"("+f(g.left)+g.operator+f(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(f).join(",")+"}",Property:g=>{c+=1;const p=f(g.key);return c-=1,p+":"+f(g.value)}};function h(g){const p={code:f(g),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},p}return h.functions=i,h.constants=r,h}const AOe="view",Xb="[",Kb="]",qV="{",WV="}",EOe=":",HV=",",COe="@",SOe=">",FOe=/[[\]{}]/,kOe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let YV,GV;function _c(e,t,n){return YV=t||AOe,GV=n||kOe,VV(e.trim()).map(BC)}function DOe(e){return GV[e]}function v0(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function VV(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=v0(e,i,HV,Xb+qV,Kb+WV),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function BC(e){return e[0]==="["?MOe(e):OOe(e)}function MOe(e){const t=e.length;let n=1,r;if(n=v0(e,n,Kb,Xb,Kb),n===t)throw"Empty between selector: "+e;if(r=VV(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==SOe)throw"Expected '>' after between selector: "+e;r=r.map(BC);const i=BC(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function OOe(e){const t={source:YV},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,u,l;if(e[s-1]===WV){if(a=e.lastIndexOf(qV),a>=0){try{r=TOe(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===COe&&(i=++a),u=v0(e,a,EOe),u<s&&(n.push(e.substring(o,u).trim()),o=a=++u),a=v0(e,a,Xb),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),l=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=v0(e,a,Kb),a===s)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==Xb)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||FOe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):DOe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function TOe(e){const t=e.split(HV);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}var NOe="vega",ROe="5.20.0",BOe="The Vega visualization grammar.",LOe=["vega","visualization","interaction","dataflow","library","data","d3"],POe="BSD-3-Clause",jOe="UW Interactive Data Lab (http://idl.cs.washington.edu)",IOe="build/vega-node.js",zOe="build/vega.module.js",UOe="build/vega.min.js",qOe="build/vega.min.js",WOe="index.d.ts",HOe="vega/vega",YOe={bundle:"rollup -c --config-bundle",prebuild:"rimraf build && rimraf build-es5",build:"rollup -c --config-core --config-bundle --config-ie",postbuild:"node schema-copy",pretest:"yarn build --config-test",test:"TZ=America/Los_Angeles tape 'test/**/*-test.js'",prepublishOnly:"yarn test && yarn build",postpublish:"./schema-deploy.sh"},GOe={"vega-crossfilter":"~4.0.5","vega-dataflow":"~5.7.3","vega-encode":"~4.8.3","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-force":"~4.0.7","vega-format":"~1.0.4","vega-functions":"~5.12.0","vega-geo":"~4.3.8","vega-hierarchy":"~4.0.9","vega-label":"~1.0.0","vega-loader":"~4.4.0","vega-parser":"~6.1.3","vega-projection":"~1.4.5","vega-regression":"~1.0.9","vega-runtime":"~6.1.3","vega-scale":"~7.1.1","vega-scenegraph":"~4.9.4","vega-statistics":"~1.7.9","vega-time":"~2.0.4","vega-transforms":"~4.9.3","vega-typings":"~0.20.0","vega-util":"~1.16.1","vega-view":"~5.10.0","vega-view-transforms":"~4.5.8","vega-voronoi":"~4.1.5","vega-wordcloud":"~4.1.3"},VOe={"vega-schema":"*"},XOe="f262105e75449760b0f35fda70e6b576a31d68a4",KOe={name:NOe,version:ROe,description:BOe,keywords:LOe,license:POe,author:jOe,main:IOe,module:zOe,unpkg:UOe,jsdelivr:qOe,types:WOe,repository:HOe,scripts:YOe,dependencies:GOe,devDependencies:VOe,gitHead:XOe};De(mf,Tae,$ge,wme,ube,nve,mwe,o2e,bwe,Rwe,GEe,eCe);const ZOe=KOe.version,JOe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Gn,CanvasHandler:Dp,CanvasRenderer:Tb,DATE:pr,DAY:bn,DAYOFYEAR:po,Dataflow:rf,Debug:rL,Error:eL,EventStream:Vv,Gradient:AH,GroupItem:Ok,HOURS:Or,Handler:Ja,Info:nL,Item:Mk,MILLISECONDS:Di,MINUTES:Tr,MONTH:En,Marks:Qr,MultiPulse:rS,None:QB,Operator:et,Parameters:Gv,Pulse:$a,QUARTER:gr,RenderType:ma,Renderer:Mo,ResourceLoader:Tk,SECONDS:Zr,SVGHandler:Kk,SVGRenderer:nD,SVGStringRenderer:rD,Scenegraph:Vk,TIME_UNITS:kS,Transform:L,View:eV,WEEK:Dt,Warn:tL,YEAR:sn,accessor:ri,accessorFields:wn,accessorName:vt,array:be,ascending:Lv,bandwidthNRD:aS,bin:vP,bootstrapCI:xP,boundClip:U$e,boundContext:Cp,boundItem:eC,boundMark:qH,boundStroke:dc,changeset:nc,clampRange:Ene,codegenExpression:wOe,compare:fL,constant:Kr,cumulativeLogNormal:hS,cumulativeNormal:Kv,cumulativeUniform:yS,dayofyear:UP,debounce:dL,defaultLocale:yH,definition:uP,densityLogNormal:dS,densityNormal:uS,densityUniform:mS,domChild:sr,domClear:xi,domCreate:ga,domFind:Xk,dotbin:_P,error:q,expressionFunction:St,extend:De,extent:Oa,extentIndex:hL,falsy:Ks,fastmap:ad,field:Da,flush:Mne,font:tx,fontFamily:kp,fontSize:Do,format:Nm,formatLocale:Ab,formats:Ek,hasOwnProperty:ve,id:mne,identity:Xr,inferType:vH,inferTypes:xH,ingest:Ue,inherits:X,inrange:One,interpolate:N5,interpolateColors:U2,interpolateRange:sq,intersect:gY,intersectBoxLine:Jc,intersectPath:Nk,intersectPoint:Rk,intersectRule:OH,isArray:$e,isBoolean:gL,isDate:Pv,isFunction:Ge,isIterable:pL,isNumber:El,isObject:ke,isRegExp:Tne,isString:ut,isTuple:Hv,key:mL,lerp:Nne,lineHeight:Ka,loader:Ck,locale:mH,logger:yne,lruCache:yL,markup:tD,merge:bL,mergeConfig:Tv,multiLineOffset:Q_e,one:od,pad:Bne,panLinear:vne,panLog:xne,panPow:_ne,panSymlog:$ne,parse:cMe,parseExpression:vOe,parseSelector:_c,pathCurves:Fk,pathEqual:bY,pathParse:jf,pathRectangle:SH,pathRender:fg,pathSymbols:CH,pathTrail:FH,peek:Ze,point:rx,projection:V5,quantileLogNormal:gS,quantileNormal:Zv,quantileUniform:bS,quantiles:oS,quantizeInterpolator:aq,quarter:wne,quartiles:sS,get random(){return ki},randomInteger:dse,randomKDE:cS,randomLCG:fse,randomLogNormal:wP,randomMixture:AP,randomNormal:lS,randomUniform:EP,read:yxe,regressionExp:SP,regressionLinear:vS,regressionLoess:DP,regressionLog:CP,regressionPoly:kP,regressionPow:FP,regressionQuad:xS,renderModule:ix,repeat:Sh,resetDefaultLocale:Z2e,resetSVGClipId:DH,resetSVGDefIds:H$e,responseType:mxe,runtimeContext:zG,sampleCurve:Qv,sampleLogNormal:fS,sampleNormal:Xv,sampleUniform:pS,scale:qe,sceneEqual:iD,sceneFromJSON:HH,scenePickVisit:Sb,sceneToJSON:WH,sceneVisit:Mi,sceneZOrder:Bk,scheme:R5,serializeXML:sY,setRandom:lse,span:jv,splitAccessPath:Ov,stringValue:he,textMetrics:lo,timeBin:oj,timeFloor:XP,timeFormatLocale:cg,timeInterval:gd,timeOffset:JP,timeSequence:tj,timeUnitSpecifier:zP,timeUnits:DS,toBoolean:vL,toDate:xL,toNumber:Ma,toSet:Es,toString:_L,transform:lP,transforms:mf,truncate:Pne,truthy:sd,tupleid:ie,typeParsers:VE,utcFloor:KP,utcInterval:pd,utcOffset:QP,utcSequence:nj,utcdayofyear:HP,utcquarter:Ane,utcweek:YP,version:ZOe,visitArray:jne,week:qP,writeConfig:Nv,zero:ia,zoomLinear:uL,zoomLog:lL,zoomPow:cA,zoomSymlog:cL},Symbol.toStringTag,{value:"Module"})),QOe="vega-lite",e4e='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',t4e="4.13.1",n4e=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],r4e="https://vega.github.io/vega-lite/",i4e="Vega-Lite is a concise high-level language for interactive visualization.",o4e="build/vega-lite.js",s4e="build/vega-lite.min.js",a4e="build/vega-lite.min.js",u4e="build/src/index",l4e="build/src/index.d.ts",c4e={vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},f4e={test:"test"},d4e={changelog:"conventional-changelog -p angular -r 2",build:"yarn build:only","build:only":"yarn tsc:src && rollup -c",postbuild:"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"find build ! -name 'vega-lite-schema.json' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",test:"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup 'yarn tsc:src -w' 'rollup -c -w'","watch:site":"concurrently --kill-others -n Typescript,Rollup 'yarn tsc:site -w' 'rollup -c site/rollup.config.js -w'","watch:test":"jest --watch"},h4e={type:"git",url:"https://github.com/vega/vega-lite.git"},g4e="BSD-3-Clause",p4e={url:"https://github.com/vega/vega-lite/issues"},m4e={"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2",ajv:"^6.12.2",chai:"^4.2.0",cheerio:"^1.0.0-rc.3",codecov:"^3.7.0",concurrently:"^5.2.0","conventional-changelog-cli":"^2.0.34",d3:"^5.16.0",eslint:"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3",jest:"^26.0.1","jest-puppeteer":"^4.4.0",mkdirp:"^1.0.4",prettier:"^2.0.5",puppeteer:"^3.1.0",rollup:"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7",terser:"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1",typescript:"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},y4e={"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0",tslib:"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0",yargs:"~15.3.1"},b4e={vega:"^5.12.1"},v4e={preset:"jest-puppeteer",transform:{"^.+\\.tsx?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.(jsx?|tsx?)$",moduleFileExtensions:["ts","tsx","js","jsx","json","node"],testPathIgnorePatterns:["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],coverageDirectory:"./coverage/",collectCoverage:!1},x4e={name:QOe,author:e4e,version:t4e,collaborators:n4e,homepage:r4e,description:i4e,main:o4e,unpkg:s4e,jsdelivr:a4e,module:u4e,types:l4e,bin:c4e,directories:f4e,scripts:d4e,repository:h4e,license:g4e,bugs:p4e,devDependencies:m4e,dependencies:y4e,peerDependencies:b4e,jest:v4e};function Od(e,t,n){return e.fields=t||[],e.fname=n,e}function _4e(e){return e.length===1?$4e(e[0]):w4e(e)}const $4e=e=>function(t){return t[e]},w4e=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ow(e){throw Error(e)}function $c(e){var t=[],n=null,r=0,i=e.length,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<i;++a)if(u=e[a],u==="\\")o+=e.substring(s,a),o+=e.substring(++a,++a),s=a;else if(u===n)l(),n=null,r=-1;else{if(n)continue;s===r&&u==='"'||s===r&&u==="'"?(s=a+1,n=u):u==="."&&!r?a>s?l():s=a+1:u==="["?(a>s&&l(),r=s=a+1):u==="]"&&(r||Ow("Access path missing open bracket: "+e),r>0&&l(),r=0,s=a+1)}return r&&Ow("Access path missing closing bracket: "+e),n&&Ow("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function A4e(e,t,n){const r=$c(e);return e=r.length===1?r[0]:e,Od((n&&n.get||_4e)(r),[e],t||e)}var Hp=[];A4e("id");var E4e=Od(function(e){return e},Hp,"identity");Od(function(){return 0},Hp,"zero");Od(function(){return 1},Hp,"one");Od(function(){return!0},Hp,"true");Od(function(){return!1},Hp,"false");function sm(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var C4e=0,S4e=1,XV=2,F4e=3,k4e=4;function D4e(e,t){var n=e||C4e;return{level:function(r){return arguments.length?(n=+r,this):n},error:function(){return n>=S4e&&sm(t||"error","ERROR",arguments),this},warn:function(){return n>=XV&&sm(t||"warn","WARN",arguments),this},info:function(){return n>=F4e&&sm(t||"log","INFO",arguments),this},debug:function(){return n>=k4e&&sm(t||"log","DEBUG",arguments),this}}}const ue=Array.isArray;function Yt(e){return e===Object(e)}const ON=e=>e!=="__proto__";function KV(...e){return e.reduce((t,n)=>{for(var r in n)if(r==="signals")t.signals=M4e(t.signals,n.signals);else{var i=r==="legend"?{layout:1}:r==="style"?!0:null;S6(t,r,n[r],i)}return t},{})}function S6(e,t,n,r){if(ON(t)){var i,o;if(Yt(n)&&!ue(n)){o=Yt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?S6(o,i,n[i]):ON(i)&&(o[i]=n[i])}else e[t]=n}}function M4e(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function $t(e){return e!=null?ue(e)?e:[e]:[]}function O4e(e){return typeof e=="function"}const T4e=Object.prototype.hasOwnProperty;function ll(e,t){return T4e.call(e,t)}function Yp(e){return typeof e=="boolean"}function Et(e){return typeof e=="number"}function Ce(e){return typeof e=="string"}function Te(e){return ue(e)?"["+e.map(Te)+"]":Yt(e)||Ce(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function wc(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function oe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var ZV={exports:{}};(function(e){var t=function(){function n(d,h){return h!=null&&d instanceof h}var r;try{r=Map}catch{r=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function s(d,h,g,p,m){typeof h=="object"&&(g=h.depth,p=h.prototype,m=h.includeNonEnumerable,h=h.circular);var y=[],b=[],x=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof g>"u"&&(g=1/0);function v(_,w){if(_===null)return null;if(w===0)return _;var $,A;if(typeof _!="object")return _;if(n(_,r))$=new r;else if(n(_,i))$=new i;else if(n(_,o))$=new o(function(R,B){_.then(function(P){R(v(P,w-1))},function(P){B(v(P,w-1))})});else if(s.__isArray(_))$=[];else if(s.__isRegExp(_))$=new RegExp(_.source,f(_)),_.lastIndex&&($.lastIndex=_.lastIndex);else if(s.__isDate(_))$=new Date(_.getTime());else{if(x&&Buffer.isBuffer(_))return Buffer.allocUnsafe?$=Buffer.allocUnsafe(_.length):$=new Buffer(_.length),_.copy($),$;n(_,Error)?$=Object.create(_):typeof p>"u"?(A=Object.getPrototypeOf(_),$=Object.create(A)):($=Object.create(p),A=p)}if(h){var M=y.indexOf(_);if(M!=-1)return b[M];y.push(_),b.push($)}n(_,r)&&_.forEach(function(R,B){var P=v(B,w-1),Z=v(R,w-1);$.set(P,Z)}),n(_,i)&&_.forEach(function(R){var B=v(R,w-1);$.add(B)});for(var k in _){var C;A&&(C=Object.getOwnPropertyDescriptor(A,k)),!(C&&C.set==null)&&($[k]=v(_[k],w-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(_),k=0;k<N.length;k++){var E=N[k],D=Object.getOwnPropertyDescriptor(_,E);D&&!D.enumerable&&!m||($[E]=v(_[E],w-1),D.enumerable||Object.defineProperty($,E,{enumerable:!1}))}if(m)for(var F=Object.getOwnPropertyNames(_),k=0;k<F.length;k++){var O=F[k],D=Object.getOwnPropertyDescriptor(_,O);D&&D.enumerable||($[O]=v(_[O],w-1),Object.defineProperty($,O,{enumerable:!1}))}return $}return v(d,g)}s.clonePrototype=function(h){if(h===null)return null;var g=function(){};return g.prototype=h,new g};function a(d){return Object.prototype.toString.call(d)}s.__objToStr=a;function u(d){return typeof d=="object"&&a(d)==="[object Date]"}s.__isDate=u;function l(d){return typeof d=="object"&&a(d)==="[object Array]"}s.__isArray=l;function c(d){return typeof d=="object"&&a(d)==="[object RegExp]"}s.__isRegExp=c;function f(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return s.__getRegExpFlags=f,s}();e.exports&&(e.exports=t)})(ZV);var N4e=ZV.exports;const R4e=Vg(N4e);var B4e=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const L4e=Vg(B4e);var P4e=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(o){return function(s){return function(a,u){var l={key:a,value:s[a]},c={key:u,value:s[u]};return o(l,c)}}}(t.cmp),i=[];return function o(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var a,u;if(Array.isArray(s)){for(u="[",a=0;a<s.length;a++)a&&(u+=","),u+=o(s[a])||"null";return u+"]"}if(s===null)return"null";if(i.indexOf(s)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(s)-1,c=Object.keys(s).sort(r&&r(s));for(u="",a=0;a<c.length;a++){var f=c[a],d=o(s[f]);d&&(u&&(u+=","),u+=JSON.stringify(f)+":"+d)}return i.splice(l,1),"{"+u+"}"}}(e)};const Dg=Vg(P4e);function F6(e){return!!e.or}function k6(e){return!!e.and}function D6(e){return!!e.not}function Zm(e,t){if(D6(e))Zm(e.not,t);else if(k6(e))for(const n of e.and)Zm(n,t);else if(F6(e))for(const n of e.or)Zm(n,t);else t(e)}function Jm(e,t){return D6(e)?{not:Jm(e.not,t)}:k6(e)?{and:e.and.map(n=>Jm(n,t))}:F6(e)?{or:e.or.map(n=>Jm(n,t))}:t(e)}const Gp=L4e,Se=R4e;function Mg(e,t){const n={};for(const r of t)ll(e,r)&&(n[r]=e[r]);return n}function xs(e,t){const n=Object.assign({},e);for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Dg(e)).join(",")})`};const ct=Dg;function Re(e){if(Et(e))return e;const t=Ce(e)?e:Dg(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function TN(e){return e===!1||e===null}function ce(e,t){return e.indexOf(t)>-1}function Og(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function JV(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function j4e(e,...t){for(const n of t)I4e(e,n??{});return e}function I4e(e,t){for(const n of G(t))S6(e,n,t[n],!0)}function va(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function z4e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function QV(e,t){for(const n of e)if(t.has(n))return!0;return!1}function NN(e){const t=new Set;for(const n of e){const i=$c(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function eX(e,t){return e===void 0||t===void 0?!0:QV(NN(e),NN(t))}function tt(e){return G(e).length===0}const G=Object.keys,Fa=Object.values;function tX(e){const t=[];for(const n in e)ll(e,n)&&t.push({key:n,value:e[n]});return t}function Zb(e){return e===!0||e===!1}function ft(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function x0(e,t){return D6(e)?"!("+x0(e.not,t)+")":k6(e)?"("+e.and.map(n=>x0(n,t)).join(") && (")+")":F6(e)?"("+e.or.map(n=>x0(n,t)).join(") || (")+")":t(e)}function LC(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&LC(e[n],t)&&delete e[n],tt(e)}function zx(e){return e.charAt(0).toUpperCase()+e.substr(1)}function nX(e,t="datum"){const n=$c(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(Te).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function U4e(e,t="datum"){return`${t}[${Te($c(e).join("."))}]`}function q4e(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function tu(e){return`${$c(e).map(q4e).join("\\.")}`}function Gf(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function rX(e){return`${$c(e).join(".")}`}function Tg(e){return e?$c(e).length:0}function Ct(...e){for(const t of e)if(t!==void 0)return t}let W4e=42;function H4e(e){const t=++W4e;return e?String(e)+t:t}function Y4e(e){return G4e(e)?e:`__${e}`}function G4e(e){return e.indexOf("__")===0}function Jb(e){if(e!==void 0)return(e%360+360)%360}function M6(e){return Et(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const RN={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};function O6(e){return e&&e.condition}const iX=["domain","grid","labels","ticks","title"],V4e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},oX={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},X4e=Object.assign(Object.assign({},oX),{style:1,labelExpr:1,encoding:1});function BN(e){return!!X4e[e]}const Jn={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},sX=Jn.arc,Ux=Jn.area,qx=Jn.bar,K4e=Jn.image,Wx=Jn.line,Hx=Jn.point,Z4e=Jn.rect,Qb=Jn.rule,aX=Jn.text,T6=Jn.tick,J4e=Jn.trail,N6=Jn.circle,R6=Jn.square,uX=Jn.geoshape;function Ac(e){return ce(["line","area","trail"],e)}function LN(e){return ce(["rect","bar","image","arc"],e)}const lX=G(Jn);function _o(e){return e.type}wc(lX);const Q4e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],e8e=["fill","fillOpacity"],t8e=[...Q4e,...e8e],n8e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1},PN=G(n8e),r8e={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},i8e={color:"#4c78a8",invalid:"filter",timeUnitBand:1},o8e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},cX=5,s8e={binSpacing:1,continuousBandSize:cX,timeUnitBandPosition:.5},a8e={binSpacing:0,continuousBandSize:cX,timeUnitBandPosition:.5},u8e={thickness:1};function l8e(e){return _o(e)?e.type:e}function Ps(e){return"mark"in e}class Yx{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Ps(t)?l8e(t.mark)===this.name:!1}}const c8e={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},f8e={count:1,min:1,max:1};function nu(e){return!!e&&!!e.argmin}function Ec(e){return!!e&&!!e.argmax}function B6(e){return Ce(e)&&!!c8e[e]}const d8e=["count","valid","missing","distinct"];function fX(e){return Ce(e)&&ce(d8e,e)}function h8e(e){return Ce(e)&&ce(["min","max"],e)}const g8e=["count","sum","distinct","valid","missing"],p8e=["mean","average","median","q1","q3","min","max"],m8e=wc(p8e),_s="row",$s="column",Gx="facet",gt="x",Tt="y",Ii="x2",Lo="y2",Po="radius",js="radius2",zi="theta",Is="theta2",jo="latitude",Io="longitude",Ui="latitude2",ei="longitude2",br="color",zo="fill",Uo="stroke",vr="shape",zs="size",Cc="angle",Us="opacity",vu="fillOpacity",xu="strokeOpacity",_u="strokeWidth",$u="strokeDash",Vp="text",Xp="order",Kp="detail",Vx="key",Wl="tooltip",Xx="href",Kx="url",Zx="description",y8e={x:1,y:1,x2:1,y2:1},dX={theta:1,theta2:1,radius:1,radius2:1};function hX(e){return e in dX}const L6={longitude:1,longitude2:1,latitude:1,latitude2:1};function b8e(e){switch(e){case jo:return"y";case Ui:return"y2";case Io:return"x";case ei:return"x2"}}function v8e(e){return e in L6}const x8e=G(L6),gX=Object.assign(Object.assign(Object.assign(Object.assign({},y8e),dX),L6),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function cf(e){return e===br||e===zo||e===Uo}const pX={row:1,column:1,facet:1},Yr=G(pX),P6=Object.assign(Object.assign({},gX),pX),mX=G(P6),_8e=oe(P6,["order","detail","tooltip"]),$8e=oe(_8e,["row","column","facet"]);function w8e(e){return!!$8e[e]}function yX(e){return!!P6[e]}const A8e=[Ii,Lo,Ui,ei,Is,js];function bX(e){return Sc(e)!==e}function Sc(e){switch(e){case Ii:return gt;case Lo:return Tt;case Ui:return jo;case ei:return Io;case Is:return zi;case js:return Po}return e}function ru(e){if(hX(e))switch(e){case zi:return"startAngle";case Is:return"endAngle";case Po:return"outerRadius";case js:return"innerRadius"}return e}function qo(e){switch(e){case gt:return Ii;case Tt:return Lo;case jo:return Ui;case Io:return ei;case zi:return Is;case Po:return js}}function Wo(e){switch(e){case gt:case Ii:return"width";case Tt:case Lo:return"height"}}function E8e(e){switch(e){case gt:return"xOffset";case Tt:return"yOffset";case Ii:return"x2Offset";case Lo:return"y2Offset";case zi:return"thetaOffset";case Po:return"radiusOffset";case Is:return"theta2Offset";case js:return"radius2Offset"}}const j6=oe(gX,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),C8e=G(j6),wu={x:1,y:1},ti=G(wu);function $o(e){return e in wu}const I6={theta:1,radius:1},S8e=G(I6);function Jx(e){return e==="width"?gt:Tt}const vX=oe(j6,["text","tooltip","href","url","description","detail","key","order"]),F8e=G(vX);function k8e(e){return!!j6[e]}function D8e(e){switch(e){case br:case zo:case Uo:case zs:case vr:case Us:case _u:case $u:return!0;case vu:case xu:case Cc:return!1}}const xX=Object.assign(Object.assign(Object.assign({},wu),I6),vX),Qx=G(xX);function Au(e){return!!xX[e]}function M8e(e,t){return T8e(e)[t]}const _X={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},O8e=oe(_X,["geoshape"]);function T8e(e){switch(e){case br:case zo:case Uo:case Zx:case Kp:case Vx:case Wl:case Xx:case Xp:case Us:case vu:case xu:case _u:case Gx:case _s:case $s:return _X;case gt:case Tt:case jo:case Io:return O8e;case Ii:case Lo:case Ui:case ei:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case zs:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case $u:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case vr:return{point:"always",geoshape:"always"};case Vp:return{text:"always"};case Cc:return{point:"always",square:"always",text:"always"};case Kx:return{image:"always"};case zi:return{text:"always",arc:"always"};case Po:return{text:"always",arc:"always"};case Is:case js:return{arc:"always"}}}function Qm(e){switch(e){case gt:case Tt:case zi:case Po:case zs:case Cc:case _u:case Us:case vu:case xu:case Ii:case Lo:case Is:case js:return;case Gx:case _s:case $s:case vr:case $u:case Vp:case Wl:case Xx:case Kx:case Zx:return"discrete";case br:case zo:case Uo:return"flexible";case jo:case Io:case Ui:case ei:case Kp:case Vx:case Xp:return}}function $X(e){return Yp(e)&&(e=s_(e,void 0)),"bin"+G(e).map(t=>e_(e[t])?ft(`_${t}_${Object.entries(e[t])}`):ft(`_${t}_${e[t]}`)).join("")}function rt(e){return e===!0||Zp(e)&&!e.binned}function In(e){return e==="binned"||Zp(e)&&e.binned===!0}function Zp(e){return Yt(e)}function e_(e){return e==null?void 0:e.selection}function jN(e){switch(e){case _s:case $s:case zs:case br:case zo:case Uo:case _u:case Us:case vu:case xu:case vr:return 6;case $u:return 4;default:return 10}}function z6(e){return`Invalid specification ${JSON.stringify(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const N8e='Autosize "fit" only works for single views and layered views.';function IN(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function zN(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function UN(e){return e?`Dropping "fit-${e}" because spec has discrete ${Wo(e)}.`:'Dropping "fit" because spec has discrete size.'}function qN(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function R8e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function B8e(e){return`The "nearest" transform is not supported for ${e} marks.`}function wX(e){return`Selection not supported for ${e} yet.`}function L8e(e){return`Cannot find a selection named "${e}".`}const P8e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",j8e="Legend bindings are only supported for selections over an individual field or encoding channel.";function I8e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}function z8e(e){return`Unknown repeated value "${e}".`}function WN(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const U8e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function q8e(e){return`Unrecognized parse "${e}".`}function HN(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function W8e(e){return`Ignoring an invalid transform: ${ct(e)}.`}const H8e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function YN(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Y8e(e){return`Layer's shared ${e.join(",")} channel ${e.length===1?"is":"are"} overriden.`}function G8e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ct(t)} is overridden by a child projection ${ct(n)}.`}const V8e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function X8e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ct(n)}}.`}function AX(e){return`Invalid field type "${e}".`}function K8e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Z8e(e){return`Invalid aggregation operator "${e}".`}function J8e(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function EX(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function PC(e,t){return`Dropping ${ct(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Q8e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function t_(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function e7e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function t7e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function n7e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function Tw(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function r7e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function i7e(e,t){return`Specified orient "${e}" overridden with "${t}".`}const o7e=`Scale's "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.`;function s7e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function a7e(e){return`Using unaggregated domain with raw field has no effect (${ct(e)}).`}function u7e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function l7e(e){return`Unaggregated domain is currently unsupported for log scale (${ct(e)}).`}function c7e(e){return`Cannot apply size to non-oriented mark "${e}".`}function f7e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function d7e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function CX(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function SX(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function h7e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ct(n)} and ${ct(r)}). Using ${ct(n)}.`}function g7e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ct(n)} and ${ct(r)}). Using the union of the two domains.`}function p7e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function m7e(e){return`Dropping sort property ${ct(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const GN="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",y7e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",b7e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",v7e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function x7e(e){return`Cannot stack "${e}" if there is already "${e}2".`}function _7e(e){return`Cannot stack non-linear scale (${e}).`}function $7e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function ev(e,t){return`Invalid ${e}: ${ct(t)}.`}function w7e(e){return`Dropping day from datetime ${ct(e)} as day cannot be combined with other units.`}function A7e(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function E7e(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function C7e(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function S7e(e,t){return`Center is not needed to be specified in ${t} when extent is ${e}.`}function VN(e){return`1D error band does not support ${e}.`}function FX(e){return`Channel ${e} is required for "binned" bin.`}function F7e(e){return`Domain for ${e} is required for threshold scale.`}const kX=D4e(XV);let Vf=kX;function k7e(e){return Vf=e,Vf}function D7e(){return Vf=kX,Vf}function H(...e){Vf.warn(...e)}function M7e(...e){Vf.debug(...e)}function Td(e){if(e&&Yt(e)){for(const t of q6)if(t in e)return!0}return!1}const DX=["january","february","march","april","may","june","july","august","september","october","november","december"],O7e=DX.map(e=>e.substr(0,3)),MX=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],T7e=MX.map(e=>e.substr(0,3));function N7e(e){if(M6(e)&&(e=+e),Et(e))return e>4&&H(ev("quarter",e)),e-1;throw new Error(ev("quarter",e))}function R7e(e){if(M6(e)&&(e=+e),Et(e))return e-1;{const t=e.toLowerCase(),n=DX.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=O7e.indexOf(r);if(i!==-1)return i;throw new Error(ev("month",e))}}function B7e(e){if(M6(e)&&(e=+e),Et(e))return e%7;{const t=e.toLowerCase(),n=MX.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=T7e.indexOf(r);if(i!==-1)return i;throw new Error(ev("day",e))}}function U6(e,t){const n=[];if(t&&e.day!==void 0&&G(e).length>1&&(H(w7e(e)),e=Se(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?R7e(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?N7e(e.quarter):e.quarter;n.push(Et(r)?r*3:r+"*3")}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?B7e(e.day):e.day;n.push(Et(r)?r+1:r+"+1")}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Ng(e){const n=U6(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function L7e(e){const n=U6(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function P7e(e){const t=U6(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const OX={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},q6=G(OX);function j7e(e){return!!OX[e]}function W6(e){return e.startsWith("utc")}function I7e(e){return e.substr(3)}const z7e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function H6(e){const t=[];for(const n of q6)TX(e,n)&&t.push(n);return t}function TX(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function U7e(e,t,{end:n}={end:!1}){const r=nX(t),i=W6(e)?"utc":"";function o(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let s;const a={};for(const u of q6)TX(e,u)&&(a[u]=o(u),s=u);return n&&(a[s]+="+1"),L7e(a)}function NX(e){if(!e)return;const t=H6(e);return`timeUnitSpecifier(${Dg(t)}, ${Dg(z7e)})`}function q7e(e,t,n){if(!e)return;const r=NX(e);return`${n||W6(e)?"utc":"time"}Format(${t}, ${r})`}function Vn(e){if(!e)return;let t;return Ce(e)?t={unit:e}:Yt(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),W6(t.unit)&&(t.utc=!0,t.unit=I7e(t.unit)),t}function W7e(e){const t=Vn(e),{utc:n}=t,r=oe(t,["utc"]);return r.unit?(n?"utc":"")+G(r).map(i=>ft(`${i==="unit"?"":`_${i}_`}${r[i]}`)).join(""):(n?"utc":"")+"timeunit"+G(r).map(i=>ft(`_${i}_${r[i]}`)).join("")}function ge(e){return e&&!!e.signal}function Eu(e){return!!e.step}function H7e(e){return ue(e)?!1:"fields"in e&&!("data"in e)}function Y7e(e){return ue(e)?!1:"fields"in e&&"data"in e}function xa(e){return ue(e)?!1:"field"in e&&"data"in e}const G7e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1},V7e=G(G7e),X7e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Nw=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function K7e(e){return e==null?void 0:e.selection}function Y6(e){return e&&!!e.field&&e.equal!==void 0}function RX(e){return e&&!!e.field&&e.lt!==void 0}function BX(e){return e&&!!e.field&&e.lte!==void 0}function LX(e){return e&&!!e.field&&e.gt!==void 0}function PX(e){return e&&!!e.field&&e.gte!==void 0}function G6(e){if(e&&e.field){if(ue(e.range)&&e.range.length===2)return!0;if(ge(e.range))return!0}return!1}function V6(e){return e&&!!e.field&&(ue(e.oneOf)||ue(e.in))}function Z7e(e){return e&&!!e.field&&e.valid!==void 0}function jX(e){return V6(e)||Y6(e)||G6(e)||RX(e)||LX(e)||BX(e)||PX(e)}function Xi(e,t){return lM(e,{timeUnit:t,wrapTime:!0})}function J7e(e,t){return e.map(n=>Xi(n,t))}function IX(e,t=!0){var n;const{field:r}=e,i=(n=Vn(e.timeUnit))===null||n===void 0?void 0:n.unit,o=i?"time("+U7e(i,r)+")":V(e,{expr:"datum"});if(Y6(e))return o+"==="+Xi(e.equal,i);if(RX(e)){const s=e.lt;return`${o}<${Xi(s,i)}`}else if(LX(e)){const s=e.gt;return`${o}>${Xi(s,i)}`}else if(BX(e)){const s=e.lte;return`${o}<=${Xi(s,i)}`}else if(PX(e)){const s=e.gte;return`${o}>=${Xi(s,i)}`}else{if(V6(e))return`indexof([${J7e(e.oneOf,i).join(",")}], ${o}) !== -1`;if(Z7e(e))return X6(o,e.valid);if(G6(e)){const{range:s}=e,a=ge(s)?{signal:`${s.signal}[0]`}:s[0],u=ge(s)?{signal:`${s.signal}[1]`}:s[1];if(a!==null&&u!==null&&t)return"inrange("+o+", ["+Xi(a,i)+", "+Xi(u,i)+"])";const l=[];return a!==null&&l.push(`${o} >= ${Xi(a,i)}`),u!==null&&l.push(`${o} <= ${Xi(u,i)}`),l.length>0?l.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${JSON.stringify(e)}`)}function X6(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Q7e(e){var t;return jX(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:(t=Vn(e.timeUnit))===null||t===void 0?void 0:t.unit}):e}const Nd={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},Hl=Nd.quantitative,K6=Nd.ordinal,Xf=Nd.temporal,Z6=Nd.nominal,Rd=Nd.geojson,e9e=G(Nd);function t9e(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Hl:return"quantitative";case"t":case Xf:return"temporal";case"o":case K6:return"ordinal";case"n":case Z6:return"nominal";case Rd:return"geojson"}}const At={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},jC={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},n9e=G(jC);function r9e(e,t){const n=jC[e],r=jC[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const i9e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function XN(e){return i9e[e]}const zX=["linear","log","pow","sqrt","symlog","time","utc"],o9e=wc(zX),s9e=["linear","log","pow","sqrt","symlog"],a9e=wc(s9e);function u9e(e){return e in a9e}const l9e=["quantile","quantize","threshold"],c9e=wc(l9e),f9e=zX.concat(["quantile","quantize","threshold","sequential","identity"]),d9e=wc(f9e),h9e=["ordinal","bin-ordinal","point","band"],g9e=wc(h9e);function xr(e){return e in g9e}function ni(e){return e in d9e}function wi(e){return e in o9e}function tv(e){return e in c9e}const p9e={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function m9e(e){return!Ce(e)&&!!e.name}function UX(e){return e==null?void 0:e.selection}function y9e(e){return e&&e.unionWith}const b9e={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},v9e=oe(b9e,["type","domain","range","scheme"]),x9e=G(v9e);_9e();function qX(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!ce(["point","band","identity"],e);case"bins":return!ce(["point","band","identity","ordinal"],e);case"round":return wi(e)||e==="band"||e==="point";case"padding":return wi(e)||ce(["point","band"],e);case"paddingOuter":case"align":return ce(["point","band"],e);case"paddingInner":return e==="band";case"domainMid":case"clamp":return wi(e);case"nice":return wi(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ni(e)&&!ce(["log","time","utc","threshold","quantile"],e)}}function WX(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return cf(e)?void 0:s7e(e);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function HX(e,t){return ce([K6,Z6],t)?e===void 0||xr(e):t===Xf?ce([At.TIME,At.UTC,void 0],e):t===Hl?ce([At.LOG,At.POW,At.SQRT,At.SYMLOG,At.QUANTILE,At.QUANTIZE,At.THRESHOLD,At.LINEAR,void 0],e):!0}function YX(e,t){if(!Au(e))return!1;switch(e){case gt:case Tt:case zi:case Po:return wi(t)||ce(["band","point"],t);case zs:case _u:case Us:case vu:case xu:case Cc:return wi(t)||tv(t)||ce(["band","point","ordinal"],t);case br:case zo:case Uo:return t!=="band";case $u:return t==="ordinal"||tv(t);case vr:return t==="ordinal"}}function _9e(){var e;const t={};for(const n of mX)for(const r of e9e)for(const i of n9e){const o=$9e(n,r);YX(n,i)&&HX(i,r)&&(t[o]=(e=t[o])!==null&&e!==void 0?e:[],t[o].push(i))}return t}function $9e(e,t){return e+"_"+t}function J6(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,s=VX(e);return J(n)&&!fX(n.aggregate)&&i&&wi(i.get("type"))&&i.get("zero")===!1?GX({fieldDef:n,channel:t,markDef:r,ref:s,config:o}):s}function GX({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Ac(n.type)||Ye("invalid",n,i)===null?r:[w9e(e,t),r]}function w9e(e,t){const n=Q6(e,!0),i=Sc(t)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function Q6(e,t=!0){return X6(Ce(e)?e:V(e,{expr:"datum"}),!t)}function A9e(e){const{datum:t}=e;return Td(t)?Ng(t):`${JSON.stringify(t)}`}function xl(e,t,n,r){const i={};if(t&&(i.scale=t),Cu(e)){const{datum:o}=e;Td(o)?i.signal=Ng(o):ge(o)?i.signal=o.signal:i.value=o}else i.field=V(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function nv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,band:o=.5}){const s=0<o&&o<1?"datum":void 0,a=V(t,{expr:s,suffix:i}),u=n!==void 0?V(n,{expr:s}):V(t,{suffix:"end",expr:s}),l={};if(o===0||o===1){l.scale=e;const c=o===0?a:u;l.field=c}else{const c=`${o} * ${a} + ${1-o} * ${u}`;l.signal=`scale("${e}", ${c})`}return r&&(l.offset=r),l}function VX({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l,band:c}){var f;if(t){if(me(t)){if(Br(t)){c=c??Qp({channel:e,fieldDef:t,fieldDef2:n,markDef:r,stack:a,config:i,isMidPoint:!0});const{bin:h,timeUnit:g,type:p}=t;if(rt(h)||c&&g&&p===Xf)return a&&a.impute?xl(t,o,{binSuffix:"mid"},{offset:u}):c?nv({scaleName:o,fieldOrDatumDef:t,band:c,offset:u}):xl(t,o,e1(t,e)?{binSuffix:"range"}:{},{offset:u});if(In(h)){if(J(n))return nv({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,band:c,offset:u});H(FX(e===gt?Ii:Lo))}}const d=s==null?void 0:s.get("type");return xl(t,o,xr(d)?{binSuffix:"range"}:{},{offset:u,band:d==="band"?(f=c??t.band)!==null&&f!==void 0?f:.5:void 0})}else if(Os(t)){const d=t.value,h=u?{offset:u}:{};return Object.assign(Object.assign({},_0(e,d)),h)}}return O4e(l)&&(l=l()),l&&Object.assign(Object.assign({},l),u?{offset:u}:{})}function _0(e,t){return ce(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:ce(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:_t(t)}function Yl(e){return e&&e!=="number"&&e!=="time"}function XX(e,t,n){return`${e}(${t}${n?`, ${JSON.stringify(n)}`:""})`}const E9e="  ";function eM({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var s,a;if(Yl(n))return tM({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const u=KX(e,r,i);if(a_(e)){const l=S9e(u,J(e)?(s=Vn(e.timeUnit))===null||s===void 0?void 0:s.unit:void 0,t,o.timeFormat,sM(e)&&((a=e.scale)===null||a===void 0?void 0:a.type)===At.UTC);return l?{signal:l}:void 0}if(t=QX(na(e),t,o),J(e)&&rt(e.bin)){const l=V(e,{expr:r,binSuffix:"end"});return{signal:n_(u,l,t,n,o)}}else return t||na(e)==="quantitative"?{signal:`${eK(u,t)}`}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function KX(e,t,n){return J(e)?n?`${V(e,{expr:t,suffix:"end"})}-${V(e,{expr:t,suffix:"start"})}`:V(e,{expr:t}):A9e(e)}function tM({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s=s??KX(e,r,i),J(e)&&rt(e.bin)){const a=V(e,{expr:r,binSuffix:"end"});return{signal:n_(s,a,t,n,o)}}return{signal:XX(n,s,t)}}function ZX(e,t,n,r,i,o){var s;if(!Yl(r)){if(a_(e)){const a=J(e)?(s=Vn(e.timeUnit))===null||s===void 0?void 0:s.unit:void 0;return C9e(n,a,i,o)}return QX(t,n,i)}}function JX(e,t,n){if(e&&(ge(e)||e==="number"||e==="time"))return e;if(a_(t)&&n!=="time"&&n!=="utc")return"time"}function QX(e,t,n){if(Ce(t))return t;if(e===Hl)return n.numberFormat}function C9e(e,t,n,r){return e||(t?{signal:NX(t)}:r?void 0:n.timeFormat)}function eK(e,t){return`format(${e}, "${t||""}")`}function KN(e,t,n,r){var i;return Yl(n)?XX(n,e,t):eK(e,(i=Ce(t)?t:void 0)!==null&&i!==void 0?i:r.numberFormat)}function n_(e,t,n,r,i){const o=KN(e,n,r,i),s=KN(t,n,r,i);return`${X6(e,!1)} ? "null" : ${o} + "${E9e}" + ${s}`}function S9e(e,t,n,r,i){return!t||n?(n=Ce(n)?n:r,`${i?"utc":"time"}Format(${e}, '${n}')`):q7e(t,e,i)}const r_="min",F9e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function ZN(e){return e in F9e}function tK(e){return!!e&&!!e.encoding}function co(e){return!!e&&(e.op==="count"||!!e.field)}function nK(e){return!!e&&ue(e)}function Jp(e){return"row"in e||"column"in e}function nM(e){return!!e&&"header"in e}function i_(e){return"facet"in e}function k9e(e){return e.selection}function D9e(e){return e&&!Ce(e)&&"repeat"in e}function JN(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function rK(e){return Br(e)&&"sort"in e}function Qp({channel:e,fieldDef:t,fieldDef2:n,markDef:r,stack:i,config:o,isMidPoint:s}){if(me(t)&&t.band!==void 0)return t.band;if(J(t)){const{timeUnit:a,bin:u}=t;if(a&&!n)return s?Gl("timeUnitBandPosition",r,o):LN(r.type)?Gl("timeUnitBand",r,o):0;if(rt(u))return LN(r.type)&&!s?1:.5}if((i==null?void 0:i.fieldChannel)===e&&s)return .5}function rM(e,t,n,r,i,o){return rt(t.bin)||t.timeUnit&&Br(t)&&t.type==="temporal"?!!Qp({channel:e,fieldDef:t,fieldDef2:n,stack:r,markDef:i,config:o}):!1}function iM(e){return!!e&&"condition"in e}function o_(e){const t=e&&e.condition;return!!t&&!ue(t)&&J(t)}function oM(e){const t=e&&e.condition;return!!t&&!ue(t)&&me(t)}function M9e(e){const t=e&&e.condition;return!!t&&(ue(t)||Os(t))}function J(e){return!!e&&(!!e.field||e.aggregate==="count")}function na(e){return e&&e.type}function Cu(e){return!!e&&"datum"in e}function io(e){return Br(e)&&aK(e)||IC(e)}function IC(e){return Cu(e)&&Et(e.datum)}function me(e){return J(e)||Cu(e)}function Br(e){return!!e&&("field"in e&&"type"in e||e.aggregate==="count")}function Os(e){return e&&"value"in e&&"value"in e}function sM(e){return!!e&&("scale"in e||"sort"in e)}function aM(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function iK(e){return!!e&&"legend"in e}function oK(e){return!!e&&("format"in e||"formatType"in e)}function O9e(e){return"op"in e}function V(e,t={}){var n,r,i;let o=e.field;const s=t.prefix;let a=t.suffix,u="";if(T9e(e))o=Y4e("count");else{let l;if(!t.nofn)if(O9e(e))l=e.op;else{const{bin:c,aggregate:f,timeUnit:d}=e;rt(c)?(l=$X(c),a=((n=t.binSuffix)!==null&&n!==void 0?n:"")+((r=t.suffix)!==null&&r!==void 0?r:"")):f?Ec(f)?(u=`["${o}"]`,o=`argmax_${f.argmax}`):nu(f)?(u=`["${o}"]`,o=`argmin_${f.argmin}`):l=String(f):d&&(l=W7e(d),a=(!ce(["range","mid"],t.binSuffix)&&t.binSuffix||"")+((i=t.suffix)!==null&&i!==void 0?i:""))}l&&(o=o?`${l}_${o}`:l)}return a&&(o=`${o}_${a}`),s&&(o=`${s}_${o}`),t.forAs?rX(o):t.expr?U4e(o,t.expr)+u:tu(o)+u}function sK(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return J(e)&&!!e.bin;case"temporal":return!1}throw new Error(AX(e.type))}function aK(e){return!sK(e)}function T9e(e){return e.aggregate==="count"}function N9e(e,t){var n;const{field:r,bin:i,timeUnit:o,aggregate:s}=e;if(s==="count")return t.countTitle;if(rt(i))return`${r} (binned)`;if(o){const a=(n=Vn(o))===null||n===void 0?void 0:n.unit;if(a)return`${r} (${H6(a).join("-")})`}else if(s)return Ec(s)?`${r} for max ${s.argmax}`:nu(s)?`${r} for min ${s.argmin}`:`${zx(s)} of ${r}`;return r}function R9e(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ec(t))return`${i} for argmax(${t.argmax})`;if(nu(t))return`${i} for argmin(${t.argmin})`;const o=Vn(r),s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||rt(n)&&"bin";return s?s.toUpperCase()+"("+i+")":i}const uK=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return R9e(e);default:return N9e(e,t)}};let lK=uK;function cK(e){lK=e}function B9e(){cK(uK)}function _l(e,t,{allowDisabling:n,includeDefault:r=!0}){var i,o;const a=((i=uM(e))!==null&&i!==void 0?i:{}).title;if(!J(e))return a;const u=e,l=r?fK(u,t):void 0;return n?Ct(a,u.title,l):(o=a??u.title)!==null&&o!==void 0?o:l}function uM(e){if(aM(e)&&e.axis)return e.axis;if(iK(e)&&e.legend)return e.legend;if(nM(e)&&e.header)return e.header}function fK(e,t){return lK(e,t)}function rv(e){var t;if(oK(e)){const{format:n,formatType:r}=e;return{format:n,formatType:r}}else{const n=(t=uM(e))!==null&&t!==void 0?t:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function L9e(e,t){if(e.timeUnit)return"temporal";if(rt(e.bin))return"quantitative";switch(Qm(t)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function wo(e){if(J(e))return e;if(o_(e))return e.condition}function Mt(e){if(me(e))return e;if(oM(e))return e.condition}function zC(e,t,n){if(Ce(e)||Et(e)||Yp(e)){const r=Ce(e)?"string":Et(e)?"number":"boolean";return H(X8e(t,r,e)),{value:e}}return me(e)?iv(e,t,n):oM(e)?Object.assign(Object.assign({},e),{condition:iv(e.condition,t,n)}):e}function iv(e,t,n){if(oK(e)){const{format:r,formatType:i}=e,o=oe(e,["format","formatType"]);if(Yl(i)&&!n.customFormatTypes)return H(YN(t)),iv(o,t,n)}else{const r=aM(e)?"axis":iK(e)?"legend":nM(e)?"header":null;if(r&&e[r]){const i=e[r],{format:o,formatType:s}=i,a=oe(i,["format","formatType"]);if(Yl(s)&&!n.customFormatTypes)return H(YN(t)),iv(Object.assign(Object.assign({},e),{[r]:a}),t,n)}}return J(e)?dK(e,t):P9e(e)}function P9e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Et(n)?"quantitative":Ce(n)?"nominal":Td(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}function dK(e,t){const{aggregate:n,timeUnit:r,bin:i,field:o}=e,s=Object.assign({},e);if(n&&!B6(n)&&!Ec(n)&&!nu(n)&&(H(Z8e(n)),delete s.aggregate),r&&(s.timeUnit=Vn(r)),o&&(s.field=`${o}`),rt(i)&&(s.bin=s_(i,t)),In(i)&&!$o(t)&&H(`Channel ${t} should not be used with "binned" bin.`),Br(s)){const{type:a}=s,u=t9e(a);a!==u&&(s.type=u),a!=="quantitative"&&fX(n)&&(H(K8e(a,n)),s.type="quantitative")}else if(!bX(t)){const a=L9e(s,t);H(J8e(t,a)),s.type=a}if(Br(s)){const{compatible:a,warning:u}=j9e(s,t);a||H(u)}if(rK(s)&&Ce(s.sort)){const{sort:a}=s;if(ZN(a))return Object.assign(Object.assign({},s),{sort:{encoding:a}});const u=a.substr(1);if(a.charAt(0)==="-"&&ZN(u))return Object.assign(Object.assign({},s),{sort:{encoding:u,order:"descending"}})}if(nM(s)){const{header:a}=s,{orient:u}=a,l=oe(a,["orient"]);if(u)return Object.assign(Object.assign({},s),{header:Object.assign(Object.assign({},l),{labelOrient:a.labelOrient||u,titleOrient:a.titleOrient||u})})}return s}function s_(e,t){return Yp(e)?{maxbins:jN(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?Object.assign(Object.assign({},e),{maxbins:jN(t)}):e}const Tu={compatible:!0};function j9e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case _s:case $s:case Gx:return aK(e)?{compatible:!1,warning:t7e(t)}:Tu;case gt:case Tt:case br:case zo:case Uo:case Vp:case Kp:case Vx:case Wl:case Xx:case Kx:case Cc:case zi:case Po:case Zx:return Tu;case Io:case ei:case jo:case Ui:return n!==Hl?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Tu;case Us:case vu:case xu:case _u:case zs:case Is:case js:case Ii:case Lo:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Tu;case $u:return ce(["ordinal","nominal"],e.type)?Tu:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case vr:return ce(["ordinal","nominal","geojson"],e.type)?Tu:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case Xp:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Tu}}function a_(e){const{formatType:t}=rv(e);return t==="time"||!t&&I9e(e)}function I9e(e){return e&&(e.type==="temporal"||J(e)&&!!e.timeUnit)}function lM(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var o;const s=t&&((o=Vn(t))===null||o===void 0?void 0:o.unit);let a=s||n==="temporal",u;return ge(e)?u=e.signal:Td(e)?(a=!0,u=Ng(e)):(Ce(e)||Et(e))&&a&&(u=`datetime(${JSON.stringify(e)})`,j7e(s)&&(Et(e)&&e<1e4||Ce(e)&&isNaN(Date.parse(e)))&&(u=Ng({[s]:e}))),u?r&&a?`time(${u})`:u:i?void 0:JSON.stringify(e)}function hK(e,t){const{type:n}=e;return t.map(r=>{const i=lM(r,{timeUnit:J(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:r})}function e1(e,t){return rt(e.bin)?Au(t)&&ce(["ordinal","nominal"],e.type):(console.warn("Only call this method for binned field defs."),!1)}function gK(e){const{anchor:t,frame:n,offset:r,orient:i,color:o,subtitleColor:s,subtitleFont:a,subtitleFontSize:u,subtitleFontStyle:l,subtitleFontWeight:c,subtitleLineHeight:f,subtitlePadding:d}=e,h=oe(e,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),g=Object.assign(Object.assign({},h),o?{fill:o}:{}),p=Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s?{subtitleColor:s}:{}),a?{subtitleFont:a}:{}),u?{subtitleFontSize:u}:{}),l?{subtitleFontStyle:l}:{}),c?{subtitleFontWeight:c}:{}),f?{subtitleLineHeight:f}:{}),d?{subtitlePadding:d}:{}),y=Mg(g,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:y,nonMark:p,subtitle:m}}function ra(e){return Ce(e)||ue(e)&&Ce(e[0])}function _t(e){return ge(e)?e:e!==void 0?{value:e}:void 0}function QN(e){return ge(e)?e.signal:Te(e.value)}function Rg(e){return ge(e)?e.signal:e==null?null:Te(e)}function z9e(e,t,n){for(const r of n){const i=Gl(r,t.markDef,t.config);i!==void 0&&(e[r]=_t(i))}return e}function pK(e){var t;return[].concat(e.type,(t=e.style)!==null&&t!==void 0?t:[])}function Ye(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Gl(e,t,n,r)}function Gl(e,t,n,{vgChannel:r}={}){return Ct(r?ov(e,t,n.style):void 0,ov(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function ov(e,t,n){return mK(e,pK(t),n)}function mK(e,t,n){t=$t(t);let r;for(const i of t){const o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function yK(e,t){return $t(e).reduce((n,r)=>{var i;return n.field.push(V(r,t)),n.order.push((i=r.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function bK(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Gp(i,r))return;n.push(r)}),n}function vK(e,t){return Gp(e,t)||!t?e:e?[...$t(e),...$t(t)].join(", "):t}function xK(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ra(n)||ge(n))&&(ra(r)||ge(r)))return{explicit:e.explicit,value:vK(n,r)};if(ra(n)||ge(n))return{explicit:e.explicit,value:n};if(ra(r)||ge(r))return{explicit:e.explicit,value:r};if(!ra(n)&&!ge(n)&&!ra(r)&&!ge(r))return{explicit:e.explicit,value:bK(n,r)};throw new Error("It should never reach here")}function $l(e,t){const n=e&&e[t];return n?ue(n)?Og(n,r=>!!r.field):J(n)||o_(n):!1}function cM(e){return Og(mX,t=>{if($l(e,t)){const n=e[t];if(ue(n))return Og(n,r=>!!r.aggregate);{const r=wo(n);return r&&!!r.aggregate}}return!1})}function fM(e,t){const n=[],r=[],i=[],o=[],s={};return dM(e,(a,u)=>{if(J(a)){const{field:l,aggregate:c,bin:f,timeUnit:d}=a,h=oe(a,["field","aggregate","bin","timeUnit"]);if(c||d||f){const g=uM(a),p=g&&g.title;let m=V(a,{forAs:!0});const y=Object.assign(Object.assign(Object.assign({},p?[]:{title:_l(a,t,{allowDisabling:!0})}),h),{field:m});if(c){let b;if(Ec(c)?(b="argmax",m=V({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${l}`):nu(c)?(b="argmin",m=V({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const x={op:b,as:m};l&&(x.field=l),o.push(x)}}else if(n.push(m),Br(a)&&rt(f)){if(r.push({bin:f,field:l,as:m}),n.push(V(a,{binSuffix:"end"})),e1(a,u)&&n.push(V(a,{binSuffix:"range"})),$o(u)){const b={field:m+"_end"};s[u+"2"]=b}y.bin="binned",bX(u)||(y.type=Hl)}else if(d){i.push({timeUnit:d,field:l,as:m});const b=Br(a)&&a.type!==Xf&&"time";b&&(u===Vp||u===Wl?y.formatType=b:k8e(u)?y.legend=Object.assign({formatType:b},y.legend):$o(u)&&(y.axis=Object.assign({formatType:b},y.axis)))}s[u]=y}else n.push(l),s[u]=e[u]}else s[u]=e[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function U9e(e,t,n){const r=M8e(t,n);if(r){if(r==="binned"){const i=e[t===Ii?gt:Tt];return!!(J(i)&&J(e[t])&&In(i.bin))}}else return!1;return!0}function q9e(e,t,n){const r=t.type;return G(e).reduce((i,o)=>{if(!yX(o))return H(e7e(o)),i;const s=e[o];if(o==="angle"&&r==="arc"&&!e.theta&&(H(V8e),o=zi),!U9e(e,o,r))return H(t_(o,r)),i;if(o===zs&&r==="line"){const a=wo(e[o]);if(a!=null&&a.aggregate)return H(Q8e),i}if(o===br&&(t.filled?"fill"in e:"stroke"in e))return H(EX("encoding",{fill:"fill"in e,stroke:"stroke"in e})),i;if(o===Kp||o===Xp&&!ue(s)&&!Os(s)||o===Wl&&ue(s))s&&(i[o]=$t(s).reduce((a,u)=>(J(u)?a.push(dK(u,o)):H(PC(u,o)),a),[]));else{if(o===Wl&&s===null)i[o]=null;else if(!J(s)&&!Cu(s)&&!Os(s)&&!iM(s)&&!ge(s))return H(PC(s,o)),i;i[o]=zC(s,o,n)}return i},{})}function W9e(e){const t=[];for(const n of G(e))if($l(e,n)){const r=e[n],i=$t(r);for(const o of i)J(o)?t.push(o):o_(o)&&t.push(o.condition)}return t}function dM(e,t,n){if(e)for(const r of G(e)){const i=e[r];if(ue(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function _K(e,t,n,r){return e?G(e).reduce((i,o)=>{const s=e[o];return ue(s)?s.reduce((a,u)=>t.call(r,a,u,o),i):t.call(r,i,s,o)},n):n}function $K(e,t){return G(t).reduce((n,r)=>{switch(r){case gt:case Tt:case Xx:case Zx:case Kx:case Ii:case Lo:case zi:case Is:case Po:case js:case jo:case Io:case Ui:case ei:case Vp:case vr:case Cc:case Wl:return n;case Xp:if(e==="line"||e==="trail")return n;case Kp:case Vx:{const i=t[r];if(ue(i)||J(i))for(const o of $t(i))o.aggregate||n.push(V(o,{}));return n}case zs:if(e==="trail")return n;case br:case zo:case Uo:case Us:case vu:case xu:case $u:case _u:{const i=wo(t[r]);return i&&!i.aggregate&&n.push(V(i,{})),n}}},[])}function H9e(e){const{tooltip:t}=e,n=oe(e,["tooltip"]);if(!t)return{filteredEncoding:e};let r,i;if(ue(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ue(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function UC(e,t,n,r=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...e.map(({fieldPrefix:o,titlePrefix:s})=>{const a=r?` of ${t.field}`:"";return{field:o+t.field,type:t.type,title:ge(s)?{signal:s+`"${escape(a)}"`}:s+a}}),...W9e(n)]}}function wK(e){const{axis:t,title:n,field:r}=e;return t&&t.title!==void 0?void 0:Ct(n,r)}function hM(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,aria:f,extraEncoding:d={}})=>{const h=wK(n);return AK(e,a,i,f,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:l+"_"+n.field,type:n.type},h!==void 0?{title:h}:{}),o!==void 0?{scale:o}:{}),s!==void 0?{axis:s}:{})},Ce(c)?{[t+"2"]:{field:c+"_"+n.field}}:{}),r),d)})}}function AK(e,t,n,r,i){const{clip:o,color:s,opacity:a}=e,u=e.type;return e[t]||e[t]===void 0&&n[t]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),o?{clip:o}:{}),s?{color:s}:{}),a?{opacity:a}:{}),_o(i.mark)?i.mark:{type:i.mark}),{style:`${u}-${t}`}),Yp(e[t])?{}:e[t]),r===!1?{aria:r}:{})})]:[]}function EK(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[i+"2"],a=r[i+"Error"],u=r[i+"Error2"];return{continuousAxisChannelDef:am(o,n),continuousAxisChannelDef2:am(s,n),continuousAxisChannelDefError:am(a,n),continuousAxisChannelDefError2:am(u,n),continuousAxis:i}}function am(e,t){if(e&&e.aggregate){const{aggregate:n}=e,r=oe(e,["aggregate"]);return n!==t&&H(C7e(n,t)),r}else return e}function CK(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(io(i)){if(io(o)){const s=J(i)&&i.aggregate,a=J(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return _o(n)&&n.orient?n.orient:"vertical"}return"horizontal"}else{if(io(o))return"vertical";throw new Error("Need a valid continuous axis for "+t+"s")}}const sv="boxplot",Y9e=["box","median","outliers","rule","ticks"],G9e=new Yx(sv,FK);function SK(e){return Et(e)?"tukey":e}function FK(e,{config:t}){var n,r;const{mark:i,encoding:o,selection:s,projection:a}=e,u=oe(e,["mark","encoding","selection","projection"]),l=_o(i)?i:{type:i};s&&H(wX("boxplot"));const c=(n=l.extent)!==null&&n!==void 0?n:t.boxplot.extent,f=Ye("size",l,t),d=SK(c),{transform:h,continuousAxisChannelDef:g,continuousAxis:p,groupby:m,aggregate:y,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:v,customTooltipWithoutAggregatedField:_}=V9e(e,c,t),{color:w,size:$}=b,A=oe(b,["color","size"]),M=P=>hM(l,p,g,P,t.boxplot),k=M(A),C=M(b),N=M(Object.assign(Object.assign({},A),$?{size:$}:{})),E=UC([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,b),D={type:"tick",color:"black",opacity:1,orient:x,invalid:null},F=d==="min-max"?E:UC([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,b),O=[...k({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:F}),...k({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:F}),...k({partName:"ticks",mark:D,positionPrefix:"lower_whisker",aria:!1,extraEncoding:F}),...k({partName:"ticks",mark:D,positionPrefix:"upper_whisker",aria:!1,extraEncoding:F})],R=[...d!=="tukey"?O:[],...C({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:v,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:E}),...N({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Yt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),f?{size:f}:{}),{orient:x,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:E})];let B;if(d!=="min-max"){const P=`datum["lower_box_${g.field}"]`,Z=`datum["upper_box_${g.field}"]`,Q=`(${Z} - ${P})`,fe=`${P} - ${c} * ${Q}`,we=`${Z} + ${c} * ${Q}`,de=`datum["${g.field}"]`,Me={joinaggregate:kK(g.field),groupby:m};let wt;d==="tukey"&&(wt={transform:[{filter:`(${fe} <= ${de}) && (${de} <= ${we})`},{aggregate:[{op:"min",field:g.field,as:"lower_whisker_"+g.field},{op:"max",field:g.field,as:"upper_whisker_"+g.field},{op:"min",field:"lower_box_"+g.field,as:"lower_box_"+g.field},{op:"max",field:"upper_box_"+g.field,as:"upper_box_"+g.field},...y],groupby:m}],layer:O});const On=oe(A,["tooltip"]),{scale:ln,axis:T}=g,U=wK(g),W=AK(l,"outliers",t.boxplot,!0,{transform:[{filter:`(${de} < ${fe}) || (${de} > ${we})`}],mark:"point",encoding:Object.assign(Object.assign({[p]:Object.assign(Object.assign(Object.assign({field:g.field,type:g.type},U!==void 0?{title:U}:{}),ln!==void 0?{scale:ln}:{}),T!==void 0?{axis:T}:{})},On),_?{tooltip:_}:{})})[0];W&&wt?B={transform:[Me],layer:[W,wt]}:W?(B=W,B.transform.unshift(Me)):wt&&(B=wt,B.transform.unshift(Me))}return B?Object.assign(Object.assign({},u),{layer:[B,{transform:h,layer:R}]}):Object.assign(Object.assign({},u),{transform:((r=u.transform)!==null&&r!==void 0?r:[]).concat(h),layer:R})}function kK(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}function V9e(e,t,n){const r=CK(e,sv),{continuousAxisChannelDef:i,continuousAxis:o}=EK(e,r,sv),s=i.field,a=SK(t),u=[...kK(s),{op:"median",field:s,as:"mid_box_"+s},{op:"min",field:s,as:(a==="min-max"?"lower_whisker_":"min_")+s},{op:"max",field:s,as:(a==="min-max"?"upper_whisker_":"max_")+s}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:"iqr_"+s},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${t}, datum["max_${s}"])`,as:"upper_whisker_"+s},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${t}, datum["min_${s}"])`,as:"lower_whisker_"+s}],c=e.encoding,f=o;c[f];const d=oe(c,[typeof f=="symbol"?f:f+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:g}=H9e(d),{bins:p,timeUnits:m,aggregate:y,groupby:b,encoding:x}=fM(g,n),v=r==="vertical"?"horizontal":"vertical",_=r;return{transform:[...p,...m,{aggregate:[...y,...u],groupby:b},...l],groupby:b,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:x,ticksOrient:v,boxOrient:_,customTooltipWithoutAggregatedField:h}}const gM="errorbar",X9e=["ticks","rule"],K9e=new Yx(gM,DK);function DK(e,{config:t}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:u,tooltipEncoding:l}=MK(e,gM,t),c=hM(a,i,r,o,t.errorbar),f={type:"tick",orient:s},d=[...c({partName:"ticks",mark:f,positionPrefix:"lower",aria:!1,extraEncoding:l}),...c({partName:"ticks",mark:f,positionPrefix:"upper",aria:!1,extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),d.length>1?{layer:d}:Object.assign({},d[0]))}function Z9e(e,t){const{encoding:n}=e;if(J9e(n))return{orient:CK(e,t),inputType:"raw"};const r=Q9e(n),i=eTe(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(me(a)&&me(u))throw new Error(`${t} cannot have both x2 and y2`);if(me(a)){if(io(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(me(u)){if(io(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(me(u)&&!me(a))throw new Error(`${t} cannot have xError2 without xError`);if(me(c)&&!me(l))throw new Error(`${t} cannot have yError2 without yError`);if(me(a)&&me(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(me(a)){if(io(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(me(l)){if(io(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function J9e(e){return(me(e.x)||me(e.y))&&!me(e.x2)&&!me(e.y2)&&!me(e.xError)&&!me(e.xError2)&&!me(e.yError)&&!me(e.yError2)}function Q9e(e){return me(e.x2)||me(e.y2)}function eTe(e){return me(e.xError)||me(e.xError2)||me(e.yError)||me(e.yError2)}function MK(e,t,n){var r;const{mark:i,encoding:o,selection:s,projection:a}=e,u=oe(e,["mark","encoding","selection","projection"]),l=_o(i)?i:{type:i};s&&H(wX(t));const{orient:c,inputType:f}=Z9e(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:g,continuousAxisChannelDefError2:p,continuousAxis:m}=EK(e,c,t),{errorBarSpecificAggregate:y,postAggregateCalculates:b,tooltipSummary:x,tooltipTitleWithFieldName:v}=tTe(l,d,h,g,p,f,t,n),_=o,w=m;_[w];const $=m==="x"?"x2":"y2";_[$];const A=m==="x"?"xError":"yError";_[A];const M=m==="x"?"xError2":"yError2";_[M];const k=oe(_,[typeof w=="symbol"?w:w+"",typeof $=="symbol"?$:$+"",typeof A=="symbol"?A:A+"",typeof M=="symbol"?M:M+""]),{bins:C,timeUnits:N,aggregate:E,groupby:D,encoding:F}=fM(k,n),O=[...E,...y],R=f!=="raw"?[]:D,B=UC(x,d,F,v);return{transform:[...(r=u.transform)!==null&&r!==void 0?r:[],...C,...N,...O.length===0?[]:[{aggregate:O,groupby:R}],...b],groupby:R,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:F,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:u,tooltipEncoding:B}}function tTe(e,t,n,r,i,o,s,a){let u=[],l=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,g=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(g==="iqr")&&H(E7e(h,g,s)),g==="stderr"||g==="stdev")u=[{op:g,field:c,as:"extent_"+c},{op:h,field:c,as:"center_"+c}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:"upper_"+c},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:"lower_"+c}],f=[{fieldPrefix:"center_",titlePrefix:zx(h)},{fieldPrefix:"upper_",titlePrefix:eR(h,g,"+")},{fieldPrefix:"lower_",titlePrefix:eR(h,g,"-")}],d=!0;else{e.center&&e.extent&&H(S7e(e.extent,s));let p,m,y;g==="ci"?(p="mean",m="ci0",y="ci1"):(p="median",m="q1",y="q3"),u=[{op:m,field:c,as:"lower_"+c},{op:y,field:c,as:"upper_"+c},{op:p,field:c,as:"center_"+c}],f=[{fieldPrefix:"upper_",titlePrefix:_l({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:_l({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:_l({field:c,aggregate:p,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&H(A7e(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:"upper_"+c},{calculate:`datum["${c}"]`,as:"lower_"+c}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:"upper_"+c}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:"lower_"+c}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:"lower_"+c}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Gf(Gf(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function eR(e,t,n){return zx(e)+" "+n+" "+t}const pM="errorband",nTe=["band","borders"],rTe=new Yx(pM,OK);function OK(e,{config:t}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:u}=MK(e,pM,t),l=s,c=hM(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const g=Object.assign(Object.assign({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=Object.assign(Object.assign(Object.assign({},d),g),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign({},h),g)):l.interpolate?H(VN("interpolate")):l.tension&&H(VN("tension")),Object.assign(Object.assign({},a),{transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:u})]})}const TK={};function mM(e,t,n){const r=new Yx(e,t);TK[e]={normalizer:r,parts:n}}function iTe(){return G(TK)}mM(sv,FK,Y9e);mM(gM,DK,X9e);mM(pM,OK,nTe);const oTe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],NK=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],sTe={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},aTe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},uTe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Kf="_vgsid_",lTe={single:{on:"click",fields:[Kf],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Kf],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function yM(e){return!!e&&(e==="legend"||!!e.legend)}function Rw(e){return yM(e)&&Yt(e)}function cTe(e){return u_(e)||vM(e)||bM(e)}function bM(e){return"concat"in e}function u_(e){return"vconcat"in e}function vM(e){return"hconcat"in e}function Ao(e){return Yt(e)&&e.step!==void 0}function tR(e){return e.view||e.width||e.height}const nR=20,fTe={align:1,bounds:1,center:1,columns:1,spacing:1},dTe=G(fTe);function hTe(e,t,n){var r,i;const o=n[t],s={},{spacing:a,columns:u}=o;a!==void 0&&(s.spacing=a),u!==void 0&&(i_(e)&&!Jp(e.facet)||bM(e))&&(s.columns=u),u_(e)&&(s.columns=1);for(const l of dTe)if(e[l]!==void 0)if(l==="spacing"){const c=e[l];s[l]=Et(c)?c:{row:(r=c.row)!==null&&r!==void 0?r:a,column:(i=c.column)!==null&&i!==void 0?i:a}}else s[l]=e[l];return s}function qC(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"continuousWidth":"continuousHeight"]}function av(e,t){const n=Bg(e,t);return Ao(n)?n.step:xM}function Bg(e,t){var n;const r=(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"discreteWidth":"discreteHeight"];return Ct(r,{step:e.step})}const xM=20,gTe={continuousWidth:200,continuousHeight:200,step:xM},pTe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:gTe,mark:i8e,arc:{},area:{},bar:s8e,circle:{},geoshape:{},image:{},line:{},point:{},rect:a8e,rule:{color:"black"},square:{},text:{color:"black"},tick:u8e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:p9e,projection:{},legend:aTe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:lTe,style:{},title:{},facet:{spacing:nR},concat:{spacing:nR}},Zo=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],rR={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},iR={blue:Zo[0],orange:Zo[1],red:Zo[2],teal:Zo[3],green:Zo[4],yellow:Zo[5],purple:Zo[6],pink:Zo[7],brown:Zo[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function mTe(e={}){return{signals:[{name:"color",value:Yt(e)?Object.assign(Object.assign({},iR),e):iR}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function yTe(e){return{signals:[{name:"fontSize",value:Yt(e)?Object.assign(Object.assign({},rR),e):rR}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function bTe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function RK(e={}){const{color:t,font:n,fontSize:r}=e,i=oe(e,["color","font","fontSize"]);return KV({},pTe,n?bTe(n):{},t?mTe(t):{},r?yTe(r):{},i||{})}const vTe=["view",...lX],xTe=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],_Te=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},r8e);function $Te(e){e=Se(e);for(const t of xTe)delete e[t];if(e.axis)for(const t in e.axis)O6(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of oTe)delete e.legend[t];if(e.mark){for(const t of PN)delete e.mark[t];e.mark.tooltip&&Yt(e.mark.tooltip)&&delete e.mark.tooltip}for(const t of vTe){for(const r of PN)delete e[t][r];const n=_Te[t];if(n)for(const r of n)delete e[t][r];ATe(e,t)}for(const t of iTe())delete e[t];wTe(e);for(const t in e)Yt(e[t])&&tt(e[t])&&delete e[t];return tt(e)?void 0:e}function wTe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=gK(e.title);tt(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),tt(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),tt(r)?delete e.title:e.title=r}function ATe(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const o=Object.assign(Object.assign({},i),e.style[n??t]);tt(o)||(e.style[n??t]=o),r||delete e[t]}function l_(e){return"layer"in e}function ETe(e){return"repeat"in e}function CTe(e){return!ue(e.repeat)&&e.repeat.layer}class BK{map(t,n){return i_(t)?this.mapFacet(t,n):ETe(t)?this.mapRepeat(t,n):vM(t)?this.mapHConcat(t,n):u_(t)?this.mapVConcat(t,n):bM(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(l_(t))return this.mapLayer(t,n);if(Ps(t))return this.mapUnit(t,n);throw new Error(z6(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){const{concat:r}=t,i=oe(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map(o=>this.map(o,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const STe={zero:1,center:1,normalize:1};function FTe(e){return e in STe}const kTe=new Set([sX,qx,Ux,Qb,Hx,N6,R6,Wx,aX,T6]),DTe=new Set([qx,Ux,sX]);function oR(e,t){var n,r;const i=t==="x"?"y":"radius",o=e[t],s=e[i];if(J(o)&&J(s))if(na(o)==="quantitative"&&na(s)==="quantitative"){if(o.stack)return t;if(s.stack)return i;const a=J(o)&&!!o.aggregate,u=J(s)&&!!s.aggregate;if(a!==u)return a?t:i;{const l=(n=o.scale)===null||n===void 0?void 0:n.type,c=(r=s.scale)===null||r===void 0?void 0:r.type;if(l&&l!=="linear")return i;if(c&&c!=="linear")return t}}else{if(na(o)==="quantitative")return t;if(na(s)==="quantitative")return i}else{if(na(o)==="quantitative")return t;if(na(s)==="quantitative")return i}}function MTe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function LK(e,t,n={}){const r=_o(e)?e.type:e;if(!kTe.has(r))return null;const i=oR(t,"x")||oR(t,"theta");if(!i)return null;const o=t[i],s=J(o)?V(o,{}):void 0;let a=MTe(i),u=t[a],l=J(u)?V(u,{}):void 0;l===s&&(l=void 0,u=void 0,a=void 0);const c=C8e.reduce((d,h)=>{if(h!=="tooltip"&&$l(t,h)){const g=t[h];for(const p of $t(g)){const m=wo(p);if(m.aggregate)continue;const y=V(m,{});(!y||y!==l)&&d.push({channel:h,fieldDef:m})}}return d},[]);let f;if(o.stack!==void 0?Yp(o.stack)?f=o.stack?"zero":null:f=o.stack:c.length>0&&DTe.has(r)&&(f="zero"),!f||!FTe(f)||cM(t)&&c.length===0)return null;if(o.scale&&o.scale.type&&o.scale.type!==At.LINEAR){if(n.disallowNonLinearStack)return null;H(_7e(o.scale.type))}return me(t[qo(i)])?(o.stack!==void 0&&H(x7e(i)),null):(J(o)&&o.aggregate&&!ce(g8e,o.aggregate)&&H($7e(o.aggregate)),{groupbyChannel:u?a:void 0,groupbyField:l,fieldChannel:i,impute:o.impute===null?!1:Ac(r),stackBy:c,offset:f})}function OTe(e){const t=oe(e,["point","line"]);return G(t).length>1?t:t.type}function TTe(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:xs(e[t],["point","line"])}));return e}function Bw(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Yt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Yt(t.point)?t.point:{}:void 0}function sR(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class NTe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Ps(t)){const{mark:r,encoding:i}=t,o=_o(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!Bw(o,n[o.type],i);case"area":return!!Bw(o,n[o.type],i)||!!sR(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{selection:o,projection:s,encoding:a,mark:u}=t,l=oe(t,["selection","projection","encoding","mark"]),c=_o(u)?u:{type:u},f=Bw(c,i[c.type],a),d=c.type==="area"&&sR(c,i[c.type]),h=[Object.assign(Object.assign({},o?{selection:o}:{}),{mark:OTe(Object.assign(Object.assign({},c.type==="area"&&c.opacity===void 0&&c.fillOpacity===void 0?{opacity:.7}:{}),c)),encoding:xs(a,["shape"])})],g=LK(c,a);let p=a;if(g){const{fieldChannel:m,offset:y}=g;p=Object.assign(Object.assign({},a),{[m]:Object.assign(Object.assign({},a[m]),y?{stack:y}:{})})}return d&&h.push(Object.assign(Object.assign({},s?{projection:s}:{}),{mark:Object.assign(Object.assign({type:"line"},Mg(c,["clip","interpolate","tension","tooltip"])),d),encoding:p})),f&&h.push(Object.assign(Object.assign({},s?{projection:s}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},Mg(c,["clip","tooltip"])),f),encoding:p})),r(Object.assign(Object.assign({},l),{layer:h}),Object.assign(Object.assign({},n),{config:TTe(i)}))}}class RTe{constructor(){this.name="RangeStep"}hasMatchingType(t){var n;if(Ps(t)&&t.encoding)for(const r of ti){const i=t.encoding[r];if(i&&me(i)&&!((n=i==null?void 0:i.scale)===null||n===void 0)&&n.rangeStep)return!0}return!1}run(t){var n;const r={};let i=Object.assign({},t.encoding);for(const o of ti){const s=Wo(o),a=i[o];if(a&&me(a)&&!((n=a==null?void 0:a.scale)===null||n===void 0)&&n.rangeStep){const{scale:u}=a,l=oe(a,["scale"]),c=u,f=oe(c,["rangeStep"]);r[s]={step:u.rangeStep},H(o7e),i=Object.assign(Object.assign({},i),{[o]:Object.assign(Object.assign({},l),tt(f)?{}:{scale:f})})}}return Object.assign(Object.assign(Object.assign({},r),t),{encoding:i})}}function BTe(e,t){return t?Jp(e)?jK(e,t):PK(e,t):e}function Lw(e,t){return t?jK(e,t):e}function WC(e,t,n){const r=t[e];if(D9e(r)){if(r.repeat in n)return Object.assign(Object.assign({},t),{[e]:n[r.repeat]});H(z8e(r.repeat));return}return t}function PK(e,t){if(e=WC("field",e,t),e!==void 0){if(e===null)return null;if(rK(e)&&co(e.sort)){const n=WC("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function aR(e,t){if(J(e))return PK(e,t);{const n=WC("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function uR(e,t){if(me(e)){const n=aR(e,t);if(n)return n;if(iM(e))return{condition:e.condition}}else{if(oM(e)){const n=aR(e.condition,t);return n?Object.assign(Object.assign({},e),{condition:n}):oe(e,["condition"])}return e}}function jK(e,t){const n={};for(const r in e)if(ll(e,r)){const i=e[r];if(ue(i))n[r]=i.map(o=>uR(o,t)).filter(o=>o);else{const o=uR(i,t);o!==void 0&&(n[r]=o)}}return n}class LTe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Ps(t)){const{encoding:n,mark:r}=t;if(r==="line")for(const i of A8e){const o=Sc(i),s=n[o];if(n[i]&&(J(s)&&!In(s.bin)||Cu(s)))return!0}}return!1}run(t,n,r){const{encoding:i}=t;return H(r7e(!!i.x2,!!i.y2)),r(Object.assign(Object.assign({},t),{mark:"rule"}),n)}}class PTe extends BK{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[G9e,K9e,rTe,new NTe,new LTe,new RTe]}map(t,n){if(Ps(t)){const r=$l(t.encoding,_s),i=$l(t.encoding,$s),o=$l(t.encoding,Gx);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=Object.assign(Object.assign({},t),{encoding:Lw(t.encoding,n.repeater)});if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const s=this.mapLayerOrUnit.bind(this);for(const a of this.nonFacetUnitNormalizers)if(a.hasMatchingType(o,n.config))return a.run(o,n,s);return o}mapRepeat(t,n){return CTe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i}=t,o=oe(t,["repeat","spec"]),{row:s,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},s?{row:s}:{}),a?{column:a}:{}),spec:{repeat:{layer:u},spec:i}}),n):Object.assign(Object.assign({},o),{layer:u.map(f=>{const d=Object.assign(Object.assign({},l),{layer:f}),h=(i.name||"")+c+`child__layer_${ft(f)}`,g=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:d,repeaterPrefix:h}));return g.name=h,g})})}mapNonLayerRepeat(t,n){var r;const{repeat:i,spec:o,data:s}=t,a=oe(t,["repeat","spec","data"]);!ue(i)&&t.columns&&(t=xs(t,["columns"]),H(WN("repeat")));const u=[],{repeater:l={},repeaterPrefix:c=""}=n,f=!ue(i)&&i.row||[l?l.row:null],d=!ue(i)&&i.column||[l?l.column:null],h=ue(i)&&i||[l?l.repeat:null];for(const p of h)for(const m of f)for(const y of d){const b={repeat:p,row:m,column:y,layer:l.layer},x=(o.name||"")+c+"child__"+(ue(i)?`${ft(p)}`:(i.row?`row_${ft(m)}`:"")+(i.column?`column_${ft(y)}`:"")),v=this.map(o,Object.assign(Object.assign({},n),{repeater:b,repeaterPrefix:x}));v.name=x,u.push(xs(v,["data"]))}const g=ue(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(r=o.data)!==null&&r!==void 0?r:s,align:"all"},a),{columns:g,concat:u})}mapFacet(t,n){const{facet:r}=t;return Jp(r)&&t.columns&&(t=xs(t,["columns"]),H(WN("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,u=cR({parentProjection:s,projection:i}),l=lR({parentEncoding:o,encoding:Lw(r,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),u?{projection:u}:{}),l?{encoding:l}:{}),{config:a})}mapFacetedUnit(t,n){const r=t.encoding,{row:i,column:o,facet:s}=r,a=oe(r,["row","column","facet"]),{mark:u,width:l,projection:c,height:f,view:d,selection:h,encoding:g}=t,p=oe(t,["mark","width","projection","height","view","selection","encoding"]),{facetMapping:m,layout:y}=this.getFacetMappingAndLayout({row:i,column:o,facet:s},n),b=Lw(a,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},p),y),{facet:m,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{width:l}:{}),f?{height:f}:{}),d?{view:d}:{}),c?{projection:c}:{}),{mark:u,encoding:b}),h?{selection:h}:{})}),n)}getFacetMappingAndLayout(t,n){var r;const{row:i,column:o,facet:s}=t;if(i||o){s&&H(n7e([...i?[_s]:[],...o?[$s]:[]]));const a={},u={};for(const l of[_s,$s]){const c=t[l];if(c){const f=oe(c,["align","center","spacing","columns"]);a[l]=f;for(const d of["align","center","spacing"])c[d]!==void 0&&(u[d]=(r=u[d])!==null&&r!==void 0?r:{},u[d][l]=c[d])}}return{facetMapping:a,layout:u}}else{const{align:a,center:u,spacing:l,columns:c}=s,f=oe(s,["align","center","spacing","columns"]);return{facetMapping:BTe(f,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},a?{align:a}:{}),u?{center:u}:{}),l?{spacing:l}:{}),c?{columns:c}:{})}}}mapLayer(t,n){var{parentEncoding:r,parentProjection:i}=n,o=oe(n,["parentEncoding","parentProjection"]);const{encoding:s,projection:a}=t,u=oe(t,["encoding","projection"]),l=Object.assign(Object.assign({},o),{parentEncoding:lR({parentEncoding:r,encoding:s}),parentProjection:cR({parentProjection:i,projection:a})});return super.mapLayer(u,l)}}function lR(e){const{parentEncoding:t,encoding:n}=e;if(t&&n){const i=G(t).reduce((o,s)=>(n[s]&&o.push(s),o),[]);i.length>0&&H(Y8e(i))}const r=Object.assign(Object.assign({},t??{}),n??{});return tt(r)?void 0:r}function cR(e){const{parentProjection:t,projection:n}=e;return t&&n&&H(G8e({parentProjection:t,projection:n})),n??t}function IK(e,t){t===void 0&&(t=RK(e.config));const n=ITe(e,t),{width:r,height:i}=e,o=zTe(n,{width:r,height:i,autosize:e.autosize},t);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const jTe=new PTe;function ITe(e,t={}){return jTe.map(e,{config:t})}function fR(e){return Ce(e)?{type:e}:e??{}}function zTe(e,t,n){let{width:r,height:i}=t;const o=Ps(e)||l_(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(H(IN("width")),r=void 0),i=="container"&&(H(IN("height")),i=void 0));const a=Object.assign(Object.assign(Object.assign({type:"pad"},s),n?fR(n.autosize):{}),fR(e.autosize));if(a.type==="fit"&&!o&&(H(N8e),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&H(zN("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&H(zN("height")),!Gp(a,{type:"pad"}))return a}function UTe(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function qTe(e){return e?`fit-${Jx(e)}`:"fit"}const WTe=["background","padding"];function dR(e){return WTe.reduce((t,n)=>(e&&e[n]!==void 0&&(t[n]=e[n]),t),{})}class qs{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new qs(Se(this.explicit),Se(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return Ct(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,n){n.value!==void 0&&this.set(t,n.value,n.explicit)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,n){n.explicit[t]!==void 0?this.set(t,n.explicit[t],!0):n.implicit[t]!==void 0&&this.set(t,n.implicit[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of G(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function cl(e){return{explicit:!0,value:e}}function wr(e){return{explicit:!1,value:e}}function zK(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:c_(t,n,r,i)}}function c_(e,t,n,r){return e.explicit&&t.explicit&&H(h7e(n,r,e.value,t.value)),e}function iu(e,t,n,r,i=c_){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Gp(e.value,t.value)?e:i(e,t,n,r)}class HTe extends qs{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Lg(e){return"url"in e}function uv(e){return"values"in e}function UK(e){return"name"in e&&!Lg(e)&&!uv(e)&&!wl(e)}function wl(e){return e&&(qK(e)||WK(e)||_M(e))}function qK(e){return"sequence"in e}function WK(e){return"sphere"in e}function _M(e){return"graticule"in e}const yn="main",lv="raw";function HK(e){return"filter"in e}function YTe(e){return(e==null?void 0:e.stop)!==void 0}function GTe(e){return"lookup"in e}function VTe(e){return"data"in e}function XTe(e){return"selection"in e}function KTe(e){return"pivot"in e}function ZTe(e){return"density"in e}function JTe(e){return"quantile"in e}function QTe(e){return"regression"in e}function eNe(e){return"loess"in e}function tNe(e){return"sample"in e}function nNe(e){return"window"in e}function rNe(e){return"joinaggregate"in e}function iNe(e){return"flatten"in e}function oNe(e){return"calculate"in e}function sNe(e){return"bin"in e}function aNe(e){return"impute"in e}function uNe(e){return"timeUnit"in e}function lNe(e){return"aggregate"in e}function cNe(e){return"stack"in e}function fNe(e){return"fold"in e}function dNe(e){return e.map(t=>HK(t)?{filter:Jm(t.filter,Q7e)}:t)}function t1(e,t,n,r){const i=iM(t)&&t.condition,o=r(t);if(i){const a=$t(i).map(u=>{const l=r(u),c=k9e(u)?yZ(e,u.selection):hv(e,u.test);return Object.assign({test:c},l)});return{[n]:[...a,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function $M(e,t="text"){const n=e.encoding[t];return t1(e,n,t,r=>f_(r,e.config))}function f_(e,t,n="datum"){if(e){if(Os(e))return _t(e.value);if(me(e)){const{format:r,formatType:i}=rv(e);return eM({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function YK(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(ue(s))return{tooltip:hR({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return t1(e,s,"tooltip",u=>{const l=f_(u,i,a);if(l)return l;if(u===null)return;let c=Ye("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Ce(c))return{value:c};if(Yt(c))return c.content==="encoding"?hR(n,o,i,t):{signal:a}})}}function GK(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",s=[];function a(l,c){const f=Sc(c),d=Br(l)?l:Object.assign(Object.assign({},l),{type:e[f].type}),h=$t(_l(d,n,{allowDisabling:!1})).join(", ");let g;if($o(c)){const p=c==="x"?"x2":"y2",m=wo(e[p]);if(In(d.bin)&&m){const y=V(d,{expr:o}),b=V(m,{expr:o}),{format:x,formatType:v}=rv(d);g=n_(y,b,x,v,n),i[p]=!0}else if(t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:y,formatType:b}=rv(d);g=eM({fieldOrDatumDef:d,format:y,formatType:b,expr:o,config:n,normalizeStack:!0}).signal}}g=g??f_(d,n,o).signal,s.push({channel:c,key:h,value:g})}dM(e,(l,c)=>{J(l)?a(l,c):o_(l)&&a(l.condition,c)});const u={};for(const{channel:l,key:c,value:f}of s)!i[l]&&!u[c]&&(u[Te(c)]=f);return u}function hR(e,t,n,{reactiveGeom:r}={}){const i=GK(e,t,n,{reactiveGeom:r}),o=tX(i).map(({key:s,value:a})=>`${s}: ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function hNe(e){const{markDef:t,config:n}=e,r=Ye("aria",t,n);return r===!1?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),gNe(e)),pNe(e))}function gNe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Ye("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in X7e?{}:{ariaRoleDescription:{value:t}}}function pNe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return t1(e,o,"description",u=>f_(u,e.config));const s=Ye("description",n,r);if(s!=null)return{description:_t(s)};if(r.aria===!1)return{};const a=GK(t,i,r);if(!tt(a))return{description:{signal:tX(a).map(({key:u,value:l})=>`${u} + ": " + (${l})`).join(' + "; " + ')}}}function Pt(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u=u??Ye(e,r,o,{vgChannel:s,ignoreVgConfig:!0}),u!==void 0&&(a=_t(u)));const l=i[e];return t1(t,l,s??e,c=>VX({channel:e,channelDef:c,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function VK(e,t={filled:void 0}){var n,r,i,o;const{markDef:s,encoding:a,config:u}=e,{type:l}=s,c=(n=t.filled)!==null&&n!==void 0?n:Ye("filled",s,u),f=ce(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,d=(i=(r=Ye(c===!0?"color":void 0,s,u,{vgChannel:"fill"}))!==null&&r!==void 0?r:u.mark[c===!0&&"color"])!==null&&i!==void 0?i:f,h=(o=Ye(c===!1?"color":void 0,s,u,{vgChannel:"stroke"}))!==null&&o!==void 0?o:u.mark[c===!1&&"color"],g=c?"fill":"stroke",p=Object.assign(Object.assign({},d?{fill:_t(d)}:{}),h?{stroke:_t(h)}:{});return s.color&&(c?s.fill:s.stroke)&&H(EX("property",{fill:"fill"in s,stroke:"stroke"in s})),Object.assign(Object.assign(Object.assign(Object.assign({},p),Pt("color",e,{vgChannel:g,defaultValue:c?d:h})),Pt("fill",e,{defaultValue:a.fill?d:void 0})),Pt("stroke",e,{defaultValue:a.stroke?h:void 0}))}function Pg(e,t){const n=E8e(e),r=t[n];if(r)return r}function xn(e,t,{defaultPos:n,vgChannel:r,isMidPoint:i}){const{encoding:o,markDef:s,config:a,stack:u}=t,l=o[e],c=o[qo(e)],f=t.scaleName(e),d=t.getScaleComponent(e),h=Pg(e,s),g=wM({model:t,defaultPos:n,channel:e,scaleName:f,scale:d}),p=!l&&$o(e)&&(o.latitude||o.longitude)?{field:t.getName(e)}:mNe({channel:e,channelDef:l,channel2Def:c,markDef:s,config:a,isMidPoint:i,scaleName:f,scale:d,stack:u,offset:h,defaultRef:g});return p?{[r||e]:p}:void 0}function mNe(e){const{channel:t,channelDef:n,isMidPoint:r,scaleName:i,stack:o,offset:s,markDef:a,config:u}=e;if(me(n)&&o&&t===o.fieldChannel){if(J(n)){const l=Qp({channel:t,fieldDef:n,isMidPoint:r,markDef:a,stack:o,config:u});if(l!==void 0)return nv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:l,offset:s})}return xl(n,i,{suffix:"end"},{offset:s})}return J6(e)}function wM({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Sc(n),u=ru(n),l=Ye(n,o,s,{vgChannel:u});if(l!==void 0)return _0(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!ce([At.LOG,At.TIME,At.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const c=e[Wo(n)];return Object.assign(Object.assign({},c),{mult:.5})}}}}const yNe={left:"x",center:"xc",right:"x2"},bNe={top:"y",middle:"yc",bottom:"y2"};function XK(e,t,n,r="middle"){if(e==="radius"||e==="theta")return ru(e);const o=Ye(e==="x"?"align":"baseline",t,n);return e==="x"?yNe[o||(r==="top"?"left":"center")]:bNe[o||r]}function cv(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?KK(e,t,{defaultPos:n,defaultPos2:r}):xn(e,t,{defaultPos:n})}function KK(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=qo(e),a=Wo(e),u=vNe(t,r,s),l=u[a]?XK(e,i,o):ru(e);return Object.assign(Object.assign({},xn(e,t,{defaultPos:n,vgChannel:l})),u)}function vNe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,u=Sc(n),l=Wo(n),c=ru(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),g=n in r||n in o?Pg(n,e.markDef):Pg(u,e.markDef);if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude))return{[c]:{field:e.getName(n)}};const p=xNe({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:g,defaultRef:void 0});return p!==void 0?{[c]:p}:um(n,o)||um(n,{[n]:ov(n,o,a.style),[l]:ov(l,o,a.style)})||um(n,a[i])||um(n,a.mark)||{[c]:wM({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function xNe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l}){return me(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?xl(t,o,{suffix:"start"},{offset:u}):J6({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function um(e,t){const n=Wo(e),r=ru(e);if(t[r]!==void 0)return{[r]:_0(e,t[r])};if(t[e]!==void 0)return{[r]:_0(e,t[e])};if(t[n])return{[n]:_0(e,t[n])}}function ou(e,t,n){var r,i,o,s;const{config:a,encoding:u,markDef:l,stack:c}=e,f=qo(t),d=Wo(t),h=u[t],g=u[f],p=e.getScaleComponent(t),m=p?p.get("type"):void 0,y=e.scaleName(t),b=l.orient,x=(i=(r=u[d])!==null&&r!==void 0?r:u.size)!==null&&i!==void 0?i:Ye("size",l,a,{vgChannel:d}),v=n==="bar"&&(t==="x"?b==="vertical":b==="horizontal");if(J(h)&&(rt(h.bin)||In(h.bin)||h.timeUnit&&!g)&&!x&&!xr(m)){const _=Qp({channel:t,fieldDef:h,stack:c,markDef:l,config:a}),w=(o=e.component.axes[t])===null||o===void 0?void 0:o[0],$=(s=w==null?void 0:w.get("translate"))!==null&&s!==void 0?s:.5;return wNe({fieldDef:h,fieldDef2:g,channel:t,markDef:l,scaleName:y,band:_,axisTranslate:$,spacing:$o(t)?Ye("binSpacing",l,a):void 0,reverse:p.get("reverse"),config:a})}else return(me(h)&&xr(m)||v)&&!g?$Ne(n,h,t,e):KK(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function _Ne(e,t,n,r,i,o){if(r){const u=r.get("type");if(u==="point"||u==="band"){if(i[e].discreteBandSize!==void 0)return{value:i[e].discreteBandSize};if(u===At.POINT){const l=r.get("range");return Eu(l)&&Et(l.step)?{value:l.step-2}:{value:xM-2}}else return{scale:n,band:o}}else return{value:i[e].continuousBandSize}}const s=av(i.view,t),a=Ct(i[e].discreteBandSize,s-2);return a!==void 0?{value:a}:void 0}function $Ne(e,t,n,r){var i;const{markDef:o,encoding:s,config:a,stack:u}=r,l=o.orient,c=r.scaleName(n),f=r.getScaleComponent(n),d=Wo(n),h=qo(n),g=l==="horizontal"&&n==="y"||l==="vertical"&&n==="x",p=Ye(g?"size":d,o,a,{vgChannel:d});let m;(s.size||p!==void 0)&&(g?m=Pt("size",r,{vgChannel:d,defaultValue:p}):H(c7e(o.type)));const y=(i=me(t)?Qp({channel:n,fieldDef:t,markDef:o,stack:u,config:a}):void 0)!==null&&i!==void 0?i:1;m=m||{[d]:_Ne(e,d,c,f,a,y)};const b=(f==null?void 0:f.get("type"))!=="band"||!("band"in m[d]),x=XK(n,o,a,b?"middle":"top"),v=Pg(n,o),_=J6({channel:n,channelDef:t,markDef:o,config:a,scaleName:c,scale:f,stack:u,offset:v,defaultRef:wM({model:r,defaultPos:"mid",channel:n,scaleName:c,scale:f}),band:b?.5:(1-y)/2});if(d)return Object.assign({[x]:_},m);{const w=ru(h),$=m[d],A=v?Object.assign(Object.assign({},$),{offset:v}):$;return{[x]:_,[w]:ue(_)?[_[0],Object.assign(Object.assign({},_[1]),{offset:A})]:Object.assign(Object.assign({},_),{offset:A})}}}function _h(e,t,n,r,i){if(hX(e))return 0;const o=e==="x"||e==="y2"?-t/2:t/2;if(ge(n)){const s=Rg(i);return{signal:`${n.signal} ? ${r-o}${s?"-"+s:""} : ${r+o}${s?"+"+s:""}`}}else{if(ge(i)){const s=r+(n?-o:o);return{signal:`${s||""}${n?" - ":s?" + ":""}${i.signal}`}}return i=i||0,r+(n?-i-o:+i+o)}}function wNe({fieldDef:e,fieldDef2:t,channel:n,band:r,scaleName:i,markDef:o,spacing:s=0,axisTranslate:a,reverse:u,config:l}){const c=qo(n),f=ru(n),d=ru(c),h=Pg(n,o);if(rt(e.bin)||e.timeUnit)return{[d]:gR({channel:n,fieldDef:e,scaleName:i,markDef:o,band:(1-r)/2,offset:_h(c,s,u,a,h),config:l}),[f]:gR({channel:n,fieldDef:e,scaleName:i,markDef:o,band:1-(1-r)/2,offset:_h(n,s,u,a,h),config:l})};if(In(e.bin)){const g=xl(e,i,{},{offset:_h(c,s,u,a,h)});if(J(t))return{[d]:g,[f]:xl(t,i,{},{offset:_h(n,s,u,a,h)})};if(Zp(e.bin)&&e.bin.step)return{[d]:g,[f]:{signal:`scale("${i}", ${V(e,{expr:"datum"})} + ${e.bin.step})`,offset:_h(n,s,u,a,h)}}}H(FX(c))}function gR({channel:e,fieldDef:t,scaleName:n,markDef:r,band:i,offset:o,config:s}){const a=nv({scaleName:n,fieldOrDatumDef:t,band:i,offset:o});return GX({fieldDef:t,channel:e,markDef:r,ref:a,config:s})}const ANe=new Set(["aria"]);function si(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?VK(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ENe(e.markDef,t)),pR(e,"fill",n)),pR(e,"stroke",r)),Pt("opacity",e)),Pt("fillOpacity",e)),Pt("strokeOpacity",e)),Pt("strokeWidth",e)),Pt("strokeDash",e)),YK(e)),$M(e,"href")),hNe(e))}function pR(e,t,n){const{config:r,mark:i,markDef:o}=e;if(Ye("invalid",o,r)==="hide"&&n&&!Ac(i)){const a=CNe(e,{invalid:!0,channels:Qx});if(a)return{[t]:[{test:a,value:null},...$t(n)]}}return n?{[t]:n}:{}}function ENe(e,t){return V7e.reduce((n,r)=>(!ANe.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=_t(e[r])),n),{})}function CNe(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const u=a.get("type"),l=e.vgField(s,{expr:"datum"});l&&ni(u)&&(o[l]=!0)}return o},{}),i=G(r);if(i.length>0){const o=t?"||":"&&";return i.map(s=>Q6(s,t)).join(` ${o} `)}}function AM(e){const{config:t,markDef:n}=e;if(Ye("invalid",n,t)){const i=SNe(e,{channels:ti});if(i)return{defined:{signal:i}}}return{}}function SNe(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const u=a.get("type"),l=e.vgField(s,{expr:"datum"});l&&ni(u)&&(o[l]=!0)}return o},{}),i=G(r);if(i.length>0){const o=t?"||":"&&";return i.map(s=>Q6(s,t)).join(` ${o} `)}}function mR(e,t){if(t!==void 0)return{[e]:_t(t)}}const Pw="voronoi",ZK={has:e=>e.type!=="interval"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Pw)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Ac(o))return H(B8e(o)),n;const s={name:e.getName(Pw),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},YK(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{var f;const d=(f=l.name)!==null&&f!==void 0?f:"";d===e.component.mark[0].name?a=c:d.indexOf(Pw)>=0&&(u=!0)}),u||n.splice(a+1,0,s),n}};class Qe{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.indexOf(t)>-1){console.warn("Attempt to add the same child twice.");return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}class Wn extends Qe{constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${H4e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}class fo extends Qe{constructor(t,n){super(t),this.formula=n}clone(){return new fo(null,Se(this.formula))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:u}=o,l=yt(n)?n.encoding[qo(s)]:void 0,c=yt(n)&&rM(s,o,l,n.stack,n.markDef,n.config);if(u){const f=V(o,{forAs:!0});i[Re({as:f,field:a,timeUnit:u})]=Object.assign({as:f,field:a,timeUnit:u},c?{band:!0}:{})}return i},{});return tt(r)?null:new fo(t,r)}static makeFromTransform(t,n){const r=Object.assign({},n),{timeUnit:i}=r,o=oe(r,["timeUnit"]),s=Vn(i),a=Object.assign(Object.assign({},o),{timeUnit:s});return new fo(t,{[Re(a)]:a})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)(!this.formula[n]||t.formula[n].band)&&(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}producedFields(){return new Set(Fa(this.formula).map(t=>t.as))}dependentFields(){return new Set(Fa(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${Re(this.formula)}`}assemble(){const t=[];for(const n of Fa(this.formula)){const{field:r,as:i,timeUnit:o}=n,s=Vn(o),{unit:a,utc:u}=s,l=oe(s,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:tu(r),type:"timeunit"},a?{units:H6(a)}:{}),u?{timezone:"utc"}:{}),l),{as:[i,`${i}_end`]}))}return t}}const n1="_tuple_fields";class FNe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const kNe={has:()=>!0,parse:(e,t,n)=>{var r,i,o;const s=t.name,a=(r=t.project)!==null&&r!==void 0?r:t.project=new FNe,u={},l={},c=new Set,f=(d,h)=>{const g=h==="visual"?d.channel:d.field;let p=ft(`${s}_${g}`);for(let m=1;c.has(p);m++)p=ft(`${s}_${g}_${m}`);return c.add(p),{[h]:p}};if(!n.fields&&!n.encodings){const d=e.config.selection[n.type];if(n.init)for(const h of $t(n.init))for(const g of G(h))w8e(g)?(n.encodings||(n.encodings=[])).push(g):n.type==="interval"?(H('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=d.encodings):(n.fields||(n.fields=[])).push(g);else n.encodings=d.encodings,n.fields=d.fields}for(const d of(i=n.fields)!==null&&i!==void 0?i:[]){const h={type:"E",field:d};h.signals=Object.assign({},f(h,"data")),a.items.push(h),a.hasField[d]=h}for(const d of(o=n.encodings)!==null&&o!==void 0?o:[]){const h=e.fieldDef(d);if(h){let g=h.field;if(h.aggregate){H(R8e(d,h.aggregate));continue}else if(!g){H(qN(d));continue}if(h.timeUnit){g=e.vgField(d);const p={timeUnit:h.timeUnit,as:g,field:h.field};l[Re(p)]=p}if(!u[g]){let p="E";if(t.type==="interval"){const y=e.getScaleComponent(d).get("type");ni(y)&&(p="R")}else h.bin&&(p="R-RE");const m={field:g,channel:d,type:p};m.signals=Object.assign(Object.assign({},f(m,"data")),f(m,"visual")),a.items.push(u[g]=m),a.hasField[g]=a.hasChannel[d]=u[g]}}else H(qN(d))}if(n.init){const d=h=>a.items.map(g=>h[g.channel]!==void 0?h[g.channel]:h[g.field]);if(n.type==="interval")t.init=d(n.init);else{const h=$t(n.init);t.init=h.map(d)}}tt(l)||(a.timeUnit=new fo(null,l))},signals:(e,t,n)=>{const r=t.name+n1;return n.filter(o=>o.name===r).length>0?n:n.concat({name:r,value:t.project.items.map(o=>{const s=oe(o,["signals","hasLegend"]);return s.field=tu(s.field),s})})}},JK={has:e=>e.type==="single"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!yM(e.bind),parse:(e,t,n,r)=>{r.on||delete t.events,r.clear||delete t.clear},topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=ZK.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{var c,f;const d=ft(`${r}_${u.field}`);n.filter(g=>g.name===d).length||n.unshift(Object.assign(Object.assign({name:d},s?{init:Zf(s[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Te(u.field)}] : null`}]:[],bind:(f=(c=o[u.field])!==null&&c!==void 0?c:o[u.channel])!==null&&f!==void 0?f:o}))}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter(l=>l.name===r+Eo)[0],s=r+n1,a=i.items.map(l=>ft(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(o.update=`${u} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},fv="_toggle",QK={has:e=>e.type==="multi"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+fv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Eo,r=t.name+fv;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${ws(e)}}, `)+`${r} ? ${n} : null`}},DNe={has:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t,n)=>{n.clear&&(t.clear=Ce(n.clear)?_c(n.clear,"scope"):n.clear)},topLevelSignals:(e,t,n)=>{if(JK.has(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===ft(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+Eo);r(i,"null"),QK.has(t)&&(i=n.findIndex(o=>o.name===t.name+fv),r(i,"false"))}return n}},su={has:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Au(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(!o||!ni(s)){H(P8e);continue}const a={selection:t.name,field:r.field};o.set("selectionExtent",a,!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||YC(e)||r.length===0)return n;const i=n.filter(s=>s.name===t.name)[0];let o=i.update;if(o.indexOf(uZ)>=0)i.update=`{${r.map(s=>`${Te(s.field)}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${Te(s.field)}: ${s.signals.data}`;o.indexOf(a)<0&&(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!YC(e))for(const r of t.scales){const i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function HC(e,t){return`domain(${Te(e.scaleName(t))})`}function YC(e){var t;return e.parent&&Id(e.parent)&&((t=!e.parent.parent)!==null&&t!==void 0?t:YC(e.parent.parent))}const eZ={has:e=>{const t=e.resolve==="global"&&e.bind&&yM(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Kf;return t&&!n&&H(j8e),t&&n},parse:(e,t,n,r)=>{var i;if(r.on||delete t.events,r.clear||delete t.clear,r.on||r.clear){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const u of t.events)u.filter=$t((i=u.filter)!==null&&i!==void 0?i:[]),u.filter.indexOf(a)<0&&u.filter.push(a)}const o=Rw(t.bind)?t.bind.legend:"click",s=Ce(o)?_c(o,"view"):$t(o);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Rw(t.bind)&&t.bind.legend,o=s=>a=>{const u=Se(a);return u.markname=s,u};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${ft(s.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift(Object.assign(Object.assign({name:u},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+Eo),s=r+n1,a=i.items.filter(d=>d.hasLegend).map(d=>ft(`${r}_${ft(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(o.update=l,delete o.value,delete o.on);const c=n.find(d=>d.name===r+fv),f=Rw(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:f})):c.on[0].events=f),n}};function MNe(e,t,n){var r;const i=(r=e.fieldDef(t))===null||r===void 0?void 0:r.field;Fc(e,o=>{var s,a;const u=(s=o.project.hasField[i])!==null&&s!==void 0?s:o.project.hasChannel[t];if(u&&eZ.has(o)){const l=(a=n.get("selections"))!==null&&a!==void 0?a:[];l.push(o.name),n.set("selections",l,!1),u.hasLegend=!0}})}const tZ="_translate_anchor",nZ="_translate_delta",ONe={has:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=su.has(t),o=r+tZ,{x:s,y:a}=t.project.hasChannel;let u=_c(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+$0,l))),n.push({name:o,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?", extent_x: "+(i?HC(e,gt):`slice(${s.signals.visual})`):"")+(a!==void 0?", extent_y: "+(i?HC(e,Tt):`slice(${a.signals.visual})`):"")+"}"}]},{name:r+nZ,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&yR(e,t,s,"width",n),a!==void 0&&yR(e,t,a,"height",n),n}};function yR(e,t,n,r,i){var o;const s=t.name,a=s+tZ,u=s+nZ,l=n.channel,c=su.has(t),f=i.filter(v=>v.name===n.signals[c?"data":"visual"])[0],d=e.getSizeSignalRef(r).signal,h=e.getScaleComponent(l),g=h.get("type"),p=c&&l===gt?"-":"",m=`${a}.extent_${l}`,y=`${p}${u}.${l} / `+(c?`${d}`:`span(${m})`),x=`${c?g==="log"?"panLog":g==="pow"?"panPow":"panLinear":"panLinear"}(${m}, ${y}`+(c&&g==="pow"?`, ${(o=h.get("exponent"))!==null&&o!==void 0?o:1}`:"")+")";f.on.push({events:{signal:u},update:c?x:`clampRange(${x}, 0, ${d})`})}const rZ="_zoom_anchor",iZ="_zoom_delta",TNe={has:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=su.has(t),o=r+iZ,{x:s,y:a}=t.project.hasChannel,u=Te(e.scaleName(gt)),l=Te(e.scaleName(Tt));let c=_c(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+$0,f))),n.push({name:r+rZ,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>!!f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&bR(e,t,s,"width",n),a!==void 0&&bR(e,t,a,"height",n),n}};function bR(e,t,n,r,i){var o;const s=t.name,a=n.channel,u=su.has(t),l=i.filter(b=>b.name===n.signals[u?"data":"visual"])[0],c=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(a),d=f.get("type"),h=u?HC(e,a):l.name,g=s+iZ,p=`${s}${rZ}.${a}`,y=`${u?d==="log"?"zoomLog":d==="pow"?"zoomPow":"zoomLinear":"zoomLinear"}(${h}, ${p}, ${g}`+(u&&d==="pow"?`, ${(o=f.get("exponent"))!==null&&o!==void 0?o:1}`:"")+")";l.on.push({events:{signal:g},update:u?y:`clampRange(${y}, 0, ${c})`})}const NNe=[kNe,QK,su,eZ,ONe,TNe,JK,ZK,DNe];function d_(e,t){for(const n of NNe)n.has(e)&&t(n)}function Zf(e,t=!0,n=E4e){if(ue(e)){const r=e.map(i=>Zf(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Td(e))return n(t?Ng(e):P7e(e));return t?n(JSON.stringify(e)):e}function RNe(e,t){return Fc(e,(n,r)=>{const i=n.name;let o=r.modifyExpr(e,n);t.push(...r.signals(e,n)),d_(n,s=>{s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(o=s.modifyExpr(e,n,o))}),t.push({name:i+HNe,on:[{events:{signal:n.name+Eo},update:`modify(${Te(n.name+Vl)}, ${o})`}]})}),EM(t)}function BNe(e,t){if(e.component.selection&&G(e.component.selection).length){const n=Te(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:_c("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return EM(t)}function LNe(e,t){let n=!1;return Fc(e,(r,i)=>{const o=r.name,s=Te(o+Vl);if(t.filter(u=>u.name===o).length===0){const u=r.resolve==="global"?"union":r.resolve,l=r.type==="multi"?", true)":")";t.push({name:r.name,update:`${uZ}(${s}, ${Te(u)}${l}`})}n=!0,i.topLevelSignals&&(t=i.topLevelSignals(e,r,t)),d_(r,u=>{u.topLevelSignals&&(t=u.topLevelSignals(e,r,t))})}),n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),EM(t)}function PNe(e,t){const n=[...t];return Fc(e,r=>{const i={name:r.name+Vl};if(r.init){const s=r.project.items.map(u=>oe(u,["signals"])),a=r.init.map(u=>Zf(u,!1));i.values=r.type==="interval"?[{unit:ws(e,{escape:!1}),fields:s,values:a}]:a.map(u=>({unit:ws(e,{escape:!1}),fields:s,values:u}))}n.filter(s=>s.name===r.name+Vl).length||n.push(i)}),n}function oZ(e,t){return Fc(e,(n,r)=>{t=r.marks?r.marks(e,n,t):t,d_(n,i=>{i.marks&&(t=i.marks(e,n,t))})}),t}function jNe(e,t){for(const n of e.children)yt(n)&&(t=oZ(n,t));return t}function INe(e,t){const n=t.selection,r=e.getSelectionComponent(n,ft(n));return{signal:bZ(r,t)}}function EM(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const $0="_brush",GC="_scale_trigger",zNe={signals:(e,t)=>{const n=t.name,r=n+n1,i=su.has(t),o=[],s=[],a=[];if(t.translate&&!i){const c=`!event.item || event.item.mark.name !== ${Te(n+$0)}`;sZ(t,(f,d)=>{var h;const g=$t((h=d.between[0].filter)!==null&&h!==void 0?h:d.between[0].filter=[]);return g.indexOf(c)<0&&g.push(c),f})}t.project.items.forEach((c,f)=>{const d=c.channel;if(d!==gt&&d!==Tt){H("Interval selections only support x and y encoding channels.");return}const h=t.init?t.init[f]:null,g=UNe(e,t,c,h),p=c.signals.data,m=c.signals.visual,y=Te(e.scaleName(d)),b=e.getScaleComponent(d).get("type"),x=ni(b)?"+":"";o.push(...g),s.push(p),a.push({scaleName:e.scaleName(d),expr:`(!isArray(${p}) || (${x}invert(${y}, ${m})[0] === ${x}${p}[0] && ${x}invert(${y}, ${m})[1] === ${x}${p}[1]))`})}),i||o.push({name:n+GC,value:{},on:[{events:a.map(c=>({scale:c.scaleName})),update:a.map(c=>c.expr).join(" && ")+` ? ${n+GC} : {}`}]});const u=t.init,l=`unit: ${ws(e)}, fields: ${r}, values`;return o.concat(Object.assign(Object.assign({name:n+Eo},u?{init:`{${l}: ${Zf(u)}}`}:{}),{on:[{events:[{signal:s.join(" || ")}],update:s.join(" && ")+` ? {${l}: [${s}]} : null`}]}))},modifyExpr:(e,t)=>t.name+Eo+", "+(t.resolve==="global"?"true":`{unit: ${ws(e)}}`),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i&&i.signals.visual,a=o&&o.signals.visual,u=`data(${Te(t.name+Vl)})`;if(su.has(t))return n;const l={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of G(l))l[m]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${ws(e)}`},l[m]),{value:0}];const c=t.mark,{fill:f,fillOpacity:d,cursor:h}=c,g=oe(c,["fill","fillOpacity","cursor"]),p=G(g).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:g[y]},{value:null}],m),{});return[{name:r+$0+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:l}},...n,{name:r+$0,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},l),p)}}]}};function UNe(e,t,n,r){const i=n.channel,o=n.signals.visual,s=n.signals.data,a=su.has(t),u=Te(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=p=>`scale(${u}, ${p})`,d=e.getSizeSignalRef(i===gt?"width":"height").signal,h=`${i}(unit)`,g=sZ(t,(p,m)=>[...p,{events:m.between[0],update:`[${h}, ${h}]`},{events:m,update:`[${o}[0], clamp(${h}, 0, ${d})]`}]);return g.push({events:{signal:t.name+GC},update:ni(c)?`[${f(`${s}[0]`)}, ${f(`${s}[1]`)}]`:"[0, 0]"}),a?[{name:s,on:[]}]:[Object.assign(Object.assign({name:o},r?{init:Zf(r,!0,f)}:{value:[]}),{on:g}),Object.assign(Object.assign({name:s},r?{init:Zf(r)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]})]}function sZ(e,t){return e.events.reduce((n,r)=>r.between?t(n,r):(H(`${r} is not an ordered event stream for interval selections.`),n),[])}function aZ(e,t){const n=t.name,r=n+n1,i=t.project,o="(item().isVoronoi ? datum.datum : datum)",s=i.items.map(l=>{const c=e.fieldDef(l.channel);return c&&c.bin?`[${o}[${Te(e.vgField(l.channel,{}))}], ${o}[${Te(e.vgField(l.channel,{binSuffix:"end"}))}]]`:`${o}[${Te(l.field)}]`}).join(", "),a=`unit: ${ws(e)}, fields: ${r}, values`,u=t.events;return[{name:n+Eo,on:u?[{events:u,update:`datum && item().mark.marktype !== 'group' ? {${a}: [${s}]} : null`,force:!0}]:[]}]}const qNe={signals:aZ,modifyExpr:(e,t)=>t.name+Eo+", "+(t.resolve==="global"?"null":`{unit: ${ws(e)}}`)},WNe={signals:aZ,modifyExpr:(e,t)=>t.name+Eo+", "+(t.resolve==="global"?"true":`{unit: ${ws(e)}}`)},Vl="_store",Eo="_tuple",HNe="_modify",uZ="vlSelectionResolve",YNe={single:WNe,multi:qNe,interval:zNe};function Fc(e,t){const n=e.component.selection;if(n){for(const r of Fa(n))if(t(r,YNe[r.type])===!0)break}}function GNe(e){let t=e.parent;for(;t&&!Si(t);)t=t.parent;return t}function ws(e,{escape:t}={escape:!0}){let n=t?Te(e.name):e.name;const r=GNe(e);if(r){const{facet:i}=r;for(const o of Yr)i[o]&&(n+=` + '__facet_${o}_' + (facet[${Te(r.vgField(o))}])`)}return n}function CM(e){let t=!1;return Fc(e,n=>{t=t||n.project.items.some(r=>r.field===Kf)}),t}const VNe="RawCode",XNe="Literal",KNe="Property",ZNe="Identifier",JNe="ArrayExpression",QNe="BinaryExpression",eRe="CallExpression",tRe="ConditionalExpression",nRe="LogicalExpression",rRe="MemberExpression",iRe="ObjectExpression",oRe="UnaryExpression";function qi(e){this.type=e}qi.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=sRe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function sRe(e){switch(e.type){case JNe:return e.elements;case QNe:case nRe:return[e.left,e.right];case eRe:return[e.callee].concat(e.arguments);case tRe:return[e.test,e.consequent,e.alternate];case rRe:return[e.object,e.property];case iRe:return e.properties;case KNe:return[e.key,e.value];case oRe:return[e.argument];case ZNe:case XNe:case VNe:default:return[]}}var Ho,ne,z,Dn,Ke,h_=1,r1=2,Xl=3,Su=4,g_=5,kc=6,ir=7,i1=8,aRe=9;Ho={};Ho[h_]="Boolean";Ho[r1]="<end>";Ho[Xl]="Identifier";Ho[Su]="Keyword";Ho[g_]="Null";Ho[kc]="Numeric";Ho[ir]="Punctuator";Ho[i1]="String";Ho[aRe]="RegularExpression";var uRe="ArrayExpression",lRe="BinaryExpression",cRe="CallExpression",fRe="ConditionalExpression",lZ="Identifier",dRe="Literal",hRe="LogicalExpression",gRe="MemberExpression",pRe="ObjectExpression",mRe="Property",yRe="UnaryExpression",on="Unexpected token %0",bRe="Unexpected number",vRe="Unexpected string",xRe="Unexpected identifier",_Re="Unexpected reserved word",$Re="Unexpected end of input",VC="Invalid regular expression",jw="Invalid regular expression: missing /",cZ="Octal literals are not allowed in strict mode.",wRe="Duplicate data property in object literal not allowed in strict mode",_n="ILLEGAL",jg="Disabled.",ARe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ERe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function p_(e,t){if(!e)throw new Error("ASSERT: "+t)}function ns(e){return e>=48&&e<=57}function SM(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function w0(e){return"01234567".indexOf(e)>=0}function CRe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Ig(e){return e===10||e===13||e===8232||e===8233}function o1(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&ARe.test(String.fromCharCode(e))}function dv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&ERe.test(String.fromCharCode(e))}var SRe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function fZ(){for(var e;z<Dn&&(e=ne.charCodeAt(z),CRe(e)||Ig(e));)++z}function XC(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)z<Dn&&SM(ne[z])?(r=ne[z++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ze({},on,_n);return String.fromCharCode(i)}function FRe(){var e,t,n,r;for(e=ne[z],t=0,e==="}"&&ze({},on,_n);z<Dn&&(e=ne[z++],!!SM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ze({},on,_n),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function dZ(){var e,t;for(e=ne.charCodeAt(z++),t=String.fromCharCode(e),e===92&&(ne.charCodeAt(z)!==117&&ze({},on,_n),++z,e=XC("u"),(!e||e==="\\"||!o1(e.charCodeAt(0)))&&ze({},on,_n),t=e);z<Dn&&(e=ne.charCodeAt(z),!!dv(e));)++z,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ne.charCodeAt(z)!==117&&ze({},on,_n),++z,e=XC("u"),(!e||e==="\\"||!dv(e.charCodeAt(0)))&&ze({},on,_n),t+=e);return t}function kRe(){var e,t;for(e=z++;z<Dn;){if(t=ne.charCodeAt(z),t===92)return z=e,dZ();if(dv(t))++z;else break}return ne.slice(e,z)}function DRe(){var e,t,n;return e=z,t=ne.charCodeAt(z)===92?dZ():kRe(),t.length===1?n=Xl:SRe.hasOwnProperty(t)?n=Su:t==="null"?n=g_:t==="true"||t==="false"?n=h_:n=Xl,{type:n,value:t,start:e,end:z}}function Iw(){var e=z,t=ne.charCodeAt(z),n,r=ne[z],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++z,{type:ir,value:String.fromCharCode(t),start:e,end:z};default:if(n=ne.charCodeAt(z+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return z+=2,{type:ir,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:z};case 33:case 61:return z+=2,ne.charCodeAt(z)===61&&++z,{type:ir,value:ne.slice(e,z),start:e,end:z}}}if(s=ne.substr(z,4),s===">>>=")return z+=4,{type:ir,value:s,start:e,end:z};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return z+=3,{type:ir,value:o,start:e,end:z};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return z+=2,{type:ir,value:i,start:e,end:z};if("<>=!+-*%&|^/".indexOf(r)>=0)return++z,{type:ir,value:r,start:e,end:z};ze({},on,_n)}function MRe(e){for(var t="";z<Dn&&SM(ne[z]);)t+=ne[z++];return t.length===0&&ze({},on,_n),o1(ne.charCodeAt(z))&&ze({},on,_n),{type:kc,value:parseInt("0x"+t,16),start:e,end:z}}function ORe(e){for(var t="0"+ne[z++];z<Dn&&w0(ne[z]);)t+=ne[z++];return(o1(ne.charCodeAt(z))||ns(ne.charCodeAt(z)))&&ze({},on,_n),{type:kc,value:parseInt(t,8),octal:!0,start:e,end:z}}function vR(){var e,t,n;if(n=ne[z],p_(ns(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=z,e="",n!=="."){if(e=ne[z++],n=ne[z],e==="0"){if(n==="x"||n==="X")return++z,MRe(t);if(w0(n))return ORe(t);n&&ns(n.charCodeAt(0))&&ze({},on,_n)}for(;ns(ne.charCodeAt(z));)e+=ne[z++];n=ne[z]}if(n==="."){for(e+=ne[z++];ns(ne.charCodeAt(z));)e+=ne[z++];n=ne[z]}if(n==="e"||n==="E")if(e+=ne[z++],n=ne[z],(n==="+"||n==="-")&&(e+=ne[z++]),ns(ne.charCodeAt(z)))for(;ns(ne.charCodeAt(z));)e+=ne[z++];else ze({},on,_n);return o1(ne.charCodeAt(z))&&ze({},on,_n),{type:kc,value:parseFloat(e),start:t,end:z}}function TRe(){var e="",t,n,r,i,o=!1;for(t=ne[z],p_(t==="'"||t==='"',"String literal must starts with a quote"),n=z,++z;z<Dn;)if(r=ne[z++],r===t){t="";break}else if(r==="\\")if(r=ne[z++],!r||!Ig(r.charCodeAt(0)))switch(r){case"u":case"x":ne[z]==="{"?(++z,e+=FRe()):e+=XC(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:w0(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),z<Dn&&w0(ne[z])&&(o=!0,i=i*8+"01234567".indexOf(ne[z++]),"0123".indexOf(r)>=0&&z<Dn&&w0(ne[z])&&(i=i*8+"01234567".indexOf(ne[z++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ne[z]===`
`&&++z;else{if(Ig(r.charCodeAt(0)))break;e+=r}return t!==""&&ze({},on,_n),{type:i1,value:e,octal:o,start:n,end:z}}function NRe(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(r,i){if(parseInt(i,16)<=1114111)return"x";ze({},VC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ze({},VC)}try{return new RegExp(e,t)}catch{return null}}function RRe(){var e,t,n,r,i;for(e=ne[z],p_(e==="/","Regular expression literal must start with a slash"),t=ne[z++],n=!1,r=!1;z<Dn;)if(e=ne[z++],t+=e,e==="\\")e=ne[z++],Ig(e.charCodeAt(0))&&ze({},jw),t+=e;else if(Ig(e.charCodeAt(0)))ze({},jw);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ze({},jw),i=t.substr(1,t.length-2),{value:i,literal:t}}function BRe(){var e,t,n;for(t="",n="";z<Dn&&(e=ne[z],!!dv(e.charCodeAt(0)));)++z,e==="\\"&&z<Dn?ze({},on,_n):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ze({},VC,n),{value:n,literal:t}}function LRe(){var e,t,n,r;return Ke=null,fZ(),e=z,t=RRe(),n=BRe(),r=NRe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:z}}function PRe(e){return e.type===Xl||e.type===Su||e.type===h_||e.type===g_}function hZ(){var e;return fZ(),z>=Dn?{type:r1,start:z,end:z}:(e=ne.charCodeAt(z),o1(e)?DRe():e===40||e===41||e===59?Iw():e===39||e===34?TRe():e===46?ns(ne.charCodeAt(z+1))?vR():Iw():ns(e)?vR():Iw())}function lr(){var e;return e=Ke,z=e.end,Ke=hZ(),z=e.end,e}function gZ(){var e;e=z,Ke=hZ(),z=e}function jRe(e){var t=new qi(uRe);return t.elements=e,t}function xR(e,t,n){var r=new qi(e==="||"||e==="&&"?hRe:lRe);return r.operator=e,r.left=t,r.right=n,r}function IRe(e,t){var n=new qi(cRe);return n.callee=e,n.arguments=t,n}function zRe(e,t,n){var r=new qi(fRe);return r.test=e,r.consequent=t,r.alternate=n,r}function FM(e){var t=new qi(lZ);return t.name=e,t}function Zh(e){var t=new qi(dRe);return t.value=e.value,t.raw=ne.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function _R(e,t,n){var r=new qi(gRe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function URe(e){var t=new qi(pRe);return t.properties=e,t}function $R(e,t,n){var r=new qi(mRe);return r.key=t,r.value=n,r.kind=e,r}function qRe(e,t){var n=new qi(yRe);return n.operator=e,n.argument=t,n.prefix=!0,n}function ze(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(o,s){return p_(s<r.length,"Message reference must be in range"),r[s]});throw n=new Error(i),n.index=z,n.description=i,n}function m_(e){e.type===r1&&ze(e,$Re),e.type===kc&&ze(e,bRe),e.type===i1&&ze(e,vRe),e.type===Xl&&ze(e,xRe),e.type===Su&&ze(e,_Re),ze(e,on,e.value)}function Mn(e){var t=lr();(t.type!==ir||t.value!==e)&&m_(t)}function at(e){return Ke.type===ir&&Ke.value===e}function zw(e){return Ke.type===Su&&Ke.value===e}function WRe(){var e=[];for(z=Ke.start,Mn("[");!at("]");)at(",")?(lr(),e.push(null)):(e.push(Kl()),at("]")||Mn(","));return lr(),jRe(e)}function wR(){var e;return z=Ke.start,e=lr(),e.type===i1||e.type===kc?(e.octal&&ze(e,cZ),Zh(e)):FM(e.value)}function HRe(){var e,t,n,r;if(z=Ke.start,e=Ke,e.type===Xl)return n=wR(),Mn(":"),r=Kl(),$R("init",n,r);if(e.type===r1||e.type===ir)m_(e);else return t=wR(),Mn(":"),r=Kl(),$R("init",t,r)}function YRe(){var e=[],t,n,r,i={},o=String;for(z=Ke.start,Mn("{");!at("}");)t=HRe(),t.key.type===lZ?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ze({},wRe):i[r]=!0,e.push(t),at("}")||Mn(",");return Mn("}"),URe(e)}function GRe(){var e;return Mn("("),e=kM(),Mn(")"),e}var VRe={if:1};function XRe(){var e,t,n;if(at("("))return GRe();if(at("["))return WRe();if(at("{"))return YRe();if(e=Ke.type,z=Ke.start,e===Xl||VRe[Ke.value])n=FM(lr().value);else if(e===i1||e===kc)Ke.octal&&ze(Ke,cZ),n=Zh(lr());else{if(e===Su)throw new Error(jg);e===h_?(t=lr(),t.value=t.value==="true",n=Zh(t)):e===g_?(t=lr(),t.value=null,n=Zh(t)):at("/")||at("/=")?(n=Zh(LRe()),gZ()):m_(lr())}return n}function KRe(){var e=[];if(Mn("("),!at(")"))for(;z<Dn&&(e.push(Kl()),!at(")"));)Mn(",");return Mn(")"),e}function ZRe(){var e;return z=Ke.start,e=lr(),PRe(e)||m_(e),FM(e.value)}function JRe(){return Mn("."),ZRe()}function QRe(){var e;return Mn("["),e=kM(),Mn("]"),e}function eBe(){var e,t,n;for(e=XRe();;)if(at("."))n=JRe(),e=_R(".",e,n);else if(at("("))t=KRe(),e=IRe(e,t);else if(at("["))n=QRe(),e=_R("[",e,n);else break;return e}function AR(){var e=eBe();if(Ke.type===ir&&(at("++")||at("--")))throw new Error(jg);return e}function ey(){var e,t;if(Ke.type!==ir&&Ke.type!==Su)t=AR();else{if(at("++")||at("--"))throw new Error(jg);if(at("+")||at("-")||at("~")||at("!"))e=lr(),t=ey(),t=qRe(e.value,t);else{if(zw("delete")||zw("void")||zw("typeof"))throw new Error(jg);t=AR()}}return t}function ER(e){var t=0;if(e.type!==ir&&e.type!==Su)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function tBe(){var e,t,n,r,i,o,s,a,u,l;if(e=Ke,u=ey(),r=Ke,i=ER(r),i===0)return u;for(r.prec=i,lr(),t=[e,Ke],s=ey(),o=[u,r,s];(i=ER(Ke))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),t.pop(),n=xR(a,u,s),o.push(n);r=lr(),r.prec=i,o.push(r),t.push(Ke),n=ey(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=xR(o[l-1].value,o[l-2],n),l-=2;return n}function Kl(){var e,t,n;return e=tBe(),at("?")&&(lr(),t=Kl(),Mn(":"),n=Kl(),e=zRe(e,t,n)),e}function kM(){var e=Kl();if(at(","))throw new Error(jg);return e}function nBe(e){ne=e,z=0,Dn=ne.length,Ke=null,gZ();var t=kM();if(Ke.type!==r1)throw new Error("Unexpect token after expression.");return t}function Bd(e,t,n){return e.fields=t||[],e.fname=n,e}function rBe(e){return e.length===1?iBe(e[0]):oBe(e)}const iBe=e=>function(t){return t[e]},oBe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Uw(e){throw Error(e)}function sBe(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||Uw("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&Uw("Access path missing closing bracket: "+e),r&&Uw("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function aBe(e,t,n){const r=sBe(e);return e=r.length===1?r[0]:e,Bd((n&&n.get||rBe)(r),[e],t||e)}aBe("id");Bd(e=>e,[],"identity");Bd(()=>0,[],"zero");Bd(()=>1,[],"one");Bd(()=>!0,[],"true");Bd(()=>!1,[],"false");function KC(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...KC(e.object)),t.push(...KC(e.property))),t)}function pZ(e){return e.object.type==="MemberExpression"?pZ(e.object):e.object.name==="datum"}function mZ(e){const t=nBe(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&pZ(r)&&n.add(KC(r).slice(1).join("."))}),n}class Ld extends Qe{constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=hv(this.model,this.filter,this),this._dependentFields=mZ(this.expr)}clone(){return new Ld(null,this.model,Se(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function uBe(e,t){var n;const r={},i=e.config.selection;for(const o of G(t??{})){const s=Se(t[o]),a=i[s.type],u=oe(a,["fields","encodings"]);for(const f in u)f==="encodings"&&s.fields||f==="fields"&&s.encodings||(f==="mark"&&(s[f]=Object.assign(Object.assign({},u[f]),s[f])),(s[f]===void 0||s[f]===!0)&&(s[f]=(n=u[f])!==null&&n!==void 0?n:s[f]));const l=ft(o),c=r[l]=Object.assign(Object.assign({},s),{name:l,events:Ce(s.on)?_c(s.on,"scope"):Se(s.on)});d_(c,f=>{f.has(c)&&f.parse&&f.parse(e,c,s,t[o])})}return r}function yZ(e,t,n,r="datum"){const i=[];function o(a){const u=ft(a),l=e.getSelectionComponent(u,a),c=Te(u+Vl);if(l.project.timeUnit){const f=n??e.component.data.raw,d=l.project.timeUnit.clone();f.parent?d.insertAsParentOf(f):f.parent=d}return l.empty!=="none"&&i.push(c),`vlSelectionTest(${c}, ${r}`+(l.resolve==="global"?")":`, ${Te(l.resolve)})`)}const s=x0(t,o);return(i.length?"!("+i.map(a=>`length(data(${a}))`).join(" || ")+") || ":"")+`(${s})`}function bZ(e,t){const n=t.encoding;let r=t.field;if(!n&&!r)r=e.project.items[0].field,e.project.items.length>1&&H(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Te(r)}.`);else if(n&&!r){const i=e.project.items.filter(o=>o.channel===n);!i.length||i.length>1?(r=e.project.items[0].field,H((i.length?"Multiple ":"No ")+`matching ${Te(n)} encoding found for selection ${Te(t.selection)}. Using "field": ${Te(r)}.`)):r=i[0].field}return`${e.name}[${Te(r)}]`}function lBe(e,t){Fc(e,n=>{const r=n.name,i=e.getName(`lookup_${r}`);e.component.data.outputNodes[i]=n.materialized=new Wn(new Ld(t,e,{selection:r}),i,"lookup",e.component.data.outputNodeRefCounts)})}function hv(e,t,n){return x0(t,r=>Ce(r)?r:K7e(r)?yZ(e,r.selection,n):IX(r))}function cBe(e,t){if(e)return ue(e)&&!ra(e)?e.map(n=>fK(n,t)).join(", "):e}function qw(e,t,n,r){var i,o,s;e.encode=(i=e.encode)!==null&&i!==void 0?i:{},e.encode[t]=(o=e.encode[t])!==null&&o!==void 0?o:{},e.encode[t].update=(s=e.encode[t].update)!==null&&s!==void 0?s:{},e.encode[t].update[n]=r}function Jh(e,t,n,r={header:!1}){var i,o;const s=e.combine(),{disable:a,orient:u,scale:l,labelExpr:c,title:f,zindex:d}=s,h=oe(s,["disable","orient","scale","labelExpr","title","zindex"]);if(!a){for(const g in h){const p=V4e[g],m=h[g];if(p&&p!==t&&p!=="both")delete h[g];else if(O6(m)){const{condition:y}=m,b=oe(m,["condition"]),x=$t(y),v=RN[g];if(v){const{vgProp:_,part:w}=v,$=[...x.map(A=>{const{test:M}=A,k=oe(A,["test"]);return Object.assign({test:hv(null,M)},k)}),b];qw(h,w,_,$),delete h[g]}else if(v===null){const _={signal:x.map(w=>{const{test:$}=w,A=oe(w,["test"]);return`${hv(null,$)} ? ${QN(A)} : `}).join("")+QN(b)};h[g]=_}}else if(ge(m)){const y=RN[g];if(y){const{vgProp:b,part:x}=y;qw(h,x,b,m),delete h[g]}}}if(t==="grid"){if(!h.grid)return;if(h.encode){const{grid:g}=h.encode;h.encode=Object.assign({},g?{grid:g}:{}),tt(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:l,orient:u},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ct(d,0)})}else{if(!r.header&&e.mainExtracted)return;if(c!==void 0){let p=c;!((o=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||o===void 0)&&o.update&&ge(h.encode.labels.update.text)&&(p=Gf(c,"datum.label",h.encode.labels.update.text.signal)),qw(h,"labels","text",{signal:p})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(const p of iX)e.hasAxisPart(p)||delete h.encode[p];tt(h.encode)&&delete h.encode}const g=cBe(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:l,orient:u,grid:!1},g?{title:g}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:Ct(d,0)})}}}function vZ(e){const{axes:t}=e.component,n=[];for(const r of ti)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function fBe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Jh(i,"grid",t)),...r.map(i=>Jh(i,"grid",t)),...n.map(i=>Jh(i,"main",t)),...r.map(i=>Jh(i,"main",t))].filter(i=>i)}const xZ={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},_Z={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},dBe=G(xZ),hBe=G(_Z);function CR(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...G(s),...G(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${o}" ? ${Rg(s[c])} : ${Rg(a[c])}`};return l}return t[i]})])}function gBe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:u9e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=ge(n)?"axisOrient":"axis"+zx(n),a=[...i,...i.map(l=>o+l.substr(4))],u=["axis",s,o];return{vlOnlyAxisConfig:CR(a,r,e,n),vgAxisConfig:CR(u,r,e,n),axisConfigStyle:pBe([...u,...a],r)}}function pBe(e,t){var n;const r=[{}];for(const i of e){let o=(n=t[i])===null||n===void 0?void 0:n.style;if(o){o=$t(o);for(const s of o)r.push(t.style[s])}}return Object.assign.apply(null,r)}function ZC(e,t,n,r={}){var i;const o=mK(e,n,t.style);if(o!==void 0)return{configFrom:"style",configValue:o};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=r[s])===null||i===void 0?void 0:i[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const SR={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return ZX(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return JX(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var r;return J(e)&&In(e.bin)?!1:(r=t.grid)!==null&&r!==void 0?r:mBe(n,e)},gridScale:({model:e,channel:t})=>yBe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||wZ(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||$Z(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var r;return(r=e.labelFlush)!==null&&r!==void 0?r:vBe(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var r;return(r=e.labelOverlap)!==null&&r!==void 0?r:xBe(t.type,n)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var o;const s=e==="x"?"width":e==="y"?"height":void 0,a=s?t.getSizeSignalRef(s):void 0;return(o=n.tickCount)!==null&&o!==void 0?o:$Be({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=AZ(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return bK(i?[JN(i)]:[],J(s)?[JN(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>wBe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var r;return(r=e.zindex)!==null&&r!==void 0?r:ABe(n,t)}};function mBe(e,t){return!xr(e)&&J(t)&&!rt(t==null?void 0:t.bin)}function yBe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function bBe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return ge(o)?o:Jb(o);{const{configValue:s}=ZC("labelAngle",e.config,t==null?void 0:t.style,i);return s!==void 0?Jb(s):n===gt&&ce([Z6,K6],r.type)?270:void 0}}function JC(e){return`(((${e.signal} % 360) + 360) % 360)`}function $Z(e,t,n,r){if(e!==void 0)if(n==="x"){if(ge(e)){const i=JC(e),o=ge(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ge(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ge(e)){const i=JC(e),o=ge(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(ge(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function wZ(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(ge(e)){const s=JC(e),a=ge(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?"("+s+" + 90)":s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(ge(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function vBe(e,t){if(t==="x"&&ce(["quantitative","temporal"],e))return!0}function xBe(e,t){if(e!=="nominal")return t==="log"?"greedy":!0}function _Be(e){return e==="x"?"bottom":"left"}function $Be({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!xr(t)&&t!=="log"){if(J(e)){if(rt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ce(["month","hours","day","quarter"],(i=Vn(e.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function AZ(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return vK(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function wBe(e,t){const n=e.values;if(ue(n))return hK(t,n);if(ge(n))return n}function ABe(e,t){return e==="rect"&&sK(t)?1:0}class Jf extends Qe{constructor(t,n){super(t),this.transform=n,this._dependentFields=mZ(this.transform.calculate)}clone(){return new Jf(null,Se(this.transform))}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(sM(r)&&nK(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,u=a.map((l,c)=>`${IX({field:o,timeUnit:s,equal:l})} ? ${c} : `).join("")+a.length;t=new Jf(t,{calculate:u,as:Qf(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Re(this.transform)}`}}function Qf(e,t,n){return V(e,Object.assign({prefix:t,suffix:"sort_index"},n??{}))}function y_(e,t){return ce(["top","bottom"],t)?"column":ce(["left","right"],t)||e==="row"?"row":"column"}function ed(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ct(((t==null?void 0:t.header)||{})[e],i[e],n.header[e])}function b_(e,t,n,r){const i={};for(const o of e){const s=ed(o,t,n,r);s!==void 0&&(i[o]=s)}return i}const DM=["row","column"],MM=["header","footer"];function EBe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=b_(["titleAnchor","titleAngle","titleOrient"],i,r,t),u=y_(t,a),l=Jb(s);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),CZ(l,u)),EZ(u,l,o)),SZ(r,i,t,dBe,xZ))}}function EZ(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=wZ(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function CZ(e,t){const n=$Z(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function CBe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of MM)if(n[i])for(const o of n[i]){const s=FBe(e,t,i,n,o);s!=null&&r.push(s)}return r}function SBe(e,t){var n;const{sort:r}=e;return co(r)?{field:V(r,{expr:"datum"}),order:(n=r.order)!==null&&n!==void 0?n:"ascending"}:ue(r)?{field:Qf(e,t,{expr:"datum"}),order:"ascending"}:{field:V(e,{expr:"datum"}),order:r??"ascending"}}function QC(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:u}=b_(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e,n,t),l=eM({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=y_(t,a);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?Gf(Gf(u,"datum.label",l),"datum.value",V(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),CZ(o,c)),EZ(c,o,s)),SZ(n,e,t,hBe,_Z))}function FBe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=b_(["labelOrient"],s,a,t);(t==="row"&&!ce(["top","bottom"],f)||t==="column"&&!ce(["left","right"],f))&&(o=QC(s,t,a))}const u=Si(e)&&!Jp(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(o||c){const f=t==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:SBe(s,t)}:{}),c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),c?{axes:l}:{})}}return null}const kBe={column:{start:0,end:1},row:{start:1,end:0}};function DBe(e,t){return kBe[t][e]}function MBe(e,t){const n={};for(const r of Yr){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=b_(["titleAnchor","titleOrient"],i.facetFieldDef,t,r),a=y_(r,s),u=DBe(o,a);u!==void 0&&(n[a]=u)}}return tt(n)?void 0:n}function SZ(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=ed(s,t,e,n);a!==void 0&&(o[i[s]]=a)}return o}function OM(e){return[...lm(e,"width"),...lm(e,"height"),...lm(e,"childWidth"),...lm(e,"childHeight")]}function lm(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(xr(s)&&Eu(a)){const u=e.scaleName(n);return Si(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[FR(u,a)]:[FR(u,a),{name:i,update:FZ(u,o,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=qC(e.config.view,o?"width":"height"),u=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function FR(e,t){return{name:e+"_step",value:t.step}}function FZ(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Ct(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${s}, ${o}) * ${e}_step`}function kZ(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function DZ(e,t){return G(e).reduce((n,r)=>{const i=e[r];return Object.assign(Object.assign({},n),t1(t,i,r,o=>ge(o)?o:{value:o.value}))},{})}function OBe(e,t){if(Id(t)||Si(t))return"shared";if(LM(t))return $o(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function TM(e,t){const n=e.scale[t],r=$o(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&H(p7e(t)),"independent"):e[r][t]||"shared"}const TBe=Object.assign(Object.assign({},uTe),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),MZ=G(TBe);class NBe extends qs{}const kR={symbols:RBe,gradient:BBe,labels:LBe,entries:PBe};function RBe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){var s,a,u,l,c;if(o!=="symbol")return;const{markDef:f,encoding:d,config:h,mark:g}=n,p=f.filled&&g!=="trail";let m=Object.assign(Object.assign({},z9e({},n,t8e)),VK(n,{filled:p}));const y=(s=OZ(d.opacity))!==null&&s!==void 0?s:f.opacity;if(m.fill){if(r==="fill"||p&&r===br)delete m.fill;else if(m.fill.field)i.get("symbolFillColor")?delete m.fill:(m.fill=_t((a=h.legend.symbolBaseFillColor)!==null&&a!==void 0?a:"black"),m.fillOpacity=_t(y??1));else if(ue(m.fill)){const b=(c=(l=e3((u=d.fill)!==null&&u!==void 0?u:d.color))!==null&&l!==void 0?l:f.fill)!==null&&c!==void 0?c:p&&f.color;b&&(m.fill=_t(b))}}if(m.stroke){if(r==="stroke"||!p&&r===br)delete m.stroke;else if(m.stroke.field)delete m.stroke;else if(ue(m.stroke)){const b=Ct(e3(d.stroke||d.color),f.stroke,p?f.color:void 0);b&&(m.stroke={value:b})}}if(r!==Us){const b=J(t)&&NZ(n,i,t);b?m.opacity=[Object.assign({test:b},_t(y??1)),_t(h.legend.unselectedOpacity)]:y&&(m.opacity=_t(y))}return m=Object.assign(Object.assign({},m),e),tt(m)?void 0:m}function BBe(e,{model:t,legendType:n}){if(n!=="gradient")return;let r={};const i=OZ(t.encoding.opacity)||t.markDef.opacity;return i&&(r.opacity=_t(i)),r=Object.assign(Object.assign({},r),e),tt(r)?void 0:r}function LBe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=J(t)?NZ(n,i,t):void 0,u=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o,f=Yl(c)?tM({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:s}):void 0,d=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),f?{text:f}:{}),e);return tt(d)?void 0:d}function PBe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}function OZ(e){return TZ(e,(t,n)=>Math.max(t,n.value))}function e3(e){return TZ(e,(t,n)=>Ct(t,n.value))}function TZ(e,t){if(M9e(e))return $t(e.condition).reduce(t,e.value);if(Os(e))return e.value}function NZ(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Te(n.field);return r.map(o=>`(!length(data(${Te(ft(o)+Vl)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const DR={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return ZX(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return JX(r,t,n)},gradientLength:e=>{var t,n;const{legend:r,legendConfig:i}=e;return(n=(t=r.gradientLength)!==null&&t!==void 0?t:i.gradientLength)!==null&&n!==void 0?n:HBe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var r,i;return(i=(r=e.labelOverlap)!==null&&r!==void 0?r:t.labelOverlap)!==null&&i!==void 0?i:YBe(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>{var i;return(i=e.symbolType)!==null&&i!==void 0?i:IBe(t.type,n,r.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>_l(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(cf(n)&&wi(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>jBe(t,e)};function jBe(e,t){const n=e.values;if(ue(n))return hK(t,n);if(ge(n))return n}function IBe(e,t,n,r){var i;if(t!=="shape"){const o=(i=e3(n))!==null&&i!==void 0?i:r;if(o)return o}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function zBe(e){const{legend:t}=e;return Ct(t.type,UBe(e))}function UBe({channel:e,timeUnit:t,scaleType:n}){if(cf(e)){if(ce(["quarter","month","day"],t))return"symbol";if(wi(n))return"gradient"}return"symbol"}function qBe({legendConfig:e,legendType:t,orient:n,legend:r}){var i,o;return(o=(i=r.direction)!==null&&i!==void 0?i:e[t?"gradientDirection":"symbolDirection"])!==null&&o!==void 0?o:WBe(n,t)}function WBe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function HBe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(wi(i))return n==="horizontal"?r==="top"||r==="bottom"?MR(t,"width",s,o):s:MR(t,"height",u,a)}function MR(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function YBe(e){if(ce(["quantile","threshold","log"],e))return"greedy"}function RZ(e){const t=yt(e)?GBe(e):ZBe(e);return e.component.legends=t,t}function GBe(e){const{encoding:t}=e,n={};for(const r of[br,...NK]){const i=Mt(t[r]);!i||!e.getScaleComponent(r)||r===vr&&J(i)&&i.type===Rd||(n[r]=KBe(e,r))}return n}function VBe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function XBe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function KBe(e,t){var n,r,i;let o=e.legend(t);const{markDef:s,encoding:a,config:u}=e,l=u.legend,c=new NBe({},VBe(e,t));MNe(e,t,c);const f=o!==void 0?!o:l.disable;if(c.set("disable",f,o!==void 0),f)return c;o=o||{};const d=e.getScaleComponent(t).get("type"),h=Mt(a[t]),g=J(h)?(n=Vn(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,p=o.orient||u.legend.orient||"right",m=zBe({legend:o,channel:t,timeUnit:g,scaleType:d}),y=qBe({legend:o,legendType:m,orient:p,legendConfig:l}),b={legend:o,channel:t,model:e,markDef:s,encoding:a,fieldOrDatumDef:h,legendConfig:l,config:u,scaleType:d,orient:p,legendType:m,direction:y};for(const $ of MZ){const A=$ in DR?DR[$](b):o[$];if(A!==void 0){const M=XBe(A,$,o,e.fieldDef(t));(M||u.legend[$]===void 0)&&c.set($,A,M)}}const x=(r=o==null?void 0:o.encoding)!==null&&r!==void 0?r:{},v=c.get("selections"),_={},w={fieldOrDatumDef:h,model:e,channel:t,legendCmpt:c,legendType:m};for(const $ of["labels","legend","title","symbols","gradient","entries"]){const A=DZ((i=x[$])!==null&&i!==void 0?i:{},e),M=$ in kR?kR[$](A,w):A;M!==void 0&&!tt(M)&&(_[$]=Object.assign(Object.assign(Object.assign({},v!=null&&v.length&&J(h)?{name:`${ft(h.field)}_legend_${$}`}:{}),v!=null&&v.length?{interactive:!!v}:{}),{update:M}))}return tt(_)||c.set("encode",_,!!(o!=null&&o.encoding)),c}function ZBe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){RZ(r);for(const i of G(r.component.legends))n.legend[i]=TM(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=BZ(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of G(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function BZ(e,t){var n,r,i,o;if(!e)return t.clone();const s=e.getWithExplicit("orient"),a=t.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;let u=!1;for(const l of MZ){const c=iu(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return JBe(f,d);case"title":return xK(f,d);case"type":return u=!0,wr("symbol")}return c_(f,d,l,"legend")});e.setWithExplicit(l,c)}return u&&(!((r=(n=e.implicit)===null||n===void 0?void 0:n.encode)===null||r===void 0)&&r.gradient&&LC(e.implicit,["encode","gradient"]),!((o=(i=e.explicit)===null||i===void 0?void 0:i.encode)===null||o===void 0)&&o.gradient&&LC(e.explicit,["encode","gradient"])),e}function JBe(e,t){return t.value==="circle"?t:e}function OR(e,t,n,r){var i,o,s;e.encode=(i=e.encode)!==null&&i!==void 0?i:{},e.encode[t]=(o=e.encode[t])!==null&&o!==void 0?o:{},e.encode[t].update=(s=e.encode[t].update)!==null&&s!==void 0?s:{},e.encode[t].update[n]=r}function LZ(e){const t=e.component.legends,n={};for(const i of G(t)){const o=e.getScaleComponent(i),s=ct(o.get("domains"));if(n[s])for(const a of n[s])BZ(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return Fa(n).flat().map(i=>QBe(i,e.config)).filter(i=>i!==void 0)}function QBe(e,t){var n,r,i;const o=e.combine(),{disable:s,labelExpr:a,selections:u}=o,l=oe(o,["disable","labelExpr","selections"]);if(!s){if(t.aria===!1&&l.aria==null&&(l.aria=!1),!((n=l.encode)===null||n===void 0)&&n.symbols){const c=l.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!l.stroke&&(c.stroke={value:"transparent"});for(const f of NK)l[f]&&delete c[f]}if(l.title||delete l.title,a!==void 0){let c=a;!((i=(r=l.encode)===null||r===void 0?void 0:r.labels)===null||i===void 0)&&i.update&&ge(l.encode.labels.update.text)&&(c=Gf(a,"datum.label",l.encode.labels.update.text.signal)),OR(l,"labels","text",{signal:c})}for(const c in l){const f=l[c];if(ge(f)){const d=sTe[c];if(d){const{vgProp:h,part:g}=d;OR(l,g,h,f),delete l[c]}}}return l}}function eLe(e){return Id(e)||LM(e)?tLe(e):PZ(e)}function tLe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),PZ(e))}function PZ(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const u=ge(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return ce(s,u)||s.push(u),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const nLe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class jZ extends qs{constructor(t,n,r,i){super(Object.assign({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function IZ(e){e.component.projection=yt(e)?rLe(e):sLe(e)}function rLe(e){var t;if(e.hasProjection){const n=e.specifiedProjection,r=!(n&&(n.scale!=null||n.translate!=null)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,o=r?iLe(e):void 0;return new jZ(e.projectionName(!0),Object.assign(Object.assign({},(t=e.config.projection)!==null&&t!==void 0?t:{}),n??{}),i,o)}}function iLe(e){const t=[],{encoding:n}=e;for(const r of[[Io,jo],[ei,Ui]])(Mt(n[r[0]])||Mt(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(vr)&&e.typedFieldDef(vr).type===Rd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(yn)),t}function oLe(e,t){const n=JV(nLe,i=>!!(!ll(e.explicit,i)&&!ll(t.explicit,i)||ll(e.explicit,i)&&ll(t.explicit,i)&&ct(e.get(i))===ct(t.get(i))));if(ct(e.size)===ct(t.size)){if(n)return e;if(ct(e.explicit)===ct({}))return t;if(ct(t.explicit)===ct({}))return e}return null}function sLe(e){if(e.children.length===0)return;let t;for(const r of e.children)IZ(r);const n=JV(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=oLe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new jZ(r,t.specifiedProjection,t.size,Se(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function aLe(e,t,n,r){var i,o;if(e1(t,n)){const s=yt(e)?(o=(i=e.axis(n))!==null&&i!==void 0?i:e.legend(n))!==null&&o!==void 0?o:{}:{},a=V(t,{expr:"datum"}),u=V(t,{expr:"datum",binSuffix:"end"});return{formulaAs:V(t,{binSuffix:"range",forAs:!0}),formula:n_(a,u,s.format,s.formatType,r)}}return{}}function zZ(e,t){return`${$X(e)}_${t}`}function uLe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function NM(e,t,n){var r;const i=(r=s_(n,void 0))!==null&&r!==void 0?r:{},o=zZ(i,t);return e.getName(`${o}_bins`)}function lLe(e){return"as"in e}function TR(e,t,n){let r,i;lLe(e)?r=Ce(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[V(e,{forAs:!0}),V(e,{binSuffix:"end",forAs:!0})];const o=Object.assign({},s_(t,void 0)),s=zZ(o,e.field),{signal:a,extentSignal:u}=uLe(n,s);if(e_(o.extent)){const c=o.extent,f=c.selection;i=bZ(n.getSelectionComponent(ft(f),f),c),delete o.extent}const l=Object.assign(Object.assign(Object.assign({bin:o,field:e.field,as:[r]},a?{signal:a}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:s,binComponent:l}}class ho extends Qe{constructor(t,n){super(t),this.bins=n}clone(){return new ho(null,Se(this.bins))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Br(o)&&rt(o.bin)){const{key:a,binComponent:u}=TR(o,o.bin,n);i[a]=Object.assign(Object.assign(Object.assign({},u),i[a]),aLe(n,o,s,n.config))}return i},{});return tt(r)?null:new ho(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=TR(n,n.bin,r);return new ho(t,{[i]:o})}merge(t,n){for(const r of G(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=va([...this.bins[r].as,...t.bins[r].as],Re)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Fa(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Fa(this.bins).map(t=>t.field))}hash(){return`Bin ${Re(this.bins)}`}assemble(){return Fa(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,o=t.bin,{extent:s}=o,a=oe(o,["extent"]),u=Object.assign(Object.assign(Object.assign({type:"bin",field:tu(t.field),as:r,signal:t.signal},e_(s)?{extent:null}:{extent:s}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!s&&t.extentSignal&&(n.push({type:"extent",field:tu(t.field),signal:t.extentSignal}),u.extent={signal:t.extentSignal}),n.push(u);for(const l of i)for(let c=0;c<2;c++)n.push({type:"formula",expr:V({field:r[c]},{expr:"datum"}),as:l[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}class td extends Qe{constructor(t){super(null),t=t??{name:"source"};let n;if(wl(t)||(n=t.format?Object.assign({},xs(t.format,["parse"])):{}),uv(t))this._data={values:t.values};else if(Lg(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];ce(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else WK(t)?this._data={values:[{type:"Sphere"}]}:(UK(t)||wl(t))&&(this._data={});this._generator=wl(t),t.name&&(this._name=t.name),n&&!tt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}function t3(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return console.error("Dataflow graph is inconsistent.",t,n),!1;if(!t3(t.children))return!1}return!0}class s1 extends Qe{constructor(t,n){super(t),this.params=n}clone(){return new s1(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Re(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class a1 extends Qe{constructor(t,n){super(t),this.params=n}clone(){return new a1(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([(t=this.params.as)!==null&&t!==void 0?t:"data"])}hash(){return`Hash ${Re(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}function v_(e){return e instanceof td||e instanceof s1||e instanceof a1}class UZ{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}}class Ws extends UZ{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:t,mutatedFlag:n}){t&&this.setContinue(),n&&this.setMutated()}reset(){}optimizeNextFromLeaves(t){if(v_(t))return!1;const n=t.parent,{continueFlag:r}=this.run(t);return r&&this.optimizeNextFromLeaves(n),this.mutatedFlag}}class RM extends UZ{}function cLe(e,t,n,r){const i=yt(r)?r.encoding[qo(t)]:void 0;if(Br(n)&&yt(r)&&rM(t,n,i,r.stack,r.markDef,r.config))e.add(V(n,{})),e.add(V(n,{suffix:"end"})),n.bin&&e1(n,t)&&e.add(V(n,{binSuffix:"range"}));else if(v8e(t)){const o=b8e(t);e.add(r.getName(o))}else e.add(V(n));return e}function fLe(e,t){var n;for(const r of G(t)){const i=t[r];for(const o of G(i))r in e?e[r][o]=new Set([...(n=e[r][o])!==null&&n!==void 0?n:[],...i[o]]):e[r]={[o]:i[o]}}}class Ci extends Qe{constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}clone(){return new Ci(null,new Set(this.dimensions),Se(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{var u,l,c,f;const{aggregate:d,field:h}=s;if(d)if(d==="count")i["*"]=(u=i["*"])!==null&&u!==void 0?u:{},i["*"].count=new Set([V(s,{forAs:!0})]);else{if(nu(d)||Ec(d)){const g=nu(d)?"argmin":"argmax",p=d[g];i[p]=(l=i[p])!==null&&l!==void 0?l:{},i[p][g]=new Set([V({op:g,field:p},{forAs:!0})])}else i[h]=(c=i[h])!==null&&c!==void 0?c:{},i[h][d]=new Set([V(s,{forAs:!0})]);Au(a)&&n.scaleDomain(a)==="unaggregated"&&(i[h]=(f=i[h])!==null&&f!==void 0?f:{},i[h].min=new Set([V({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([V({field:h,aggregate:"max"},{forAs:!0})]))}else cLe(o,a,s,n)}),o.size+G(i).length===0)?null:new Ci(t,o,i)}static makeFromTransform(t,n){var r,i,o;const s=new Set,a={};for(const u of n.aggregate){const{op:l,field:c,as:f}=u;l&&(l==="count"?(a["*"]=(r=a["*"])!==null&&r!==void 0?r:{},a["*"].count=new Set([f||V(u,{forAs:!0})])):(a[c]=(i=a[c])!==null&&i!==void 0?i:{},a[c][l]=new Set([f||V(u,{forAs:!0})])))}for(const u of(o=n.groupby)!==null&&o!==void 0?o:[])s.add(u);return s.size+G(a).length===0?null:new Ci(t,s,a)}merge(t){return z4e(this.dimensions,t.dimensions)?(fLe(this.measures,t.measures),!0):(M7e("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...G(this.measures)])}producedFields(){const t=new Set;for(const n of G(this.measures))for(const r of G(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Re({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of G(this.measures))for(const s of G(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:tu(o));return{type:"aggregate",groupby:[...this.dimensions].map(tu),ops:t,fields:n,as:r}}}class Pd extends Qe{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of Yr){const s=n.facet[o];if(s){const{bin:a,sort:u}=s;this[o]=Object.assign({name:n.getName(`${o}_domain`),fields:[V(s),...rt(a)?[V(s,{binSuffix:"end"})]:[]]},co(u)?{sortField:u}:ue(u)?{sortIndexField:Qf(s,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of Yr)this[n]&&(t+=` ${n.charAt(0)}:${Re(this[n])}`);return t}get fields(){var t;const n=[];for(const r of Yr)!((t=this[r])===null||t===void 0)&&t.fields&&n.push(...this[r].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of Yr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of ti){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(xr(i)&&Eu(o)){const s=x_(this.childModel,n),a=BM(s);a?t[n]=a:H(`Unknown field for ${n}. Cannot calculate view size.`)}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x"}[t],o=[],s=[],a=[];r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=r_,field:f}=u;o.push(f),s.push(c),a.push(V(u,{forAs:!0}))}else l&&(o.push(l),s.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:s,as:a}:{})]}}assembleFacetHeaderData(t){var n,r;const{columns:i}=this.model.layout,{layoutHeaders:o}=this.model.component,s=[],a={};for(const c of DM){for(const f of MM){const d=(n=o[c]&&o[c][f])!==null&&n!==void 0?n:[];for(const h of d)if(((r=h.axes)===null||r===void 0?void 0:r.length)>0){a[c]=!0;break}}if(a[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?i?{signal:`ceil(${f} / ${i})`}:1:i?{signal:`min(${f}, ${i})`}:{signal:f};s.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:u,column:l}=a;return(u||l)&&s.unshift(this.assembleRowColumnHeaderData("facet",null,t)),s}assemble(){var t,n;const r=[];let i=null;const o=this.getChildIndependentFieldsWithStep(),{column:s,row:a,facet:u}=this;if(s&&a&&(o.x||o.y)){i=`cross_${this.column.name}_${this.row.name}`;const l=[].concat((t=o.x)!==null&&t!==void 0?t:[],(n=o.y)!==null&&n!==void 0?n:[]),c=l.map(()=>"distinct");r.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:c}]})}for(const l of[$s,_s])this[l]&&r.push(this.assembleRowColumnHeaderData(l,i,o));if(u){const l=this.assembleFacetHeaderData(o);l&&r.push(...l)}return r}}function NR(e){return e[0]==="'"&&e[e.length-1]==="'"||e[0]==='"'&&e[e.length-1]==='"'?e.slice(1,-1):e}function dLe(e,t){const n=nX(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.indexOf("date:")===0){const r=NR(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.indexOf("utc:")===0){const r=NR(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return H(q8e(t)),null}function hLe(e){const t={};return Zm(e.filter,n=>{var r;if(jX(n)){let i=null;Y6(n)?i=n.equal:G6(n)?i=n.range[0]:V6(n)&&(i=((r=n.oneOf)!==null&&r!==void 0?r:n.in)[0]),i&&(Td(i)?t[n.field]="date":Et(i)?t[n.field]="number":Ce(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function gLe(e){const t={};function n(r){a_(r)?t[r.field]="date":r.type==="quantitative"&&h8e(r.aggregate)?t[r.field]="number":Tg(r.field)>1?r.field in t||(t[r.field]="flatten"):sM(r)&&co(r.sort)&&Tg(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((yt(e)||Si(e))&&e.forEachFieldDef((r,i)=>{if(Br(r))n(r);else{const o=Sc(i),s=e.fieldDef(o);n(Object.assign(Object.assign({},r),{type:s.type}))}}),yt(e)){const{mark:r,markDef:i,encoding:o}=e;if(Ac(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];J(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function pLe(e){const t={};if(yt(e)&&e.component.selection)for(const n of G(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Tg(i.field)>1&&(t[i.field]="flatten")}return t}class $n extends Qe{constructor(t,n){super(t),this._parse=n}clone(){return new $n(null,Se(this._parse))}hash(){return`Parse ${Re(this._parse)}`}static makeExplicit(t,n,r){let i={};const o=n.data;return!wl(o)&&o&&o.format&&o.format.parse&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of G(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:H(HN(a,r[a],u.value)))}for(const a of G(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:H(HN(a,n[a],u)))}const o=new qs(n,r);i.copyAll(o);const s={};for(const a of G(o.combine())){const u=o.get(a);u!==null&&(s[a]=u)}return G(s).length===0||i.parseNothing?null:new $n(t,s)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of G(this._parse)){const r=this._parse[n];Tg(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(G(this._parse))}dependentFields(){return new Set(G(this._parse))}assembleTransforms(t=!1){return G(this._parse).filter(n=>t?Tg(n)>1:!0).map(n=>{const r=dLe(n,this._parse[n]);return r?{type:"formula",expr:r,as:rX(n)}:null}).filter(n=>n!==null)}}class au extends Qe{clone(){return new au(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Kf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Kf}}}class Dc extends Qe{constructor(t,n){super(t),this.transform=n}clone(){return new Dc(null,Se(this.transform))}addDimensions(t){this.transform.groupby=va(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:V(t)}hash(){return`JoinAggregateTransform ${Re(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}}function mLe(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=V(r);return i&&t.push(i),t},[])}function yLe(e){return ue(e)&&e.every(t=>Ce(t))&&e.length>1}class As extends Qe{constructor(t,n){super(t),this._stack=n}clone(){return new As(null,Se(this._stack))}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Ct(f.order,"ascending"));const l={field:a,order:u};let c;return yLe(o)?c=o:Ce(o)?c=[o,o+"_end"]:c=[n.stack+"_start",n.stack+"_end"],new As(t,{stackField:r,groupby:i,offset:s,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannel:o,fieldChannel:s,offset:a,impute:u}=r;let l;if(o){const h=i[o];l=wo(h)}const c=mLe(n),f=n.encoding.order;let d;return ue(f)||J(f)?d=yK(f):d=c.reduce((h,g)=>(h.field.push(g),h.order.push(s==="y"?"descending":"ascending"),h),{field:[],order:[]}),new As(t,{dimensionFieldDef:l,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Re(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:t,impute:n,groupby:r}=this._stack;return t?t.bin?n?[V(t,{binSuffix:"mid"})]:[V(t,{}),V(t,{binSuffix:"end"})]:[V(t)]:r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDef:r,stackField:i,stackby:o,sort:s,offset:a,impute:u,as:l}=this._stack;if(u&&r){const{band:c=.5,bin:f}=r;f&&t.push({type:"formula",expr:`${c}*`+V(r,{expr:"datum"})+`+${1-c}*`+V(r,{expr:"datum",binSuffix:"end"}),as:V(r,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:i,groupby:[...o,...n],key:V(r,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:l,offset:a}),t}}class jd extends Qe{constructor(t,n){super(t),this.transform=n}clone(){return new jd(null,Se(this.transform))}addDimensions(t){this.transform.groupby=va(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const r=new Set;return((t=this.transform.groupby)!==null&&t!==void 0?t:[]).forEach(r.add,r),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>r.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:V(t)}hash(){return`WindowTransform ${Re(this.transform)}`}assemble(){var t;const n=[],r=[],i=[],o=[];for(const d of this.transform.window)r.push(d.op),i.push(this.getDefaultName(d)),o.push(d.param===void 0?null:d.param),n.push(d.field===void 0?null:d.field);const s=this.transform.frame,a=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&r.every(d=>B6(d)))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},a!==void 0?{groupby:a}:{});const u=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)u.push(d.field),l.push((t=d.order)!==null&&t!==void 0?t:"ascending");const c={field:u,order:l},f=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:o,as:i,ops:r,fields:n,sort:c},f!==void 0?{ignorePeers:f}:{}),a!==void 0?{groupby:a}:{}),s!==void 0?{frame:s}:{})}}class bLe extends Ws{run(t){const n=t.parent;if(t instanceof $n){if(v_(n))return this.flags;if(n.numChildren()>1)return this.setContinue(),this.flags;if(n instanceof $n)this.setMutated(),n.merge(t);else{if(eX(n.producedFields(),t.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),t.swapWithParent()}}return this.setContinue(),this.flags}}class vLe extends RM{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of G(r))r[i].length>1&&(this.setMutated(),this.mergeNodes(t,r[i]));for(const i of t.children)this.run(i);return this.mutatedFlag}}class xLe extends Ws{run(t){return t instanceof Wn||t.numChildren()>0||t instanceof Pd?this.flags:(this.setMutated(),t.remove(),this.flags)}}class _Le extends Ws{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(t){if(this.setContinue(),t instanceof fo){const n=t.producedFields();QV(n,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...n]),this.prev=t}return this.flags}reset(){this.fields.clear()}}class $Le extends Ws{run(t){this.setContinue();const r=t.parent.children.filter(o=>o instanceof fo),i=r.pop();for(const o of r)this.setMutated(),i.merge(o);return this.flags}}function wLe(e){function t(n){if(!(n instanceof Pd)){const r=n.clone();if(r instanceof Wn){const i=r3+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ci||r instanceof As||r instanceof jd||r instanceof Dc)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function n3(e){if(e instanceof Pd)if(e.numChildren()===1&&!(e.children[0]instanceof Wn)){const t=e.children[0];(t instanceof Ci||t instanceof As||t instanceof jd||t instanceof Dc)&&t.addDimensions(e.fields),t.swapWithParent(),n3(e)}else{const t=e.model.component.data.main;qZ(t);const n=wLe(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(n3)}function qZ(e){if(e instanceof Wn&&e.type===yn&&e.numChildren()===1){const t=e.children[0];t instanceof Pd||(t.swapWithParent(),qZ(e))}}class ALe extends RM{constructor(){super()}run(t){t instanceof Wn&&!t.isRequired()&&(this.setMutated(),t.remove());for(const n of t.children)this.run(n);return this.mutatedFlag}}class ELe extends RM{constructor(t){super(),this.requiresSelectionId=t&&CM(t)}run(t){t instanceof au&&(this.requiresSelectionId&&(v_(t.parent)||t.parent instanceof Ci||t.parent instanceof $n)||(this.setMutated(),t.remove()));for(const n of t.children)this.run(n);return this.mutatedFlag}}class CLe extends Ws{run(t){const n=t.parent,r=[...n.children],i=n.children.filter(o=>o instanceof $n);if(n.numChildren()>1&&i.length>=1){const o={},s=new Set;for(const a of i){const u=a.parse;for(const l of G(u))l in o?o[l]!==u[l]&&s.add(l):o[l]=u[l]}for(const a of s)delete o[a];if(!tt(o)){this.setMutated();const a=new $n(n,o);for(const u of r){if(u instanceof $n)for(const l of G(o))delete u.parse[l];n.removeChild(u),u.parent=a,u instanceof $n&&G(u.parse).length===0&&u.remove()}}}return this.setContinue(),this.flags}}class SLe extends Ws{run(t){const n=t.parent,r=n.children.filter(o=>o instanceof Ci),i={};for(const o of r){const s=Re(o.groupBy);s in i||(i[s]=[]),i[s].push(o)}for(const o of G(i)){const s=i[o];if(s.length>1){const a=s.pop();for(const u of s)a.merge(u)&&(n.removeChild(u),u.parent=a,u.remove(),this.setMutated())}}return this.setContinue(),this.flags}}class FLe extends Ws{constructor(t){super(),this.model=t}run(t){const n=t.parent,r=!(v_(n)||n instanceof Ld||n instanceof $n||n instanceof au),i=[],o=[];for(const s of n.children)s instanceof ho&&(r&&!eX(n.producedFields(),s.dependentFields())?i.push(s):o.push(s));if(i.length>0){const s=i.pop();for(const a of i)s.merge(a,this.model.renameSignal.bind(this.model));this.setMutated(),n instanceof ho?n.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(o.length>1){const s=o.pop();for(const a of o)s.merge(a,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}}class kLe extends Ws{run(t){const n=t.parent,r=[...n.children];if(!Og(r,a=>a instanceof Wn)||n.numChildren()<=1)return this.setContinue(),this.flags;const o=[];let s;for(const a of r)if(a instanceof Wn){let u=a;for(;u.numChildren()===1;){const l=u.children[0];if(l instanceof Wn)u=l;else break}o.push(...u.children),s?(n.removeChild(a),a.parent=s.parent,s.parent.removeChild(s),s.parent=u,this.setMutated()):s=u}else o.push(a);if(o.length){this.setMutated();for(const a of o)a.parent.removeChild(a),a.parent=s}return this.setContinue(),this.flags}}const r3="scale_",cm=5;function Xs(e){const t=[];function n(r){if(r.numChildren()===0)t.push(r);else for(const i of r.children)n(i)}for(const r of e)n(r);return t}function DLe(e){return e}function ui(e,t){return t.map(r=>{if(e instanceof Ws){const i=e.optimizeNextFromLeaves(r);return e.reset(),i}else return e.run(r)}).some(DLe)}function RR(e,t){let n=e.sources;const r=new Set;return r.add(ui(new ALe,n)),r.add(ui(new ELe(t),n)),n=n.filter(i=>i.numChildren()>0),r.add(ui(new xLe,Xs(n))),n=n.filter(i=>i.numChildren()>0),r.add(ui(new bLe,Xs(n))),r.add(ui(new FLe(t),Xs(n))),r.add(ui(new _Le,Xs(n))),r.add(ui(new CLe,Xs(n))),r.add(ui(new SLe,Xs(n))),r.add(ui(new $Le,Xs(n))),r.add(ui(new vLe,n)),r.add(ui(new kLe,Xs(n))),e.sources=n,r.has(!0)}function MLe(e,t){t3(e.sources);let n=0,r=0;for(let i=0;i<cm&&RR(e,t);i++)n++;e.sources.map(n3);for(let i=0;i<cm&&RR(e,t);i++)r++;t3(e.sources),Math.max(n,r)===cm&&H(`Maximum optimization runs(${cm}) reached.`)}class Mr{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Mr(()=>t(n))}}function WZ(e){yt(e)?OLe(e):TLe(e)}function OLe(e){const t=e.component.scales;for(const n of G(t)){const r=RLe(e,n);if(t[n].setWithExplicit("domains",r),LLe(e,n),e.component.data.isFaceted){let o=e;for(;!Si(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)xa(a)&&(a.data=r3+a.data.replace(r3,""))}}}function TLe(e){for(const n of e.children)WZ(n);const t=e.component.scales;for(const n of G(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=iu(r,s.getWithExplicit("domains"),"domains","scale",i3);const a=s.get("selectionExtent");i&&a&&i.selection!==a.selection&&H("The same selection must be used to override scale domains in a layered view."),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function NLe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=BR(t,n);if(!i){H(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=BR(t,n);if(i)return"unaggregated"}return e}function RLe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=NLe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:i})),t==="x"&&Mt(r.x2)?Mt(r.x)?iu(Js(n,i,e,"x"),Js(n,i,e,"x2"),"domain","scale",i3):Js(n,i,e,"x2"):t==="y"&&Mt(r.y2)?Mt(r.y)?iu(Js(n,i,e,"y"),Js(n,i,e,"y2"),"domain","scale",i3):Js(n,i,e,"y2"):Js(n,i,e,t)}function BLe(e,t,n){return e.map(r=>({signal:`{data: ${lM(r,{timeUnit:n,type:t})}}`}))}function Ww(e,t,n){var r;const i=(r=Vn(n))===null||r===void 0?void 0:r.unit;return t==="temporal"||i?BLe(e,t,i):[e]}function Js(e,t,n,r){const{encoding:i}=n,o=Mt(i[r]),{type:s}=o,a=o.timeUnit;if(y9e(t)){const f=Js(e,void 0,n,r),d=Ww(t.unionWith,s,a);return cl([...f.value,...d])}else{if(ge(t))return cl([t]);if(t&&t!=="unaggregated"&&!UX(t))return cl(Ww(t,s,a))}const u=n.stack;if(u&&r===u.fieldChannel){if(u.offset==="normalize")return wr([[0,1]]);const f=n.requestDataName(yn);return wr([{data:f,field:n.vgField(r,{suffix:"start"})},{data:f,field:n.vgField(r,{suffix:"end"})}])}const l=Au(r)&&J(o)?PLe(n,r,e):void 0;if(Cu(o)){const f=Ww([o.datum],s,a);return wr(f)}const c=o;if(t==="unaggregated"){const f=n.requestDataName(yn),{field:d}=o;return wr([{data:f,field:V({field:d,aggregate:"min"})},{data:f,field:V({field:d,aggregate:"max"})}])}else if(rt(c.bin)){if(xr(e))return wr(e==="bin-ordinal"?[]:[{data:Zb(l)?n.requestDataName(yn):n.requestDataName(lv),field:n.vgField(r,e1(c,r)?{binSuffix:"range"}:{}),sort:l===!0||!Yt(l)?{field:n.vgField(r,{}),op:"min"}:l}]);{const{bin:f}=c;if(rt(f)){const d=NM(n,c.field,f);return wr([new Mr(()=>{const h=n.getSignalName(d);return`[${h}.start, ${h}.stop]`})])}else return wr([{data:n.requestDataName(yn),field:n.vgField(r,{})}])}}else if(c.timeUnit&&ce(["time","utc"],e)&&rM(r,c,yt(n)?n.encoding[qo(r)]:void 0,n.stack,n.markDef,n.config)){const f=n.requestDataName(yn);return wr([{data:f,field:n.vgField(r)},{data:f,field:n.vgField(r,{suffix:"end"})}])}else return wr(l?[{data:Zb(l)?n.requestDataName(yn):n.requestDataName(lv),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(yn),field:n.vgField(r)}])}function Hw(e,t){const{op:n,field:r,order:i}=e;return Object.assign(Object.assign({op:n??(t?"sum":r_)},r?{field:tu(r)}:{}),i?{order:i}:{})}function LLe(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,o=(n=e.fieldDef(t))===null||n===void 0?void 0:n.bin,s=UX(i)&&i,a=Zp(o)&&e_(o.extent)&&o.extent;(s||a)&&r.set("selectionExtent",s??a,!0)}function PLe(e,t,n){if(!xr(n))return;const r=e.fieldDef(t),i=r.sort;if(nK(i))return{op:"min",field:Qf(r,t),order:"ascending"};const{stack:o}=e,s=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map(a=>a.fieldDef.field)]:void 0;if(co(i)){const a=o&&!ce(s,i.field);return Hw(i,a)}else if(tK(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=o&&!ce(s,f);if(nu(c)||Ec(c))return Hw({field:V(l),order:u},d);if(B6(c)||!c)return Hw({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(ce(["ascending",void 0],i))return!0}}function BR(e,t){const{aggregate:n,type:r}=e;return n?Ce(n)&&!m8e[n]?{valid:!1,reason:u7e(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:l7e(e)}:{valid:!0}:{valid:!1,reason:a7e(e)}}function i3(e,t,n,r){return e.explicit&&t.explicit&&H(g7e(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function jLe(e){const t=va(e.map(s=>xa(s)?oe(s,["sort"]):s),Re),n=va(e.map(s=>{if(xa(s)){const a=s.sort;return a!==void 0&&!Zb(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Re);if(t.length===0)return;if(t.length===1){const s=e[0];if(xa(s)&&n.length>0){let a=n[0];if(n.length>1)H(GN),a=!0;else if(Yt(a)&&"field"in a){const u=a.field;s.field===u&&(a=a.order?{order:a.order}:!0)}return Object.assign(Object.assign({},s),{sort:a})}return s}const r=va(n.map(s=>Zb(s)||!("op"in s)||s.op in f8e?s:(H(m7e(s)),!0)),Re);let i;r.length===1?i=r[0]:r.length>1&&(H(GN),i=!0);const o=va(e.map(s=>xa(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?Object.assign({data:o[0],fields:t.map(a=>a.field)},i?{sort:i}:{}):Object.assign({fields:t},i?{sort:i}:{})}function BM(e){if(xa(e)&&Ce(e.field))return e.field;if(H7e(e)){let t;for(const n of e.fields)if(xa(n)&&Ce(n.field)){if(!t)t=n.field;else if(t!==n.field)return H(y7e),t}return H(b7e),t}else if(Y7e(e)){H(v7e);const t=e.fields[0];return Ce(t)?t:void 0}}function x_(e,t){const r=e.component.scales[t].get("domains").map(i=>(xa(i)&&(i.data=e.lookupDataSource(i.data)),i));return jLe(r)}function HZ(e){return Id(e)||LM(e)?e.children.reduce((t,n)=>t.concat(HZ(n)),LR(e)):LR(e)}function LR(e){return G(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:u,range:l,reverse:c}=i,f=oe(i,["name","type","selectionExtent","domains","range","reverse"]),d=ILe(i.range,o,n);let h;a&&(h=INe(e,a));const g=x_(e,n);return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:s},g?{domain:g}:{}),h?{domainRaw:h}:{}),{range:d}),c!==void 0?{reverse:c}:{}),f)),t},[])}function ILe(e,t,n){return $o(n)&&Eu(e)?{step:{signal:t+"_step"}}:e}class YZ extends qs{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Og(this.get("domains"),t=>ue(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const zLe=["range","scheme"];function GZ(e){return e==="x"?"width":e==="y"?"height":void 0}function ULe(e){const t=e.component.scales;for(const n of Qx){const r=t[n];if(!r)continue;const i=qLe(n,e);r.setWithExplicit("range",i)}}function PR(e,t){const n=e.fieldDef(t);if(n&&n.bin&&rt(n.bin)){const r=NM(e,n.field,n.bin),i=GZ(t),o=e.getName(i);return new Mr(()=>{const s=e.getSignalName(r),a=`(${s}.stop - ${s}.start) / ${s}.step`;return`${e.getSignalName(o)} / (${a})`})}}function qLe(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const s of zLe)if(n[s]!==void 0){const a=qX(o,s),u=WX(e,s);if(!a)H(CX(o,s,e));else if(u)H(u);else switch(s){case"range":return ue(n.range)&&$o(e)?cl(n.range.map(l=>{if(l==="width"||l==="height"){const c=t.getName(l),f=t.getSignalName.bind(t);return Mr.fromName(f,c)}return l})):cl(n.range);case"scheme":return cl(WLe(n[s]))}}if(e===gt||e===Tt){const s=e===gt?"width":"height",a=r[s];if(Ao(a)){if(xr(o))return cl({step:a.step});H(SX(s))}}return wr(HLe(e,t))}function WLe(e){return m9e(e)?Object.assign({scheme:e.name},xs(e,["name"])):{scheme:e}}function HLe(e,t){const{size:n,config:r,mark:i,encoding:o}=t,s=t.getSignalName.bind(t),{type:a}=Mt(o[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:f}=t.specifiedScales[e];switch(e){case gt:case Tt:{if(ce(["point","band"],l)){if(e===gt&&!n.width){const g=Bg(r.view,"width");if(Ao(g))return g}else if(e===Tt&&!n.height){const g=Bg(r.view,"height");if(Ao(g))return g}}const d=GZ(e),h=t.getName(d);return e===Tt&&ni(l)?[Mr.fromName(s,h),0]:[0,Mr.fromName(s,h)]}case zs:{const d=t.component.scales[e].get("zero"),h=VZ(i,d,r),g=VLe(i,n,t,r);return tv(l)?GLe(h,g,YLe(l,r,c,e)):[h,g]}case zi:return[0,Math.PI*2];case Cc:return[0,360];case Po:return[0,new Mr(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case _u:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case $u:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case vr:return"symbol";case br:case zo:case Uo:return l==="ordinal"?a==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Us:case vu:case xu:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}function YLe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ue(n)?n.length+1:(H(F7e(r)),3)}}function GLe(e,t,n){const r=()=>{const i=Rg(t),o=Rg(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return ge(t)?new Mr(r):{signal:r()}}function VZ(e,t,n){if(t)return ge(t)?{signal:`${t.signal} ? 0 : ${VZ(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(t_("size",e))}const jR=.95;function VLe(e,t,n,r){const i={x:PR(n,"x"),y:PR(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=IR(t,i,r.view);return Et(o)?o-1:new Mr(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=IR(t,i,r.view);return Et(o)?Math.pow(jR*o,2):new Mr(()=>`pow(${jR} * ${o.signal}, 2)`)}}throw new Error(t_("size",e))}function IR(e,t,n){const r=Ao(e.width)?e.width.step:av(n,"width"),i=Ao(e.height)?e.height.step:av(n,"height");return t.x||t.y?new Mr(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function XZ(e,t){yt(e)?XLe(e,t):ZZ(e,t)}function XLe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of G(n)){const u=s[a],l=n[a],c=e.getScaleComponent(a),f=Mt(i[a]),d=u[t],h=c.get("type"),g=c.get("padding"),p=c.get("paddingInner"),m=qX(h,t),y=WX(a,t);if(d!==void 0&&(m?y&&H(y):H(CX(h,t,a))),m&&y===void 0)if(d!==void 0)l.copyKeyFromObject(t,u);else{const b=t in zR?zR[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:g,scalePaddingInner:p,domain:u.domain,markDef:o,config:r}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const zR={bins:({model:e,fieldOrDatumDef:t})=>J(t)?KLe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>ZLe(e,t.type),nice:({scaleType:e,channel:t,fieldOrDatumDef:n})=>JLe(e,t,n),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>QLe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:r})=>ePe(e,t,n.type,r.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:r,scalePaddingInner:i,config:o})=>tPe(e,t,n,r.type,i,o.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=J(e)?e.sort:void 0;return nPe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>rPe(e,t,n,r,i)};function KZ(e){yt(e)?ULe(e):ZZ(e,"range")}function ZZ(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?KZ(r):XZ(r,t);for(const r of G(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=iu(i,a,t,"scale",zK((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function KLe(e,t){const n=t.bin;if(rt(n)){const r=NM(e,t.field,n);return new Mr(()=>e.getSignalName(r))}else if(In(n)&&Zp(n)&&n.step!==void 0)return{step:n.step}}function ZLe(e,t){if(ce([br,zo,Uo],e)&&t!=="nominal")return"hcl"}function JLe(e,t,n){var r;if(!(!((r=wo(n))===null||r===void 0)&&r.bin||ce([At.TIME,At.UTC],e)))return t in wu?!0:void 0}function QLe(e,t,n,r,i,o){if(e in wu){if(wi(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(J(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===At.POINT)return n.pointPadding}}function ePe(e,t,n,r){if(e===void 0&&t in wu){const{bandPaddingInner:i,barBandPaddingInner:o,rectBandPaddingInner:s}=r;return Ct(i,n==="bar"?o:s)}}function tPe(e,t,n,r,i,o){if(e===void 0&&t in wu&&n===At.BAND){const{bandPaddingOuter:s}=o;return Ct(s,ge(i)?{signal:`${i.signal}/2`}:i/2)}}function nPe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return ni(e)&&t==="descending"?ge(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(ni(e)&&t==="descending")return!0}function rPe(e,t,n,r,i){if(!!n&&n!=="unaggregated"&&ni(i)){if(ue(n)){const s=n[0],a=n[n.length-1];if(s<=0&&a>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!tv(i))return!0;if(!(J(t)&&t.bin)&&ce([...ti,...S8e],e)){const{orient:s,type:a}=r;return!(ce(["bar","area","line","trail"],a)&&(s==="horizontal"&&e==="y"||s==="vertical"&&e==="x"))}return!1}function iPe(e,t,n,r){const i=oPe(t,n,r),{type:o}=e;return Au(t)?o!==void 0?YX(t,o)?J(n)&&!HX(o,n.type)?(H(d7e(o,i)),i):o:(H(f7e(t,o,i)),i):i:null}function oPe(e,t,n){var r;switch(t.type){case"nominal":case"ordinal":if(cf(e)||Qm(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&H(Tw(e,"ordinal")),"ordinal";if(e in wu){if(ce(["rect","bar","image","rule"],n))return"band"}else if(n==="arc"&&e in I6)return"band";return t.band!==void 0||aM(t)&&(!((r=t.axis)===null||r===void 0)&&r.tickBand)?"band":"point";case"temporal":return cf(e)?"time":Qm(e)==="discrete"?(H(Tw(e,"temporal")),"ordinal"):J(t)&&t.timeUnit&&Vn(t.timeUnit).utc?"utc":"time";case"quantitative":return cf(e)?J(t)&&rt(t.bin)?"bin-ordinal":"linear":Qm(e)==="discrete"?(H(Tw(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(AX(t.type))}function sPe(e,{ignoreRange:t}={}){JZ(e),WZ(e);for(const n of x9e)XZ(e,n);t||KZ(e)}function JZ(e){yt(e)?e.component.scales=aPe(e):e.component.scales=lPe(e)}function aPe(e){const{encoding:t,mark:n}=e;return Qx.reduce((r,i)=>{const o=Mt(t[i]);if(o&&n===uX&&i===vr&&o.type===Rd)return r;let s=o&&o.scale;if(o&&s!==null&&s!==!1){s=s??{};const a=iPe(s,i,o,n);r[i]=new YZ(e.scaleName(i+"",!0),{value:a,explicit:s.type===a})}return r},{})}const uPe=zK((e,t)=>XN(e)-XN(t));function lPe(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){JZ(o);for(const s of G(o.component.scales))if(i.scale[s]=(t=i.scale[s])!==null&&t!==void 0?t:OBe(s,e),i.scale[s]==="shared"){const a=r[s],u=o.component.scales[s].getWithExplicit("type");a?r9e(a.value,u.value)?r[s]=iu(a,u,"type","scale",uPe):(i.scale[s]="independent",delete r[s]):r[s]=u}}for(const o of G(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new YZ(s,a);for(const u of e.children){const l=u.component.scales[o];l&&(u.renameScale(l.get("name"),s),l.merged=!0)}}return n}class Yw{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function yt(e){return(e==null?void 0:e.type)==="unit"}function Si(e){return(e==null?void 0:e.type)==="facet"}function LM(e){return(e==null?void 0:e.type)==="concat"}function Id(e){return(e==null?void 0:e.type)==="layer"}class PM{constructor(t,n,r,i,o,s,a){var u,l;this.type=n,this.parent=r,this.config=o,this.view=a,this.children=[],this.correctDataNames=c=>(c.from&&c.from.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from&&c.from.facet&&c.from.facet.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=o,this.name=(u=t.name)!==null&&u!==void 0?u:i,this.title=ra(t.title)?{text:t.title}:t.title,this.scaleNameMap=r?r.scaleNameMap:new Yw,this.projectionNameMap=r?r.projectionNameMap:new Yw,this.signalNameMap=r?r.signalNameMap:new Yw,this.data=t.data,this.description=t.description,this.transforms=dNe((l=t.transform)!==null&&l!==void 0?l:[]),this.layout=n==="layer"||n==="unit"?{}:hTe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:i_(t)||r&&r.component.data.isFaceted&&t.data===void 0},layoutSize:new qs,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},s?Se(s):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){sPe(this)}parseProjection(){IZ(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){RZ(this)}assembleGroupStyle(){var t,n;if(this.type==="unit"||this.type==="layer")return(n=(t=this.view)===null||t===void 0?void 0:t.style)!==null&&n!==void 0?n:"cell"}assembleEncodeFromView(t){const n=oe(t,["style"]),r={};for(const i of G(n)){const o=n[i];o!==void 0&&(r[i]=_t(o))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=_t(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):tt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,r=oe(t,["spacing"]),{component:i,config:o}=this,s=MBe(i.layoutHeaders,o);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),r),s?{titleBand:s}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Yr)t[r].title&&n.push(EBe(this,r));for(const r of DM)n=n.concat(CBe(this,r));return n}assembleAxes(){return fBe(this.component.axes,this.config)}assembleLegends(){return LZ(this)}assembleProjections(){return eLe(this)}assembleTitle(){var t,n,r;const i=(t=this.title)!==null&&t!==void 0?t:{},{encoding:o}=i,s=oe(i,["encoding"]),a=Object.assign(Object.assign(Object.assign({},gK(this.config.title).nonMark),s),o?{encode:{update:o}}:{});if(a.text)return ce(["unit","layer"],this.type)?ce(["middle",void 0],a.anchor)&&(a.frame=(n=a.frame)!==null&&n!==void 0?n:"group"):a.anchor=(r=a.anchor)!==null&&r!==void 0?r:"start",tt(a)?void 0:a}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Si(this.parent)?HZ(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return ft((this.name?this.name+"_":"")+t)}requestDataName(t){var n;const r=this.getName(t),i=this.component.data.outputNodeRefCounts;return i[r]=((n=i[r])!==null&&n!==void 0?n:0)+1,r}getSizeSignalRef(t){if(Si(this.parent)){const n=kZ(t),r=Jx(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(xr(o)&&Eu(s)){const a=i.get("name"),u=x_(this,r),l=BM(u);if(l){const c=V({aggregate:"distinct",field:l},{expr:"datum"});return{signal:FZ(a,i,c)}}else return H(`Unknown field for ${r}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(yX(t)&&Au(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(L8e(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)===null||t===void 0?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(r=>r.hasOrientSignalRef()))}}class QZ extends PM{vgField(t,n={}){const r=this.fieldDef(t);if(r)return V(r,n)}reduceFieldDef(t,n){return _K(this.getMapping(),(r,i,o)=>{const s=wo(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){dM(this.getMapping(),(r,i)=>{const o=wo(r);o&&t(o,i)},n)}}class __ extends Qe{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Se(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:"value",(o=s[1])!==null&&o!==void 0?o:"density"]}clone(){return new __(null,Se(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Re(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,r=oe(t,["density"]);return Object.assign({type:"kde",field:n},r)}}class zg extends Qe{constructor(t,n){super(t),this.filter=n}clone(){return new zg(null,Object.assign({},this.filter))}static make(t,n){const{config:r,mark:i,markDef:o}=n;if(Ye("invalid",o,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Au(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");ni(d)&&l.aggregate!=="count"&&!Ac(i)&&(u[l.field]=l)}return u},{});return G(a).length?new zg(t,a):null}dependentFields(){return new Set(G(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Re(this.filter)}`}assemble(){const t=G(this.filter).reduce((n,r)=>{const i=this.filter[r],o=V(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class $_ extends Qe{constructor(t,n){super(t),this.transform=n,this.transform=Se(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>{var a;return(a=i[s])!==null&&a!==void 0?a:o})}clone(){return new $_(this.parent,Se(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Re(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class w_ extends Qe{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Se(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:"key",(o=s[1])!==null&&o!==void 0?o:"value"]}clone(){return new w_(null,Se(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Re(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class ff extends Qe{constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}clone(){return new ff(null,Se(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Io,jo],[ei,Ui]]){const o=i.map(s=>{const a=Mt(n.encoding[s]);return J(a)?a.field:Cu(a)?{expr:`${a.datum}`}:Os(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new ff(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(vr)){const i=n.typedFieldDef(vr);i.type===Rd&&(t=new ff(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}dependentFields(){var t;const n=((t=this.fields)!==null&&t!==void 0?t:[]).filter(Ce);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Re(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}class Ug extends Qe{constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}clone(){return new Ug(null,this.projection,Se(this.fields),Se(this.as))}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Io,jo],[ei,Ui]]){const i=r.map(s=>{const a=Mt(n.encoding[s]);return J(a)?a.field:Cu(a)?{expr:`${a.datum}`}:Os(a)?{expr:`${a.value}`}:void 0}),o=r[0]===ei?"2":"";(i[0]||i[1])&&(t=new Ug(t,n.projectionName(),i,[n.getName("x"+o),n.getName("y"+o)]))}return t}dependentFields(){return new Set(this.fields.filter(Ce))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Re(this.fields)} ${Re(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Al extends Qe{constructor(t,n){super(t),this.transform=n}clone(){return new Al(null,Se(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Al(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(J(i)&&J(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=s.impute,d=$K(n.mark,r);return new Al(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:s.field,key:a.field},u?{method:u}:{}),l!==void 0?{value:l}:{}),c?{frame:c}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${Re(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,u=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},r?{keyvals:YTe(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?s:null});if(i&&i!=="value"){const l=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1},o?{groupby:o}:{}),c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class A_ extends Qe{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Se(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:n.on,(o=s[1])!==null&&o!==void 0?o:n.loess]}clone(){return new A_(null,Se(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Re(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:r}=t,i=oe(t,["loess","on"]);return Object.assign({type:"loess",x:r,y:n},i)}}class qg extends Qe{constructor(t,n,r){super(t),this.transform=n,this.secondary=r}clone(){return new qg(null,Se(this.transform),this.secondary)}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(VTe(s)){let u=nJ(s.data,o);u||(u=new td(s.data),o.push(u));const l=n.getName(`lookup_${i}`);a=new Wn(u,l,"lookup",n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(XTe(s)){const u=s.selection;if(r=Object.assign({as:u},r),a=n.getSelectionComponent(ft(u),u).materialized,!a)throw new Error(I8e(u))}return new qg(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?$t(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Re({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:$t(this.transform.as)}:{});else{let n=this.transform.as;Ce(n)||(H(H8e),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}class E_ extends Qe{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Se(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:"prob",(o=s[1])!==null&&o!==void 0?o:"value"]}clone(){return new E_(null,Se(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Re(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,r=oe(t,["quantile"]);return Object.assign({type:"quantile",field:n},r)}}class C_ extends Qe{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Se(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:n.on,(o=s[1])!==null&&o!==void 0?o:n.regression]}clone(){return new C_(null,Se(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Re(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:r}=t,i=oe(t,["regression","on"]);return Object.assign({type:"regression",x:r,y:n},i)}}class S_ extends Qe{constructor(t,n){super(t),this.transform=n}clone(){return new S_(null,Se(this.transform))}addDimensions(t){var n;this.transform.groupby=va(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(t),r=>r)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}hash(){return`PivotTransform ${Re(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}}class F_ extends Qe{constructor(t,n){super(t),this.transform=n}clone(){return new F_(null,Se(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Re(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function eJ(e){let t=0;function n(r,i){var o;if(r instanceof td&&!r.isGenerator&&!Lg(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof $n&&(r.parent instanceof td&&!i.source?(i.format=Object.assign(Object.assign({},(o=i.format)!==null&&o!==void 0?o:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Pd){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source;for(const s of r.assemble())e.push(s);return}switch((r instanceof s1||r instanceof a1||r instanceof zg||r instanceof Ld||r instanceof Jf||r instanceof Ug||r instanceof ff||r instanceof Ci||r instanceof qg||r instanceof jd||r instanceof Dc||r instanceof w_||r instanceof $_||r instanceof __||r instanceof A_||r instanceof E_||r instanceof C_||r instanceof au||r instanceof F_||r instanceof S_)&&i.transform.push(r.assemble()),(r instanceof ho||r instanceof fo||r instanceof Al||r instanceof As)&&i.transform.push(...r.assemble()),r instanceof Wn&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Wn?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Wn&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const a of r.children)n(a,{name:null,source:s,transform:[]});break}}}return n}function cPe(e){const t=[],n=eJ(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function fPe(e,t){var n,r;const i=[],o=eJ(i);let s=0;for(const u of e.sources){u.hasName()||(u.dataName=`source_${s++}`);const l=u.assemble();o(u,l)}for(const u of i)u.transform.length===0&&delete u.transform;let a=0;for(const[u,l]of i.entries())((n=l.transform)!==null&&n!==void 0?n:[]).length===0&&!l.source&&i.splice(a++,0,i.splice(u,1)[0]);for(const u of i)for(const l of(r=u.transform)!==null&&r!==void 0?r:[])l.type==="lookup"&&(l.from=e.outputNodes[l.from].getSource());for(const u of i)u.name in t&&(u.values=t[u.name]);return i}function dPe(e){return e==="top"||e==="left"||ge(e)?"header":"footer"}function hPe(e){for(const t of Yr)gPe(e,t);UR(e,"x"),UR(e,"y")}function gPe(e,t){var n;const{facet:r,config:i,child:o,component:s}=e;if(e.channelHasField(t)){const a=r[t],u=ed("title",null,i,t);let l=_l(a,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});o.component.layoutHeaders[t].title&&(l=ue(l)?l.join(", "):l,l+=" / "+o.component.layoutHeaders[t].title,o.component.layoutHeaders[t].title=null);const c=ed("labelOrient",a,i,t),f=(n=a.header)!==null&&n!==void 0?n:{},d=Ct(f.labels,i.header.labels,!0),h=ce(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:l,facetFieldDef:a,[h]:t==="facet"?[]:[tJ(e,t,d)]}}}function tJ(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function UR(e,t){var n;const{child:r}=e;if(r.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=TM(o,t),o.axis[t]==="shared"){const s=t==="x"?"column":"row",a=i[s];for(const u of r.component.axes[t]){const l=dPe(u.get("orient"));a[l]=(n=a[l])!==null&&n!==void 0?n:[tJ(e,s,!1)];const c=Jh(u,"main",e.config,{header:!0});c&&a[l][0].axes.push(c),u.mainExtracted=!0}}}}function pPe(e){jM(e),gv(e,"width"),gv(e,"height")}function mPe(e){jM(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";gv(e,t),gv(e,n)}function jM(e){for(const t of e.children)t.parseLayoutSize()}function gv(e,t){const n=kZ(t),r=Jx(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r];if(l==="independent"&&u.value==="step"){s=void 0;break}if(s){if(l==="independent"&&s.value!==u.value){s=void 0;break}s=iu(s,u,n,"")}else s=u}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function yPe(e){const{size:t,component:n}=e;for(const r of ti){const i=Wo(r);if(t[i]){const o=t[i];n.layoutSize.set(i,Ao(o)?"step":o,!0)}else{const o=bPe(e,i);n.layoutSize.set(i,o,!1)}}}function bPe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(xr(o)){const a=Bg(r.view,t);return Eu(s)||Ao(a)?"step":a}else return qC(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return qC(r.view,t);{const o=Bg(r.view,t);return Ao(o)?o.step:o}}}function o3(e,t,n){return V(t,Object.assign({suffix:`by_${V(e)}`},n??{}))}class A0 extends QZ{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=qM(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet,i)}initFacet(t,n){return Jp(t)?_K(t,(r,i,o)=>ce([_s,$s],o)?i.field===void 0?(H(PC(i,o)),r):(r[o]=zC(i,o,n),r):(H(t_(o,"facet")),r),{}):{facet:zC(t,"facet",n)}}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=k_(this),this.child.parseData()}parseLayoutSize(){jM(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),hPe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,r;const i={};for(const o of Yr)for(const s of MM){const a=this.component.layoutHeaders[o],u=a[s],{facetFieldDef:l}=a;if(l){const c=ed("titleOrient",l,this.config,o);if(ce(["right","bottom"],c)){const f=y_(o,c);i.titleAnchor=(t=i.titleAnchor)!==null&&t!==void 0?t:{},i.titleAnchor[f]="end"}}if(u!=null&&u[0]){const c=o==="row"?"height":"width",f=s==="header"?"headerBand":"footerBand";o!=="facet"&&!this.child.component.layoutSize.get(c)&&(i[f]=(n=i[f])!==null&&n!==void 0?n:{},i[f][o]=.5),a.title&&(i.offset=(r=i.offset)!==null&&r!==void 0?r:{},i.offset[o==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof A0))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroup(t){return this.parent&&this.parent instanceof A0?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:V(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof A0){if(this.child.channelHasField("column")){const i=V(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of ti){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(xr(s)&&Eu(a)){const u=x_(this.child,i),l=BM(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):H(`Unknown field for ${i}. Cannot calculate view size.`)}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Yr){const f=this.facet[c];if(f){u.push(V(f));const{bin:d,sort:h}=f;if(rt(d)&&u.push(V(f,{binSuffix:"end"})),co(h)){const{field:g,op:p=r_}=h,m=o3(f,h);r&&i?(o.push(m),s.push("max"),a.push(m)):(o.push(g),s.push(p),a.push(m))}else if(ue(h)){const g=Qf(f,c);o.push(g),s.push("max"),a.push(g)}}}const l=!!r&&!!i;return Object.assign({name:t,data:n,groupby:u},l||o.length>0?{aggregate:Object.assign(Object.assign({},l?{cross:l}:{}),o.length?{fields:o,ops:s,as:a}:{})}:{})}facetSortFields(t){const{facet:n}=this,r=n[t];return r?co(r.sort)?[o3(r,r.sort,{expr:"datum"})]:ue(r.sort)?[Qf(r,t,{expr:"datum"})]:[V(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(co(i)?i.order:!ue(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return QC(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of DM)if(t[i]){const o=ed("labelOrient",t[i],n,i);if(ce(r[i],o))return QC(t[i],i,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=cPe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},o?{title:o}:{}),s?{style:s}:{}),{from:{facet:this.assembleFacet()},sort:{field:Yr.map(u=>this.facetSortFields(u)).flat(),order:Yr.map(u=>this.facetSortOrder(u)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(BNe(this,[])))]}getMapping(){return this.facet}}function vPe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(co(o.sort)){const{field:s,op:a=r_}=o.sort;e=i=new Dc(e,{joinaggregate:[{op:a,field:s,as:o3(o,o.sort,{forAs:!0})}],groupby:[V(o)]})}return i}return null}function nJ(e,t){var n,r,i,o,s,a,u,l,c,f;for(const d of t){const h=d.data;if(!(e.name&&d.hasName()&&e.name!==d.dataName)&&!(!((n=e.format)===null||n===void 0)&&n.mesh&&(!((r=h.format)===null||r===void 0)&&r.feature))&&!((!((i=e.format)===null||i===void 0)&&i.feature||!((o=h.format)===null||o===void 0)&&o.feature)&&((s=e.format)===null||s===void 0?void 0:s.feature)!==((a=h.format)===null||a===void 0?void 0:a.feature))&&!((!((u=e.format)===null||u===void 0)&&u.mesh||!((l=h.format)===null||l===void 0)&&l.mesh)&&((c=e.format)===null||c===void 0?void 0:c.mesh)!==((f=h.format)===null||f===void 0?void 0:f.mesh))){if(uv(e)&&uv(h)){if(Gp(e.values,h.values))return d}else if(Lg(e)&&Lg(h)){if(e.url===h.url)return d}else if(UK(e)&&e.name===d.dataName)return d}}return null}function xPe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new td({values:[]});return t.push(r),r}const n=nJ(e.data,t);if(n)return wl(e.data)||(n.data.format=j4e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new td(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function _Pe(e,t,n){var r,i;let o=0;for(const s of t.transforms){let a,u;if(oNe(s))u=e=new Jf(e,s),a="derived";else if(HK(s)){const l=hLe(s);u=e=(r=$n.makeWithAncestors(e,{},l,n))!==null&&r!==void 0?r:e,e=new Ld(e,t,s.filter)}else if(sNe(s))u=e=ho.makeFromTransform(e,s,t),a="number";else if(uNe(s))a="date",n.getWithExplicit(s.field).value===void 0&&(e=new $n(e,{[s.field]:a}),n.set(s.field,a,!1)),u=e=fo.makeFromTransform(e,s);else if(lNe(s))u=e=Ci.makeFromTransform(e,s),a="number",CM(t)&&(e=new au(e));else if(GTe(s))u=e=qg.make(e,t,s,o++),a="derived";else if(nNe(s))u=e=new jd(e,s),a="number";else if(rNe(s))u=e=new Dc(e,s),a="number";else if(cNe(s))u=e=As.makeFromTransform(e,s),a="derived";else if(fNe(s))u=e=new w_(e,s),a="derived";else if(iNe(s))u=e=new $_(e,s),a="derived";else if(KTe(s))u=e=new S_(e,s),a="derived";else if(tNe(s))e=new F_(e,s);else if(aNe(s))u=e=Al.makeFromTransform(e,s),a="derived";else if(ZTe(s))u=e=new __(e,s),a="derived";else if(JTe(s))u=e=new E_(e,s),a="derived";else if(QTe(s))u=e=new C_(e,s),a="derived";else if(eNe(s))u=e=new A_(e,s),a="derived";else{H(W8e(s));continue}if(u&&a!==void 0)for(const l of(i=u.producedFields())!==null&&i!==void 0?i:[])n.set(l,a,!1)}return e}function k_(e){var t,n,r,i,o,s,a,u,l,c;let f=xPe(e,e.component.data.sources);const{outputNodes:d,outputNodeRefCounts:h}=e.component.data,g=e.parent?e.parent.component.data.ancestorParse.clone():new HTe,p=e.data;wl(p)?(qK(p)?f=new a1(f,p.sequence):_M(p)&&(f=new s1(f,p.graticule)),g.parseNothing=!0):((t=p==null?void 0:p.format)===null||t===void 0?void 0:t.parse)===null&&(g.parseNothing=!0),f=(n=$n.makeExplicit(f,e,g))!==null&&n!==void 0?n:f,f=new au(f);const m=e.parent&&Id(e.parent);(yt(e)||Si(e))&&m&&(f=(r=ho.makeFromEncoding(f,e))!==null&&r!==void 0?r:f),e.transforms.length>0&&(f=_Pe(f,e,g));const y=pLe(e),b=gLe(e);f=(i=$n.makeWithAncestors(f,{},Object.assign(Object.assign({},y),b),g))!==null&&i!==void 0?i:f,yt(e)&&(f=ff.parseAll(f,e),f=Ug.parseAll(f,e)),(yt(e)||Si(e))&&(m||(f=(o=ho.makeFromEncoding(f,e))!==null&&o!==void 0?o:f),f=(s=fo.makeFromEncoding(f,e))!==null&&s!==void 0?s:f,f=Jf.parseAllForSortIndex(f,e));const x=e.getName(lv),v=new Wn(f,x,lv,h);if(d[x]=v,f=v,yt(e)){const A=Ci.makeFromEncoding(f,e);A&&(f=A,CM(e)&&(f=new au(f))),f=(a=Al.makeFromEncoding(f,e))!==null&&a!==void 0?a:f,f=(u=As.makeFromEncoding(f,e))!==null&&u!==void 0?u:f}yt(e)&&(f=(l=zg.make(f,e))!==null&&l!==void 0?l:f);const _=e.getName(yn),w=new Wn(f,_,yn,h);d[_]=w,f=w,yt(e)&&lBe(e,w);let $=null;if(Si(e)){const A=e.getName("facet");f=(c=vPe(f,e.facet))!==null&&c!==void 0?c:f,$=new Pd(f,e,A,w.getSource()),d[A]=$}return Object.assign(Object.assign({},e.component.data),{outputNodes:d,outputNodeRefCounts:h,raw:v,main:w,facetRoot:$,ancestorParse:g})}class $Pe extends PM{constructor(t,n,r,i){var o,s,a,u;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)===null||o===void 0?void 0:o.axis)===null||s===void 0?void 0:s.x)==="shared"||((u=(a=t.resolve)===null||a===void 0?void 0:a.axis)===null||u===void 0?void 0:u.y)==="shared")&&H(U8e),this.children=this.getChildren(t).map((l,c)=>qM(l,this,this.getName("concat_"+c),void 0,i))}parseData(){this.component.data=k_(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of G(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return u_(t)?t.vconcat:vM(t)?t.hconcat:t.concat}parseLayoutSize(){mPe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=OM(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}}function wPe(e){return e===!1||e===null}const APe=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},oX),{labelExpr:1,encode:1}),rJ=G(APe);class IM extends qs{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new IM(Se(this.explicit),Se(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!wPe(this.get(t))}hasOrientSignalRef(){return ge(this.explicit.orient)}}function EPe(e,t,n){var r;const{encoding:i,config:o}=e,s=(r=Mt(i[t]))!==null&&r!==void 0?r:Mt(i[qo(t)]),a=e.axis(t)||{},{format:u,formatType:l}=a;return Yl(l)?Object.assign({text:tM({fieldOrDatumDef:s,field:"datum.value",format:u,formatType:l,config:o})},n):n}function CPe(e){return ti.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[TPe(n,e)]),t),{})}const SPe={bottom:"top",top:"bottom",left:"right",right:"left"};function FPe(e){var t;const{axes:n,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(const o of e.children){o.parseAxesAndHeaders();for(const s of G(o.component.axes))r.axis[s]=TM(e.component.resolve,s),r.axis[s]==="shared"&&(n[s]=kPe(n[s],o.component.axes[s]),n[s]||(r.axis[s]="independent",delete n[s]))}for(const o of ti){for(const s of e.children)if(s.component.axes[o]){if(r.axis[o]==="independent"){n[o]=((t=n[o])!==null&&t!==void 0?t:[]).concat(s.component.axes[o]);for(const a of s.component.axes[o]){const{value:u,explicit:l}=a.getWithExplicit("orient");if(!ge(u)){if(i[u]>0&&!l){const c=SPe[u];i[u]>i[c]&&a.set("orient",c,!1)}i[u]++}}}delete s.component.axes[o]}if(r.axis[o]==="independent"&&n[o]&&n[o].length>1)for(const s of n[o])s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function kPe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=DPe(i,o)}}}else return t.map(n=>n.clone());return e}function DPe(e,t){for(const n of rJ){const r=iu(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return xK(i,o);case"gridScale":return{explicit:i.explicit,value:Ct(i.value,o.value)}}return c_(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function MPe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ge(n.labelAngle)?n.labelAngle:Jb(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===AZ(r,i))return!0}return e===n[t]}const OPe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function TPe(e,t){var n,r,i;let o=t.axis(e);const s=new IM,a=Mt(t.encoding[e]),{mark:u,config:l}=t,c=(o==null?void 0:o.orient)||((n=l[e==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((r=l.axis)===null||r===void 0?void 0:r.orient)||_Be(e),f=t.getScaleComponent(e).get("type"),d=gBe(e,f,c,t.config),h=o!==void 0?!o:ZC("disable",l,o==null?void 0:o.style,d).configValue;if(s.set("disable",h,o!==void 0),h)return s;o=o||{};const g=bBe(t,o,e,a,d),p={fieldOrDatumDef:a,axis:o,channel:e,model:t,scaleType:f,orient:c,labelAngle:g,mark:u,config:l};for(const b of rJ){const x=b in SR?SR[b](p):BN(b)?o[b]:void 0,v=x!==void 0,_=MPe(x,b,o,t,e);if(v&&_)s.set(b,x,_);else{const{configValue:w=void 0,configFrom:$=void 0}=BN(b)&&b!=="values"?ZC(b,t.config,o.style,d):{},A=w!==void 0;v&&!A?s.set(b,x,_):($!=="vgAxisConfig"||OPe.has(b)&&A||O6(w)||ge(w))&&s.set(b,w,!1)}}const m=(i=o.encoding)!==null&&i!==void 0?i:{},y=iX.reduce((b,x)=>{var v;if(!s.hasAxisPart(x))return b;const _=DZ((v=m[x])!==null&&v!==void 0?v:{},t),w=x==="labels"?EPe(t,e,_):_;return w!==void 0&&!tt(w)&&(b[x]={update:w}),b},{});return tt(y)||s.set("encode",y,!!o.encoding||o.labelAngle!==void 0),s}function NPe({encoding:e,size:t}){for(const n of ti){const r=Wo(n);Ao(t[r])&&io(e[n])&&(delete t[r],H(SX(r)))}return t}function RPe(e,t,n,{graticule:r}){const i=_o(e)?Object.assign({},e):{type:e},o=Ye("orient",i,n);if(i.orient=jPe(i.type,t,o),o!==void 0&&o!==i.orient&&H(i7e(i.orient,o)),i.type==="bar"&&i.orient){const l=Ye("cornerRadiusEnd",i,n);if(l!==void 0){const c=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:o8e[i.orient];for(const f of c)i[f]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return Ye("opacity",i,n)===void 0&&(i.opacity=LPe(i.type,t)),i.filled===void 0&&(i.filled=r?!1:PPe(i,n)),Ye("cursor",i,n)===void 0&&(i.cursor=BPe(i,t,n)),i}function BPe(e,t,n){return t.href||e.href||Ye("href",e,n)?"pointer":e.cursor}function LPe(e,t){if(ce([Hx,T6,N6,R6],e)&&!cM(t))return .7}function PPe(e,t){const n=Gl("filled",e,t),r=e.type;return Ct(n,r!==Hx&&r!==Wx&&r!==Qb)}function jPe(e,t,n){switch(e){case Hx:case N6:case R6:case aX:case Z4e:case K4e:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case qx:if(J(r)&&(In(r.bin)||J(i)&&i.aggregate&&!r.aggregate))return"vertical";if(J(i)&&(In(i.bin)||J(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o&&(J(r)&&r.type===Hl&&!rt(r.bin)||IC(r)))return"horizontal";if(!s&&(J(i)&&i.type===Hl&&!rt(i.bin)||IC(i)))return"vertical"}case Qb:if(o&&!(J(r)&&In(r.bin))&&s&&!(J(i)&&In(i.bin)))return;case Ux:if(s)return J(i)&&In(i.bin)?"horizontal":"vertical";if(o)return J(r)&&In(r.bin)?"vertical":"horizontal";if(e===Qb){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Wx:case T6:{const a=io(r),u=io(i);if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u){const l=r,c=i,f=l.type===Xf,d=c.type===Xf;return f&&!d?e!=="tick"?"vertical":"horizontal":!f&&d?e!=="tick"?"horizontal":"vertical":!l.aggregate&&c.aggregate?e!=="tick"?"vertical":"horizontal":l.aggregate&&!c.aggregate?e!=="tick"?"horizontal":"vertical":n||"vertical"}else return n||void 0}}return"vertical"}const IPe={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),ou(e,"radius","arc")),ou(e,"theta","arc"))},zPe={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),cv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),cv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),AM(e))},UPe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),ou(e,"x","bar")),ou(e,"y","bar"))},qPe={vgMark:"shape",encodeEntry:e=>Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&J(n)&&n.type===Rd?{field:V(n,{expr:"datum"})}:{})]}},WPe={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),ou(e,"x","image")),ou(e,"y","image")),$M(e,"url"))},HPe={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),Pt("size",e,{vgChannel:"strokeWidth"})),AM(e))},YPe={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),Pt("size",e)),AM(e))};function zM(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),Pt("size",e)),Pt("angle",e)),GPe(e,n,t))}function GPe(e,t,n){return n?{shape:{value:n}}:Pt("shape",e)}const VPe={vgMark:"symbol",encodeEntry:e=>zM(e)},XPe={vgMark:"symbol",encodeEntry:e=>zM(e,"circle")},KPe={vgMark:"symbol",encodeEntry:e=>zM(e,"square")},ZPe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),ou(e,"x","rect")),ou(e,"y","rect"))},JPe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),cv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),cv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),Pt("size",e,{vgChannel:"strokeWidth"}))}},QPe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},si(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),$M(e)),Pt("size",e,{vgChannel:"fontSize"})),Pt("angle",e)),mR("align",eje(e.markDef,n,t))),mR("baseline",tje(e.markDef,n,t))),xn("radius",e,{defaultPos:null,isMidPoint:!0})),xn("theta",e,{defaultPos:null,isMidPoint:!0}))}};function eje(e,t,n){if(Ye("align",e,n)===void 0)return"center"}function tje(e,t,n){if(Ye("baseline",e,n)===void 0)return"middle"}const nje={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},si(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid",vgChannel:"xc"})),xn("y",e,{defaultPos:"mid",vgChannel:"yc"})),Pt("size",e,{defaultValue:rje(e),vgChannel:i})),{[o]:_t(Ye("thickness",n,t))})}};function rje(e){var t;const{config:n,markDef:r}=e,{orient:i}=r,o=i==="horizontal"?"width":"height",s=e.getScaleComponent(i==="horizontal"?"x":"y"),a=(t=Ye("size",r,n,{vgChannel:o}))!==null&&t!==void 0?t:n.tick.bandSize;if(a!==void 0)return a;{const u=s?s.get("range"):void 0;return u&&Eu(u)&&Et(u.step)?u.step*3/4:av(n.view,o)*3/4}}const fm={arc:IPe,area:zPe,bar:UPe,circle:XPe,geoshape:qPe,image:WPe,line:HPe,point:VPe,rect:ZPe,rule:JPe,square:KPe,text:QPe,tick:nje,trail:YPe};function ije(e){return ce([Wx,Ux,J4e],e.mark)?oje(e):ce([qx],e.mark)?sje(e):pv(e)}const qR="faceted_path_";function oje(e){const t=$K(e.mark,e.encoding),n=pv(e,{fromPrefix:t.length>0?qR:""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:qR+e.requestDataName(yn),data:e.requestDataName(yn),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}const WR="stack_group_";function sje(e){const t=Nw.some(n=>Ye(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t){const[n]=pv(e,{fromPrefix:WR}),r=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),o=(f,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${h.map(g=>`scale('${r}',${g})`).join(",")})`};let s,a;e.stack.fieldChannel==="x"?(s=Object.assign(Object.assign({},Mg(n.encode.update,["y","yc","y2","height",...Nw])),{x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},xs(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(s=Object.assign(Object.assign({},Mg(n.encode.update,["x","xc","x2","width"])),{y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},xs(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const f of Nw){const d=Gl(f,e.markDef,e.config);n.encode.update[f]?(s[f]=n.encode.update[f],delete n.encode.update[f]):d&&(s[f]=_t(d)),d&&(n.encode.update[f]={value:0})}const u=e.fieldDef(e.stack.groupbyChannel),l=V(u)?[V(u)]:[];return(u!=null&&u.bin||u!=null&&u.timeUnit)&&l.push(V(u,{binSuffix:"end"})),s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(n.encode.update[d])return Object.assign(Object.assign({},f),{[d]:n.encode.update[d]});{const h=Gl(d,e.markDef,e.config);return h!==void 0?Object.assign(Object.assign({},f),{[d]:_t(h)}):f}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(yn),name:WR+e.requestDataName(yn),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:a},marks:[n]}]}]}else return pv(e)}function aje(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!ue(s)&&Os(s)&&TN(s.value)||!s&&TN(Ye("order",i,o)))){if((ue(s)||J(s))&&!n)return yK(s,{expr:"datum"});if(Ac(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(J(u)){const l=u.sort;if(ue(l))return{field:V(u,{prefix:a,suffix:"sort_index",expr:"datum"})};if(co(l))return{field:V({aggregate:cM(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})};if(tK(l)){const c=e.fieldDef(l.encoding);return{field:V(c,{expr:"datum"}),order:l.order}}else return l===null?void 0:{field:V(u,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}return}}}function pv(e,t={fromPrefix:""}){const{mark:n,markDef:r,config:i}=e,o=Ct(r.clip,uje(e),lje(e)),s=pK(r),a=e.encoding.key,u=aje(e),l=cje(e),c=Ye("aria",r,i),f=fm[n].postEncodingTransform?fm[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:fm[n].vgMark},o?{clip:!0}:{}),s?{style:s}:{}),a?{key:a.field}:{}),u?{sort:u}:{}),l||{}),c===!1?{aria:c}:{}),{from:{data:t.fromPrefix+e.requestDataName(yn)},encode:{update:fm[n].encodeEntry(e)}}),f?{transform:f}:{})]}function uje(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t&&t.get("selectionExtent")||n&&n.get("selectionExtent")?!0:void 0}function lje(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function cje(e){if(!e.component.selection)return null;const t=G(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=G(r.component.selection).length,r=r.parent;return n?{interactive:t>0}:null}class iJ extends QZ{constructor(t,n,r,i={},o){var s,a;super(t,"unit",n,r,o,void 0,tR(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];const u=_o(t.mark)?t.mark.type:t.mark;this.markDef=RPe(t.mark,(s=t.encoding)!==null&&s!==void 0?s:{},o,{graticule:t.data&&_M(t.data)});const l=this.encoding=q9e((a=t.encoding)!==null&&a!==void 0?a:{},this.markDef,o);this.size=NPe({encoding:l,size:tR(t)?Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=LK(u,l),this.specifiedScales=this.initScales(u,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegend(l),this.specifiedProjection=t.projection,this.selection=t.selection}get hasProjection(){const{encoding:t}=this,n=this.mark===uX,r=t&&x8e.some(i=>me(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Qx.reduce((r,i)=>{var o;const s=Mt(n[i]);return s&&(r[i]=(o=s.scale)!==null&&o!==void 0?o:{}),r},{})}initAxes(t){return ti.reduce((n,r)=>{const i=t[r];if(me(i)||r===gt&&me(t.x2)||r===Tt&&me(t.y2)){const o=me(i)?i.axis:void 0;n[r]=o&&Object.assign({},o)}return n},{})}initLegend(t){return F8e.reduce((n,r)=>{const i=Mt(t[r]);if(i&&D8e(r)){const o=i.legend;n[r]=o&&Object.assign({},o)}return n},{})}parseData(){this.component.data=k_(this)}parseLayoutSize(){yPe(this)}parseSelections(){this.component.selection=uBe(this,this.selection)}parseMarkGroup(){this.component.mark=ije(this)}parseAxesAndHeaders(){this.component.axes=CPe(this)}assembleSelectionTopLevelSignals(t){return LNe(this,t)}assembleSignals(){return[...vZ(this),...RNe(this,[])]}assembleSelectionData(t){return PNe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return OM(this)}assembleMarks(){var t;let n=(t=this.component.mark)!==null&&t!==void 0?t:[];return(!this.parent||!Id(this.parent))&&(n=oZ(this,n)),n.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return $l(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return wo(n)}typedFieldDef(t){const n=this.fieldDef(t);return Br(n)?n:null}}class UM extends PM{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s=Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((a,u)=>{if(l_(a))return new UM(a,this,this.getName("layer_"+u),s,o);if(Ps(a))return new iJ(a,this,this.getName("layer_"+u),s,o);throw new Error(z6(a))})}parseData(){this.component.data=k_(this);for(const t of this.children)t.parseData()}parseLayoutSize(){pPe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of G(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){FPe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),vZ(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),OM(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return jNe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),LZ(this))}}function qM(e,t,n,r,i){if(i_(e))return new A0(e,t,n,i);if(l_(e))return new UM(e,t,n,r,i);if(Ps(e))return new iJ(e,t,n,r,i);if(cTe(e))return new $Pe(e,t,n,i);throw new Error(z6(e))}function fje(e,t={}){t.logger&&k7e(t.logger),t.fieldTitle&&cK(t.fieldTitle);try{const n=RK(KV(t.config,e.config)),r=IK(e,n),i=qM(r,null,"",void 0,n);return i.parse(),MLe(i.component.data,i),{spec:hje(i,dje(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&D7e(),t.fieldTitle&&B9e()}}function dje(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Ce(t)&&(t={type:t}),i&&o&&UTe(t.type)){if(i==="step"&&o==="step")H(UN()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";H(UN(Jx(s)));const a=s==="width"?"height":"width";t.type=qTe(a)}}return Object.assign(Object.assign(Object.assign({},G(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),dR(n)),dR(e))}function hje(e,t,n={},r){const i=e.config?$Te(e.config):void 0,o=[].concat(e.assembleSelectionData([]),fPe(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();return c=c.filter(f=>(f.name==="width"||f.name==="height")&&f.value!==void 0?(t[f.name]=+f.value,!1):!0),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),t),a?{title:a}:{}),u?{style:u}:{}),l?{encode:{update:l}}:{}),{data:o}),s.length>0?{projections:s}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),r?{usermeta:r}:{})}class gje extends BK{mapUnit(t,{config:n}){if(t.encoding){const{encoding:r,transform:i}=t,{bins:o,timeUnits:s,aggregate:a,groupby:u,encoding:l}=fM(r,n),c=[...i||[],...o,...s,...a.length===0?[]:[{aggregate:a,groupby:u}]];return Object.assign(Object.assign(Object.assign({},t),c.length>0?{transform:c}:{}),{encoding:l})}else return t}}const pje=new gje;function mje(e,t){return pje.map(e,{config:t})}const yje=x4e.version,bje=Object.freeze(Object.defineProperty({__proto__:null,compile:fje,extractTransforms:mje,normalize:IK,version:yje},Symbol.toStringTag,{value:"Module"}));function oJ(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var vje="vega-themes",xje="2.13.0",_je="Themes for stylized Vega and Vega-Lite visualizations.",$je=["vega","vega-lite","themes","style"],wje="BSD-3-Clause",Aje={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Eje=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Cje="build/vega-themes.js",Sje="build/vega-themes.module.js",Fje="build/vega-themes.min.js",kje="build/vega-themes.min.js",Dje="build/vega-themes.module.d.ts",Mje={type:"git",url:"https://github.com/vega/vega-themes.git"},Oje=["src","build"],Tje={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Nje={"@babel/core":"^7.21.4","@babel/plugin-transform-runtime":"^7.21.4","@babel/preset-env":"^7.21.4","@babel/preset-typescript":"^7.21.4","@release-it/conventional-changelog":"^5.1.1","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-terser":"^0.4.1","@typescript-eslint/eslint-plugin":"^5.59.0","@typescript-eslint/parser":"^5.59.0","browser-sync":"^2.29.1",concurrently:"^8.0.1",eslint:"^8.38.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^4.2.1","gh-pages":"^5.0.0",prettier:"^2.8.7","release-it":"^15.10.1",rollup:"^3.20.6","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.0.4",vega:"^5.24.0","vega-lite":"^5.7.1"},Rje={vega:"*","vega-lite":"*"},Bje={},Lje={name:vje,version:xje,description:_je,keywords:$je,license:wje,author:Aje,contributors:Eje,main:Cje,module:Sje,unpkg:Fje,jsdelivr:kje,types:Dje,repository:Mje,files:Oje,scripts:Tje,devDependencies:Nje,peerDependencies:Rje,dependencies:Bje};const Wc="#fff",HR="#888",Pje={background:"#333",view:{stroke:HR},title:{color:Wc,subtitleColor:Wc},style:{"guide-label":{fill:Wc},"guide-title":{fill:Wc}},axis:{domainColor:Wc,gridColor:HR,tickColor:Wc}},Nu="#4572a7",jje={background:"#fff",arc:{fill:Nu},area:{fill:Nu},line:{stroke:Nu,strokeWidth:2},path:{stroke:Nu},rect:{fill:Nu},shape:{stroke:Nu},symbol:{fill:Nu,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Ru="#30a2da",Gw="#cbcbcb",Ije="#999",zje="#333",YR="#f0f0f0",GR="#333",Uje={arc:{fill:Ru},area:{fill:Ru},axis:{domainColor:Gw,grid:!0,gridColor:Gw,gridWidth:1,labelColor:Ije,labelFontSize:10,titleColor:zje,tickColor:Gw,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:YR,group:{fill:YR},legend:{labelColor:GR,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:GR,titleFontSize:14,titlePadding:10},line:{stroke:Ru,strokeWidth:2},path:{stroke:Ru,strokeWidth:.5},rect:{fill:Ru},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Ru},bar:{binSpacing:2,fill:Ru,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Bu="#000",qje={group:{fill:"#e5e5e5"},arc:{fill:Bu},area:{fill:Bu},line:{stroke:Bu},path:{stroke:Bu},rect:{fill:Bu},shape:{stroke:Bu},symbol:{fill:Bu,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Wje=22,Hje="normal",VR="Benton Gothic, sans-serif",XR=11.5,Yje="normal",Lu="#82c6df",Vw="Benton Gothic Bold, sans-serif",KR="normal",ZR=13,$h={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Gje={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Vw,fontSize:Wje,fontWeight:Hje},arc:{fill:Lu},area:{fill:Lu},line:{stroke:Lu,strokeWidth:2},path:{stroke:Lu},rect:{fill:Lu},shape:{stroke:Lu},symbol:{fill:Lu,size:30},axis:{labelFont:VR,labelFontSize:XR,labelFontWeight:Yje,titleFont:Vw,titleFontSize:ZR,titleFontWeight:KR},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:VR,labelFontSize:XR,symbolType:"square",titleFont:Vw,titleFontSize:ZR,titleFontWeight:KR},range:{category:$h["category-6"],diverging:$h["fireandice-6"],heatmap:$h["fire-7"],ordinal:$h["fire-7"],ramp:$h["fire-7"]}},Pu="#ab5787",dm="#979797",Vje={background:"#f9f9f9",arc:{fill:Pu},area:{fill:Pu},line:{stroke:Pu},path:{stroke:Pu},rect:{fill:Pu},shape:{stroke:Pu},symbol:{fill:Pu,size:30},axis:{domainColor:dm,domainWidth:.5,gridWidth:.2,labelColor:dm,tickColor:dm,tickWidth:.2,titleColor:dm},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ju="#3e5c69",Xje={background:"#fff",arc:{fill:ju},area:{fill:ju},line:{stroke:ju},path:{stroke:ju},rect:{fill:ju},shape:{stroke:ju},symbol:{fill:ju},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ir="#1696d2",JR="#000000",Kje="#FFFFFF",hm="Lato",Xw="Lato",Zje="Lato",Jje="#DEDDDD",Qje=18,wh={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},eIe={background:Kje,title:{anchor:"start",fontSize:Qje,font:hm},axisX:{domain:!0,domainColor:JR,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Xw,labelAngle:0,tickColor:JR,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:hm},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Jje,gridWidth:1,labelFontSize:12,labelFont:Xw,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:hm,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Xw,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:hm,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:wh["six-groups-cat-1"],diverging:wh["diverging-colors"],heatmap:wh["diverging-colors"],ordinal:wh["six-groups-seq"],ramp:wh["shades-blue"]},area:{fill:Ir},rect:{fill:Ir},line:{color:Ir,stroke:Ir,strokeWidth:5},trail:{color:Ir,stroke:Ir,strokeWidth:0,size:1},path:{stroke:Ir,strokeWidth:.5},point:{filled:!0},text:{font:Zje,color:Ir,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ir,stroke:null}},arc:{fill:Ir},shape:{stroke:Ir},symbol:{fill:Ir,size:30}},Iu="#3366CC",QR="#ccc",gm="Arial, sans-serif",tIe={arc:{fill:Iu},area:{fill:Iu},path:{stroke:Iu},rect:{fill:Iu},shape:{stroke:Iu},symbol:{stroke:Iu},circle:{fill:Iu},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:gm,fontSize:12},"guide-title":{font:gm,fontSize:12},"group-title":{font:gm,fontSize:12}},title:{font:gm,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:QR,tickColor:QR,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},WM=e=>e*(1/3+1),eB=WM(9),tB=WM(10),nB=WM(12),Ah="Segoe UI",rB="wf_standard-font, helvetica, arial, sans-serif",iB="#252423",Eh="#605E5C",oB="transparent",nIe="#C8C6C4",fi="#118DFF",rIe="#12239E",iIe="#E66C37",oIe="#6B007B",sIe="#E044A7",aIe="#744EC2",uIe="#D9B300",lIe="#D64550",sJ=fi,aJ="#DEEFFF",sB=[aJ,sJ],cIe=[aJ,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",sJ],fIe={view:{stroke:oB},background:oB,font:Ah,header:{titleFont:rB,titleFontSize:nB,titleColor:iB,labelFont:Ah,labelFontSize:tB,labelColor:Eh},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Eh,labelFontSize:eB,titleFont:rB,titleColor:iB,titleFontSize:nB,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:nIe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:fi},line:{stroke:fi,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Ah,fontSize:eB,fill:Eh},arc:{fill:fi},area:{fill:fi,line:!0,opacity:.6},path:{stroke:fi},rect:{fill:fi},point:{fill:fi,filled:!0,size:75},shape:{stroke:fi},symbol:{fill:fi,strokeWidth:1.5,size:50},legend:{titleFont:Ah,titleFontWeight:"bold",titleColor:Eh,labelFont:Ah,labelFontSize:tB,labelColor:Eh,symbolType:"circle",symbolSize:75},range:{category:[fi,rIe,iIe,oIe,sIe,aIe,uIe,lIe],diverging:sB,heatmap:sB,ordinal:cIe}},dIe=Lje.version,hIe=Object.freeze(Object.defineProperty({__proto__:null,dark:Pje,excel:jje,fivethirtyeight:Uje,ggplot2:qje,googlecharts:tIe,latimes:Gje,powerbi:fIe,quartz:Vje,urbaninstitute:eIe,version:dIe,vox:Xje},Symbol.toStringTag,{value:"Module"}));var gIe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element img {
    max-width: 200px;
    max-height: 200px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`;const uJ="vg-tooltip-element",pIe={offsetX:10,offsetY:10,id:uJ,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:mIe,maxDepth:2};function mIe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function yIe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return gIe.toString().replace(uJ,e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bIe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function vIe(e,t,n){if($e(e))return`[${e.map(r=>t(ut(r)?r:aB(r,n))).join(", ")}]`;if(ke(e)){let r="";const i=e,{title:o,image:s}=i,a=bIe(i,["title","image"]);o&&(r+=`<h2>${t(o)}</h2>`),s&&(r+=`<img src="${t(s)}">`);const u=Object.keys(a);if(u.length>0){r+="<table>";for(const l of u){let c=a[l];c!==void 0&&(ke(c)&&(c=aB(c,n)),r+=`<tr><td class="key">${t(l)}:</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function xIe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function aB(e,t){return JSON.stringify(e,xIe(t))}function _Ie(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class $Ie{constructor(t){this.options=Object.assign(Object.assign({},pIe),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=yIe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(document.fullscreenElement!=null?document.fullscreenElement:document.body).appendChild(this.el),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=vIe(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:a}=_Ie(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${a}px; left: ${s}px`)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function mv(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{l(r.next(c))}catch(f){s(f)}}function u(c){try{l(r.throw(c))}catch(f){s(f)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function wIe(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:s}=new URL(t);let a=~~(i/o);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,s),setTimeout(l,o),a-=1)}setTimeout(l,o)}var AIe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }
  .vega-embed .chart-wrapper {
    width: 100%;
    height: 100%; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function lJ(e,...t){for(const n of t)EIe(e,n);return e}function EIe(e,t){for(const n of Object.keys(t))Nv(e,n,t[n],!0)}var Kw;const rs=JOe;let nd=bje;const pm=typeof window<"u"?window:void 0;nd===void 0&&(!((Kw=pm==null?void 0:pm.vl)===null||Kw===void 0)&&Kw.compile)&&(nd=pm.vl);const cJ={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},CIe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Qh={vega:"Vega","vega-lite":"Vega-Lite"},yv={vega:rs.version,"vega-lite":nd?nd.version:"not available"},SIe={vega:e=>e,"vega-lite":(e,t)=>nd.compile(e,{config:t}).spec},FIe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,kIe="chart-wrapper";function DIe(e){return typeof e=="function"}function uB(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${Qh[r]} JSON Source`}function fJ(e,t){var n;if(e.$schema){const r=oJ(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${Qh[r.library]}, but mode argument sets ${(n=Qh[t])!==null&&n!==void 0?n:t}.`);const i=r.library;return ZB.satisfies(yv[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${Qh[i]} ${r.version}, but the current version of ${Qh[i]} is v${yv[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function MIe(e){return!!(e&&"load"in e)}function lB(e){return MIe(e)?e:rs.loader(e)}function cB(e){var t;return(t=e.usermeta&&e.usermeta.embedOptions)!==null&&t!==void 0?t:{}}function OIe(e,t,n={}){var r,i,o;return mv(this,void 0,void 0,function*(){let s,a;ut(t)?(a=lB(n.loader),s=JSON.parse(yield a.load(t))):s=t;const u=cB(s).loader;(!a||u)&&(a=lB((r=n.loader)!==null&&r!==void 0?r:u));const l=yield fB(cB(s),a),c=yield fB(n,a),f=Object.assign(Object.assign({},lJ(c,l)),{config:Tv((i=c.config)!==null&&i!==void 0?i:{},(o=l.config)!==null&&o!==void 0?o:{})});return yield NIe(e,s,f,a)})}function fB(e,t){var n;return mv(this,void 0,void 0,function*(){const r=ut(e.config)?JSON.parse(yield t.load(e.config)):(n=e.config)!==null&&n!==void 0?n:{},i=ut(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})})}function TIe(e){var t;const n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(t=document.head)!==null&&t!==void 0?t:document.body}}function NIe(e,t,n={},r){var i,o,s,a,u,l;return mv(this,void 0,void 0,function*(){const c=n.theme?Tv(hIe[n.theme],(i=n.config)!==null&&i!==void 0?i:{}):n.config,f=gL(n.actions)?n.actions:lJ({},cJ,(o=n.actions)!==null&&o!==void 0?o:{}),d=Object.assign(Object.assign({},CIe),n.i18n),h=(s=n.renderer)!==null&&s!==void 0?s:"canvas",g=(a=n.logLevel)!==null&&a!==void 0?a:rs.Warn,p=(u=n.downloadFileName)!==null&&u!==void 0?u:"visualization",m=typeof e=="string"?document.querySelector(e):e;if(!m)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const C="vega-embed-style",{root:N,rootContainer:E}=TIe(m);if(!N.getElementById(C)){const D=document.createElement("style");D.id=C,D.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?AIe.toString():n.defaultStyle,E.appendChild(D)}}const y=fJ(t,n.mode);let b=SIe[y](t,c);if(y==="vega-lite"&&b.$schema){const C=oJ(b.$schema);ZB.satisfies(yv.vega,`^${C.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${C.version}, but current version is v${yv.vega}.`)}m.classList.add("vega-embed"),f&&m.classList.add("has-actions"),m.innerHTML="";let x=m;if(f){const C=document.createElement("div");C.classList.add(kIe),m.appendChild(C),x=C}const v=n.patch;v&&(v instanceof Function?b=v(b):b=Cv(b,v,!0,!1).newDocument),n.formatLocale&&rs.formatLocale(n.formatLocale),n.timeFormatLocale&&rs.timeFormatLocale(n.timeFormatLocale);const{ast:_}=n,w=rs.parse(b,y==="vega-lite"?{}:c,{ast:_}),$=new(n.viewClass||rs.View)(w,Object.assign({loader:r,logLevel:g,renderer:h},_?{expr:rs.expressionInterpreter}:{}));if(n.tooltip!==!1){let C;DIe(n.tooltip)?C=n.tooltip:C=new $Ie(n.tooltip===!0?{}:n.tooltip).call,$.tooltip(C)}let{hover:A}=n;if(A===void 0&&(A=y==="vega"),A){const{hoverSet:C,updateSet:N}=typeof A=="boolean"?{}:A;$.hover(C,N)}n&&(n.width!=null&&$.width(n.width),n.height!=null&&$.height(n.height),n.padding!=null&&$.padding(n.padding)),yield $.initialize(x,n.bind).runAsync();let M;if(f!==!1){let C=m;if(n.defaultStyle!==!1){const E=document.createElement("details");E.title=d.CLICK_TO_VIEW_ACTIONS,m.append(E),C=E;const D=document.createElement("summary");D.innerHTML=FIe,E.append(D),M=F=>{E.contains(F.target)||E.removeAttribute("open")},document.addEventListener("click",M)}const N=document.createElement("div");if(C.append(N),N.classList.add("vega-actions"),f===!0||f.export!==!1){for(const E of["svg","png"])if(f===!0||f.export===!0||f.export[E]){const D=d[`${E.toUpperCase()}_ACTION`],F=document.createElement("a");F.text=D,F.href="#",F.target="_blank",F.download=`${p}.${E}`,F.addEventListener("mousedown",function(O){return mv(this,void 0,void 0,function*(){O.preventDefault();const R=yield $.toImageURL(E,n.scaleFactor);this.href=R})}),N.append(F)}}if(f===!0||f.source!==!1){const E=document.createElement("a");E.text=d.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(D){var F,O;uB(z_(t),(F=n.sourceHeader)!==null&&F!==void 0?F:"",(O=n.sourceFooter)!==null&&O!==void 0?O:"",y),D.preventDefault()}),N.append(E)}if(y==="vega-lite"&&(f===!0||f.compiled!==!1)){const E=document.createElement("a");E.text=d.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(D){var F,O;uB(z_(b),(F=n.sourceHeader)!==null&&F!==void 0?F:"",(O=n.sourceFooter)!==null&&O!==void 0?O:"","vega"),D.preventDefault()}),N.append(E)}if(f===!0||f.editor!==!1){const E=(l=n.editorUrl)!==null&&l!==void 0?l:"https://vega.github.io/editor/",D=document.createElement("a");D.text=d.EDITOR_ACTION,D.href="#",D.addEventListener("click",function(F){wIe(window,E,{config:c,mode:y,renderer:h,spec:z_(t)}),F.preventDefault()}),N.append(D)}}function k(){M&&document.removeEventListener("click",M),$.finalize()}return{view:$,spec:t,vgSpec:b,finalize:k}})}const RIe=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_ACTIONS:cJ,default:OIe,guessMode:fJ,vega:rs,get vegaLite(){return nd}},Symbol.toStringTag,{value:"Module"})),zd=rd(RIe);var ai={},Y={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var dB=Object.getOwnPropertySymbols,BIe=Object.prototype.hasOwnProperty,LIe=Object.prototype.propertyIsEnumerable;function PIe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function jIe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var HM=jIe()?Object.assign:function(e,t){for(var n,r=PIe(e),i,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var s in n)BIe.call(n,s)&&(r[s]=n[s]);if(dB){i=dB(n);for(var a=0;a<i.length;a++)LIe.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r},YM={};Object.defineProperty(YM,"__esModule",{value:!0});YM.StyleSheet=dJ;var IIe=HM,zIe=UIe(IIe);function UIe(e){return e&&e.__esModule?e:{default:e}}function qIe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}function Zw(e){return e[e.length-1]}function hB(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}var tl=typeof window<"u",WIe=!1,HIe=function(){if(tl){var e=document.createElement("div");return e.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",e.getElementsByTagName("i").length===1}}();function gB(){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-glamor",""),e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e),e}function dJ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.speedy,n=t===void 0?!WIe:t,r=e.maxLength,i=r===void 0?tl&&HIe?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,zIe.default)(dJ.prototype,{getSheet:function(){return hB(Zw(this.tags))},inject:function(){var t=this;if(this.injected)throw new Error("already injected stylesheet!");tl?this.tags[0]=gB():this.sheet={cssRules:[],insertRule:function(r){t.sheet.cssRules.push({cssText:r})}},this.injected=!0},speedy:function(t){if(this.ctr!==0)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+t+") earlier in your app, or call flush() before speedy("+t+")");this.isSpeedy=!!t},_insert:function(t){try{var n=this.getSheet();n.insertRule(t,t.indexOf("@import")!==-1?0:n.cssRules.length)}catch{}},insert:function(t){if(tl)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(t);else if(t.indexOf("@import")!==-1){var n=Zw(this.tags);n.insertBefore(document.createTextNode(t),n.firstChild)}else Zw(this.tags).appendChild(document.createTextNode(t));else this.sheet.insertRule(t,t.indexOf("@import")!==-1?0:this.sheet.cssRules.length);return this.ctr++,tl&&this.ctr%this.maxLength===0&&this.tags.push(gB()),this.ctr-1},delete:function(t){return this.replace(t,"")},flush:function(){tl?(this.tags.forEach(function(t){return t.parentNode.removeChild(t)}),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!tl)return this.sheet.cssRules;var t=[];return this.tags.forEach(function(n){return t.splice.apply(t,[t.length,0].concat(qIe(Array.from(hB(n).cssRules))))}),t}});var Ud={},YIe=/-(.)/g;function GIe(e){return e.replace(YIe,function(t,n){return n.toUpperCase()})}var VIe=GIe,XIe=VIe,KIe=/^-ms-/;function ZIe(e){return XIe(e.replace(KIe,"ms-"))}var JIe=ZIe,GM={},VM={};Object.defineProperty(VM,"__esModule",{value:!0});var ty={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function QIe(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var eze=["Webkit","ms","Moz","O"];Object.keys(ty).forEach(function(e){eze.forEach(function(t){ty[QIe(t,e)]=ty[e]})});var tze={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},nze={isUnitlessNumber:ty,shorthandPropertyExpansions:tze};VM.default=nze;function D_(e){return function(){return e}}var Mc=function(){};Mc.thatReturns=D_;Mc.thatReturnsFalse=D_(!1);Mc.thatReturnsTrue=D_(!0);Mc.thatReturnsNull=D_(null);Mc.thatReturnsThis=function(){return this};Mc.thatReturnsArgument=function(e){return e};var rze=Mc,ize=rze,oze=ize,hJ=oze;Object.defineProperty(GM,"__esModule",{value:!0});var sze=VM,aze=gJ(sze),uze=hJ;gJ(uze);function gJ(e){return e&&e.__esModule?e:{default:e}}var pB=aze.default.isUnitlessNumber;function lze(e,t,n){var r=t==null||typeof t=="boolean"||t==="";if(r)return"";var i=isNaN(t);return i||t===0||pB.hasOwnProperty(e)&&pB[e]?""+t:(typeof t=="string"&&(t=t.trim()),t+"px")}GM.default=lze;var cze=/([A-Z])/g;function fze(e){return e.replace(cze,"-$1").toLowerCase()}var dze=fze,hze=dze,gze=/^ms-/;function pze(e){return hze(e).replace(gze,"-ms-")}var mze=pze;function yze(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}var bze=yze;Object.defineProperty(Ud,"__esModule",{value:!0});Ud.processStyleName=void 0;Ud.createMarkupForStyles=Fze;var vze=JIe;u1(vze);var xze=GM,_ze=u1(xze),$ze=mze,wze=u1($ze),Aze=bze,Eze=u1(Aze),Cze=hJ;u1(Cze);function u1(e){return e&&e.__esModule?e:{default:e}}var Sze=Ud.processStyleName=(0,Eze.default)(wze.default);function Fze(e,t){var n="";for(var r in e){var i=r.indexOf("--")===0;if(e.hasOwnProperty(r)&&r!=="label"){var o=e[r];o!=null&&(i?n+=r+":"+o+";":(n+=Sze(r)+":",n+=(0,_ze.default)(r,o,t)+";"))}}return n||null}var XM={};Object.defineProperty(XM,"__esModule",{value:!0});var pJ=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};XM.default=KM;function kze(e){return e==null||e===!1||(typeof e>"u"?"undefined":pJ(e))==="object"&&Object.keys(e).length===0}function Dze(e){if(kze(e))return null;if((typeof e>"u"?"undefined":pJ(e))!=="object")return e;for(var t={},n=Object.keys(e),r=!1,i=0;i<n.length;i++){var o=e[n[i]],s=KM(o);(s===null||s!==o)&&(r=!0),s!==null&&(t[n[i]]=s)}return Object.keys(t).length===0?null:r?t:e}function Mze(e){var t=!1,n=[];return e.forEach(function(r){var i=KM(r);(i===null||i!==r)&&(t=!0),i!==null&&n.push(i)}),n.length==0?null:t?n:e}function KM(e){return Array.isArray(e)?Mze(e):Dze(e)}var qd={},ZM={},s3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=["Webkit"],r=["Moz"],i=["ms"],o=["Webkit","Moz"],s=["Webkit","ms"],a=["Webkit","Moz","ms"];t.default={plugins:[],prefixMap:{appearance:o,userSelect:a,textEmphasisPosition:n,textEmphasis:n,textEmphasisStyle:n,textEmphasisColor:n,boxDecorationBreak:n,clipPath:n,maskImage:n,maskMode:n,maskRepeat:n,maskPosition:n,maskClip:n,maskOrigin:n,maskSize:n,maskComposite:n,mask:n,maskBorderSource:n,maskBorderMode:n,maskBorderSlice:n,maskBorderWidth:n,maskBorderOutset:n,maskBorderRepeat:n,maskBorder:n,maskType:n,textDecorationStyle:n,textDecorationSkip:n,textDecorationLine:n,textDecorationColor:n,filter:n,fontFeatureSettings:n,breakAfter:a,breakBefore:a,breakInside:a,columnCount:o,columnFill:o,columnGap:o,columnRule:o,columnRuleColor:o,columnRuleStyle:o,columnRuleWidth:o,columns:o,columnSpan:o,columnWidth:o,writingMode:s,flex:n,flexBasis:n,flexDirection:n,flexGrow:n,flexFlow:n,flexShrink:n,flexWrap:n,alignContent:n,alignItems:n,alignSelf:n,justifyContent:n,order:n,transform:n,transformOrigin:n,transformOriginX:n,transformOriginY:n,backfaceVisibility:n,perspective:n,perspectiveOrigin:n,transformStyle:n,transformOriginZ:n,animation:n,animationDelay:n,animationDirection:n,animationFillMode:n,animationDuration:n,animationIterationCount:n,animationName:n,animationPlayState:n,animationTimingFunction:n,backdropFilter:n,fontKerning:n,scrollSnapType:s,scrollSnapPointsX:s,scrollSnapPointsY:s,scrollSnapDestination:s,scrollSnapCoordinate:s,shapeImageThreshold:n,shapeImageMargin:n,shapeImageOutside:n,hyphens:a,flowInto:s,flowFrom:s,regionFragment:s,textAlignLast:r,tabSize:r,wrapFlow:i,wrapThrough:i,wrapMargin:i,gridTemplateColumns:i,gridTemplateRows:i,gridTemplateAreas:i,gridTemplate:i,gridAutoColumns:i,gridAutoRows:i,gridAutoFlow:i,grid:i,gridRowStart:i,gridColumnStart:i,gridRowEnd:i,gridRow:i,gridColumn:i,gridColumnEnd:i,gridColumnGap:i,gridRowGap:i,gridArea:i,gridGap:i,textSizeAdjust:s,borderImage:n,borderImageOutset:n,borderImageRepeat:n,borderImageSlice:n,borderImageSource:n,borderImageWidth:n,transitionDelay:n,transitionDuration:n,transitionProperty:n,transitionTimingFunction:n}},e.exports=t.default})(s3,s3.exports);var Oze=s3.exports,a3={exports:{}},u3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){return r.charAt(0).toUpperCase()+r.slice(1)}e.exports=t.default})(u3,u3.exports);var mJ=u3.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=mJ,r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}function o(s,a,u){if(s.hasOwnProperty(a))for(var l=s[a],c=0,f=l.length;c<f;++c)u[l[c]+(0,r.default)(a)]=u[a]}e.exports=t.default})(a3,a3.exports);var Tze=a3.exports,l3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r,i,o,s,a){for(var u=0,l=r.length;u<l;++u){var c=r[u](i,o,s,a);if(c)return c}}e.exports=t.default})(l3,l3.exports);var Nze=l3.exports,c3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=["-webkit-","-moz-",""],r={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function i(o,s){if(o==="cursor"&&r.hasOwnProperty(s))return n.map(function(a){return a+s})}e.exports=t.default})(c3,c3.exports);var Rze=c3.exports,f3={exports:{}},d3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=/-webkit-|-moz-|-ms-/;function r(i){return typeof i=="string"&&n.test(i)}e.exports=t.default})(d3,d3.exports);var l1=d3.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=l1,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}var o=["-webkit-",""];function s(a,u){if(typeof u=="string"&&!(0,r.default)(u)&&u.indexOf("cross-fade(")>-1)return o.map(function(l){return u.replace(/cross-fade\(/g,l+"cross-fade(")})}e.exports=t.default})(f3,f3.exports);var Bze=f3.exports,h3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=l1,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}var o=["-webkit-",""];function s(a,u){if(typeof u=="string"&&!(0,r.default)(u)&&u.indexOf("filter(")>-1)return o.map(function(l){return u.replace(/filter\(/g,l+"filter(")})}e.exports=t.default})(h3,h3.exports);var Lze=h3.exports,g3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function r(i,o){if(i==="display"&&n.hasOwnProperty(o))return n[o]}e.exports=t.default})(g3,g3.exports);var Pze=g3.exports,p3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function i(o,s,a){o==="flexDirection"&&typeof s=="string"&&(s.indexOf("column")>-1?a.WebkitBoxOrient="vertical":a.WebkitBoxOrient="horizontal",s.indexOf("reverse")>-1?a.WebkitBoxDirection="reverse":a.WebkitBoxDirection="normal"),r.hasOwnProperty(o)&&(a[r[o]]=n[s]||s)}e.exports=t.default})(p3,p3.exports);var jze=p3.exports,m3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=l1,r=i(n);function i(u){return u&&u.__esModule?u:{default:u}}var o=["-webkit-","-moz-",""],s=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function a(u,l){if(typeof l=="string"&&!(0,r.default)(l)&&s.test(l))return o.map(function(c){return c+l})}e.exports=t.default})(m3,m3.exports);var Ize=m3.exports,y3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=l1,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}var o=["-webkit-",""];function s(a,u){if(typeof u=="string"&&!(0,r.default)(u)&&u.indexOf("image-set(")>-1)return o.map(function(l){return u.replace(/image-set\(/g,l+"image-set(")})}e.exports=t.default})(y3,y3.exports);var zze=y3.exports,b3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r,i){if(r==="position"&&i==="sticky")return["-webkit-sticky","sticky"]}e.exports=t.default})(b3,b3.exports);var Uze=b3.exports,v3={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=["-webkit-","-moz-",""],r={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},i={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function o(s,a){if(r.hasOwnProperty(s)&&i.hasOwnProperty(a))return n.map(function(u){return u+a})}e.exports=t.default})(v3,v3.exports);var qze=v3.exports,x3={exports:{}},_3={exports:{}},Wze=/[A-Z]/g,Hze=/^ms-/,Jw={};function Yze(e){return"-"+e.toLowerCase()}function Gze(e){if(Jw.hasOwnProperty(e))return Jw[e];var t=e.replace(Wze,Yze);return Jw[e]=Hze.test(t)?"-"+t:t}const Vze=Object.freeze(Object.defineProperty({__proto__:null,default:Gze},Symbol.toStringTag,{value:"Module"})),Xze=rd(Vze);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=Xze,r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}function o(s){return(0,r.default)(s)}e.exports=t.default})(_3,_3.exports);var Kze=_3.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var n=Kze,r=u(n),i=l1,o=u(i),s=mJ,a=u(s);function u(h){return h&&h.__esModule?h:{default:h}}var l={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},c={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function f(h,g){if((0,o.default)(h))return h;for(var p=h.split(/,(?![^()]*(?:\([^()]*\))?\))/g),m=0,y=p.length;m<y;++m){var b=p[m],x=[b];for(var v in g){var _=(0,r.default)(v);if(b.indexOf(_)>-1&&_!=="order")for(var w=g[v],$=0,A=w.length;$<A;++$)x.unshift(b.replace(_,c[w[$]]+_))}p[m]=x.join(",")}return p.join(",")}function d(h,g,p,m){if(typeof g=="string"&&l.hasOwnProperty(h)){var y=f(g,m),b=y.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(v){return!/-moz-|-ms-/.test(v)}).join(",");if(h.indexOf("Webkit")>-1)return b;var x=y.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(v){return!/-webkit-|-ms-/.test(v)}).join(",");return h.indexOf("Moz")>-1?x:(p["Webkit"+(0,a.default)(h)]=b,p["Moz"+(0,a.default)(h)]=x,y)}}e.exports=t.default})(x3,x3.exports);var Zze=x3.exports;Object.defineProperty(ZM,"__esModule",{value:!0});ZM.default=EUe;var Jze=Oze,Qze=Lr(Jze),eUe=Tze,tUe=Lr(eUe),nUe=Nze,rUe=Lr(nUe),iUe=Rze,oUe=Lr(iUe),sUe=Bze,aUe=Lr(sUe),uUe=Lze,lUe=Lr(uUe),cUe=Pze,fUe=Lr(cUe),dUe=jze,hUe=Lr(dUe),gUe=Ize,pUe=Lr(gUe),mUe=zze,yUe=Lr(mUe),bUe=Uze,vUe=Lr(bUe),xUe=qze,_Ue=Lr(xUe),$Ue=Zze,wUe=Lr($Ue);function Lr(e){return e&&e.__esModule?e:{default:e}}var AUe=[aUe.default,oUe.default,lUe.default,hUe.default,pUe.default,yUe.default,vUe.default,_Ue.default,wUe.default,fUe.default],mB=Qze.default.prefixMap;function EUe(e){for(var t in e){var n=e[t],r=(0,rUe.default)(AUe,t,n,e,mB);r&&(e[t]=r),(0,tUe.default)(mB,t,e)}return e}Object.defineProperty(qd,"__esModule",{value:!0});var $3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};qd.PluginSet=bJ;qd.fallbacks=MUe;qd.contentWrap=TUe;qd.prefixes=NUe;var CUe=HM,JM=yJ(CUe),SUe=Ud,FUe=ZM,kUe=yJ(FUe);function yJ(e){return e&&e.__esModule?e:{default:e}}var DUe=function(e){return e==="development"||!e}("production");function bJ(e){this.fns=e||[]}(0,JM.default)(bJ.prototype,{add:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(o){t.fns.indexOf(o)>=0?DUe&&console.warn("adding the same plugin again, ignoring"):t.fns=[o].concat(t.fns)})},remove:function(t){this.fns=this.fns.filter(function(n){return n!==t})},clear:function(){this.fns=[]},transform:function(t){return this.fns.reduce(function(n,r){return r(n)},t)}});function MUe(e){var t=Object.keys(e.style).map(function(i){return Array.isArray(e.style[i])}).indexOf(!0)>=0;if(t){var n=e.style,r=Object.keys(n).reduce(function(i,o){return i[o]=Array.isArray(n[o])?n[o].join("; "+(0,SUe.processStyleName)(o)+": "):n[o],i},{});return(0,JM.default)({},e,{style:r})}return e}var OUe=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function TUe(e){if(e.style.content){var t=e.style.content;return OUe.indexOf(t)>=0||/^(attr|calc|counters?|url)\(/.test(t)||t.charAt(0)===t.charAt(t.length-1)&&(t.charAt(0)==='"'||t.charAt(0)==="'")?e:$3({},e,{style:$3({},e.style,{content:'"'+t+'"'})})}return e}function NUe(e){return(0,JM.default)({},e,{style:(0,kUe.default)($3({},e.style))})}var QM={};Object.defineProperty(QM,"__esModule",{value:!0});QM.default=RUe;function RUe(e,t){for(var n=1540483477,r=24,i=t^e.length,o=e.length,s=0;o>=4;){var a=BUe(e,s);a=zu(a,n),a^=a>>>r,a=zu(a,n),i=zu(i,n),i^=a,s+=4,o-=4}switch(o){case 3:i^=yB(e,s),i^=e.charCodeAt(s+2)<<16,i=zu(i,n);break;case 2:i^=yB(e,s),i=zu(i,n);break;case 1:i^=e.charCodeAt(s),i=zu(i,n);break}return i^=i>>>13,i=zu(i,n),i^=i>>>15,i>>>0}function BUe(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function yB(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function zu(e,t){e=e|0,t=t|0;var n=e&65535,r=e>>>16,i=n*t+((r*t&65535)<<16)|0;return i}Object.defineProperty(Y,"__esModule",{value:!0});Y.compose=Y.merge=Y.$=Y.style=Y.presets=Y.keyframes=Y.fontFace=Y.insertGlobal=Y.insertRule=Y.plugins=Y.styleSheet=void 0;Y.speedy=qUe;Y.simulations=WUe;Y.simulate=HUe;Y.cssLabels=YUe;Y.isLikeRule=iO;Y.idFor=oO;Y.css=Gt;Y.rehydrate=sqe;Y.flush=aqe;Y.select=sO;Y.parent=lqe;Y.media=cqe;Y.pseudo=pe;Y.active=fqe;Y.any=dqe;Y.checked=hqe;Y.disabled=gqe;Y.empty=pqe;Y.enabled=mqe;Y._default=yqe;Y.first=bqe;Y.firstChild=vqe;Y.firstOfType=xqe;Y.fullscreen=_qe;Y.focus=$qe;Y.hover=wqe;Y.indeterminate=Aqe;Y.inRange=Eqe;Y.invalid=Cqe;Y.lastChild=Sqe;Y.lastOfType=Fqe;Y.left=kqe;Y.link=Dqe;Y.onlyChild=Mqe;Y.onlyOfType=Oqe;Y.optional=Tqe;Y.outOfRange=Nqe;Y.readOnly=Rqe;Y.readWrite=Bqe;Y.required=Lqe;Y.right=Pqe;Y.root=jqe;Y.scope=Iqe;Y.target=zqe;Y.valid=Uqe;Y.visited=qqe;Y.dir=Wqe;Y.lang=Hqe;Y.not=Yqe;Y.nthChild=Gqe;Y.nthLastChild=Vqe;Y.nthLastOfType=Xqe;Y.nthOfType=Kqe;Y.after=Zqe;Y.before=Jqe;Y.firstLetter=Qqe;Y.firstLine=eWe;Y.selection=tWe;Y.backdrop=nWe;Y.placeholder=rWe;Y.cssFor=iWe;Y.attribsFor=oWe;var LUe=HM,PUe=tO(LUe),jUe=YM,eO=Ud,IUe=XM,Fu=tO(IUe),ys=qd,zUe=QM,UUe=tO(zUe);function tO(e){return e&&e.__esModule?e:{default:e}}function c1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kr=Y.styleSheet=new jUe.StyleSheet;kr.inject();function qUe(e){return kr.speedy(e)}var f1=Y.plugins=kr.plugins=new ys.PluginSet([ys.prefixes,ys.contentWrap,ys.fallbacks]);f1.media=new ys.PluginSet;f1.fontFace=new ys.PluginSet;f1.keyframes=new ys.PluginSet([ys.prefixes,ys.fallbacks]);var nO=!1,M_=typeof window<"u",rO=nO,bB=!1,vB=!1;function WUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;rO=!!e}function HUe(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=(0,Fu.default)(t),t?rO?t.reduce(function(r,i){return r["data-simulate-"+bv(i)]="",r},{}):(bB||(console.warn("can't simulate without once calling simulations(true)"),bB=!0),vB||(console.warn("don't use simulation outside dev"),vB=!0),{}):{}}var d1=nO;function YUe(e){d1=!!e}function bv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return e.toLowerCase().replace(/[^a-z0-9]/g,t)}function h1(e){var t=JSON.stringify(e),n=(0,UUe.default)(t).toString(36);return e.label&&e.label.length>0&&nO?bv(e.label.join("."),"-")+"-"+n:n}function iO(e){var t=Object.keys(e).filter(function(n){return n!=="toString"});return t.length!==1?!1:!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0])}function oO(e){var t=Object.keys(e).filter(function(i){return i!=="toString"});if(t.length!==1)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,r=n.exec(t[0]);if(!r)throw new Error("not a rule");return r[1]}var GUe=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function w3(e){if(e.indexOf(",")===-1)return[e];for(var t=[],n=[],r=0,i;i=GUe.exec(e);)switch(i[0]){case"(":r++;break;case")":r--;break;case",":if(r)break;t.push(i.index)}for(i=t.length;i--;)n.unshift(e.slice(t[i]+1)),e=e.slice(0,t[i]);return n.unshift(e),n}function xB(e,t){if(!e)return t.replace(/\&/g,"");if(!t)return".css-"+e+",[data-css-"+e+"]";var n=w3(t).map(function(r){return r.indexOf("&")>=0?[r.replace(/\&/mg,".css-"+e),r.replace(/\&/mg,"[data-css-"+e+"]")].join(","):".css-"+e+r+",[data-css-"+e+"]"+r}).join(",");return rO&&/^\&\:/.exec(t)&&!/\s/.exec(t)&&(n+=",.css-"+e+"[data-simulate-"+bv(t)+"],[data-css-"+e+"][data-simulate-"+bv(t)+"]"),n}function A3(e){var t=e.selector,n=e.style,r=f1.transform({selector:t,style:n});return r.selector+"{"+(0,eO.createMarkupForStyles)(r.style)+"}"}function vv(e){var t=void 0,n=void 0,r=void 0,i=void 0;return Object.keys(e).forEach(function(o){o.indexOf("&")>=0?(n=n||{},n[o]=e[o]):o.indexOf("@media")===0?(r=r||{},r[o]=vv(e[o])):o.indexOf("@supports")===0?(i=i||{},i[o]=vv(e[o])):o==="label"?e.label.length>0&&(t=t||{},t.label=d1?e.label.join("."):""):(t=t||{},t[o]=e[o])}),{plain:t,selects:n,medias:r,supports:i}}function xv(e,t){var n=[],r=t.plain,i=t.selects,o=t.medias,s=t.supports;return r&&n.push(A3({style:r,selector:xB(e)})),i&&Object.keys(i).forEach(function(a){return n.push(A3({style:i[a],selector:xB(e,a)}))}),o&&Object.keys(o).forEach(function(a){return n.push(a+"{"+xv(e,o[a]).join("")+"}")}),s&&Object.keys(s).forEach(function(a){return n.push(a+"{"+xv(e,s[a]).join("")+"}")}),n}var Fi=kr.inserted={};function VUe(e){if(!Fi[e.id]){Fi[e.id]=!0;var t=vv(e.style),n=xv(e.id,t);Fi[e.id]=M_?!0:n,n.forEach(function(r){return kr.insert(r)})}}var Wg=kr.registered={};function O_(e){Wg[e.id]||(Wg[e.id]=e)}function XUe(e){if(iO(e)){var t=Wg[oO(e)];if(t==null)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return t}return e}var ny={};function KUe(e){if(O_(e),VUe(e),ny[e.id])return ny[e.id];var t=c1({},"data-css-"+e.id,d1&&e.label||"");return Object.defineProperty(t,"toString",{enumerable:!1,value:function(){return"css-"+e.id}}),ny[e.id]=t,t}function ZUe(e){for(var t=[":",".","[",">"," "],n=!1,r=e.charAt(0),i=0;i<t.length;i++)if(r===t[i]){n=!0;break}return n||e.indexOf("&")>=0}function _B(e,t){var n=w3(e).map(function(i){return i.indexOf("&")>=0?i:"&"+i}),r=w3(t).map(function(i){return i.indexOf("&")>=0?i:"&"+i});return r.reduce(function(i,o){return i.concat(n.map(function(s){return o.replace(/\&/g,s)}))},[]).join(",")}function JUe(e,t){return e?"@media "+e.substring(6)+" and "+t.substring(6):t}function QUe(e){return e.indexOf("@media")===0}function eqe(e){return e.indexOf("@supports")===0}function tqe(e,t){return e?"@supports "+e.substring(9)+" and "+t.substring(9):t}function vJ(e){for(var t=[],n=0;n<e.length;n++)Array.isArray(e[n])?t=t.concat(vJ(e[n])):t=t.concat(e[n]);return t}var $B={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function nl(e,t){var n=t.selector,r=n===void 0?"":n,i=t.mq,o=i===void 0?"":i,s=t.supp,a=s===void 0?"":s,u=t.src,l=u===void 0?{}:u;Array.isArray(l)||(l=[l]),l=vJ(l),l.forEach(function(c){if(iO(c)){var f=XUe(c);if(f.type!=="css")throw new Error("cannot merge this rule");c=f.style}c=(0,Fu.default)(c),c&&c.composes&&nl(e,{selector:r,mq:o,supp:a,src:c.composes}),Object.keys(c||{}).forEach(function(d){if(ZUe(d))$B[d]&&$B[d].forEach(function(g){return nl(e,{selector:_B(r,g),mq:o,supp:a,src:c[d]})}),nl(e,{selector:_B(r,d),mq:o,supp:a,src:c[d]});else if(QUe(d))nl(e,{selector:r,mq:JUe(o,d),supp:a,src:c[d]});else if(eqe(d))nl(e,{selector:r,mq:o,supp:tqe(a,d),src:c[d]});else if(d!=="composes"){var h=e;a&&(h[a]=h[a]||{},h=h[a]),o&&(h[o]=h[o]||{},h=h[o]),r&&(h[r]=h[r]||{},h=h[r]),d==="label"?d1&&(e.label=e.label.concat(c.label)):h[d]=c[d]}})})}function wB(e){var t={label:[]};nl(t,{src:e});var n={id:h1(t),style:t,label:d1?t.label.join("."):"",type:"css"};return KUe(n)}var _v={};Object.defineProperty(_v,"toString",{enumerable:!1,value:function(){return"css-nil"}});var mm=typeof WeakMap<"u"?[_v,new WeakMap,new WeakMap,new WeakMap]:[_v];function nqe(e){return function(t){if(mm[t.length]){for(var n=mm[t.length],r=0;r<t.length-1;)n.has(t[r])||n.set(t[r],new WeakMap),n=n.get(t[r]),r++;if(n.has(t[t.length-1])){var i=n.get(t[r]);if(Wg[i.toString().substring(4)])return i}}var o=e(t);if(mm[t.length]){for(var s=0,a=mm[t.length];s<t.length-1;)a=a.get(t[s]),s++;try{a.set(t[s],o)}catch{}}return o}}var rqe=typeof WeakMap<"u"?nqe(wB):wB;function Gt(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]&&t[0].length&&t[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return t=(0,Fu.default)(t),t?rqe(t):_v}Gt.insert=function(e){var t={id:h1(e),css:e,type:"raw"};O_(t),Fi[t.id]||(kr.insert(t.css),Fi[t.id]=M_?!0:[t.css])};Y.insertRule=Gt.insert;Gt.global=function(e,t){if(t=(0,Fu.default)(t),t)return Gt.insert(A3({selector:e,style:t}))};Y.insertGlobal=Gt.global;function iqe(e){if(!Fi[e.id]){var t=Object.keys(e.keyframes).map(function(r){var i=f1.keyframes.transform({id:e.id,name:r,style:e.keyframes[r]});return i.name+"{"+(0,eO.createMarkupForStyles)(i.style)+"}"}).join(""),n=["-webkit-","-moz-","-o-",""].map(function(r){return"@"+r+"keyframes "+(e.name+"_"+e.id)+"{"+t+"}"});n.forEach(function(r){return kr.insert(r)}),Fi[e.id]=M_?!0:n}}Gt.keyframes=function(e,t){t||(t=e,e="animation"),t=(0,Fu.default)(t)||{};var n={id:h1({name:e,kfs:t}),type:"keyframes",name:e,keyframes:t};return O_(n),iqe(n),e+"_"+n.id};Gt.fontFace=function(e){e=(0,Fu.default)(e);var t={id:h1(e),type:"font-face",font:e};return O_(t),oqe(t),e.fontFamily};Y.fontFace=Gt.fontFace;Y.keyframes=Gt.keyframes;function oqe(e){if(!Fi[e.id]){var t="@font-face{"+(0,eO.createMarkupForStyles)(e.font)+"}";kr.insert(t),Fi[e.id]=M_?!0:[t]}}function sqe(e){(0,PUe.default)(Fi,e.reduce(function(t,n){return t[n]=!0,t},{}))}function aqe(){Fi=kr.inserted={},Wg=kr.registered={},ny={},kr.flush(),kr.inject()}Y.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var uqe=Y.style=Gt;function sO(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?Gt(c1({},e,n)):uqe(n)}Y.$=sO;function lqe(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gt(c1({},e+" &",n))}Y.merge=Gt;Y.compose=Gt;function cqe(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gt(c1({},"@media "+e,n))}function pe(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gt(c1({},e,n))}function fqe(e){return pe(":active",e)}function dqe(e){return pe(":any",e)}function hqe(e){return pe(":checked",e)}function gqe(e){return pe(":disabled",e)}function pqe(e){return pe(":empty",e)}function mqe(e){return pe(":enabled",e)}function yqe(e){return pe(":default",e)}function bqe(e){return pe(":first",e)}function vqe(e){return pe(":first-child",e)}function xqe(e){return pe(":first-of-type",e)}function _qe(e){return pe(":fullscreen",e)}function $qe(e){return pe(":focus",e)}function wqe(e){return pe(":hover",e)}function Aqe(e){return pe(":indeterminate",e)}function Eqe(e){return pe(":in-range",e)}function Cqe(e){return pe(":invalid",e)}function Sqe(e){return pe(":last-child",e)}function Fqe(e){return pe(":last-of-type",e)}function kqe(e){return pe(":left",e)}function Dqe(e){return pe(":link",e)}function Mqe(e){return pe(":only-child",e)}function Oqe(e){return pe(":only-of-type",e)}function Tqe(e){return pe(":optional",e)}function Nqe(e){return pe(":out-of-range",e)}function Rqe(e){return pe(":read-only",e)}function Bqe(e){return pe(":read-write",e)}function Lqe(e){return pe(":required",e)}function Pqe(e){return pe(":right",e)}function jqe(e){return pe(":root",e)}function Iqe(e){return pe(":scope",e)}function zqe(e){return pe(":target",e)}function Uqe(e){return pe(":valid",e)}function qqe(e){return pe(":visited",e)}function Wqe(e,t){return pe(":dir("+e+")",t)}function Hqe(e,t){return pe(":lang("+e+")",t)}function Yqe(e,t){var n=e.split(",").map(function(r){return r.trim()}).map(function(r){return":not("+r+")"});return n.length===1?pe(":not("+e+")",t):sO(n.join(""),t)}function Gqe(e,t){return pe(":nth-child("+e+")",t)}function Vqe(e,t){return pe(":nth-last-child("+e+")",t)}function Xqe(e,t){return pe(":nth-last-of-type("+e+")",t)}function Kqe(e,t){return pe(":nth-of-type("+e+")",t)}function Zqe(e){return pe("::after",e)}function Jqe(e){return pe("::before",e)}function Qqe(e){return pe("::first-letter",e)}function eWe(e){return pe("::first-line",e)}function tWe(e){return pe("::selection",e)}function nWe(e){return pe("::backdrop",e)}function rWe(e){return Gt({"::placeholder":e})}function iWe(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=(0,Fu.default)(t),t?t.map(function(r){var i={label:[]};return nl(i,{src:r}),xv(h1(i),vv(i)).join("")}).join(""):""}function oWe(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t=(0,Fu.default)(t);var r=t?t.map(function(i){oO(i);var o=Object.keys(i)[0],s=i[o];return o+'="'+(s||"")+'"'}).join(" "):"";return r}var Qn={},g1={};Object.defineProperty(g1,"__esModule",{value:!0});function sWe(e){return e.name!=null}g1.isSurfaceInfo=sWe;function aWe(e){return e.drawArea instanceof HTMLElement}g1.isSurface=aWe;var p1={},aO={};function uWe(){}var _r={},Hc=[],AB=[];function Hg(e,t){var n=AB,r,i,o,s;for(s=arguments.length;s-- >2;)Hc.push(arguments[s]);for(t&&t.children!=null&&(Hc.length||Hc.push(t.children),delete t.children);Hc.length;)if((i=Hc.pop())&&i.pop!==void 0)for(s=i.length;s--;)Hc.push(i[s]);else typeof i=="boolean"&&(i=null),(o=typeof e!="function")&&(i==null?i="":typeof i=="number"?i=String(i):typeof i!="string"&&(o=!1)),o&&r?n[n.length-1]+=i:n===AB?n=[i]:n.push(i),r=o;var a=new uWe;return a.nodeName=e,a.children=n,a.attributes=t??void 0,a.key=t==null?void 0:t.key,_r.vnode!==void 0&&_r.vnode(a),a}function ka(e,t){for(var n in t)e[n]=t[n];return e}var lWe=typeof Promise=="function"?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function xJ(e,t){return Hg(e.nodeName,ka(ka({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var cWe=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,E3=[];function _J(e){!e._dirty&&(e._dirty=!0)&&E3.push(e)==1&&(_r.debounceRendering||lWe)(uO)}function uO(){var e,t=E3;for(E3=[];e=t.pop();)e._dirty&&T_(e)}function fWe(e,t,n){return typeof t=="string"||typeof t=="number"?e.splitText!==void 0:typeof t.nodeName=="string"?!e._componentConstructor&&$J(e,t.nodeName):n||e._componentConstructor===t.nodeName}function $J(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function wJ(e){var t=ka({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(n!==void 0)for(var r in n)t[r]===void 0&&(t[r]=n[r]);return t}function dWe(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function lO(e){var t=e.parentNode;t&&t.removeChild(e)}function EB(e,t,n,r,i){if(t==="className"&&(t="class"),t!=="key")if(t==="ref")n&&n(null),r&&r(e);else if(t==="class"&&!i)e.className=r||"";else if(t==="style"){if((!r||typeof r=="string"||typeof n=="string")&&(e.style.cssText=r||""),r&&typeof r=="object"){if(typeof n!="string")for(var o in n)o in r||(e.style[o]="");for(var o in r)e.style[o]=typeof r[o]=="number"&&cWe.test(o)===!1?r[o]+"px":r[o]}}else if(t==="dangerouslySetInnerHTML")r&&(e.innerHTML=r.__html||"");else if(t[0]=="o"&&t[1]=="n"){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,CB,s):e.removeEventListener(t,CB,s),(e._listeners||(e._listeners={}))[t]=r}else if(t!=="list"&&t!=="type"&&!i&&t in e)hWe(e,t,r??""),(r==null||r===!1)&&e.removeAttribute(t);else{var a=i&&t!==(t=t.replace(/^xlink:?/,""));r==null||r===!1?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):typeof r!="function"&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}}function hWe(e,t,n){try{e[t]=n}catch{}}function CB(e){return this._listeners[e.type](_r.event&&_r.event(e)||e)}var AJ=[],C3=0,sa=!1,$v=!1;function EJ(){for(var e;e=AJ.pop();)_r.afterMount&&_r.afterMount(e),e.componentDidMount&&e.componentDidMount()}function CJ(e,t,n,r,i,o){C3++||(sa=i!=null&&i.ownerSVGElement!==void 0,$v=e!=null&&!("__preactattr_"in e));var s=SJ(e,t,n,r,o);return i&&s.parentNode!==i&&i.appendChild(s),--C3||($v=!1,o||EJ()),s}function SJ(e,t,n,r,i){var o=e,s=sa;if((t==null||typeof t=="boolean")&&(t=""),typeof t=="string"||typeof t=="number")return e&&e.splitText!==void 0&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),Zl(e,!0))),o.__preactattr_=!0,o;var a=t.nodeName;if(typeof a=="function")return bWe(e,t,n,r);if(sa=a==="svg"?!0:a==="foreignObject"?!1:sa,a=String(a),(!e||!$J(e,a))&&(o=dWe(a,sa),e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),Zl(e,!0)}var u=o.firstChild,l=o.__preactattr_,c=t.children;if(l==null){l=o.__preactattr_={};for(var f=o.attributes,d=f.length;d--;)l[f[d].name]=f[d].value}return!$v&&c&&c.length===1&&typeof c[0]=="string"&&u!=null&&u.splitText!==void 0&&u.nextSibling==null?u.nodeValue!=c[0]&&(u.nodeValue=c[0]):(c&&c.length||u!=null)&&gWe(o,c,n,r,$v||l.dangerouslySetInnerHTML!=null),pWe(o,t.attributes,l),sa=s,o}function gWe(e,t,n,r,i){var o=e.childNodes,s=[],a={},u=0,l=0,c=o.length,f=0,d=t?t.length:0,h,g,p,m,y;if(c!==0)for(var b=0;b<c;b++){var x=o[b],v=x.__preactattr_,_=d&&v?x._component?x._component.__key:v.key:null;_!=null?(u++,a[_]=x):(v||(x.splitText!==void 0?!i||x.nodeValue.trim():i))&&(s[f++]=x)}if(d!==0)for(var b=0;b<d;b++){m=t[b],y=null;var _=m.key;if(_!=null)u&&a[_]!==void 0&&(y=a[_],a[_]=void 0,u--);else if(!y&&l<f){for(h=l;h<f;h++)if(s[h]!==void 0&&fWe(g=s[h],m,i)){y=g,s[h]=void 0,h===f-1&&f--,h===l&&l++;break}}y=SJ(y,m,n,r),p=o[b],y&&y!==e&&y!==p&&(p==null?e.appendChild(y):y===p.nextSibling?lO(p):e.insertBefore(y,p))}if(u)for(var b in a)a[b]!==void 0&&Zl(a[b],!1);for(;l<=f;)(y=s[f--])!==void 0&&Zl(y,!1)}function Zl(e,t){var n=e._component;n?N_(n):(e.__preactattr_!=null&&e.__preactattr_.ref&&e.__preactattr_.ref(null),(t===!1||e.__preactattr_==null)&&lO(e),FJ(e))}function FJ(e){for(e=e.lastChild;e;){var t=e.previousSibling;Zl(e,!0),e=t}}function pWe(e,t,n){var r;for(r in n)!(t&&t[r]!=null)&&n[r]!=null&&EB(e,r,n[r],n[r]=void 0,sa);for(r in t)r!=="children"&&r!=="innerHTML"&&(!(r in n)||t[r]!==(r==="value"||r==="checked"?e[r]:n[r]))&&EB(e,r,n[r],n[r]=t[r],sa)}var S3={};function mWe(e){var t=e.constructor.name;(S3[t]||(S3[t]=[])).push(e)}function kJ(e,t,n){var r=S3[e.name],i;if(e.prototype&&e.prototype.render?(i=new e(t,n),Yg.call(i,t,n)):(i=new Yg(t,n),i.constructor=e,i.render=yWe),r){for(var o=r.length;o--;)if(r[o].constructor===e){i.nextBase=r[o].nextBase,r.splice(o,1);break}}return i}function yWe(e,t,n){return this.constructor(e,n)}function wv(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,n!==0&&(n===1||_r.syncComponentUpdates!==!1||!e.base?T_(e,1,i):_J(e)),e.__ref&&e.__ref(e))}function T_(e,t,n,r){if(!e._disable){var i=e.props,o=e.state,s=e.context,a=e.prevProps||i,u=e.prevState||o,l=e.prevContext||s,c=e.base,f=e.nextBase,d=c||f,h=e._component,g=!1,p,m,y;if(c&&(e.props=a,e.state=u,e.context=l,t!==2&&e.shouldComponentUpdate&&e.shouldComponentUpdate(i,o,s)===!1?g=!0:e.componentWillUpdate&&e.componentWillUpdate(i,o,s),e.props=i,e.state=o,e.context=s),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!g){p=e.render(i,o,s),e.getChildContext&&(s=ka(ka({},s),e.getChildContext()));var b=p&&p.nodeName,x,v;if(typeof b=="function"){var _=wJ(p);m=h,m&&m.constructor===b&&_.key==m.__key?wv(m,_,1,s,!1):(x=m,e._component=m=kJ(b,_,s),m.nextBase=m.nextBase||f,m._parentComponent=e,wv(m,_,0,s,!1),T_(m,1,n,!0)),v=m.base}else y=d,x=h,x&&(y=e._component=null),(d||t===1)&&(y&&(y._component=null),v=CJ(y,p,s,n||!c,d&&d.parentNode,!0));if(d&&v!==d&&m!==h){var w=d.parentNode;w&&v!==w&&(w.replaceChild(v,d),x||(d._component=null,Zl(d,!1)))}if(x&&N_(x),e.base=v,v&&!r){for(var $=e,A=e;A=A._parentComponent;)($=A).base=v;v._component=$,v._componentConstructor=$.constructor}}if(!c||n?AJ.unshift(e):g||(e.componentDidUpdate&&e.componentDidUpdate(a,u,l),_r.afterUpdate&&_r.afterUpdate(e)),e._renderCallbacks!=null)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);!C3&&!r&&EJ()}}function bWe(e,t,n,r){for(var i=e&&e._component,o=i,s=e,a=i&&e._componentConstructor===t.nodeName,u=a,l=wJ(t);i&&!u&&(i=i._parentComponent);)u=i.constructor===t.nodeName;return i&&u&&(!r||i._component)?(wv(i,l,3,n,r),e=i.base):(o&&!a&&(N_(o),e=s=null),i=kJ(t.nodeName,l,n),e&&!i.nextBase&&(i.nextBase=e,s=null),wv(i,l,1,n,r),e=i.base,s&&e!==s&&(s._component=null,Zl(s,!1))),e}function N_(e){_r.beforeUnmount&&_r.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?N_(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,lO(t),mWe(e),FJ(t)),e.__ref&&e.__ref(null)}function Yg(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}ka(Yg.prototype,{setState:function(t,n){var r=this.state;this.prevState||(this.prevState=ka({},r)),ka(r,typeof t=="function"?t(r,this.props):t),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),_J(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),T_(this,2)},render:function(){}});function DJ(e,t,n){return CJ(n,e,{},!1,t,!1)}var vWe={h:Hg,createElement:Hg,cloneElement:xJ,Component:Yg,render:DJ,rerender:uO,options:_r};const xWe=Object.freeze(Object.defineProperty({__proto__:null,Component:Yg,cloneElement:xJ,createElement:Hg,default:vWe,h:Hg,options:_r,render:DJ,rerender:uO},Symbol.toStringTag,{value:"Module"})),cO=rd(xWe);var fO={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(fO,"__esModule",{value:!0});const ym=cO,Qw=Y;class df extends ym.Component{componentDidMount(){const{name:t,tab:n}=this.props;this.props.registerSurface(t,n,this)}componentDidUpdate(){return!1}render(){const{name:t,visible:n,styles:r}=this.props,i=Object.assign({},df.defaultStyles,r),{width:o,height:s}=i;let{maxHeight:a,maxWidth:u}=i;a=s===df.defaultStyles.height?a:s,u=o===df.defaultStyles.width?u:o;const l=Qw.css({display:n?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:s,width:o,maxHeight:a,maxWidth:u,overflow:"auto"}),c=Qw.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),f=Qw.css({boxSizing:"border-box"});return ym.h("div",{className:`${l} tf-surface`,ref:d=>this.container=d,"data-visible":n},ym.h("div",{className:`${c} tf-label`,ref:d=>this.label=d},t),ym.h("div",{className:`${f} tf-draw-area`,ref:d=>this.drawArea=d}))}}df.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"};fO.SurfaceComponent=df;var dO={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(dO,"__esModule",{value:!0});const E0=cO,MJ=Y;class _We extends E0.Component{render(){const{tabNames:t,activeTab:n,handleClick:r}=this.props,i=t.length>0?t.map(s=>E0.h($We,{key:s,id:s,handleClick:r,isActive:s===n},s)):null,o=MJ.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return E0.h("div",{className:`${o} visor-tabs`},i)}}dO.Tabs=_We;class $We extends E0.Component{render(){const{children:t,isActive:n,handleClick:r,id:i}=this.props,o=MJ.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return E0.h("a",{className:`${o} tf-tab`,"data-isactive":n,onClick:()=>r(i)},t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(aO,"__esModule",{value:!0});const di=cO,fl=Y,wWe=fO,AWe=dO;class hO extends di.Component{static render(t,n,r){return di.render(di.h(hO,Object.assign({},r)),t,n)}constructor(t){super(t),this.surfaces=new Map;const n=t.startOpen==null?!0:t.startOpen;this.state={isOpen:n,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(t,n){const r=this.surfaceId(t,n);let i;if(this.surfaces.has(r))i=this.surfaces.get(r);else throw Error(`Surface not found with id: ${r}`);return{container:i.container,label:i.label,drawArea:i.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(t,n){return t+n}setTabs(t){const n=t.map(o=>o.tab),r=this.state.tabs;let i;for(const o of n)r.has(o)||(r.add(o),i=o);i!=null&&this.setState({tabs:r,activeTab:i})}getTabs(){return this.state.tabs}registerSurface(t,n,r){const i=this.surfaceId(t,n);this.surfaces.set(i,r)}keyHandler(t){t.keyCode===192&&(t.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(t){this.setState({activeTab:t})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(t){this.setTabs(t.surfaceList)}render(){const{isOpen:t,isFullscreen:n,activeTab:r}=this.state,{surfaceList:i}=this.props,o=Array.from(this.getTabs().values()),u=n?"90vw":"550px",l=fl.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),c=fl.css({right:"0"}),f=fl.css({right:`calc(-${u} - 10px)`}),d=t?c:f,h=fl.css({});return di.h("div",{className:`${l} ${d} visor`,"data-isopen":t,"data-isfullscreen":n},di.h(EWe,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:n}),di.h(AWe.Tabs,{tabNames:o,activeTab:r,handleClick:this.setActiveTab.bind(this)}),di.h("div",{className:`${h} visor-surfaces`},i.map(g=>di.h(wWe.SurfaceComponent,{key:g.name+g.tab,name:g.name,tab:g.tab,styles:g.styles,registerSurface:this.registerSurface.bind(this),visible:r===g.tab}))))}}aO.VisorComponent=hO;function EWe(e){const{isFullScreen:t,fullScreenHandler:n,closeHandler:r}=e,i=fl.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),o=fl.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),s=fl.css({marginLeft:"auto"});return di.h("div",{className:`${i} visor-controls`},di.h("button",{className:`${o}`,onClick:n},t?"Minimize":"Maximize"),di.h("button",{className:`${o} ${s}`,onClick:r},"Hide"))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(p1,"__esModule",{value:!0});const CWe=aO;let bm;const SWe="Visor",eA="tfjs-visor-container";function FWe(){if(typeof document>"u")throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(eA)&&bm!=null)return bm;let e=document.getElementById(eA);e==null&&(e=document.createElement("div"),e.id=eA,document.body.appendChild(e));let t;function n(o,s){let a=null;return t=CWe.VisorComponent.render(o,t,{ref:u=>a=u,surfaceList:Array.from(s.values())}),a}const r=new Map,i=n(e,r);return bm=new OJ(i,e,r,n),bm}p1.visor=FWe;class OJ{constructor(t,n,r,i){this.visorComponent=t,this.el=n,this.surfaceList=r,this.renderVisor=i}surface(t){const{name:n}=t,r=t.tab==null?SWe:t.tab;if(n==null||!(typeof n=="string"||n instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");const i=Object.assign({},t,{tab:r}),o=`${n}-${r}`;return this.surfaceList.has(o)||this.surfaceList.set(o,i),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(n,r)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(t){if(!this.visorComponent.state.tabs.has(t))throw new Error(`Tab '${t}' does not exist`);this.visorComponent.setState({activeTab:t})}}p1.Visor=OJ;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var kWe=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(Qn,"__esModule",{value:!0});const SB=g1,DWe=p1;function MWe(e){if(e instanceof HTMLElement)return e;if(SB.isSurface(e))return e.drawArea;if(SB.isSurfaceInfo(e))return DWe.visor().surface({name:e.name,tab:e.tab,styles:e.styles}).drawArea;throw new Error("Not a drawable")}Qn.getDrawArea=MWe;function OWe(e,t){const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const o=n[i];if(e[o]!==t[o])return!1}return!0}Qn.shallowEquals=OWe;function TWe(){return kWe(this,void 0,void 0,function*(){yield new Promise(e=>requestAnimationFrame(e))})}Qn.nextFrame=TWe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(ai,"__esModule",{value:!0});const FB=Y,NWe=Qn,RWe={prepend:!1};function BWe(e,t,n={}){const r=NWe.getDrawArea(e),i=FB.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),o=FB.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),s=Object.assign({},RWe,n);let a=r.querySelector(`div[data-name=${t}]`);if(!a){if(a=document.createElement("div"),a.setAttribute("class",`${i}`),a.dataset.name=t,s.title){const u=document.createElement("div");u.setAttribute("class",`subsurface-title ${o}`),u.innerText=s.title,a.appendChild(u)}s.prepend?r.insertBefore(a,r.firstChild):r.appendChild(a)}return a}ai.subSurface=BWe;function LWe(e){let n=0,r=e;for(;r&&r.clientWidth===0;)r=r.parentElement,n=50;return r.clientWidth-n}ai.getDefaultWidth=LWe;function PWe(e){return e.clientHeight===0?200:e.clientHeight}ai.getDefaultHeight=PWe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var jWe=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},IWe=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(N3,"__esModule",{value:!0});const zWe=IWe(zd),kB=ai,vm=Qn;function UWe(e,t,n={}){return jWe(this,void 0,void 0,function*(){const r=vm.getDrawArea(e),i=t,o=Object.assign({},qWe,n);if(tA.has(r)){const m=tA.get(r);if(vm.shallowEquals(o,m.lastOptions)){yield vm.nextFrame();const y=m.view,b=y.changeset().remove(()=>!0).insert(i);yield y.change("values",b).runAsync();return}}const{xLabel:s,yLabel:a,xType:u,yType:l}=o;let c=null;s!=null&&(c={title:s});let f=null;a!=null&&(f={title:a});const d={actions:!1,mode:"vega-lite",defaultStyle:!1};let h;o.color!=null?Array.isArray(o.color)?h={field:"index",type:"nominal",scale:{range:o.color}}:h={value:o.color}:h={value:"#4C78A0"};const g={width:o.width||kB.getDefaultWidth(r),height:o.height||kB.getDefaultHeight(r),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:i,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:u,axis:c},y:{field:"value",type:l,axis:f},color:h}};yield vm.nextFrame();const p=yield zWe.default(r,g,d);tA.set(r,{view:p.view,lastOptions:o})})}N3.barchart=UWe;const qWe={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},tA=new Map;var gO={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var WWe=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},HWe=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gO,"__esModule",{value:!0});const YWe=HWe(zd),DB=ai,GWe=Qn;function VWe(e,t,n={}){return WWe(this,void 0,void 0,function*(){const r=Object.assign({},XWe,n),i=GWe.getDrawArea(e),o=[],s=t.values,a=t.tickLabels||[],u=a.length===0;let l=!0;for(let h=0;h<s.length;h++){const g=u?`Class ${h}`:a[h];u&&a.push(g);for(let p=0;p<s[h].length;p++){const m=u?`Class ${p}`:a[p],y=s[h][p];h===p&&!r.shadeDiagonal?o.push({label:g,prediction:m,count:y,noFill:!0}):(o.push({label:g,prediction:m,count:y,scaleCount:y}),y!==0&&(l=!1))}}if(!r.shadeDiagonal&&l)for(const h of o)h.noFill===!0&&(h.noFill=!1,h.scaleCount=h.count);const c={actions:!1,mode:"vega-lite",defaultStyle:!1},f={width:r.width||DB.getDefaultWidth(i),height:r.height||DB.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize}},data:{values:o},encoding:{x:{field:"prediction",type:"ordinal",title:r.xLabel||"prediction",scale:{domain:a}},y:{field:"label",type:"ordinal",title:r.yLabel||"label",scale:{domain:a}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:r.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]};r.shadeDiagonal===!1&&f.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),r.showTextOverlay&&f.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}});const d=typeof r.colorMap=="string"?{scheme:r.colorMap}:r.colorMap;f.layer[0].encoding.color.scale.range=d,yield YWe.default(i,f,c)})}gO.confusionMatrix=VWe;const XWe={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]};var pO={},Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});/*
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TJ(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}Hs.assert=TJ;function KWe(e,t,n=""){TJ(NJ(e,t),n+` Shapes ${e} and ${t} must match`)}Hs.assertShapesMatch=KWe;function NJ(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}Hs.arraysEqual=NJ;Hs.DECIMAL_PLACES_TO_CHECK=4;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var RJ=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},ZWe=Fe&&Fe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},JWe=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pO,"__esModule",{value:!0});const C0=ZWe(zB),QWe=JWe(zd),MB=ai,Gg=Hs,eHe=Qn;function tHe(e,t,n={}){return RJ(this,void 0,void 0,function*(){const r=Object.assign({},rHe,n),i=eHe.getDrawArea(e);let o=t.values;r.rowMajor&&(o=yield nHe(t.values));const{xTickLabels:s,yTickLabels:a}=t;s!=null&&OB(o,s,0),a!=null&&OB(o,a,1);const u="@tfidx@",l=[];if(o instanceof C0.Tensor){Gg.assert(o.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");const p=yield o.data(),[m,y]=o.shape;for(let b=0;b<m;b++){const x=s?`${s[b]}${u}${b}`:b;for(let v=0;v<y;v++){const _=a?`${a[v]}${u}${v}`:v,w=b*y+v,$=p[w];l.push({x,y:_,value:$})}}}else{const p=o;for(let m=0;m<p.length;m++){const y=s?`${s[m]}${u}${m}`:m;for(let b=0;b<p[m].length;b++){const x=a?`${a[b]}${u}${b}`:b,v=p[m][b];l.push({x:y,y:x,value:v})}}}const c={actions:!1,mode:"vega-lite",defaultStyle:!1},f={width:r.width||MB.getDefaultWidth(i),height:r.height||MB.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:l},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:r.xType,title:r.xLabel,sort:!1},y:{field:"y",type:r.yType,title:r.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},d=`${u}\\d+$`,h=new RegExp(d);s&&(f.encoding.x.axis={labelExpr:`replace(datum.value, regexp(/${d}/), '')`}),a&&(f.encoding.y.axis={labelExpr:`replace(datum.value, regexp(/${d}/), '')`}),(s||a)&&(c.tooltip={sanitize:p=>String(p).replace(h,"")});let g;switch(r.colorMap){case"blues":g=["#f7fbff","#4292c6"];break;case"greyscale":g=["#000000","#ffffff"];break;case"viridis":default:g="viridis";break}if(g!=="viridis"){const p=f.encoding.fill;p.scale={range:g}}if(r.domain){const p=f.encoding.fill;p.scale!=null?p.scale=Object.assign({},p.scale,{domain:r.domain}):p.scale={domain:r.domain}}yield QWe.default(i,f,c)})}pO.heatmap=tHe;function nHe(e){return RJ(this,void 0,void 0,function*(){let t,n;e instanceof C0.Tensor?(t=e.shape,n=e.transpose()):(t=[e.length,e[0].length],n=C0.tidy(()=>C0.tensor2d(e).transpose())),Gg.assert(n.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");const r=yield n.array();n.dispose();const i=[r.length,r[0].length];return Gg.assert(t[0]===i[1]&&t[1]===i[0],`Unexpected transposed shape. Original ${t} : Transposed ${i}`),r})}function OB(e,t,n){const r=e instanceof C0.Tensor?e.shape:[e.length,e[0].length];n===0?Gg.assert(r[0]===t.length,`Length of xTickLabels (${t.length}) must match number of rows (${r[0]})`):n===1&&Gg.assert(r[1]===t.length,`Length of yTickLabels (${t.length}) must match number of columns (${r[1]})`)}const rHe={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1};var m1={};const BJ=rd(ipe);var Yo={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var R_=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(Yo,"__esModule",{value:!0});const Jl=zB,_a=Hs;function iHe(e){if(!Array.isArray(e))throw new Error("input must be an array");if(e.length===0)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};const t=e.length;let n=-1/0,r=1/0,i=0,o=0,s=0;for(let u=0;u<t;u++){const l=e[u];l>n&&(n=l),l<r&&(r=l),l===0&&(i+=1),isNaN(l)?o+=1:isFinite(l)||(s+=1)}const a={numVals:t,numZeros:i,numNans:o,max:n,min:r,numInfs:s};return a.max===-1/0&&(a.max=NaN),a.min===1/0&&(a.min=NaN),a}Yo.arrayStats=iHe;function oHe(e){return R_(this,void 0,void 0,function*(){const[t,n,r]=Jl.tidy(()=>{const i=Jl.scalar(0,e.dtype),o=e.min(),s=e.max(),a=e.equal(i).sum();return[o,s,a]});return Promise.all([e.data(),t.data(),n.data(),r.data()]).then(([i,o,s,a])=>{const u=i.length;let l=0,c=0;for(let g=0;g<u;g++){const p=i[g];isNaN(p)?l+=1:isFinite(p)||(c+=1)}let f=o[0],d=s[0];return l===u&&(f=NaN,d=NaN),{numVals:u,numZeros:a[0],numNans:l,min:f,max:d,numInfs:c}})})}Yo.tensorStats=oHe;function sHe(e,t,n,r){return R_(this,void 0,void 0,function*(){_a.assert(e.rank===1,"labels must be a 1D tensor"),_a.assert(t.rank===1,"predictions must be a 1D tensor"),_a.assert(e.size===t.size,"labels and predictions must be the same length"),r!=null&&_a.assert(r.size===t.size,"labels and predictions must be the same length");const i=e.cast("int32"),o=t.cast("int32");n==null&&(n=Jl.tidy(()=>Jl.maximum(i.max(),o.max()).cast("int32").dataSync()[0]+1));let s=Promise.resolve(null);return r!=null&&(s=r.data()),Promise.all([i.data(),o.data(),s]).then(([a,u,l])=>{const c=Array(n).fill(0);for(let f=0;f<n;f++)c[f]=Array(n).fill(0);for(let f=0;f<a.length;f++){const d=a[f],h=u[f];l!=null?c[d][h]+=l[f]:c[d][h]+=1}return c})})}Yo.confusionMatrix=sHe;function aHe(e,t){return R_(this,void 0,void 0,function*(){_a.assertShapesMatch(e.shape,t.shape,"Error computing accuracy.");const n=e.equal(t),r=n.mean(),i=(yield r.data())[0];return Jl.dispose([n,r]),i})}Yo.accuracy=aHe;function uHe(e,t,n){return R_(this,void 0,void 0,function*(){return _a.assert(e.rank===1,"labels must be a 1D tensor"),_a.assert(t.rank===1,"predictions must be a 1D tensor"),_a.assert(e.size===t.size,"labels and predictions must be the same length"),n==null&&(n=Jl.tidy(()=>Jl.maximum(e.max(),t.max()).dataSync()[0]+1)),Promise.all([e.data(),t.data()]).then(([r,i])=>{const o=Array(n).fill(0),s=Array(n).fill(0);for(let u=0;u<r.length;u++){const l=r[u],c=i[u];o[l]+=1,l===c&&(s[l]+=1)}const a=[];for(let u=0;u<o.length;u++)a.push({count:o[u],accuracy:o[u]===0?0:s[u]/o[u]});return a})})}Yo.perClassAccuracy=uHe;var Wd={},F3="http://www.w3.org/1999/xhtml";const k3={svg:"http://www.w3.org/2000/svg",xhtml:F3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mO(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),k3.hasOwnProperty(t)?{space:k3[t],local:e}:e}function lHe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===F3&&t.documentElement.namespaceURI===F3?t.createElement(e):t.createElementNS(n,e)}}function cHe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function B_(e){var t=mO(e);return(t.local?cHe:lHe)(t)}function fHe(){}function yO(e){return e==null?fHe:function(){return this.querySelector(e)}}function dHe(e){typeof e!="function"&&(e=yO(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Xn(r,this._parents)}function hHe(){return[]}function LJ(e){return e==null?hHe:function(){return this.querySelectorAll(e)}}function gHe(e){typeof e!="function"&&(e=LJ(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new Xn(r,i)}var PJ=function(e){return function(){return this.matches(e)}};if(typeof document<"u"){var Ch=document.documentElement;if(!Ch.matches){var pHe=Ch.webkitMatchesSelector||Ch.msMatchesSelector||Ch.mozMatchesSelector||Ch.oMatchesSelector;PJ=function(e){return function(){return pHe.call(this,e)}}}}const jJ=PJ;function mHe(e){typeof e!="function"&&(e=jJ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Xn(r,this._parents)}function IJ(e){return new Array(e.length)}function yHe(){return new Xn(this._enter||this._groups.map(IJ),this._parents)}function Av(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Av.prototype={constructor:Av,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bHe(e){return function(){return e}}var TB="$";function vHe(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Av(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function xHe(e,t,n,r,i,o,s){var a,u,l={},c=t.length,f=o.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=TB+s.call(u,u.__data__,a,t),h in l?i[a]=u:l[h]=u);for(a=0;a<f;++a)h=TB+s.call(e,o[a],a,o),(u=l[h])?(r[a]=u,u.__data__=o[a],l[h]=null):n[a]=new Av(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&l[d[a]]===u&&(i[a]=u)}function _He(e,t){if(!e)return h=new Array(this.size()),l=-1,this.each(function(w){h[++l]=w}),h;var n=t?xHe:vHe,r=this._parents,i=this._groups;typeof e!="function"&&(e=bHe(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=e.call(c,c&&c.__data__,l,r),g=h.length,p=a[l]=new Array(g),m=s[l]=new Array(g),y=u[l]=new Array(d);n(c,f,p,m,y,h,t);for(var b=0,x=0,v,_;b<g;++b)if(v=p[b]){for(b>=x&&(x=b+1);!(_=m[x])&&++x<g;);v._next=_||null}}return s=new Xn(s,r),s._enter=a,s._exit=u,s}function $He(){return new Xn(this._exit||this._groups.map(IJ),this._parents)}function wHe(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],l=n[a],c=u.length,f=s[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)s[a]=t[a];return new Xn(s,this._parents)}function AHe(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&o!==s.nextSibling&&o.parentNode.insertBefore(s,o),o=s);return this}function EHe(e){e||(e=CHe);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new Xn(i,this._parents).order()}function CHe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function SHe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function FHe(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function kHe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function DHe(){var e=0;return this.each(function(){++e}),e}function MHe(){return!this.node()}function OHe(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function THe(e){return function(){this.removeAttribute(e)}}function NHe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function RHe(e,t){return function(){this.setAttribute(e,t)}}function BHe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function LHe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function PHe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function jHe(e,t){var n=mO(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?NHe:THe:typeof t=="function"?n.local?PHe:LHe:n.local?BHe:RHe)(n,t))}function bO(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function IHe(e){return function(){this.style.removeProperty(e)}}function zHe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function UHe(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function qHe(e,t,n){return arguments.length>1?this.each((t==null?IHe:typeof t=="function"?UHe:zHe)(e,t,n??"")):zJ(this.node(),e)}function zJ(e,t){return e.style.getPropertyValue(t)||bO(e).getComputedStyle(e,null).getPropertyValue(t)}function WHe(e){return function(){delete this[e]}}function HHe(e,t){return function(){this[e]=t}}function YHe(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function GHe(e,t){return arguments.length>1?this.each((t==null?WHe:typeof t=="function"?YHe:HHe)(e,t)):this.node()[e]}function UJ(e){return e.trim().split(/^|\s+/)}function vO(e){return e.classList||new qJ(e)}function qJ(e){this._node=e,this._names=UJ(e.getAttribute("class")||"")}qJ.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function WJ(e,t){for(var n=vO(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function HJ(e,t){for(var n=vO(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function VHe(e){return function(){WJ(this,e)}}function XHe(e){return function(){HJ(this,e)}}function KHe(e,t){return function(){(t.apply(this,arguments)?WJ:HJ)(this,e)}}function ZHe(e,t){var n=UJ(e+"");if(arguments.length<2){for(var r=vO(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?KHe:t?VHe:XHe)(n,t))}function JHe(){this.textContent=""}function QHe(e){return function(){this.textContent=e}}function eYe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function tYe(e){return arguments.length?this.each(e==null?JHe:(typeof e=="function"?eYe:QHe)(e)):this.node().textContent}function nYe(){this.innerHTML=""}function rYe(e){return function(){this.innerHTML=e}}function iYe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function oYe(e){return arguments.length?this.each(e==null?nYe:(typeof e=="function"?iYe:rYe)(e)):this.node().innerHTML}function sYe(){this.nextSibling&&this.parentNode.appendChild(this)}function aYe(){return this.each(sYe)}function uYe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lYe(){return this.each(uYe)}function cYe(e){var t=typeof e=="function"?e:B_(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function fYe(){return null}function dYe(e,t){var n=typeof e=="function"?e:B_(e),r=t==null?fYe:typeof t=="function"?t:yO(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function hYe(){var e=this.parentNode;e&&e.removeChild(this)}function gYe(){return this.each(hYe)}function pYe(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function mYe(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function yYe(e){return this.select(e?mYe:pYe)}function bYe(e){return arguments.length?this.property("__data__",e):this.node().__data__}var YJ={},bs=null;if(typeof document<"u"){var vYe=document.documentElement;"onmouseenter"in vYe||(YJ={mouseenter:"mouseover",mouseleave:"mouseout"})}function xYe(e,t,n){return e=GJ(e,t,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&e.call(this,r)}}function GJ(e,t,n){return function(r){var i=bs;bs=r;try{e.call(this,this.__data__,t,n)}finally{bs=i}}}function _Ye(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function $Ye(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.capture):t[++r]=o;++r?t.length=r:delete this.__on}}}function wYe(e,t,n){var r=YJ.hasOwnProperty(e.type)?xYe:GJ;return function(i,o,s){var a=this.__on,u,l=r(t,o,s);if(a){for(var c=0,f=a.length;c<f;++c)if((u=a[c]).type===e.type&&u.name===e.name){this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=n),u.value=t;return}}this.addEventListener(e.type,l,n),u={type:e.type,name:e.name,value:t,listener:l,capture:n},a?a.push(u):this.__on=[u]}}function AYe(e,t,n){var r=_Ye(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?wYe:$Ye,n==null&&(n=!1),i=0;i<o;++i)this.each(a(r[i],t,n));return this}function EYe(e,t,n,r){var i=bs;e.sourceEvent=bs,bs=e;try{return t.apply(n,r)}finally{bs=i}}function VJ(e,t,n){var r=bO(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function CYe(e,t){return function(){return VJ(this,e,t)}}function SYe(e,t){return function(){return VJ(this,e,t.apply(this,arguments))}}function FYe(e,t){return this.each((typeof t=="function"?SYe:CYe)(e,t))}var xO=[null];function Xn(e,t){this._groups=e,this._parents=t}function XJ(){return new Xn([[document.documentElement]],xO)}Xn.prototype=XJ.prototype={constructor:Xn,select:dHe,selectAll:gHe,filter:mHe,data:_He,enter:yHe,exit:$He,merge:wHe,order:AHe,sort:EHe,call:SHe,nodes:FHe,node:kHe,size:DHe,empty:MHe,each:OHe,attr:jHe,style:qHe,property:GHe,classed:ZHe,text:tYe,html:oYe,raise:aYe,lower:lYe,append:cYe,insert:dYe,remove:gYe,clone:yYe,datum:bYe,on:AYe,dispatch:FYe};function KJ(e){return typeof e=="string"?new Xn([[document.querySelector(e)]],[document.documentElement]):new Xn([[e]],xO)}function kYe(e){return KJ(B_(e).call(document.documentElement))}var DYe=0;function ZJ(){return new D3}function D3(){this._="@"+(++DYe).toString(36)}D3.prototype=ZJ.prototype={constructor:D3,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function _O(){for(var e=bs,t;t=e.sourceEvent;)e=t;return e}function L_(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function MYe(e){var t=_O();return t.changedTouches&&(t=t.changedTouches[0]),L_(e,t)}function OYe(e){return typeof e=="string"?new Xn([document.querySelectorAll(e)],[document.documentElement]):new Xn([e??[]],xO)}function TYe(e,t,n){arguments.length<3&&(n=t,t=_O().changedTouches);for(var r=0,i=t?t.length:0,o;r<i;++r)if((o=t[r]).identifier===n)return L_(e,o);return null}function NYe(e,t){t==null&&(t=_O().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=L_(e,t[n]);return i}const RYe=Object.freeze(Object.defineProperty({__proto__:null,clientPoint:L_,create:kYe,creator:B_,customEvent:EYe,get event(){return bs},local:ZJ,matcher:jJ,mouse:MYe,namespace:mO,namespaces:k3,select:KJ,selectAll:OYe,selection:XJ,selector:yO,selectorAll:LJ,style:zJ,touch:TYe,touches:NYe,window:bO},Symbol.toStringTag,{value:"Module"})),BYe=rd(RYe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(Wd,"__esModule",{value:!0});const LYe=BJ,NB=BYe,nA=Y,PYe=Qn;function jYe(e,t,n={}){if(t&&t.headers==null)throw new Error('Data to render must have a "headers" property');if(t&&t.values==null)throw new Error('Data to render must have a "values" property');const r=PYe.getDrawArea(e),i=Object.assign({},IYe,n);let o=NB.select(r).select("table.tf-table");const s=nA.css({fontSize:i.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(o.size()===0&&(o=NB.select(r).append("table"),o.attr("class",` ${s} tf-table`),o.append("thead").append("tr"),o.append("tbody")),o.size()!==1)throw new Error("Error inserting table");const a=nA.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),u=o.select("thead").select("tr").selectAll("th").data(t.headers),l=u.enter().append("th").attr("class",`${a}`);u.merge(l).html(m=>m),u.exit().remove();const c=LYe.format(",.4~f"),f=o.select("tbody").selectAll("tr").data(t.values),d=f.enter().append("tr"),h=nA.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),g=f.merge(d).selectAll("td").data(m=>m),p=g.enter().append("td").attr("class",`${h}`);g.merge(p).html(m=>typeof m=="number"?c(m):m),g.exit().remove(),f.exit().remove()}Wd.table=jYe;const IYe={fontSize:14};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var zYe=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},UYe=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(m1,"__esModule",{value:!0});const RB=BJ,qYe=UYe(zd),xm=ai,WYe=Yo,HYe=Wd,YYe={maxBins:12,fontSize:11};function GYe(e,t,n={}){return zYe(this,void 0,void 0,function*(){const r=XYe(t),i=Object.assign({},YYe,n),o={actions:!1,mode:"vega-lite",defaultStyle:!1},s=xm.subSurface(e,"histogram");if(n.stats!==!1){const l=xm.subSurface(e,"stats",{prepend:!0});let c;n.stats?c=n.stats:c=WYe.arrayStats(r.map(f=>f.value)),VYe(c,l,{fontSize:i.fontSize})}if(r.length===0)return;const a=[];for(let l=0;l<r.length;l++){const c=r[l].value;c!=null&&isFinite(c)&&a.push(r[l])}const u={width:i.width||xm.getDefaultWidth(s),height:i.height||xm.getDefaultHeight(s),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:a},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:i.fontSize,titleFontSize:i.fontSize},text:{fontSize:i.fontSize},legend:{labelFontSize:i.fontSize,titleFontSize:i.fontSize}},encoding:{x:{bin:{maxbins:i.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:i.color||"#001B44"}}};return qYe.default(s,u,o)})}m1.histogram=GYe;function VYe(e,t,n){const r=RB.format(",.4~f"),i=RB.format(".4~p"),o=[],s=[];if(e.numVals!=null&&(o.push("Num Vals"),s.push(r(e.numVals))),e.min!=null&&(o.push("Min"),s.push(r(e.min))),e.max!=null&&(o.push("Max"),s.push(r(e.max))),e.numZeros!=null){o.push("# Zeros");let a="";e.numVals&&(a=e.numZeros>0?`(${i(e.numZeros/e.numVals)})`:""),s.push(`${r(e.numZeros)} ${a}`)}if(e.numNans!=null){o.push("# NaNs");let a="";e.numVals&&(a=e.numNans>0?`(${i(e.numNans/e.numVals)})`:""),s.push(`${r(e.numNans)} ${a}`)}if(e.numInfs!=null){o.push("# Infinity");let a="";e.numVals&&(a=e.numInfs>0?`(${i(e.numInfs/e.numVals)})`:""),s.push(`${r(e.numInfs)} ${a}`)}HYe.table(t,{headers:o,values:[s]},n)}function XYe(e){if(e.length==null)throw new Error("input data must be an array");if(e.length===0)return[];if(typeof e[0]=="object"){if(e[0].value==null)throw new Error("input data must have a value field");return e}else{const t=Array(e.length);for(let n=0;n<e.length;n++)t[n]={value:e[n]};return t}}var P_={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var KYe=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},ZYe=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P_,"__esModule",{value:!0});const JYe=ZYe(zd),BB=ai,LB=Hs,QYe=Qn;function eGe(e,t,n={}){return KYe(this,void 0,void 0,function*(){const r=Array.isArray(t.values[0])?t.values:[t.values],i=r[0].length,o=t.series?t.series:r.map((p,m)=>`Series ${m+1}`);LB.assert(o.length===r.length,"Must have an equal number of series labels as there are data series"),n.seriesColors!=null&&LB.assert(n.seriesColors.length===r.length,"Must have an equal number of series colors as there are data series");const s=[];for(let p=0;p<i;p++){const m={x:p};o.forEach((y,b)=>{const x=r[b][p].y;m[y]=x,m[`${y}-name`]=y}),s.push(m)}const a=Object.assign({},tGe,n),u=()=>{if(a.zoomToFit)return{zero:!1};if(a.yAxisDomain!=null)return{domain:a.yAxisDomain}},l={x:{field:"x",type:a.xType,title:a.xLabel},tooltip:[{field:"x",type:"quantitative"},...o.map(p=>({field:p,type:"quantitative"}))]},c=o.map(p=>({data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:p,type:a.yType,title:a.yLabel,scale:u()},color:{field:`${p}-name`,type:"nominal",legend:{values:o,title:null},scale:{range:a.seriesColors}}}})),f={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},d=QYe.getDrawArea(e),h={width:a.width||BB.getDefaultWidth(d),height:a.height||BB.getDefaultHeight(d),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:a.fontSize,titleFontSize:a.fontSize},text:{fontSize:a.fontSize},legend:{labelFontSize:a.fontSize,titleFontSize:a.fontSize}},data:{values:s},encoding:l,layer:[...c,f]},g={actions:!1,mode:"vega-lite",defaultStyle:!1};return yield JYe.default(d,h,g),Promise.resolve()})}P_.linechart=eGe;const tGe={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11};var $O={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var nGe=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},rGe=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($O,"__esModule",{value:!0});const iGe=rGe(zd),PB=ai,oGe=Hs,sGe=Qn;function aGe(e,t,n={}){return nGe(this,void 0,void 0,function*(){let r=t.values;const i=t.series==null?[]:t.series;r=Array.isArray(r[0])?r:[r];const o=[];r.forEach((d,h)=>{const g=i[h]!=null?i[h]:`Series ${h+1}`,p=d.map(m=>Object.assign({},m,{series:g}));o.push(...p)}),n.seriesColors!=null&&oGe.assert(n.seriesColors.length===r.length,"Must have an equal number of series colors as there are data series");const s=sGe.getDrawArea(e),a=Object.assign({},uGe,n),u={actions:!1,mode:"vega-lite",defaultStyle:!1},l=()=>{if(a.zoomToFit)return{zero:!1};if(a.xAxisDomain!=null)return{domain:a.xAxisDomain}},c=()=>{if(a.zoomToFit)return{zero:!1};if(a.yAxisDomain!=null)return{domain:a.yAxisDomain}},f={width:a.width||PB.getDefaultWidth(s),height:a.height||PB.getDefaultHeight(s),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:a.fontSize,titleFontSize:a.fontSize},text:{fontSize:a.fontSize},legend:{labelFontSize:a.fontSize,titleFontSize:a.fontSize}},data:{values:o},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:a.xType,title:a.xLabel,scale:l()},y:{field:"y",type:a.yType,title:a.yLabel,scale:c()},color:{field:"series",type:"nominal",scale:{range:a.seriesColors}},shape:{field:"series",type:"nominal"}}};return yield iGe.default(s,f,u),Promise.resolve()})}$O.scatterplot=aGe;const uGe={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11};var j_={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var JJ=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(j_,"__esModule",{value:!0});const lGe=P_,M3=Qn,QJ=ai;function eQ(e,t,n,r={}){return JJ(this,void 0,void 0,function*(){const i=M3.getDrawArea(e),o={};for(const l of n)if(/val_/.test(l)){const c=l.replace("val_","");jB(o,c);const f=IB(t,l,n.indexOf(l));o[c].series.push(l),o[c].values.push(f)}else{const c=IB(t,l,n.indexOf(l));jB(o,l),o[l].series.push(l),o[l].values.push(c)}const s=Object.keys(o),a=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},r),u=[];for(const l of s){const c=QJ.subSurface(i,l),f=o[l].series,d=o[l].values;f.every(g=>!!g.match("acc"))&&(a.zoomToFitAccuracy?a.zoomToFit=!0:(a.yAxisDomain=[0,1],delete a.zoomToFit));const h=lGe.linechart(c,{values:d,series:f},a);u.push(h)}yield Promise.all(u)})}j_.history=eQ;function jB(e,t){e[t]==null&&(e[t]={series:[],values:[]})}function IB(e,t,n){if(Array.isArray(e)){const r=Array.isArray(e[0])?e[n]:e,i=[];for(let o=0;o<r.length;o++){const s=r[o];i.push({x:o,y:s[t]})}return i}else return e.history[t].map((r,i)=>({x:i,y:r}))}function cGe(e,t,n={}){const r={},i=n.callbacks||["onEpochEnd","onBatchEnd"],o=M3.getDrawArea(e),s=Object.assign({},n);delete s.callbacks;function a(l){return(c,f)=>JJ(this,void 0,void 0,function*(){/batch/i.test(l)?s.xLabel="Batch":/epoch/i.test(l)&&(s.xLabel="Epoch");const d=[],h=[];for(const p of t)if(f[p]!=null){h.push(p);const m=fGe(r,l,p);m.push({[p]:f[p]}),d.push(m)}const g=QJ.subSurface(o,l,{title:l});eQ(g,d,h,s),yield M3.nextFrame()})}const u={};return i.forEach(l=>{u[l]=a(l)}),u}j_.fitCallbacks=cGe;function fGe(e,t,n){return e[t]==null&&(e[t]={}),e[t][n]==null&&(e[t][n]=[]),e[t][n]}var I_={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ev=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(I_,"__esModule",{value:!0});const dGe=m1,tQ=Qn,nQ=Wd,rA=ai,hGe=Yo;function gGe(e,t){return Ev(this,void 0,void 0,function*(){const n=tQ.getDrawArea(e),r=mGe(t),i=["Layer Name","Output Shape","# Of Params","Trainable"],o=r.layers.map(s=>[s.name,s.outputShape,s.parameters,s.trainable]);nQ.table(n,{headers:i,values:o})})}I_.modelSummary=gGe;function pGe(e,t){return Ev(this,void 0,void 0,function*(){const n=tQ.getDrawArea(e),r=yield bGe(t),i=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],o=rA.subSurface(n,"layer-weights-info"),s=r.map(c=>[c.name,c.shape,c.stats.min,c.stats.max,c.weight.size,c.stats.numZeros,c.stats.numNans,c.stats.numInfs]);nQ.table(o,{headers:i,values:s});const a=rA.subSurface(n,"select-layer"),u=rA.subSurface(n,"param-distribution"),l=c=>Ev(this,void 0,void 0,function*(){const d=yield r.filter(h=>h.name===c)[0].weight.data();dGe.histogram(u,d,{height:150,width:460,stats:!1})});vGe(r.map(c=>c.name),a,l)})}I_.layer=pGe;function mGe(e){return{layers:e.layers.map(yGe)}}function yGe(e){let t;return Array.isArray(e.outputShape[0])?t=`[${e.outputShape.map(r=>O3(r)).join(", ")}]`:t=O3(e.outputShape),{name:e.name,trainable:e.trainable,parameters:e.countParams(),outputShape:t}}function bGe(e){return Ev(this,void 0,void 0,function*(){const t=e.getWeights(),n=e.weights,r=t.map(hGe.tensorStats),i=yield Promise.all(r),o=t.map(s=>s.shape);return t.map((s,a)=>({name:n[a].name,stats:i[a],shape:O3(o[a]),weight:s}))})}function O3(e){const t=e.slice();return t.length===0?"Scalar":(t[0]===null&&(t[0]="batch"),`[${t.join(",")}]`)}function vGe(e,t,n){const o=`<div><button>Show Values Distribution for:</button>${`
    <select>
      ${e.map(u=>`<option value=${u}>${u}</option>`)}
    </select>
  `}</div>`;t.innerHTML=o;const s=t.querySelector("button"),a=t.querySelector("select");s.addEventListener("click",()=>{n(a.selectedOptions[0].label)})}var wO={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var xGe=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(wO,"__esModule",{value:!0});const _Ge=Qn,$Ge=Wd;function wGe(e,t,n){return xGe(this,void 0,void 0,function*(){const r=_Ge.getDrawArea(e),i=["Class","Accuracy","# Samples"],o=[];for(let s=0;s<t.length;s++){const a=n?n[s]:s.toString(),u=t[s];o.push([a,u.accuracy,u.count])}return $Ge.table(r,{headers:i,values:o})})}wO.perClassAccuracy=wGe;var AO={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var AGe=Fe&&Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(AO,"__esModule",{value:!0});const EGe=m1,CGe=Qn,SGe=Yo;function FGe(e,t){return AGe(this,void 0,void 0,function*(){const n=CGe.getDrawArea(e),r=yield SGe.tensorStats(t),i=yield t.data();EGe.histogram(n,i,{height:150,stats:r})})}AO.valuesDistribution=FGe;var EO={};/** @license See the LICENSE file. */Object.defineProperty(EO,"__esModule",{value:!0});const kGe="1.5.1";EO.version=kGe;(function(e){function t(x){for(var v in x)e.hasOwnProperty(v)||(e[v]=x[v])}Object.defineProperty(e,"__esModule",{value:!0});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n=N3,r=gO,i=pO,o=m1,s=P_,a=$O,u=Wd,l=j_,c=I_,f=wO,d=AO,h=Yo,g=EO;e.version_vis=g.version;const p={barchart:n.barchart,table:u.table,histogram:o.histogram,linechart:s.linechart,scatterplot:a.scatterplot,confusionMatrix:r.confusionMatrix,heatmap:i.heatmap};e.render=p;const m={accuracy:h.accuracy,perClassAccuracy:h.perClassAccuracy,confusionMatrix:h.confusionMatrix};e.metrics=m;const y={history:l.history,fitCallbacks:l.fitCallbacks,perClassAccuracy:f.perClassAccuracy,valuesDistribution:d.valuesDistribution,layer:c.layer,modelSummary:c.modelSummary};e.show=y;var b=p1;e.visor=b.visor,t(g1)})(T3);const DGe=Vg(T3),NGe=iQ({__proto__:null,default:DGe},[T3]);export{NGe as i};
