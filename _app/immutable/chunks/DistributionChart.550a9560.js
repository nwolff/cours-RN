import{S as $e,i as De,s as Ce,k as It,l as Lt,m as wt,h as Ge,b as Nt,R as be,X as Rt,Y as St,w as ot,D as xt,y as lt,z as ct,A as ut,G as At,g as ht,d as ft,B as dt,Z as Ue}from"./index.7f0372cb.js";import{v as Tt,a as $t,i as de,m as pt,t as Dt,b as Ct,e as gt,c as Pt,d as _t,s as Oe,w as Ft,f as jt}from"./vega-themes.module.3ab0deee.js";function Gt(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Ut={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Mt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Vt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Xt=Array.prototype.slice,q=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Xt.call(t,1))},zt=(e,t,n,i,s,r,a)=>new Date(e,t||0,n??1,i||0,s||0,r||0,a||0);var Ht={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:zt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return q("join",arguments)},indexof:function(){return q("indexOf",arguments)},lastindexof:function(){return q("lastIndexOf",arguments)},slice:function(){return q("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return q("substring",arguments,String)},split:function(){return q("split",arguments,String)},replace:function(){return q("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const qt=["view","item","group","xy","x","y"],Ae=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&Ae.add(setImmediate);const Wt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Ut[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const s=e(t.property);if(n&&(e.memberDepth-=1),Ae.has(i[s])){console.error(`Prevented interpretation of member "${s}" which could lead to insecure code execution`);return}return i[s]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||Ht[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Mt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Vt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const s=e(i.key);return e.memberDepth-=1,Ae.has(e(i.value))?console.error(`Prevented interpretation of property "${s}" which could lead to insecure code execution`):n[s]=e(i.value),n},{})};function ne(e,t,n,i,s,r){const a=l=>Wt[l.type](a,l);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=i,a.event=s,a.item=r,qt.forEach(l=>a.fn[l]=function(){return s.vega[l](...arguments)}),a(e)}var Yt={operator(e,t){const n=t.ast,i=e.functions;return s=>ne(n,i,s)},parameter(e,t){const n=t.ast,i=e.functions;return(s,r)=>ne(n,i,r,s)},event(e,t){const n=t.ast,i=e.functions;return s=>ne(n,i,void 0,void 0,s)},handler(e,t){const n=t.ast,i=e.functions;return(s,r)=>{const a=r.item&&r.item.datum;return ne(n,i,s,a,r)}},encode(e,t){const{marktype:n,channels:i}=t,s=e.functions,r=n==="group"||n==="image"||n==="rect";return(a,l)=>{const o=a.datum;let y=0,c;for(const E in i)c=ne(i[E].ast,s,l,o,void 0,a),a[E]!==c&&(a[E]=c,y=1);return n!=="rule"&&Gt(a,i,r),y}}};function Z(e,t,n){return e.fields=t||[],e.fname=n,e}function kt(e){return e.length===1?Bt(e[0]):Kt(e)}const Bt=e=>function(t){return t[e]},Kt=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Ie(e){throw Error(e)}function Jt(e){const t=[],n=e.length;let i=null,s=0,r="",a,l,o;e=e+"";function y(){t.push(r+e.substring(a,l)),r="",a=l+1}for(a=l=0;l<n;++l)if(o=e[l],o==="\\")r+=e.substring(a,l++),a=l;else if(o===i)y(),i=null,s=-1;else{if(i)continue;a===s&&o==='"'||a===s&&o==="'"?(a=l+1,i=o):o==="."&&!s?l>a?y():a=l+1:o==="["?(l>a&&y(),s=a=l+1):o==="]"&&(s||Ie("Access path missing open bracket: "+e),s>0&&y(),s=0,a=l+1)}return s&&Ie("Access path missing closing bracket: "+e),i&&Ie("Access path missing closing quote: "+e),l>a&&(l++,y()),t}function Zt(e,t,n){const i=Jt(e);return e=i.length===1?i[0]:e,Z((n&&n.get||kt)(i),[e],t||e)}Zt("id");Z(e=>e,[],"identity");Z(()=>0,[],"zero");Z(()=>1,[],"one");Z(()=>!0,[],"true");Z(()=>!1,[],"false");var Qt=Array.isArray;function Me(e){return e===Object(e)}function en(e){return typeof e=="string"}function ae(e){"@babel/helpers - typeof";return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(e)}function tn(e,t){if(ae(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(ae(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nn(e){var t=tn(e,"string");return ae(t)==="symbol"?t:String(t)}function rn(e,t,n){return t=nn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,r;for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function an(e,t){if(e==null)return{};var n=sn(e,t),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}const on=["title","image"];function ln(e,t,n){if(Qt(e))return`[${e.map(i=>t(en(i)?i:Ve(i,n))).join(", ")}]`;if(Me(e)){let i="";const s=e,{title:r,image:a}=s,l=an(s,on);r&&(i+=`<h2>${t(r)}</h2>`),a&&(i+=`<img src="${t(a)}">`);const o=Object.keys(l);if(o.length>0){i+="<table>";for(const y of o){let c=l[y];c!==void 0&&(Me(c)&&(c=Ve(c,n)),i+=`<tr><td class="key">${t(y)}:</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function cn(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const s=t.indexOf(this)+1;return t.length=s,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function Ve(e,t){return JSON.stringify(e,cn(t))}var un=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const mt="vg-tooltip-element",hn={offsetX:10,offsetY:10,id:mt,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:fn,maxDepth:2,formatTooltip:ln};function fn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function dn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return un.toString().replace(mt,e)}function pn(e,t,n,i){let s=e.clientX+n;s+t.width>window.innerWidth&&(s=+e.clientX-n-t.width);let r=e.clientY+i;return r+t.height>window.innerHeight&&(r=+e.clientY-i-t.height),{x:s,y:r}}function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xe(Object(n),!0).forEach(function(i){rn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}class gn{constructor(t){this.options=ze(ze({},hn),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=dn(n);const s=document.head;s.childNodes.length>0?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)}}tooltipHandler(t,n,i,s){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),s==null||s===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(s,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:r,y:a}=pn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${r}px`}}function oe(e){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(e)}function mn(e,t){if(oe(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(oe(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function En(e){var t=mn(e,"string");return oe(t)==="symbol"?t:String(t)}function vn(e,t,n){return t=En(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Le,He;function bn(){return He||(He=1,Le=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Le}var On=L;L.Node=k;L.create=L;function L(e){var t=this;if(t instanceof L||(t=new L),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}L.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};L.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};L.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};L.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Ln(this,arguments[e]);return this.length};L.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)wn(this,arguments[e]);return this.length};L.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};L.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};L.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;n!==null;i++)e.call(t,n.value,i,this),n=n.next};L.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;n!==null;i--)e.call(t,n.value,i,this),n=n.prev};L.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};L.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};L.prototype.map=function(e,t){t=t||this;for(var n=new L,i=this.head;i!==null;)n.push(e.call(t,i.value,this)),i=i.next;return n};L.prototype.mapReverse=function(e,t){t=t||this;for(var n=new L,i=this.tail;i!==null;)n.push(e.call(t,i.value,this)),i=i.prev;return n};L.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;i!==null;s++)n=e(n,i.value,s),i=i.next;return n};L.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;i!==null;s--)n=e(n,i.value,s),i=i.prev;return n};L.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};L.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};L.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new L;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,s=this.head;s!==null&&i<e;i++)s=s.next;for(;s!==null&&i<t;i++,s=s.next)n.push(s.value);return n};L.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new L;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,s=this.tail;s!==null&&i>t;i--)s=s.prev;for(;s!==null&&i>e;i--,s=s.prev)n.push(s.value);return n};L.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,s=this.head;s!==null&&i<e;i++)s=s.next;for(var r=[],i=0;s&&i<t;i++)r.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var i=0;i<n.length;i++)s=In(this,s,n[i]);return r};L.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};function In(e,t,n){var i=t===e.head?new k(n,null,t,e):new k(n,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function Ln(e,t){e.tail=new k(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function wn(e,t){e.head=new k(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function k(e,t,n,i){if(!(this instanceof k))return new k(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{bn()(L)}catch{}const Nn=On,W=Symbol("max"),V=Symbol("length"),B=Symbol("lengthCalculator"),se=Symbol("allowStale"),Y=Symbol("maxAge"),M=Symbol("dispose"),qe=Symbol("noDisposeOnSet"),T=Symbol("lruList"),F=Symbol("cache"),Et=Symbol("updateAgeOnGet"),we=()=>1;class Rn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[W]=t.max||1/0;const n=t.length||we;if(this[B]=typeof n!="function"?we:n,this[se]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Y]=t.maxAge||0,this[M]=t.dispose,this[qe]=t.noDisposeOnSet||!1,this[Et]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[W]=t||1/0,ie(this)}get max(){return this[W]}set allowStale(t){this[se]=!!t}get allowStale(){return this[se]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Y]=t,ie(this)}get maxAge(){return this[Y]}set lengthCalculator(t){typeof t!="function"&&(t=we),t!==this[B]&&(this[B]=t,this[V]=0,this[T].forEach(n=>{n.length=this[B](n.value,n.key),this[V]+=n.length})),ie(this)}get lengthCalculator(){return this[B]}get length(){return this[V]}get itemCount(){return this[T].length}rforEach(t,n){n=n||this;for(let i=this[T].tail;i!==null;){const s=i.prev;We(this,t,i,n),i=s}}forEach(t,n){n=n||this;for(let i=this[T].head;i!==null;){const s=i.next;We(this,t,i,n),i=s}}keys(){return this[T].toArray().map(t=>t.key)}values(){return this[T].toArray().map(t=>t.value)}reset(){this[M]&&this[T]&&this[T].length&&this[T].forEach(t=>this[M](t.key,t.value)),this[F]=new Map,this[T]=new Nn,this[V]=0}dump(){return this[T].map(t=>pe(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[T]}set(t,n,i){if(i=i||this[Y],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const s=i?Date.now():0,r=this[B](n,t);if(this[F].has(t)){if(r>this[W])return J(this,this[F].get(t)),!1;const o=this[F].get(t).value;return this[M]&&(this[qe]||this[M](t,o.value)),o.now=s,o.maxAge=i,o.value=n,this[V]+=r-o.length,o.length=r,this.get(t),ie(this),!0}const a=new Sn(t,n,r,s,i);return a.length>this[W]?(this[M]&&this[M](t,n),!1):(this[V]+=a.length,this[T].unshift(a),this[F].set(t,this[T].head),ie(this),!0)}has(t){if(!this[F].has(t))return!1;const n=this[F].get(t).value;return!pe(this,n)}get(t){return Ne(this,t,!0)}peek(t){return Ne(this,t,!1)}pop(){const t=this[T].tail;return t?(J(this,t),t.value):null}del(t){J(this,this[F].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const s=t[i],r=s.e||0;if(r===0)this.set(s.k,s.v);else{const a=r-n;a>0&&this.set(s.k,s.v,a)}}}prune(){this[F].forEach((t,n)=>Ne(this,n,!1))}}const Ne=(e,t,n)=>{const i=e[F].get(t);if(i){const s=i.value;if(pe(e,s)){if(J(e,i),!e[se])return}else n&&(e[Et]&&(i.value.now=Date.now()),e[T].unshiftNode(i));return s.value}},pe=(e,t)=>{if(!t||!t.maxAge&&!e[Y])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Y]&&n>e[Y]},ie=e=>{if(e[V]>e[W])for(let t=e[T].tail;e[V]>e[W]&&t!==null;){const n=t.prev;J(e,t),t=n}},J=(e,t)=>{if(t){const n=t.value;e[M]&&e[M](n.key,n.value),e[V]-=n.length,e[F].delete(n.key),e[T].removeNode(t)}};class Sn{constructor(t,n,i,s,r){this.key=t,this.value=n,this.length=i,this.now=s,this.maxAge=r||0}}const We=(e,t,n,i)=>{let s=n.value;pe(e,s)&&(J(e,n),e[se]||(s=void 0)),s&&t.call(i,s.value,s.key,e)};var xn=Rn;const An=Object.freeze({loose:!0}),Tn=Object.freeze({}),$n=e=>e?typeof e!="object"?An:e:Tn;var Pe=$n,Te={exports:{}};const Dn="2.0.0",Cn=256,Pn=Number.MAX_SAFE_INTEGER||9007199254740991,_n=16,Fn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var _e={MAX_LENGTH:Cn,MAX_SAFE_COMPONENT_LENGTH:_n,MAX_SAFE_INTEGER:Pn,RELEASE_TYPES:Fn,SEMVER_SPEC_VERSION:Dn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const jn=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var me=jn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=_e,i=me;t=e.exports={};const s=t.re=[],r=t.src=[],a=t.t={};let l=0;const o=(y,c,E)=>{const v=l++;i(y,v,c),a[y]=v,r[v]=c,s[v]=new RegExp(c,E?"g":void 0)};o("NUMERICIDENTIFIER","0|[1-9]\\d*"),o("NUMERICIDENTIFIERLOOSE","[0-9]+"),o("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),o("MAINVERSION",`(${r[a.NUMERICIDENTIFIER]})\\.(${r[a.NUMERICIDENTIFIER]})\\.(${r[a.NUMERICIDENTIFIER]})`),o("MAINVERSIONLOOSE",`(${r[a.NUMERICIDENTIFIERLOOSE]})\\.(${r[a.NUMERICIDENTIFIERLOOSE]})\\.(${r[a.NUMERICIDENTIFIERLOOSE]})`),o("PRERELEASEIDENTIFIER",`(?:${r[a.NUMERICIDENTIFIER]}|${r[a.NONNUMERICIDENTIFIER]})`),o("PRERELEASEIDENTIFIERLOOSE",`(?:${r[a.NUMERICIDENTIFIERLOOSE]}|${r[a.NONNUMERICIDENTIFIER]})`),o("PRERELEASE",`(?:-(${r[a.PRERELEASEIDENTIFIER]}(?:\\.${r[a.PRERELEASEIDENTIFIER]})*))`),o("PRERELEASELOOSE",`(?:-?(${r[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[a.PRERELEASEIDENTIFIERLOOSE]})*))`),o("BUILDIDENTIFIER","[0-9A-Za-z-]+"),o("BUILD",`(?:\\+(${r[a.BUILDIDENTIFIER]}(?:\\.${r[a.BUILDIDENTIFIER]})*))`),o("FULLPLAIN",`v?${r[a.MAINVERSION]}${r[a.PRERELEASE]}?${r[a.BUILD]}?`),o("FULL",`^${r[a.FULLPLAIN]}$`),o("LOOSEPLAIN",`[v=\\s]*${r[a.MAINVERSIONLOOSE]}${r[a.PRERELEASELOOSE]}?${r[a.BUILD]}?`),o("LOOSE",`^${r[a.LOOSEPLAIN]}$`),o("GTLT","((?:<|>)?=?)"),o("XRANGEIDENTIFIERLOOSE",`${r[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),o("XRANGEIDENTIFIER",`${r[a.NUMERICIDENTIFIER]}|x|X|\\*`),o("XRANGEPLAIN",`[v=\\s]*(${r[a.XRANGEIDENTIFIER]})(?:\\.(${r[a.XRANGEIDENTIFIER]})(?:\\.(${r[a.XRANGEIDENTIFIER]})(?:${r[a.PRERELEASE]})?${r[a.BUILD]}?)?)?`),o("XRANGEPLAINLOOSE",`[v=\\s]*(${r[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[a.XRANGEIDENTIFIERLOOSE]})(?:${r[a.PRERELEASELOOSE]})?${r[a.BUILD]}?)?)?`),o("XRANGE",`^${r[a.GTLT]}\\s*${r[a.XRANGEPLAIN]}$`),o("XRANGELOOSE",`^${r[a.GTLT]}\\s*${r[a.XRANGEPLAINLOOSE]}$`),o("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),o("COERCERTL",r[a.COERCE],!0),o("LONETILDE","(?:~>?)"),o("TILDETRIM",`(\\s*)${r[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",o("TILDE",`^${r[a.LONETILDE]}${r[a.XRANGEPLAIN]}$`),o("TILDELOOSE",`^${r[a.LONETILDE]}${r[a.XRANGEPLAINLOOSE]}$`),o("LONECARET","(?:\\^)"),o("CARETTRIM",`(\\s*)${r[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",o("CARET",`^${r[a.LONECARET]}${r[a.XRANGEPLAIN]}$`),o("CARETLOOSE",`^${r[a.LONECARET]}${r[a.XRANGEPLAINLOOSE]}$`),o("COMPARATORLOOSE",`^${r[a.GTLT]}\\s*(${r[a.LOOSEPLAIN]})$|^$`),o("COMPARATOR",`^${r[a.GTLT]}\\s*(${r[a.FULLPLAIN]})$|^$`),o("COMPARATORTRIM",`(\\s*)${r[a.GTLT]}\\s*(${r[a.LOOSEPLAIN]}|${r[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",o("HYPHENRANGE",`^\\s*(${r[a.XRANGEPLAIN]})\\s+-\\s+(${r[a.XRANGEPLAIN]})\\s*$`),o("HYPHENRANGELOOSE",`^\\s*(${r[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[a.XRANGEPLAINLOOSE]})\\s*$`),o("STAR","(<|>)?=?\\s*\\*"),o("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),o("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Te,Te.exports);var Fe=Te.exports;const Ye=/^[0-9]+$/,vt=(e,t)=>{const n=Ye.test(e),i=Ye.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1},Gn=(e,t)=>vt(t,e);var Un={compareIdentifiers:vt,rcompareIdentifiers:Gn};const ce=me,{MAX_LENGTH:ke,MAX_SAFE_INTEGER:ue}=_e,{re:Be,t:Ke}=Fe,Mn=Pe,{compareIdentifiers:K}=Un;let Vn=class G{constructor(t,n){if(n=Mn(n),t instanceof G){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>ke)throw new TypeError(`version is longer than ${ke} characters`);ce("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?Be[Ke.LOOSE]:Be[Ke.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>ue||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ue||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ue||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const r=+s;if(r>=0&&r<ue)return r}return s}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ce("SemVer.compare",this.version,this.options,t),!(t instanceof G)){if(typeof t=="string"&&t===this.version)return 0;t=new G(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof G||(t=new G(t,this.options)),K(this.major,t.major)||K(this.minor,t.minor)||K(this.patch,t.patch)}comparePre(t){if(t instanceof G||(t=new G(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],s=t.prerelease[n];if(ce("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return K(i,s)}while(++n)}compareBuild(t){t instanceof G||(t=new G(t,this.options));let n=0;do{const i=this.build[n],s=t.build[n];if(ce("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return K(i,s)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);s===-1&&this.prerelease.push(0)}if(n){const s=Number(i)?1:0;K(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,s]):this.prerelease=[n,s]}break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};var je=Vn;const Je=je,Xn=(e,t,n)=>new Je(e,n).compare(new Je(t,n));var Q=Xn;const zn=Q,Hn=(e,t,n)=>zn(e,t,n)===0;var qn=Hn;const Wn=Q,Yn=(e,t,n)=>Wn(e,t,n)!==0;var kn=Yn;const Bn=Q,Kn=(e,t,n)=>Bn(e,t,n)>0;var Jn=Kn;const Zn=Q,Qn=(e,t,n)=>Zn(e,t,n)>=0;var ei=Qn;const ti=Q,ni=(e,t,n)=>ti(e,t,n)<0;var ii=ni;const ri=Q,si=(e,t,n)=>ri(e,t,n)<=0;var ai=si;const oi=qn,li=kn,ci=Jn,ui=ei,hi=ii,fi=ai,di=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return oi(e,n,i);case"!=":return li(e,n,i);case">":return ci(e,n,i);case">=":return ui(e,n,i);case"<":return hi(e,n,i);case"<=":return fi(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var pi=di,Re,Ze;function gi(){if(Ze)return Re;Ze=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,E){if(E=n(E),c instanceof t){if(c.loose===!!E.loose)return c;c=c.value}a("comparator",c,E),this.options=E,this.loose=!!E.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){const E=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],v=c.match(E);if(!v)throw new TypeError(`Invalid comparator: ${c}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new l(v[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new l(c,this.options)}catch{return!1}return r(c,this.operator,this.semver,this.options)}intersects(c,E){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(c.value,E).test(this.value):c.operator===""?c.value===""?!0:new o(this.value,E).test(c.semver):(E=n(E),E.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!E.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||r(this.semver,"<",c.semver,E)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||r(this.semver,">",c.semver,E)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Re=t;const n=Pe,{re:i,t:s}=Fe,r=pi,a=me,l=je,o=yt();return Re}var Se,Qe;function yt(){if(Qe)return Se;Qe=1;class e{constructor(u,m){if(m=i(m),u instanceof e)return u.loose===!!m.loose&&u.includePrerelease===!!m.includePrerelease?u:new e(u.raw,m);if(u instanceof s)return this.raw=u.value,this.set=[[u]],this.format(),this;if(this.options=m,this.loose=!!m.loose,this.includePrerelease=!!m.includePrerelease,this.raw=u,this.set=u.split("||").map(p=>this.parseRange(p.trim())).filter(p=>p.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${u}`);if(this.set.length>1){const p=this.set[0];if(this.set=this.set.filter(g=>!C(g[0])),this.set.length===0)this.set=[p];else if(this.set.length>1){for(const g of this.set)if(g.length===1&&z(g[0])){this.set=[g];break}}}this.format()}format(){return this.range=this.set.map(u=>u.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(u){u=u.trim();const p=((this.options.includePrerelease&&v)|(this.options.loose&&$))+":"+u,g=n.get(p);if(g)return g;const f=this.options.loose,b=f?l[o.HYPHENRANGELOOSE]:l[o.HYPHENRANGE];u=u.replace(b,ve(this.options.includePrerelease)),r("hyphen replace",u),u=u.replace(l[o.COMPARATORTRIM],y),r("comparator trim",u),u=u.replace(l[o.TILDETRIM],c),u=u.replace(l[o.CARETTRIM],E),u=u.split(/\s+/).join(" ");let w=u.split(" ").map(A=>D(A,this.options)).join(" ").split(/\s+/).map(A=>Ee(A,this.options));f&&(w=w.filter(A=>(r("loose invalid filter",A,this.options),!!A.match(l[o.COMPARATORLOOSE])))),r("range list",w);const I=new Map,S=w.map(A=>new s(A,this.options));for(const A of S){if(C(A))return[A];I.set(A.value,A)}I.size>1&&I.has("")&&I.delete("");const P=[...I.values()];return n.set(p,P),P}intersects(u,m){if(!(u instanceof e))throw new TypeError("a Range is required");return this.set.some(p=>H(p,m)&&u.set.some(g=>H(g,m)&&p.every(f=>g.every(b=>f.intersects(b,m)))))}test(u){if(!u)return!1;if(typeof u=="string")try{u=new a(u,this.options)}catch{return!1}for(let m=0;m<this.set.length;m++)if(ye(this.set[m],u,this.options))return!0;return!1}}Se=e;const t=xn,n=new t({max:1e3}),i=Pe,s=gi(),r=me,a=je,{re:l,t:o,comparatorTrimReplace:y,tildeTrimReplace:c,caretTrimReplace:E}=Fe,{FLAG_INCLUDE_PRERELEASE:v,FLAG_LOOSE:$}=_e,C=h=>h.value==="<0.0.0-0",z=h=>h.value==="",H=(h,u)=>{let m=!0;const p=h.slice();let g=p.pop();for(;m&&p.length;)m=p.every(f=>g.intersects(f,u)),g=p.pop();return m},D=(h,u)=>(r("comp",h,u),h=d(h,u),r("caret",h),h=U(h,u),r("tildes",h),h=O(h,u),r("xrange",h),h=_(h,u),r("stars",h),h),R=h=>!h||h.toLowerCase()==="x"||h==="*",U=(h,u)=>h.trim().split(/\s+/).map(m=>ee(m,u)).join(" "),ee=(h,u)=>{const m=u.loose?l[o.TILDELOOSE]:l[o.TILDE];return h.replace(m,(p,g,f,b,w)=>{r("tilde",h,p,g,f,b,w);let I;return R(g)?I="":R(f)?I=`>=${g}.0.0 <${+g+1}.0.0-0`:R(b)?I=`>=${g}.${f}.0 <${g}.${+f+1}.0-0`:w?(r("replaceTilde pr",w),I=`>=${g}.${f}.${b}-${w} <${g}.${+f+1}.0-0`):I=`>=${g}.${f}.${b} <${g}.${+f+1}.0-0`,r("tilde return",I),I})},d=(h,u)=>h.trim().split(/\s+/).map(m=>N(m,u)).join(" "),N=(h,u)=>{r("caret",h,u);const m=u.loose?l[o.CARETLOOSE]:l[o.CARET],p=u.includePrerelease?"-0":"";return h.replace(m,(g,f,b,w,I)=>{r("caret",h,g,f,b,w,I);let S;return R(f)?S="":R(b)?S=`>=${f}.0.0${p} <${+f+1}.0.0-0`:R(w)?f==="0"?S=`>=${f}.${b}.0${p} <${f}.${+b+1}.0-0`:S=`>=${f}.${b}.0${p} <${+f+1}.0.0-0`:I?(r("replaceCaret pr",I),f==="0"?b==="0"?S=`>=${f}.${b}.${w}-${I} <${f}.${b}.${+w+1}-0`:S=`>=${f}.${b}.${w}-${I} <${f}.${+b+1}.0-0`:S=`>=${f}.${b}.${w}-${I} <${+f+1}.0.0-0`):(r("no pr"),f==="0"?b==="0"?S=`>=${f}.${b}.${w}${p} <${f}.${b}.${+w+1}-0`:S=`>=${f}.${b}.${w}${p} <${f}.${+b+1}.0-0`:S=`>=${f}.${b}.${w} <${+f+1}.0.0-0`),r("caret return",S),S})},O=(h,u)=>(r("replaceXRanges",h,u),h.split(/\s+/).map(m=>x(m,u)).join(" ")),x=(h,u)=>{h=h.trim();const m=u.loose?l[o.XRANGELOOSE]:l[o.XRANGE];return h.replace(m,(p,g,f,b,w,I)=>{r("xRange",h,p,g,f,b,w,I);const S=R(f),P=S||R(b),A=P||R(w),te=A;return g==="="&&te&&(g=""),I=u.includePrerelease?"-0":"",S?g===">"||g==="<"?p="<0.0.0-0":p="*":g&&te?(P&&(b=0),w=0,g===">"?(g=">=",P?(f=+f+1,b=0,w=0):(b=+b+1,w=0)):g==="<="&&(g="<",P?f=+f+1:b=+b+1),g==="<"&&(I="-0"),p=`${g+f}.${b}.${w}${I}`):P?p=`>=${f}.0.0${I} <${+f+1}.0.0-0`:A&&(p=`>=${f}.${b}.0${I} <${f}.${+b+1}.0-0`),r("xRange return",p),p})},_=(h,u)=>(r("replaceStars",h,u),h.trim().replace(l[o.STAR],"")),Ee=(h,u)=>(r("replaceGTE0",h,u),h.trim().replace(l[u.includePrerelease?o.GTE0PRE:o.GTE0],"")),ve=h=>(u,m,p,g,f,b,w,I,S,P,A,te,ki)=>(R(p)?m="":R(g)?m=`>=${p}.0.0${h?"-0":""}`:R(f)?m=`>=${p}.${g}.0${h?"-0":""}`:b?m=`>=${m}`:m=`>=${m}${h?"-0":""}`,R(S)?I="":R(P)?I=`<${+S+1}.0.0-0`:R(A)?I=`<${S}.${+P+1}.0-0`:te?I=`<=${S}.${P}.${A}-${te}`:h?I=`<${S}.${P}.${+A+1}-0`:I=`<=${I}`,`${m} ${I}`.trim()),ye=(h,u,m)=>{for(let p=0;p<h.length;p++)if(!h[p].test(u))return!1;if(u.prerelease.length&&!m.includePrerelease){for(let p=0;p<h.length;p++)if(r(h[p].semver),h[p].semver!==s.ANY&&h[p].semver.prerelease.length>0){const g=h[p].semver;if(g.major===u.major&&g.minor===u.minor&&g.patch===u.patch)return!0}return!1}return!0};return Se}const mi=yt(),Ei=(e,t,n)=>{try{t=new mi(t,n)}catch{return!1}return t.test(e)};var vi=Ei,bt=yn(vi);function yi(e,t,n){const i=e.open(t),s=1e4,r=250,{origin:a}=new URL(t);let l=~~(s/r);function o(c){c.source===i&&(l=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function y(){l<=0||(i.postMessage(n,a),setTimeout(y,r),l-=1)}setTimeout(y,r)}var bi=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Ot(e,...t){for(const n of t)Oi(e,n);return e}function Oi(e,t){for(const n of Object.keys(t))Ft(e,n,t[n],!0)}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?et(Object(n),!0).forEach(function(i){vn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const j=Tt;let le=$t;const he=typeof window<"u"?window:void 0;var at;le===void 0&&((at=he==null?void 0:he.vl)!=null&&at.compile)&&(le=he.vl);const Ii={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Li={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},re={vega:"Vega","vega-lite":"Vega-Lite"},ge={vega:j.version,"vega-lite":le?le.version:"not available"},wi={vega:e=>e,"vega-lite":(e,t)=>le.compile(e,{config:t}).spec},Ni=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Ri="chart-wrapper";function Si(e){return typeof e=="function"}function tt(e,t,n,i){const s=`<html><head>${t}</head><body><pre><code class="json">`,r=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(s+e+r),a.document.title=`${re[i]} JSON Source`}function xi(e,t){if(e.$schema){const n=gt(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${re[n.library]}, but mode argument sets ${re[t]??t}.`);const i=n.library;return bt(ge[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${re[i]} ${n.version}, but the current version of ${re[i]} is v${ge[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Ai(e){return!!(e&&"load"in e)}function nt(e){return Ai(e)?e:j.loader(e)}function Ti(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return de(t.defaultStyle)&&(t.defaultStyle=!1),t}async function $i(e,t,n={}){let i,s;de(t)?(s=nt(n.loader),i=JSON.parse(await s.load(t))):i=t;const r=Ti(i),a=r.loader;(!s||a)&&(s=nt(n.loader??a));const l=await it(r,s),o=await it(n,s),y=X(X({},Ot(o,l)),{},{config:pt(o.config??{},l.config??{})});return await Ci(e,i,y,s)}async function it(e,t){const n=de(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=de(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return X(X(X({},e),i?{patch:i}:{}),n?{config:n}:{})}function Di(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Ci(e,t,n={},i){const s=n.theme?pt(Dt[n.theme],n.config??{}):n.config,r=Ct(n.actions)?n.actions:Ot({},Ii,n.actions??{}),a=X(X({},Li),n.i18n),l=n.renderer??"canvas",o=n.logLevel??j.Warn,y=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const d="vega-embed-style",{root:N,rootContainer:O}=Di(c);if(!N.getElementById(d)){const x=document.createElement("style");x.id=d,x.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?bi.toString():n.defaultStyle,O.appendChild(x)}}const E=xi(t,n.mode);let v=wi[E](t,s);if(E==="vega-lite"&&v.$schema){const d=gt(v.$schema);bt(ge.vega,`^${d.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${d.version}, but current version is v${ge.vega}.`)}c.classList.add("vega-embed"),r&&c.classList.add("has-actions"),c.innerHTML="";let $=c;if(r){const d=document.createElement("div");d.classList.add(Ri),c.appendChild(d),$=d}const C=n.patch;if(C&&(v=C instanceof Function?C(v):Pt(v,C,!0,!1).newDocument),n.formatLocale&&j.formatLocale(n.formatLocale),n.timeFormatLocale&&j.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const d in n.expressionFunctions){const N=n.expressionFunctions[d];"fn"in N?j.expressionFunction(d,N.fn,N.visitor):N instanceof Function&&j.expressionFunction(d,N)}const{ast:z}=n,H=j.parse(v,E==="vega-lite"?{}:s,{ast:z}),D=new(n.viewClass||j.View)(H,X({loader:i,logLevel:o,renderer:l},z?{expr:j.expressionInterpreter??n.expr??Yt}:{}));if(D.addSignalListener("autosize",(d,N)=>{const{type:O}=N;O=="fit-x"?($.classList.add("fit-x"),$.classList.remove("fit-y")):O=="fit-y"?($.classList.remove("fit-x"),$.classList.add("fit-y")):O=="fit"?$.classList.add("fit-x","fit-y"):$.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const d=Si(n.tooltip)?n.tooltip:new gn(n.tooltip===!0?{}:n.tooltip).call;D.tooltip(d)}let{hover:R}=n;if(R===void 0&&(R=E==="vega"),R){const{hoverSet:d,updateSet:N}=typeof R=="boolean"?{}:R;D.hover(d,N)}n&&(n.width!=null&&D.width(n.width),n.height!=null&&D.height(n.height),n.padding!=null&&D.padding(n.padding)),await D.initialize($,n.bind).runAsync();let U;if(r!==!1){let d=c;if(n.defaultStyle!==!1){const O=document.createElement("details");O.title=a.CLICK_TO_VIEW_ACTIONS,c.append(O),d=O;const x=document.createElement("summary");x.innerHTML=Ni,O.append(x),U=_=>{O.contains(_.target)||O.removeAttribute("open")},document.addEventListener("click",U)}const N=document.createElement("div");if(d.append(N),N.classList.add("vega-actions"),r===!0||r.export!==!1){for(const O of["svg","png"])if(r===!0||r.export===!0||r.export[O]){const x=a[`${O.toUpperCase()}_ACTION`],_=document.createElement("a"),Ee=_t(n.scaleFactor)?n.scaleFactor[O]:n.scaleFactor;_.text=x,_.href="#",_.target="_blank",_.download=`${y}.${O}`,_.addEventListener("mousedown",async function(ve){ve.preventDefault();const ye=await D.toImageURL(O,Ee);this.href=ye}),N.append(_)}}if(r===!0||r.source!==!1){const O=document.createElement("a");O.text=a.SOURCE_ACTION,O.href="#",O.addEventListener("click",function(x){tt(Oe(t),n.sourceHeader??"",n.sourceFooter??"",E),x.preventDefault()}),N.append(O)}if(E==="vega-lite"&&(r===!0||r.compiled!==!1)){const O=document.createElement("a");O.text=a.COMPILED_ACTION,O.href="#",O.addEventListener("click",function(x){tt(Oe(v),n.sourceHeader??"",n.sourceFooter??"","vega"),x.preventDefault()}),N.append(O)}if(r===!0||r.editor!==!1){const O=n.editorUrl??"https://vega.github.io/editor/",x=document.createElement("a");x.text=a.EDITOR_ACTION,x.href="#",x.addEventListener("click",function(_){yi(window,O,{config:s,mode:E,renderer:l,spec:Oe(t)}),_.preventDefault()}),N.append(x)}}function ee(){U&&document.removeEventListener("click",U),D.finalize()}return{view:D,spec:t,vgSpec:v,finalize:ee,embedOptions:n}}const Pi=new Set(["width","height"]);function _i(e,t){for(const[n,i]of Object.entries(t))i&&(i&&{}.toString.call(i)==="[object Function]"?i(e.data(n)):e.change(n,j.changeset().remove(()=>!0).insert(i)))}function fe(e={},t={},n=new Set){const i=Object.keys(e),s=Object.keys(t);return e===t||i.length===s.length&&i.filter(r=>!n.has(r)).every(r=>e[r]===t[r])}function rt(e,t){const n=Object.keys(t);for(const i of n)try{e.removeSignalListener(i,t[i])}catch(s){console.warn("Cannot remove invalid signal listener.",s)}return n.length>0}function xe(e,t){const n=Object.keys(t);for(const i of n)try{e.addSignalListener(i,t[i])}catch(s){console.warn("Cannot add invalid signal listener.",s)}return n.length>0}function Fi(e){return new Set(e.flatMap(t=>Object.keys(t)))}function ji(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i="width"in e||"width"in t,s="height"in e||"height"in t;return i&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),s&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),[...Fi([e,t])].filter(a=>a!=="width"&&a!=="height").some(a=>!(a in e)||!(a in t)||!jt(e[a],t[a]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function st(e,t){const{width:n,height:i}=t;return typeof n<"u"&&typeof i<"u"?{...e,width:n,height:i}:typeof n<"u"?{...e,width:n}:typeof i<"u"?{...e,height:i}:e}function Gi(e){let t;return{c(){t=It("div")},l(n){t=Lt(n,"DIV",{}),wt(t).forEach(Ge)},m(n,i){Nt(n,t,i),e[11](t)},p:be,i:be,o:be,d(n){n&&Ge(t),e[11](null)}}}function Ui(e,t,n){let{options:i}=t,{spec:s}=t,{view:r}=t,{signalListeners:a={}}=t,{data:l={}}=t;const o=Rt();let y,c={},E={},v={},$={},C;St(()=>{H()});async function z(){H();try{n(6,y=await $i(C,s,i)),n(1,r=y.view),xe(r,a)&&r.runAsync(),R(r)}catch(d){D(d)}}function H(){y&&(y.finalize(),n(6,y=void 0),n(1,r=void 0))}function D(d){o("onError",{error:d}),console.warn(d)}function R(d){U(),o("onNewView",{view:d})}async function U(){l&&Object.keys(l).length>0&&y!==void 0&&(n(1,r=y.view),_i(r,l),await r.resize().runAsync())}function ee(d){ot[d?"unshift":"push"](()=>{C=d,n(0,C)})}return e.$$set=d=>{"options"in d&&n(2,i=d.options),"spec"in d&&n(3,s=d.spec),"view"in d&&n(1,r=d.view),"signalListeners"in d&&n(4,a=d.signalListeners),"data"in d&&n(5,l=d.data)},e.$$.update=()=>{if(e.$$.dirty&1056&&(fe(l,$)||U(),n(10,$=l)),e.$$.dirty&991&&C!==void 0){if(!fe(i,c,Pi))z();else{const d=ji(st(s,i),st(v,c)),N=a,O=E;if(d){if(d.isExpensive)z();else if(y!==void 0){const x=!fe(N,O);n(1,r=y.view),d.width!==!1&&r.width(d.width),d.height!==!1&&r.height(d.height),x&&(O&&rt(r,O),N&&xe(r,N)),r.runAsync()}}else!fe(N,O)&&y!==void 0&&(n(1,r=y.view),O&&rt(r,O),N&&xe(r,N),r.runAsync())}n(7,c=i),n(8,E=a),n(9,v=s)}},[C,r,i,s,a,l,y,c,E,v,$,ee]}class Mi extends $e{constructor(t){super(),De(this,t,Ui,Gi,Ce,{options:2,spec:3,view:1,signalListeners:4,data:5})}}function Vi(e){let t,n,i;function s(a){e[6](a)}let r={spec:e[1],data:e[2],signalListeners:e[3],options:e[4]};return e[0]!==void 0&&(r.view=e[0]),t=new Mi({props:r}),ot.push(()=>xt(t,"view",s)),t.$on("onNewView",e[7]),t.$on("onError",e[8]),{c(){lt(t.$$.fragment)},l(a){ct(t.$$.fragment,a)},m(a,l){ut(t,a,l),i=!0},p(a,[l]){const o={};l&2&&(o.spec=a[1]),l&4&&(o.data=a[2]),l&8&&(o.signalListeners=a[3]),l&16&&(o.options=a[4]),!n&&l&1&&(n=!0,o.view=a[0],At(()=>n=!1)),t.$set(o)},i(a){i||(ht(t.$$.fragment,a),i=!0)},o(a){ft(t.$$.fragment,a),i=!1},d(a){dt(t,a)}}}const Xi="vega-lite";function zi(e,t,n){let i,{spec:s}=t,{options:r={}}=t,{data:a={}}=t,{signalListeners:l={}}=t,{view:o=void 0}=t;function y(v){o=v,n(0,o)}function c(v){Ue.call(this,e,v)}function E(v){Ue.call(this,e,v)}return e.$$set=v=>{"spec"in v&&n(1,s=v.spec),"options"in v&&n(5,r=v.options),"data"in v&&n(2,a=v.data),"signalListeners"in v&&n(3,l=v.signalListeners),"view"in v&&n(0,o=v.view)},e.$$.update=()=>{e.$$.dirty&32&&n(4,i={...r,mode:Xi})},[o,s,a,l,i,r,y,c,E]}class Hi extends $e{constructor(t){super(),De(this,t,zi,Vi,Ce,{spec:1,options:5,data:2,signalListeners:3,view:0})}}function qi(e){let t,n;return t=new Hi({props:{data:e[1],spec:e[0],options:e[2]}}),{c(){lt(t.$$.fragment)},l(i){ct(t.$$.fragment,i)},m(i,s){ut(t,i,s),n=!0},p(i,[s]){const r={};s&2&&(r.data=i[1]),s&1&&(r.spec=i[0]),t.$set(r)},i(i){n||(ht(t.$$.fragment,i),n=!0)},o(i){ft(t.$$.fragment,i),n=!1},d(i){dt(t,i)}}}function Wi(e){const t=[];if(e)for(const[n,i]of e.entries())t.push({index:n,value:i});return{table:t}}function Yi(e,t,n){let i,s,{distribution:r}=t,{color:a}=t;const l={$schema:"https://vega.github.io/schema/vega-lite/v4.json",width:250,height:100,data:{name:"table"},mark:"bar",encoding:{x:{field:"index",type:"nominal",title:null,axis:{labelFontSize:14,labelAngle:0,ticks:!1}},y:{field:"value",type:"quantitative",title:null,scale:{domain:[0,1]},axis:{labelFontSize:14}}}},o={actions:!1};function y(c){if(c===null)return l;const E=JSON.parse(JSON.stringify(l));return E.encoding.color={value:c},E}return e.$$set=c=>{"distribution"in c&&n(3,r=c.distribution),"color"in c&&n(4,a=c.color)},e.$$.update=()=>{e.$$.dirty&8&&n(1,i=Wi(r)),e.$$.dirty&16&&n(0,s=y(a))},[s,i,o,r,a]}class Ji extends $e{constructor(t){super(),De(this,t,Yi,qi,Ce,{distribution:3,color:4})}}export{Ji as D};
