import{s as Le,r as Ve,p as ye,u as mt,v as Ye,w as Ct,o as Et,x as $t,y as Ft,z as Pt,A as Gt,f as re,g as se,h as ae,d as W,i as _e,F as Ae,P as vt,Q as yt,R as Je,a as bt,c as It,j as H,C as pe,l as Mt,m as jt}from"./scheduler.2MOiW16C.js";import{S as we,i as Re,f as Lt,b as le,d as ce,m as ue,a as Z,t as ee,e as he}from"./index.uDgcqgGv.js";import{i as Ut,a as be,b as Xe,v as Vt,c as Xt,m as wt,t as zt,d as Ht,e as Rt,f as qt,s as Ce,w as Wt}from"./vega-themes.module._o-MIfiB.js";import{e as kt,B as Bt}from"./stores.GIwlcHvL.js";import{c as Yt,B as Jt,g as Kt,a as Qt}from"./Box.m53wu71N.js";const Ke={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"},Zt=Yt((t,{align:e,direction:n,grow:i,noWrap:r,position:s,spacing:o,children:l})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:n,alignItems:e||(n==="row"?"center":i?"stretch":s==="apart"?"flex-start":Ke[s]),flexWrap:r?"nowrap":"wrap",justifyContent:n==="row"?Ke[s]:void 0,gap:t.fn.size({size:o,sizes:t.space}),"& > *":{boxSizing:"border-box",maxWidth:i&&n==="row"?`calc(${100/l}% - ${t.fn.size({size:o,sizes:t.space})-t.fn.size({size:o,sizes:t.space})/l}px)`:void 0,flexGrow:i?1:0}}}));function en(t){let e;const n=t[15].default,i=$t(n,t,t[17],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&131072)&&Ft(i,n,r,r[17],e?Gt(n,r[17],s,null):Pt(r[17]),null)},i(r){e||(Z(i,r),e=!0)},o(r){ee(i,r),e=!1},d(r){i&&i.d(r)}}}function tn(t){let e,n,i;const r=[{use:t[1]},{class:t[6](t[2],t[5].root,t[4]({css:t[3]}))},t[7]];function s(l){t[16](l)}let o={$$slots:{default:[en]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)o=Ve(o,r[l]);return t[0]!==void 0&&(o.element=t[0]),e=new Jt({props:o}),ye.push(()=>Lt(e,"element",s)),{c(){le(e.$$.fragment)},l(l){ce(e.$$.fragment,l)},m(l,a){ue(e,l,a),i=!0},p(l,[a]){const c=a&254?Kt(r,[a&2&&{use:l[1]},a&124&&{class:l[6](l[2],l[5].root,l[4]({css:l[3]}))},a&128&&Qt(l[7])]):{};a&131072&&(c.$$scope={dirty:a,ctx:l}),!n&&a&1&&(n=!0,c.element=l[0],mt(()=>n=!1)),e.$set(c)},i(l){i||(Z(e.$$.fragment,l),i=!0)},o(l){ee(e.$$.fragment,l),i=!1},d(l){he(e,l)}}}function nn(t,e,n){let i,r,s;const o=["use","element","class","override","position","noWrap","grow","spacing","direction","align"];let l=Ye(e,o),{$$slots:a={},$$scope:c}=e,{use:u=[],element:d=void 0,class:I="",override:_={},position:g="left",noWrap:$=!1,grow:T=!1,spacing:A="md",direction:O="row",align:D="center"}=e,M;function v(E){d=E,n(0,d)}return t.$$set=E=>{e=Ve(Ve({},e),Ct(E)),n(7,l=Ye(e,o)),"use"in E&&n(1,u=E.use),"element"in E&&n(0,d=E.element),"class"in E&&n(2,I=E.class),"override"in E&&n(3,_=E.override),"position"in E&&n(8,g=E.position),"noWrap"in E&&n(9,$=E.noWrap),"grow"in E&&n(10,T=E.grow),"spacing"in E&&n(11,A=E.spacing),"direction"in E&&n(12,O=E.direction),"align"in E&&n(13,D=E.align),"$$scope"in E&&n(17,c=E.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&Et(()=>{n(14,M=d.childElementCount)}),t.$$.dirty&32512&&n(6,{cx:i,classes:r,getStyles:s}=Zt({align:D,children:M,direction:O,grow:T,noWrap:$,position:g,spacing:A},{name:"Group"}),i,(n(5,r),n(13,D),n(14,M),n(12,O),n(10,T),n(9,$),n(8,g),n(11,A),n(0,d)),(n(4,s),n(13,D),n(14,M),n(12,O),n(10,T),n(9,$),n(8,g),n(11,A),n(0,d)))},[d,u,I,_,s,r,i,l,g,$,T,A,O,D,M,a,v,c]}class Qe extends we{constructor(e){super(),Re(this,e,nn,tn,Le,{use:1,element:0,class:2,override:3,position:8,noWrap:9,grow:10,spacing:11,direction:12,align:13})}}function rn(t,e,n){let i;e.x2&&(e.x?(n&&t.x>t.x2&&(i=t.x,t.x=t.x2,t.x2=i),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(n&&t.y>t.y2&&(i=t.y,t.y=t.y2,t.y2=i),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}var sn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},an={"*":(t,e)=>t*e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,">":(t,e)=>t>e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e},on={"+":t=>+t,"-":t=>-t,"~":t=>~t,"!":t=>!t};const ln=Array.prototype.slice,J=(t,e,n)=>{const i=n?n(e[0]):e[0];return i[t].apply(i,ln.call(e,1))},cn=(t,e,n,i,r,s,o)=>new Date(t,e||0,n??1,i||0,r||0,s||0,o||0);var un={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(t,e,n)=>Math.max(e,Math.min(n,t)),now:Date.now,utc:Date.UTC,datetime:cn,date:t=>new Date(t).getDate(),day:t=>new Date(t).getDay(),year:t=>new Date(t).getFullYear(),month:t=>new Date(t).getMonth(),hours:t=>new Date(t).getHours(),minutes:t=>new Date(t).getMinutes(),seconds:t=>new Date(t).getSeconds(),milliseconds:t=>new Date(t).getMilliseconds(),time:t=>new Date(t).getTime(),timezoneoffset:t=>new Date(t).getTimezoneOffset(),utcdate:t=>new Date(t).getUTCDate(),utcday:t=>new Date(t).getUTCDay(),utcyear:t=>new Date(t).getUTCFullYear(),utcmonth:t=>new Date(t).getUTCMonth(),utchours:t=>new Date(t).getUTCHours(),utcminutes:t=>new Date(t).getUTCMinutes(),utcseconds:t=>new Date(t).getUTCSeconds(),utcmilliseconds:t=>new Date(t).getUTCMilliseconds(),length:t=>t.length,join:function(){return J("join",arguments)},indexof:function(){return J("indexOf",arguments)},lastindexof:function(){return J("lastIndexOf",arguments)},slice:function(){return J("slice",arguments)},reverse:t=>t.slice().reverse(),parseFloat,parseInt,upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),substring:function(){return J("substring",arguments,String)},split:function(){return J("split",arguments,String)},replace:function(){return J("replace",arguments,String)},trim:t=>String(t).trim(),regexp:RegExp,test:(t,e)=>RegExp(t).test(e)};const hn=["view","item","group","xy","x","y"],ze=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&ze.add(setImmediate);const fn={Literal:(t,e)=>e.value,Identifier:(t,e)=>{const n=e.name;return t.memberDepth>0?n:n==="datum"?t.datum:n==="event"?t.event:n==="item"?t.item:sn[n]||t.params["$"+n]},MemberExpression:(t,e)=>{const n=!e.computed,i=t(e.object);n&&(t.memberDepth+=1);const r=t(e.property);if(n&&(t.memberDepth-=1),ze.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(t,e)=>{const n=e.arguments;let i=e.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?t(n[0])?t(n[1]):t(n[2]):(t.fn[i]||un[i]).apply(t.fn,n.map(t))},ArrayExpression:(t,e)=>e.elements.map(t),BinaryExpression:(t,e)=>an[e.operator](t(e.left),t(e.right)),UnaryExpression:(t,e)=>on[e.operator](t(e.argument)),ConditionalExpression:(t,e)=>t(e.test)?t(e.consequent):t(e.alternate),LogicalExpression:(t,e)=>e.operator==="&&"?t(e.left)&&t(e.right):t(e.left)||t(e.right),ObjectExpression:(t,e)=>e.properties.reduce((n,i)=>{t.memberDepth+=1;const r=t(i.key);return t.memberDepth-=1,ze.has(t(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=t(i.value),n},{})};function ge(t,e,n,i,r,s){const o=l=>fn[l.type](o,l);return o.memberDepth=0,o.fn=Object.create(e),o.params=n,o.datum=i,o.event=r,o.item=s,hn.forEach(l=>o.fn[l]=function(){return r.vega[l](...arguments)}),o(t)}var dn={operator(t,e){const n=e.ast,i=t.functions;return r=>ge(n,i,r)},parameter(t,e){const n=e.ast,i=t.functions;return(r,s)=>ge(n,i,s,r)},event(t,e){const n=e.ast,i=t.functions;return r=>ge(n,i,void 0,void 0,r)},handler(t,e){const n=e.ast,i=t.functions;return(r,s)=>{const o=s.item&&s.item.datum;return ge(n,i,r,o,s)}},encode(t,e){const{marktype:n,channels:i}=e,r=t.functions,s=n==="group"||n==="image"||n==="rect";return(o,l)=>{const a=o.datum;let c=0,u;for(const d in i)u=ge(i[d].ast,r,l,a,void 0,o),o[d]!==u&&(o[d]=u,c=1);return n!=="rule"&&rn(o,i,s),c}}};function pn(t,e,n,i){if(Ut(t))return`[${t.map(r=>e(be(r)?r:Ze(r,n))).join(", ")}]`;if(Xe(t)){let r="";const{title:s,image:o,...l}=t;s&&(r+=`<h2>${e(s)}</h2>`),o&&(r+=`<img src="${new URL(e(o),i||location.href).href}">`);const a=Object.keys(l);if(a.length>0){r+="<table>";for(const c of a){let u=l[c];u!==void 0&&(Xe(u)&&(u=Ze(u,n)),r+=`<tr><td class="key">${e(c)}</td><td class="value">${e(u)}</td></tr>`)}r+="</table>"}return r||"{}"}return e(t)}function gn(t){const e=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=e.indexOf(this)+1;return e.length=r,e.length>t?"[Object]":e.indexOf(i)>=0?"[Circular]":(e.push(i),i)}}function Ze(t,e){return JSON.stringify(t,gn(e))}var mn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Nt="vg-tooltip-element",En={offsetX:10,offsetY:10,id:Nt,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:vn,maxDepth:2,formatTooltip:pn,baseURL:""};function vn(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function yn(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return mn.toString().replace(Nt,t)}function bn(t,e,n,i){let r=t.clientX+n;r+e.width>window.innerWidth&&(r=+t.clientX-n-e.width);let s=t.clientY+i;return s+e.height>window.innerHeight&&(s=+t.clientY-i-e.height),{x:r,y:s}}class In{constructor(e){this.options={...En,...e};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=yn(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(e,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=bn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var $e={};function Ln(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fe,et;function wn(){return et||(et=1,Fe=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Fe}var Rn=x;x.Node=te;x.create=x;function x(t){var e=this;if(e instanceof x||(e=new x),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(r){e.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)e.push(arguments[n]);return e}x.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};x.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};x.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};x.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)On(this,arguments[t]);return this.length};x.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)xn(this,arguments[t]);return this.length};x.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};x.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};x.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,i=0;n!==null;i++)t.call(e,n.value,i,this),n=n.next};x.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,i=this.length-1;n!==null;i--)t.call(e,n.value,i,this),n=n.prev};x.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};x.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};x.prototype.map=function(t,e){e=e||this;for(var n=new x,i=this.head;i!==null;)n.push(t.call(e,i.value,this)),i=i.next;return n};x.prototype.mapReverse=function(t,e){e=e||this;for(var n=new x,i=this.tail;i!==null;)n.push(t.call(e,i.value,this)),i=i.prev;return n};x.prototype.reduce=function(t,e){var n,i=this.head;if(arguments.length>1)n=e;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)n=t(n,i.value,r),i=i.next;return n};x.prototype.reduceReverse=function(t,e){var n,i=this.tail;if(arguments.length>1)n=e;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)n=t(n,i.value,r),i=i.prev;return n};x.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};x.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};x.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new x;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,r=this.head;r!==null&&i<t;i++)r=r.next;for(;r!==null&&i<e;i++,r=r.next)n.push(r.value);return n};x.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new x;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,r=this.tail;r!==null&&i>e;i--)r=r.prev;for(;r!==null&&i>t;i--,r=r.prev)n.push(r.value);return n};x.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,r=this.head;r!==null&&i<t;i++)r=r.next;for(var s=[],i=0;r&&i<e;i++)s.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<n.length;i++)r=Nn(this,r,n[i]);return s};x.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=e,this.tail=t,this};function Nn(t,e,n){var i=e===t.head?new te(n,null,e,t):new te(n,e,e.next,t);return i.next===null&&(t.tail=i),i.prev===null&&(t.head=i),t.length++,i}function On(t,e){t.tail=new te(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function xn(t,e){t.head=new te(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function te(t,e,n,i){if(!(this instanceof te))return new te(t,e,n,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{wn()(x)}catch{}const An=Rn,K=Symbol("max"),Y=Symbol("length"),ne=Symbol("lengthCalculator"),ve=Symbol("allowStale"),Q=Symbol("maxAge"),B=Symbol("dispose"),tt=Symbol("noDisposeOnSet"),G=Symbol("lruList"),V=Symbol("cache"),Ot=Symbol("updateAgeOnGet"),Pe=()=>1;class Sn{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[K]=e.max||1/0;const n=e.length||Pe;if(this[ne]=typeof n!="function"?Pe:n,this[ve]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Q]=e.maxAge||0,this[B]=e.dispose,this[tt]=e.noDisposeOnSet||!1,this[Ot]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[K]=e||1/0,me(this)}get max(){return this[K]}set allowStale(e){this[ve]=!!e}get allowStale(){return this[ve]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Q]=e,me(this)}get maxAge(){return this[Q]}set lengthCalculator(e){typeof e!="function"&&(e=Pe),e!==this[ne]&&(this[ne]=e,this[Y]=0,this[G].forEach(n=>{n.length=this[ne](n.value,n.key),this[Y]+=n.length})),me(this)}get lengthCalculator(){return this[ne]}get length(){return this[Y]}get itemCount(){return this[G].length}rforEach(e,n){n=n||this;for(let i=this[G].tail;i!==null;){const r=i.prev;nt(this,e,i,n),i=r}}forEach(e,n){n=n||this;for(let i=this[G].head;i!==null;){const r=i.next;nt(this,e,i,n),i=r}}keys(){return this[G].toArray().map(e=>e.key)}values(){return this[G].toArray().map(e=>e.value)}reset(){this[B]&&this[G]&&this[G].length&&this[G].forEach(e=>this[B](e.key,e.value)),this[V]=new Map,this[G]=new An,this[Y]=0}dump(){return this[G].map(e=>Se(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[G]}set(e,n,i){if(i=i||this[Q],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const r=i?Date.now():0,s=this[ne](n,e);if(this[V].has(e)){if(s>this[K])return oe(this,this[V].get(e)),!1;const a=this[V].get(e).value;return this[B]&&(this[tt]||this[B](e,a.value)),a.now=r,a.maxAge=i,a.value=n,this[Y]+=s-a.length,a.length=s,this.get(e),me(this),!0}const o=new Tn(e,n,s,r,i);return o.length>this[K]?(this[B]&&this[B](e,n),!1):(this[Y]+=o.length,this[G].unshift(o),this[V].set(e,this[G].head),me(this),!0)}has(e){if(!this[V].has(e))return!1;const n=this[V].get(e).value;return!Se(this,n)}get(e){return Ge(this,e,!0)}peek(e){return Ge(this,e,!1)}pop(){const e=this[G].tail;return e?(oe(this,e),e.value):null}del(e){oe(this,this[V].get(e))}load(e){this.reset();const n=Date.now();for(let i=e.length-1;i>=0;i--){const r=e[i],s=r.e||0;if(s===0)this.set(r.k,r.v);else{const o=s-n;o>0&&this.set(r.k,r.v,o)}}}prune(){this[V].forEach((e,n)=>Ge(this,n,!1))}}const Ge=(t,e,n)=>{const i=t[V].get(e);if(i){const r=i.value;if(Se(t,r)){if(oe(t,i),!t[ve])return}else n&&(t[Ot]&&(i.value.now=Date.now()),t[G].unshiftNode(i));return r.value}},Se=(t,e)=>{if(!e||!e.maxAge&&!t[Q])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[Q]&&n>t[Q]},me=t=>{if(t[Y]>t[K])for(let e=t[G].tail;t[Y]>t[K]&&e!==null;){const n=e.prev;oe(t,e),e=n}},oe=(t,e)=>{if(e){const n=e.value;t[B]&&t[B](n.key,n.value),t[Y]-=n.length,t[V].delete(n.key),t[G].removeNode(e)}};class Tn{constructor(e,n,i,r,s){this.key=e,this.value=n,this.length=i,this.now=r,this.maxAge=s||0}}const nt=(t,e,n,i)=>{let r=n.value;Se(t,r)&&(oe(t,n),t[ve]||(r=void 0)),r&&e.call(i,r.value,r.key,t)};var _n=Sn;const Dn=Object.freeze({loose:!0}),Cn=Object.freeze({}),$n=t=>t?typeof t!="object"?Dn:t:Cn;var qe=$n,He={exports:{}};const Fn="2.0.0",xt=256,Pn=Number.MAX_SAFE_INTEGER||9007199254740991,Gn=16,Mn=xt-6,jn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var We={MAX_LENGTH:xt,MAX_SAFE_COMPONENT_LENGTH:Gn,MAX_SAFE_BUILD_LENGTH:Mn,MAX_SAFE_INTEGER:Pn,RELEASE_TYPES:jn,SEMVER_SPEC_VERSION:Fn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Un=typeof process=="object"&&$e&&$e.NODE_DEBUG&&/\bsemver\b/i.test($e.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var De=Un;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=We,s=De;e=t.exports={};const o=e.re=[],l=e.safeRe=[],a=e.src=[],c=e.t={};let u=0;const d="[a-zA-Z0-9-]",I=[["\\s",1],["\\d",r],[d,i]],_=$=>{for(const[T,A]of I)$=$.split(`${T}*`).join(`${T}{0,${A}}`).split(`${T}+`).join(`${T}{1,${A}}`);return $},g=($,T,A)=>{const O=_(T),D=u++;s($,D,T),c[$]=D,a[D]=T,o[D]=new RegExp(T,A?"g":void 0),l[D]=new RegExp(O,A?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${a[c.NUMERICIDENTIFIER]}|${a[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${a[c.NUMERICIDENTIFIERLOOSE]}|${a[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${a[c.PRERELEASEIDENTIFIER]}(?:\\.${a[c.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${a[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[c.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${a[c.BUILDIDENTIFIER]}(?:\\.${a[c.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${a[c.MAINVERSION]}${a[c.PRERELEASE]}?${a[c.BUILD]}?`),g("FULL",`^${a[c.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${a[c.MAINVERSIONLOOSE]}${a[c.PRERELEASELOOSE]}?${a[c.BUILD]}?`),g("LOOSE",`^${a[c.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${a[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${a[c.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:${a[c.PRERELEASE]})?${a[c.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:${a[c.PRERELEASELOOSE]})?${a[c.BUILD]}?)?)?`),g("XRANGE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAINLOOSE]}$`),g("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),g("COERCERTL",a[c.COERCE],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${a[c.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",g("TILDE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${a[c.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",g("CARET",`^${a[c.LONECARET]}${a[c.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${a[c.LONECARET]}${a[c.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${a[c.GTLT]}\\s*(${a[c.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]}|${a[c.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${a[c.XRANGEPLAIN]})\\s+-\\s+(${a[c.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${a[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[c.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(He,He.exports);var ke=He.exports;const it=/^[0-9]+$/,At=(t,e)=>{const n=it.test(t),i=it.test(e);return n&&i&&(t=+t,e=+e),t===e?0:n&&!i?-1:i&&!n?1:t<e?-1:1},Vn=(t,e)=>At(e,t);var Xn={compareIdentifiers:At,rcompareIdentifiers:Vn};const Ne=De,{MAX_LENGTH:rt,MAX_SAFE_INTEGER:Oe}=We,{safeRe:st,t:at}=ke,zn=qe,{compareIdentifiers:ie}=Xn;let Hn=class q{constructor(e,n){if(n=zn(n),e instanceof q){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>rt)throw new TypeError(`version is longer than ${rt} characters`);Ne("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=e.trim().match(n.loose?st[at.LOOSE]:st[at.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Oe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Oe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Oe||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const s=+r;if(s>=0&&s<Oe)return s}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ne("SemVer.compare",this.version,this.options,e),!(e instanceof q)){if(typeof e=="string"&&e===this.version)return 0;e=new q(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof q||(e=new q(e,this.options)),ie(this.major,e.major)||ie(this.minor,e.minor)||ie(this.patch,e.patch)}comparePre(e){if(e instanceof q||(e=new q(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=e.prerelease[n];if(Ne("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return ie(i,r)}while(++n)}compareBuild(e){e instanceof q||(e=new q(e,this.options));let n=0;do{const i=this.build[n],r=e.build[n];if(Ne("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return ie(i,r)}while(++n)}inc(e,n,i){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(n){let s=[n,r];i===!1&&(s=[n]),ie(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Be=Hn;const ot=Be,qn=(t,e,n)=>new ot(t,n).compare(new ot(e,n));var fe=qn;const Wn=fe,kn=(t,e,n)=>Wn(t,e,n)===0;var Bn=kn;const Yn=fe,Jn=(t,e,n)=>Yn(t,e,n)!==0;var Kn=Jn;const Qn=fe,Zn=(t,e,n)=>Qn(t,e,n)>0;var ei=Zn;const ti=fe,ni=(t,e,n)=>ti(t,e,n)>=0;var ii=ni;const ri=fe,si=(t,e,n)=>ri(t,e,n)<0;var ai=si;const oi=fe,li=(t,e,n)=>oi(t,e,n)<=0;var ci=li;const ui=Bn,hi=Kn,fi=ei,di=ii,pi=ai,gi=ci,mi=(t,e,n,i)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return ui(t,n,i);case"!=":return hi(t,n,i);case">":return fi(t,n,i);case">=":return di(t,n,i);case"<":return pi(t,n,i);case"<=":return gi(t,n,i);default:throw new TypeError(`Invalid operator: ${e}`)}};var Ei=mi,Me,lt;function vi(){if(lt)return Me;lt=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,d){if(d=n(d),u instanceof e){if(u.loose===!!d.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),o("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(u){const d=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],I=u.match(d);if(!I)throw new TypeError(`Invalid comparator: ${u}`);this.operator=I[1]!==void 0?I[1]:"",this.operator==="="&&(this.operator=""),I[2]?this.semver=new l(I[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(o("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new l(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(u.value,d).test(this.value):u.operator===""?u.value===""?!0:new a(this.value,d).test(u.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}Me=e;const n=qe,{safeRe:i,t:r}=ke,s=Ei,o=De,l=Be,a=St();return Me}var je,ct;function St(){if(ct)return je;ct=1;class t{constructor(f,L){if(L=i(L),f instanceof t)return f.loose===!!L.loose&&f.includePrerelease===!!L.includePrerelease?f:new t(f.raw,L);if(f instanceof r)return this.raw=f.value,this.set=[[f]],this.format(),this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=f.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(b=>this.parseRange(b.trim())).filter(b=>b.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const b=this.set[0];if(this.set=this.set.filter(m=>!g(m[0])),this.set.length===0)this.set=[b];else if(this.set.length>1){for(const m of this.set)if(m.length===1&&$(m[0])){this.set=[m];break}}}this.format()}format(){return this.range=this.set.map(f=>f.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(f){const b=((this.options.includePrerelease&&I)|(this.options.loose&&_))+":"+f,m=n.get(b);if(m)return m;const y=this.options.loose,w=y?l[a.HYPHENRANGELOOSE]:l[a.HYPHENRANGE];f=f.replace(w,z(this.options.includePrerelease)),s("hyphen replace",f),f=f.replace(l[a.COMPARATORTRIM],c),s("comparator trim",f),f=f.replace(l[a.TILDETRIM],u),s("tilde trim",f),f=f.replace(l[a.CARETTRIM],d),s("caret trim",f);let S=f.split(" ").map(P=>A(P,this.options)).join(" ").split(/\s+/).map(P=>U(P,this.options));y&&(S=S.filter(P=>(s("loose invalid filter",P,this.options),!!P.match(l[a.COMPARATORLOOSE])))),s("range list",S);const R=new Map,C=S.map(P=>new r(P,this.options));for(const P of C){if(g(P))return[P];R.set(P.value,P)}R.size>1&&R.has("")&&R.delete("");const j=[...R.values()];return n.set(b,j),j}intersects(f,L){if(!(f instanceof t))throw new TypeError("a Range is required");return this.set.some(b=>T(b,L)&&f.set.some(m=>T(m,L)&&b.every(y=>m.every(w=>y.intersects(w,L)))))}test(f){if(!f)return!1;if(typeof f=="string")try{f=new o(f,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(k(this.set[L],f,this.options))return!0;return!1}}je=t;const e=_n,n=new e({max:1e3}),i=qe,r=vi(),s=De,o=Be,{safeRe:l,t:a,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:d}=ke,{FLAG_INCLUDE_PRERELEASE:I,FLAG_LOOSE:_}=We,g=p=>p.value==="<0.0.0-0",$=p=>p.value==="",T=(p,f)=>{let L=!0;const b=p.slice();let m=b.pop();for(;L&&b.length;)L=b.every(y=>m.intersects(y,f)),m=b.pop();return L},A=(p,f)=>(s("comp",p,f),p=v(p,f),s("caret",p),p=D(p,f),s("tildes",p),p=h(p,f),s("xrange",p),p=F(p,f),s("stars",p),p),O=p=>!p||p.toLowerCase()==="x"||p==="*",D=(p,f)=>p.trim().split(/\s+/).map(L=>M(L,f)).join(" "),M=(p,f)=>{const L=f.loose?l[a.TILDELOOSE]:l[a.TILDE];return p.replace(L,(b,m,y,w,S)=>{s("tilde",p,b,m,y,w,S);let R;return O(m)?R="":O(y)?R=`>=${m}.0.0 <${+m+1}.0.0-0`:O(w)?R=`>=${m}.${y}.0 <${m}.${+y+1}.0-0`:S?(s("replaceTilde pr",S),R=`>=${m}.${y}.${w}-${S} <${m}.${+y+1}.0-0`):R=`>=${m}.${y}.${w} <${m}.${+y+1}.0-0`,s("tilde return",R),R})},v=(p,f)=>p.trim().split(/\s+/).map(L=>E(L,f)).join(" "),E=(p,f)=>{s("caret",p,f);const L=f.loose?l[a.CARETLOOSE]:l[a.CARET],b=f.includePrerelease?"-0":"";return p.replace(L,(m,y,w,S,R)=>{s("caret",p,m,y,w,S,R);let C;return O(y)?C="":O(w)?C=`>=${y}.0.0${b} <${+y+1}.0.0-0`:O(S)?y==="0"?C=`>=${y}.${w}.0${b} <${y}.${+w+1}.0-0`:C=`>=${y}.${w}.0${b} <${+y+1}.0.0-0`:R?(s("replaceCaret pr",R),y==="0"?w==="0"?C=`>=${y}.${w}.${S}-${R} <${y}.${w}.${+S+1}-0`:C=`>=${y}.${w}.${S}-${R} <${y}.${+w+1}.0-0`:C=`>=${y}.${w}.${S}-${R} <${+y+1}.0.0-0`):(s("no pr"),y==="0"?w==="0"?C=`>=${y}.${w}.${S}${b} <${y}.${w}.${+S+1}-0`:C=`>=${y}.${w}.${S}${b} <${y}.${+w+1}.0-0`:C=`>=${y}.${w}.${S} <${+y+1}.0.0-0`),s("caret return",C),C})},h=(p,f)=>(s("replaceXRanges",p,f),p.split(/\s+/).map(L=>N(L,f)).join(" ")),N=(p,f)=>{p=p.trim();const L=f.loose?l[a.XRANGELOOSE]:l[a.XRANGE];return p.replace(L,(b,m,y,w,S,R)=>{s("xRange",p,b,m,y,w,S,R);const C=O(y),j=C||O(w),P=j||O(S),de=P;return m==="="&&de&&(m=""),R=f.includePrerelease?"-0":"",C?m===">"||m==="<"?b="<0.0.0-0":b="*":m&&de?(j&&(w=0),S=0,m===">"?(m=">=",j?(y=+y+1,w=0,S=0):(w=+w+1,S=0)):m==="<="&&(m="<",j?y=+y+1:w=+w+1),m==="<"&&(R="-0"),b=`${m+y}.${w}.${S}${R}`):j?b=`>=${y}.0.0${R} <${+y+1}.0.0-0`:P&&(b=`>=${y}.${w}.0${R} <${y}.${+w+1}.0-0`),s("xRange return",b),b})},F=(p,f)=>(s("replaceStars",p,f),p.trim().replace(l[a.STAR],"")),U=(p,f)=>(s("replaceGTE0",p,f),p.trim().replace(l[f.includePrerelease?a.GTE0PRE:a.GTE0],"")),z=p=>(f,L,b,m,y,w,S,R,C,j,P,de,ir)=>(O(b)?L="":O(m)?L=`>=${b}.0.0${p?"-0":""}`:O(y)?L=`>=${b}.${m}.0${p?"-0":""}`:w?L=`>=${L}`:L=`>=${L}${p?"-0":""}`,O(C)?R="":O(j)?R=`<${+C+1}.0.0-0`:O(P)?R=`<${C}.${+j+1}.0-0`:de?R=`<=${C}.${j}.${P}-${de}`:p?R=`<${C}.${j}.${+P+1}-0`:R=`<=${R}`,`${L} ${R}`.trim()),k=(p,f,L)=>{for(let b=0;b<p.length;b++)if(!p[b].test(f))return!1;if(f.prerelease.length&&!L.includePrerelease){for(let b=0;b<p.length;b++)if(s(p[b].semver),p[b].semver!==r.ANY&&p[b].semver.prerelease.length>0){const m=p[b].semver;if(m.major===f.major&&m.minor===f.minor&&m.patch===f.patch)return!0}return!1}return!0};return je}const yi=St(),bi=(t,e,n)=>{try{e=new yi(e,n)}catch{return!1}return e.test(t)};var Ii=bi,Tt=Ln(Ii);function Li(t,e,n){const i=t.open(e),r=1e4,s=250,{origin:o}=new URL(e);let l=~~(r/s);function a(u){u.source===i&&(l=0,t.removeEventListener("message",a,!1))}t.addEventListener("message",a,!1);function c(){l<=0||(i.postMessage(n,o),setTimeout(c,s),l-=1)}setTimeout(c,s)}var wi=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function _t(t,...e){for(const n of e)Ri(t,n);return t}function Ri(t,e){for(const n of Object.keys(e))Wt(t,n,e[n],!0)}const X=Vt;let Ie=Xt;const ut=typeof window<"u"?window:void 0;Ie===void 0&&ut?.vl?.compile&&(Ie=ut.vl);const Ni={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Oi={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Ee={vega:"Vega","vega-lite":"Vega-Lite"},Te={vega:X.version,"vega-lite":Ie?Ie.version:"not available"},xi={vega:t=>t,"vega-lite":(t,e)=>Ie.compile(t,{config:e}).spec},Ai=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Si="chart-wrapper";function Ti(t){return typeof t=="function"}function ht(t,e,n,i){const r=`<html><head>${e}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(r+t+s),o.document.title=`${Ee[i]} JSON Source`}function _i(t,e){if(t.$schema){const n=Rt(t.$schema);e&&e!==n.library&&console.warn(`The given visualization spec is written in ${Ee[n.library]}, but mode argument sets ${Ee[e]??e}.`);const i=n.library;return Tt(Te[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Ee[i]} ${n.version}, but the current version of ${Ee[i]} is v${Te[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e??"vega"}function Dt(t){return!!(t&&"load"in t)}function ft(t){return Dt(t)?t:X.loader(t)}function Di(t){const e=t.usermeta?.embedOptions??{};return be(e.defaultStyle)&&(e.defaultStyle=!1),e}async function Ci(t,e,n={}){let i,r;be(e)?(r=ft(n.loader),i=JSON.parse(await r.load(e))):i=e;const s=Di(i),o=s.loader;(!r||o)&&(r=ft(n.loader??o));const l=await dt(s,r),a=await dt(n,r),c={..._t(a,l),config:wt(a.config??{},l.config??{})};return await Fi(t,i,c,r)}async function dt(t,e){const n=be(t.config)?JSON.parse(await e.load(t.config)):t.config??{},i=be(t.patch)?JSON.parse(await e.load(t.patch)):t.patch;return{...t,...i?{patch:i}:{},...n?{config:n}:{}}}function $i(t){const e=t.getRootNode?t.getRootNode():document;return e instanceof ShadowRoot?{root:e,rootContainer:e}:{root:document,rootContainer:document.head??document.body}}async function Fi(t,e,n={},i){const r=n.theme?wt(zt[n.theme],n.config??{}):n.config,s=Ht(n.actions)?n.actions:_t({},Ni,n.actions??{}),o={...Oi,...n.i18n},l=n.renderer??"canvas",a=n.logLevel??X.Warn,c=n.downloadFileName??"visualization",u=typeof t=="string"?document.querySelector(t):t;if(!u)throw new Error(`${t} does not exist`);if(n.defaultStyle!==!1){const v="vega-embed-style",{root:E,rootContainer:h}=$i(u);if(!E.getElementById(v)){const N=document.createElement("style");N.id=v,N.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?wi.toString():n.defaultStyle,h.appendChild(N)}}const d=_i(e,n.mode);let I=xi[d](e,r);if(d==="vega-lite"&&I.$schema){const v=Rt(I.$schema);Tt(Te.vega,`^${v.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${v.version}, but current version is v${Te.vega}.`)}u.classList.add("vega-embed"),s&&u.classList.add("has-actions"),u.innerHTML="";let _=u;if(s){const v=document.createElement("div");v.classList.add(Si),u.appendChild(v),_=v}const g=n.patch;if(g&&(I=g instanceof Function?g(I):qt(I,g,!0,!1).newDocument),n.formatLocale&&X.formatLocale(n.formatLocale),n.timeFormatLocale&&X.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const v in n.expressionFunctions){const E=n.expressionFunctions[v];"fn"in E?X.expressionFunction(v,E.fn,E.visitor):E instanceof Function&&X.expressionFunction(v,E)}const{ast:$}=n,T=X.parse(I,d==="vega-lite"?{}:r,{ast:$}),A=new(n.viewClass||X.View)(T,{loader:i,logLevel:a,renderer:l,...$?{expr:X.expressionInterpreter??n.expr??dn}:{}});if(A.addSignalListener("autosize",(v,E)=>{const{type:h}=E;h=="fit-x"?(_.classList.add("fit-x"),_.classList.remove("fit-y")):h=="fit-y"?(_.classList.remove("fit-x"),_.classList.add("fit-y")):h=="fit"?_.classList.add("fit-x","fit-y"):_.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:v,tooltip:E}=n,h=v&&!Dt(v)?v?.baseURL:void 0,N=Ti(E)?E:new In({baseURL:h,...E===!0?{}:E}).call;A.tooltip(N)}let{hover:O}=n;if(O===void 0&&(O=d==="vega"),O){const{hoverSet:v,updateSet:E}=typeof O=="boolean"?{}:O;A.hover(v,E)}n&&(n.width!=null&&A.width(n.width),n.height!=null&&A.height(n.height),n.padding!=null&&A.padding(n.padding)),await A.initialize(_,n.bind).runAsync();let D;if(s!==!1){let v=u;if(n.defaultStyle!==!1||n.forceActionsMenu){const h=document.createElement("details");h.title=o.CLICK_TO_VIEW_ACTIONS,u.append(h),v=h;const N=document.createElement("summary");N.innerHTML=Ai,h.append(N),D=F=>{h.contains(F.target)||h.removeAttribute("open")},document.addEventListener("click",D)}const E=document.createElement("div");if(v.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(const h of["svg","png"])if(s===!0||s.export===!0||s.export[h]){const N=o[`${h.toUpperCase()}_ACTION`],F=document.createElement("a"),U=Xe(n.scaleFactor)?n.scaleFactor[h]:n.scaleFactor;F.text=N,F.href="#",F.target="_blank",F.download=`${c}.${h}`,F.addEventListener("mousedown",async function(z){z.preventDefault();const k=await A.toImageURL(h,U);this.href=k}),E.append(F)}}if(s===!0||s.source!==!1){const h=document.createElement("a");h.text=o.SOURCE_ACTION,h.href="#",h.addEventListener("click",function(N){ht(Ce(e),n.sourceHeader??"",n.sourceFooter??"",d),N.preventDefault()}),E.append(h)}if(d==="vega-lite"&&(s===!0||s.compiled!==!1)){const h=document.createElement("a");h.text=o.COMPILED_ACTION,h.href="#",h.addEventListener("click",function(N){ht(Ce(I),n.sourceHeader??"",n.sourceFooter??"","vega"),N.preventDefault()}),E.append(h)}if(s===!0||s.editor!==!1){const h=n.editorUrl??"https://vega.github.io/editor/",N=document.createElement("a");N.text=o.EDITOR_ACTION,N.href="#",N.addEventListener("click",function(F){Li(window,h,{config:r,mode:d,renderer:l,spec:Ce(e)}),F.preventDefault()}),E.append(N)}}function M(){D&&document.removeEventListener("click",D),A.finalize()}return{view:A,spec:e,vgSpec:I,finalize:M,embedOptions:n}}const Pi=new Set(["width","height"]);var Gi=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;r--!==0;){var o=s[r];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const Mi=kt(Gi);function ji(t,e){for(const[n,i]of Object.entries(e))i&&(i&&{}.toString.call(i)==="[object Function]"?i(t.data(n)):t.change(n,X.changeset().remove(()=>!0).insert(i)))}function xe(t={},e={},n=new Set){const i=Object.keys(t),r=Object.keys(e);return t===e||i.length===r.length&&i.filter(s=>!n.has(s)).every(s=>t[s]===e[s])}function pt(t,e){const n=Object.keys(e);for(const i of n)try{t.removeSignalListener(i,e[i])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}return n.length>0}function Ue(t,e){const n=Object.keys(e);for(const i of n)try{t.addSignalListener(i,e[i])}catch(r){console.warn("Cannot add invalid signal listener.",r)}return n.length>0}function Ui(t){return new Set(t.flatMap(e=>Object.keys(e)))}function Vi(t,e){if(t===e)return!1;const n={width:!1,height:!1,isExpensive:!1},i="width"in t||"width"in e,r="height"in t||"height"in e;return i&&(!("width"in t)||!("width"in e)||t.width!==e.width)&&("width"in t&&typeof t.width=="number"?n.width=t.width:n.isExpensive=!0),r&&(!("height"in t)||!("height"in e)||t.height!==e.height)&&("height"in t&&typeof t.height=="number"?n.height=t.height:n.isExpensive=!0),[...Ui([t,e])].filter(o=>o!=="width"&&o!=="height").some(o=>!(o in t)||!(o in e)||!Mi(t[o],e[o]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function gt(t,e){const{width:n,height:i}=e;return typeof n<"u"&&typeof i<"u"?{...t,width:n,height:i}:typeof n<"u"?{...t,width:n}:typeof i<"u"?{...t,height:i}:t}function Xi(t){let e;return{c(){e=re("div")},l(n){e=se(n,"DIV",{}),ae(e).forEach(W)},m(n,i){_e(n,e,i),t[11](e)},p:Ae,i:Ae,o:Ae,d(n){n&&W(e),t[11](null)}}}function zi(t,e,n){let{options:i}=e,{spec:r}=e,{view:s}=e,{signalListeners:o={}}=e,{data:l={}}=e;const a=vt();let c,u={},d={},I={},_={},g;yt(()=>{T()});async function $(){T();try{n(6,c=await Ci(g,r,i)),n(1,s=c.view),Ue(s,o)&&s.runAsync(),O(s)}catch(v){A(v)}}function T(){c&&(c.finalize(),n(6,c=void 0),n(1,s=void 0))}function A(v){a("onError",{error:v}),console.warn(v)}function O(v){D(),a("onNewView",{view:v})}async function D(){l&&Object.keys(l).length>0&&c!==void 0&&(n(1,s=c.view),ji(s,l),await s.resize().runAsync())}function M(v){ye[v?"unshift":"push"](()=>{g=v,n(0,g)})}return t.$$set=v=>{"options"in v&&n(2,i=v.options),"spec"in v&&n(3,r=v.spec),"view"in v&&n(1,s=v.view),"signalListeners"in v&&n(4,o=v.signalListeners),"data"in v&&n(5,l=v.data)},t.$$.update=()=>{if(t.$$.dirty&1056&&(xe(l,_)||D(),n(10,_=l)),t.$$.dirty&991&&g!==void 0){if(!xe(i,u,Pi))$();else{const v=Vi(gt(r,i),gt(I,u)),E=o,h=d;if(v){if(v.isExpensive)$();else if(c!==void 0){const N=!xe(E,h);n(1,s=c.view),v.width!==!1&&s.width(v.width),v.height!==!1&&s.height(v.height),N&&(h&&pt(s,h),E&&Ue(s,E)),s.runAsync()}}else!xe(E,h)&&c!==void 0&&(n(1,s=c.view),h&&pt(s,h),E&&Ue(s,E),s.runAsync())}n(7,u=i),n(8,d=o),n(9,I=r)}},[g,s,i,r,o,l,c,u,d,I,_,M]}class Hi extends we{constructor(e){super(),Re(this,e,zi,Xi,Le,{options:2,spec:3,view:1,signalListeners:4,data:5})}}function qi(t){let e,n,i;function r(o){t[6](o)}let s={spec:t[1],data:t[2],signalListeners:t[3],options:t[4]};return t[0]!==void 0&&(s.view=t[0]),e=new Hi({props:s}),ye.push(()=>Lt(e,"view",r)),e.$on("onNewView",t[7]),e.$on("onError",t[8]),{c(){le(e.$$.fragment)},l(o){ce(e.$$.fragment,o)},m(o,l){ue(e,o,l),i=!0},p(o,[l]){const a={};l&2&&(a.spec=o[1]),l&4&&(a.data=o[2]),l&8&&(a.signalListeners=o[3]),l&16&&(a.options=o[4]),!n&&l&1&&(n=!0,a.view=o[0],mt(()=>n=!1)),e.$set(a)},i(o){i||(Z(e.$$.fragment,o),i=!0)},o(o){ee(e.$$.fragment,o),i=!1},d(o){he(e,o)}}}const Wi="vega-lite";function ki(t,e,n){let i,{spec:r}=e,{options:s={}}=e,{data:o={}}=e,{signalListeners:l={}}=e,{view:a=void 0}=e;function c(I){a=I,n(0,a)}function u(I){Je.call(this,t,I)}function d(I){Je.call(this,t,I)}return t.$$set=I=>{"spec"in I&&n(1,r=I.spec),"options"in I&&n(5,s=I.options),"data"in I&&n(2,o=I.data),"signalListeners"in I&&n(3,l=I.signalListeners),"view"in I&&n(0,a=I.view)},t.$$.update=()=>{t.$$.dirty&32&&n(4,i={...s,mode:Wi})},[a,r,o,l,i,s,c,u,d]}class Bi extends we{constructor(e){super(),Re(this,e,ki,qi,Le,{spec:1,options:5,data:2,signalListeners:3,view:0})}}function Yi(t){let e,n;return e=new Bi({props:{data:t[1],spec:t[0],options:t[2]}}),{c(){le(e.$$.fragment)},l(i){ce(e.$$.fragment,i)},m(i,r){ue(e,i,r),n=!0},p(i,[r]){const s={};r&2&&(s.data=i[1]),r&1&&(s.spec=i[0]),e.$set(s)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){ee(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Ji(t,e){const n=[];for(const[i,r]of t.entries())n.push({label:r,value:e[i]});return{table:n}}function Ki(t,e,n){let i,r,{labels:s=[]}=e,{values:o=[]}=e,{color:l="blue"}=e;const a={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:220,height:110,data:{name:"table"},mark:"bar",encoding:{x:{field:"label",type:"nominal",sort:null,title:null,axis:{labelFontSize:18,labelAngle:0,ticks:!1}},y:{field:"value",type:"quantitative",title:null,scale:{domain:[0,1]},axis:null}}},c={actions:!1};function u(d){const I=JSON.parse(JSON.stringify(a));return I.encoding.color={value:d},I}return t.$$set=d=>{"labels"in d&&n(3,s=d.labels),"values"in d&&n(4,o=d.values),"color"in d&&n(5,l=d.color)},t.$$.update=()=>{t.$$.dirty&24&&n(1,i=Ji(s,o)),t.$$.dirty&32&&n(0,r=u(l))},[r,i,c,s,o,l]}class cr extends we{constructor(e){super(),Re(this,e,Ki,Yi,Le,{labels:3,values:4,color:5})}}function Qi(t){let e,n,i,r,s,o;return{c(){e=re("div"),n=re("div"),i=re("canvas"),r=bt(),s=re("div"),o=re("canvas"),this.h()},l(l){e=se(l,"DIV",{class:!0});var a=ae(e);n=se(a,"DIV",{class:!0});var c=ae(n);i=se(c,"CANVAS",{class:!0,id:!0,width:!0,height:!0}),ae(i).forEach(W),c.forEach(W),r=It(a),s=se(a,"DIV",{class:!0});var u=ae(s);o=se(u,"CANVAS",{class:!0,width:!0,height:!0}),ae(o).forEach(W),u.forEach(W),a.forEach(W),this.h()},h(){H(i,"class","drawcanvas svelte-qhvuq1"),H(i,"id","canvas"),H(i,"width","140"),H(i,"height","140"),H(n,"class","drawcanvas-wrapper svelte-qhvuq1"),H(o,"class","normalizecanvas"),H(o,"width","28"),H(o,"height","28"),H(s,"class","normalizecanvas-wrapper svelte-qhvuq1"),H(e,"class","numbers svelte-qhvuq1")},m(l,a){_e(l,e,a),pe(e,n),pe(n,i),t[3](i),pe(e,r),pe(e,s),pe(s,o),t[4](o)},p:Ae,d(l){l&&W(e),t[3](null),t[4](null)}}}function Zi(t){let e;return{c(){e=Mt("Effacer")},l(n){e=jt(n,"Effacer")},m(n,i){_e(n,e,i)},d(n){n&&W(e)}}}function er(t){let e,n;return e=new Bt({props:{id:"clear-canvas",$$slots:{default:[Zi]},$$scope:{ctx:t}}}),e.$on("click",t[2]),{c(){le(e.$$.fragment)},l(i){ce(e.$$.fragment,i)},m(i,r){ue(e,i,r),n=!0},p(i,r){const s={};r&1048576&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){ee(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function tr(t){let e,n,i,r;return e=new Qe({props:{$$slots:{default:[Qi]},$$scope:{ctx:t}}}),i=new Qe({props:{$$slots:{default:[er]},$$scope:{ctx:t}}}),{c(){le(e.$$.fragment),n=bt(),le(i.$$.fragment)},l(s){ce(e.$$.fragment,s),n=It(s),ce(i.$$.fragment,s)},m(s,o){ue(e,s,o),_e(s,n,o),ue(i,s,o),r=!0},p(s,[o]){const l={};o&1048579&&(l.$$scope={dirty:o,ctx:s}),e.$set(l);const a={};o&1048576&&(a.$$scope={dirty:o,ctx:s}),i.$set(a)},i(s){r||(Z(e.$$.fragment,s),Z(i.$$.fragment,s),r=!0)},o(s){ee(e.$$.fragment,s),ee(i.$$.fragment,s),r=!1},d(s){s&&W(n),he(e,s),he(i,s)}}}function nr(t,e,n){const i=vt();let r=9,s=2*r,o,l,a,c,u={x:0,y:0},d=!1,I=-1;const _={pointerdown:h=>{d||(A(h),d=!0,I=h.pointerId)},pointermove:h=>{d&&I===h.pointerId&&O(h)},pointerup:h=>{I===h.pointerId&&(d=!1,M())},pointerleave:h=>{I===h.pointerId&&(d=!1)},pointercancel:h=>{I===h.pointerId&&(d=!1)}};Et(()=>{$(),n(1,l.width=28,l),n(1,l.height=28,l);const h=()=>{r=Math.floor(o.clientWidth/28)-1,s=2*r,n(0,o.width=o.clientWidth,o),n(0,o.height=o.clientWidth,o)};h(),window.onresize=()=>{h()},a=o.getContext("2d",{willReadFrequently:!0}),c=l.getContext("2d",{willReadFrequently:!0}),g()}),yt(()=>{g(),T()});function g(){a.fillRect(0,0,o.width,o.height),D(100),M()}function $(){for(const h in _)o.addEventListener(h,_[h],{passive:!0})}function T(){for(const h in _)o.removeEventListener(h,_[h])}function A(h){const N=o.getBoundingClientRect();u.x=h.clientX-N.left,u.y=h.clientY-N.top}function O(h){const N=u.x,F=u.y;A(h);const U=u.x,z=u.y;if(Math.abs(U-N)+Math.abs(z-F)<3){u.x=N,u.y=F;return}a.beginPath(),a.lineWidth=s,a.lineCap="round",a.strokeStyle="white",a.moveTo(N,F),A(h),a.lineTo(U,z),a.stroke(),c.fillStyle="black",c.fillRect(0,0,l.width,l.height),D(s)}function D(h){let N=0,F=0,U=1e3,z=-1e3,k=1e3,p=-1e3;const f=a.getImageData(0,0,o.width,o.height),{data:L}=f;let b=0;for(let m=0;m<L.length;m+=4*h){const y=m/4%o.width,w=m/4/o.width|0;b+=L[m],N+=L[m]*y,F+=L[m]*w,L[m]>0&&(U=Math.min(U,w),z=Math.max(z,w),k=Math.min(k,y),p=Math.max(p,y))}if(b>0){N/=b,F/=b;const m=Math.max(p-k,z-U);c.drawImage(o,k,U,m,m,14+20/m*(k-N),14+20/m*(U-F),20,20)}else c.fillRect(0,0,l.width,l.height)}function M(){i("imageData",{image:l})}function v(h){ye[h?"unshift":"push"](()=>{o=h,n(0,o)})}function E(h){ye[h?"unshift":"push"](()=>{l=h,n(1,l)})}return[o,l,g,v,E]}class ur extends we{constructor(e){super(),Re(this,e,nr,tr,Le,{})}}export{ur as D,cr as a};
