import{_ as K}from"../chunks/preload-helper.41c905a7.js";import{S as W,i as ee,s as te,e as Q,b as u,d as x,f as ne,g as S,h as a,T as se,o as re,v as ae,y,a as D,k as O,z as T,c as z,l as R,m as V,A as h,B as M,R as oe,q as A,r as B}from"../chunks/index.7f0372cb.js";import{c as le,m as U,g as ce,B as Z,L as ie,a as F}from"../chunks/stores.dbe9bc67.js";import{T as G}from"../chunks/Title.717d25b8.js";import{T as J}from"../chunks/Text.ede132bb.js";import{S as fe}from"../chunks/Space.06e26c06.js";const ue=!1,Me=Object.freeze(Object.defineProperty({__proto__:null,ssr:ue},Symbol.toStringTag,{value:"Module"}));function $e(o){let t,n,s,$,w,l,d,c,m,p,q,k,f,i,_,b,E,C,P,g,H;return t=new G({props:{order:2,$$slots:{default:[pe]},$$scope:{ctx:o}}}),$=new J({props:{$$slots:{default:[_e]},$$scope:{ctx:o}}}),d=new Z({props:{$$slots:{default:[de]},$$scope:{ctx:o}}}),d.$on("click",o[1]),p=new Z({props:{$$slots:{default:[be]},$$scope:{ctx:o}}}),p.$on("click",o[2]),k=new fe({}),i=new G({props:{order:2,$$slots:{default:[Ee]},$$scope:{ctx:o}}}),E=new J({props:{$$slots:{default:[ge]},$$scope:{ctx:o}}}),g=new Z({props:{id:"show-accuracy",$$slots:{default:[ve]},$$scope:{ctx:o}}}),g.$on("click",o[3]),{c(){y(t.$$.fragment),n=D(),s=O("p"),y($.$$.fragment),w=D(),l=O("p"),y(d.$$.fragment),c=D(),m=O("p"),y(p.$$.fragment),q=D(),y(k.$$.fragment),f=D(),y(i.$$.fragment),_=D(),b=O("p"),y(E.$$.fragment),C=D(),P=O("p"),y(g.$$.fragment)},l(e){T(t.$$.fragment,e),n=z(e),s=R(e,"P",{});var r=V(s);T($.$$.fragment,r),r.forEach(a),w=z(e),l=R(e,"P",{});var v=V(l);T(d.$$.fragment,v),v.forEach(a),c=z(e),m=R(e,"P",{});var I=V(m);T(p.$$.fragment,I),I.forEach(a),q=z(e),T(k.$$.fragment,e),f=z(e),T(i.$$.fragment,e),_=z(e),b=R(e,"P",{});var L=V(b);T(E.$$.fragment,L),L.forEach(a),C=z(e),P=R(e,"P",{});var N=V(P);T(g.$$.fragment,N),N.forEach(a)},m(e,r){h(t,e,r),u(e,n,r),u(e,s,r),h($,s,null),u(e,w,r),u(e,l,r),h(d,l,null),u(e,c,r),u(e,m,r),h(p,m,null),u(e,q,r),h(k,e,r),u(e,f,r),h(i,e,r),u(e,_,r),u(e,b,r),h(E,b,null),u(e,C,r),u(e,P,r),h(g,P,null),H=!0},p(e,r){const v={};r&1024&&(v.$$scope={dirty:r,ctx:e}),t.$set(v);const I={};r&1024&&(I.$$scope={dirty:r,ctx:e}),$.$set(I);const L={};r&1024&&(L.$$scope={dirty:r,ctx:e}),d.$set(L);const N={};r&1024&&(N.$$scope={dirty:r,ctx:e}),p.$set(N);const j={};r&1024&&(j.$$scope={dirty:r,ctx:e}),i.$set(j);const X={};r&1024&&(X.$$scope={dirty:r,ctx:e}),E.$set(X);const Y={};r&1024&&(Y.$$scope={dirty:r,ctx:e}),g.$set(Y)},i(e){H||(S(t.$$.fragment,e),S($.$$.fragment,e),S(d.$$.fragment,e),S(p.$$.fragment,e),S(k.$$.fragment,e),S(i.$$.fragment,e),S(E.$$.fragment,e),S(g.$$.fragment,e),H=!0)},o(e){x(t.$$.fragment,e),x($.$$.fragment,e),x(d.$$.fragment,e),x(p.$$.fragment,e),x(k.$$.fragment,e),x(i.$$.fragment,e),x(E.$$.fragment,e),x(g.$$.fragment,e),H=!1},d(e){M(t,e),e&&a(n),e&&a(s),M($),e&&a(w),e&&a(l),M(d),e&&a(c),e&&a(m),M(p),e&&a(q),M(k,e),e&&a(f),M(i,e),e&&a(_),e&&a(b),M(E),e&&a(C),e&&a(P),M(g)}}}function me(o){let t,n;return t=new ie({props:{size:"xl"}}),{c(){y(t.$$.fragment)},l(s){T(t.$$.fragment,s)},m(s,$){h(t,s,$),n=!0},p:oe,i(s){n||(S(t.$$.fragment,s),n=!0)},o(s){x(t.$$.fragment,s),n=!1},d(s){M(t,s)}}}function pe(o){let t;return{c(){t=A("Entraîner notre modèle")},l(n){t=B(n,"Entraîner notre modèle")},m(n,s){u(n,t,s)},d(n){n&&a(t)}}}function _e(o){let t;return{c(){t=A("Notre but est d'entraîner un modèle à reconnaitre des chiffres.")},l(n){t=B(n,"Notre but est d'entraîner un modèle à reconnaitre des chiffres.")},m(n,s){u(n,t,s)},d(n){n&&a(t)}}}function de(o){let t;return{c(){t=A("Entraîner")},l(n){t=B(n,"Entraîner")},m(n,s){u(n,t,s)},d(n){n&&a(t)}}}function be(o){let t;return{c(){t=A("Voir le résumé du modèle")},l(n){t=B(n,"Voir le résumé du modèle")},m(n,s){u(n,t,s)},d(n){n&&a(t)}}}function Ee(o){let t;return{c(){t=A("Evaluation de notre modèle")},l(n){t=B(n,"Evaluation de notre modèle")},m(n,s){u(n,t,s)},d(n){n&&a(t)}}}function ge(o){let t;return{c(){t=A("Maintenant que notre modèle est entraîné on peut évaluer la précision de ses prédictions.")},l(n){t=B(n,"Maintenant que notre modèle est entraîné on peut évaluer la précision de ses prédictions.")},m(n,s){u(n,t,s)},d(n){n&&a(t)}}}function ve(o){let t;return{c(){t=A("Evaluer la précision")},l(n){t=B(n,"Evaluer la précision")},m(n,s){u(n,t,s)},d(n){n&&a(t)}}}function xe(o){let t,n,s,$;const w=[me,$e],l=[];function d(c,m){return c[0]?0:1}return t=d(o),n=l[t]=w[t](o),{c(){n.c(),s=Q()},l(c){n.l(c),s=Q()},m(c,m){l[t].m(c,m),u(c,s,m),$=!0},p(c,[m]){let p=t;t=d(c),t===p?l[t].p(c,m):(ae(),x(l[p],1,1,()=>{l[p]=null}),ne(),n=l[t],n?n.p(c,m):(n=l[t]=w[t](c),n.c()),S(n,1),n.m(s.parentNode,s))},i(c){$||(S(n),$=!0)},o(c){x(n),$=!1},d(c){l[t].d(c),c&&a(s)}}}function Se(o,t,n){let s;se(o,U,f=>n(6,s=f));let $,w=!0,l;re(async()=>{l=await K(()=>import("../chunks/index.71ed32dc.js").then(f=>f.i),["../chunks/index.71ed32dc.js","../chunks/_commonjsHelpers.042e6b4d.js","../chunks/stores.dbe9bc67.js","../chunks/index.7f0372cb.js","../chunks/Text.ede132bb.js","../chunks/index.cf9e1155.js","../chunks/paths.b2db8d29.js","../assets/stores.bd53f61f.css","../chunks/vega-themes.module.3ab0deee.js"],import.meta.url),le.load().then(f=>{n(0,w=!1),$=f})});async function d(f,i,_){const[g,H]=F(()=>{const v=i.nextTrainBatch(5e3);return[v.xs.reshape([5e3,784]),v.labels]}),[e,r]=F(()=>{const v=i.nextTestBatch(1e3);return[v.xs.reshape([1e3,28*28]),v.labels]});return f.fit(g,H,{batchSize:100,validationData:[e,r],epochs:8,shuffle:!0,callbacks:_})}async function c(){U.update(()=>ce());const f=["acc","val_acc"],i={name:"Evolution de la précision",tab:"Entraînement",styles:{height:"800px"}},_=l.show.fitCallbacks(i,f);return d(s,$,_)}const m=["Zero","Un","Deux","Trois","Quatre","Cinq","Six","Sept","Huit","Neuf"];async function p(){const f={name:"Résumé du modèle",tab:"Inspection"};l.show.modelSummary(f,s);for(const[i,_]of s.layers.entries()){const b={name:"Couche "+i,tab:"Inspection"};l.show.layer(b,_)}}function q(f,i=1e3){const _=$.nextTestBatch(i),b=_.xs.reshape([i,28*28]),E=_.labels.argMax([-1]),C=f.predict(b).argMax([-1]);return b.dispose(),[C,E]}async function k(){const[f,i]=q(s),_=await l.metrics.perClassAccuracy(i,f),b={name:"Précision par classe",tab:"Evaluation"};l.show.perClassAccuracy(b,_,m);const E=await l.metrics.confusionMatrix(i,f),C={name:"Matrice de confusion",tab:"Evaluation"};l.render.confusionMatrix(C,{values:E,tickLabels:m}),i.dispose()}return[w,c,p,k]}class Pe extends W{constructor(t){super(),ee(this,t,Se,xe,te,{})}}export{Pe as component,Me as universal};
