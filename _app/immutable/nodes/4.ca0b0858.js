import{_ as he}from"../chunks/preload-helper.41c905a7.js";import{S as pe,i as me,s as de,k as b,l as E,m as S,h as _,n as ve,p as z,b as O,W as Q,Z as ye,_ as le,e as oe,d as N,f as ge,g as V,X as be,o as Ee,v as Se,q as D,a as I,y as X,r as A,c as B,z as j,V as i,A as J,B as Y}from"../chunks/index.ebc08152.js";import{b as we,m as re,g as Ce,B as G,t as ce}from"../chunks/stores.df143790.js";const $e=!1,Ve=Object.freeze(Object.defineProperty({__proto__:null,ssr:$e},Symbol.toStringTag,{value:"Module"}));const ie=/[a-zA-Z]/,_e=(a,e=0)=>[...Array(a).keys()].map(t=>t+e);function ue(a,e,t){const n=a.slice();return n[7]=e[t],n}function fe(a){let e;return{c(){e=b("div"),this.h()},l(t){e=E(t,"DIV",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){ve(e,"class","bar svelte-1vzsw15"),z(e,"left",a[7]*(+a[3]/5+(+a[3]/15-+a[3]/100))+a[1]),z(e,"animation-delay",a[7]*(+a[6]/8.3)+a[5]),le(e,"pause-animation",a[4])},m(t,n){O(t,e,n)},p(t,n){n&10&&z(e,"left",t[7]*(+t[3]/5+(+t[3]/15-+t[3]/100))+t[1]),n&16&&le(e,"pause-animation",t[4])},d(t){t&&_(e)}}}function ke(a){let e,t=_e(10,0),n=[];for(let l=0;l<t.length;l+=1)n[l]=fe(ue(a,t,l));return{c(){e=b("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=E(l,"DIV",{class:!0,style:!0});var o=S(e);for(let s=0;s<n.length;s+=1)n[s].l(o);o.forEach(_),this.h()},h(){ve(e,"class","wrapper svelte-1vzsw15"),z(e,"--size",a[3]+a[1]),z(e,"--color",a[0]),z(e,"--duration",a[2])},m(l,o){O(l,e,o);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(l,[o]){if(o&122){t=_e(10,0);let s;for(s=0;s<t.length;s+=1){const y=ue(l,t,s);n[s]?n[s].p(y,o):(n[s]=fe(y),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}o&10&&z(e,"--size",l[3]+l[1]),o&1&&z(e,"--color",l[0]),o&4&&z(e,"--duration",l[2])},i:Q,o:Q,d(l){l&&_(e),ye(n,l)}}}function ze(a,e,t){var w;let{color:n="#FF3E00"}=e,{unit:l="px"}=e,{duration:o="1.25s"}=e,{size:s="60"}=e,{pause:y=!1}=e,c=((w=o.match(ie))==null?void 0:w[0])??"s",u=o.replace(ie,"");return a.$$set=d=>{"color"in d&&t(0,n=d.color),"unit"in d&&t(1,l=d.unit),"duration"in d&&t(2,o=d.duration),"size"in d&&t(3,s=d.size),"pause"in d&&t(4,y=d.pause)},[n,l,o,s,y,c,u]}class Pe extends pe{constructor(e){super(),me(this,e,ze,ke,de,{color:0,unit:1,duration:2,size:3,pause:4})}}function De(a){let e,t,n,l,o,s,y,c,u,w,d,M,r,f,v,p,P,g,H,q,x,T,R,$,F,k,W;return r=new G({props:{$$slots:{default:[Me]},$$scope:{ctx:a}}}),r.$on("click",a[1]),p=new G({props:{$$slots:{default:[Te]},$$scope:{ctx:a}}}),p.$on("click",a[2]),k=new G({props:{id:"show-accuracy",$$slots:{default:[Ie]},$$scope:{ctx:a}}}),k.$on("click",a[3]),{c(){e=b("article"),t=b("h1"),n=D("Visualisation de l'entraînement"),l=I(),o=b("section"),s=b("h2"),y=D("Entraîner notre modèle"),c=I(),u=b("p"),w=D("Notre but est d'entraîner un modèle à reconnaitre des chiffres."),d=I(),M=b("p"),X(r.$$.fragment),f=I(),v=b("p"),X(p.$$.fragment),P=I(),g=b("section"),H=b("h2"),q=D("Evaluation de notre modèle"),x=I(),T=b("p"),R=D("Maintenant que notre modèle est entraîné on peut évaluer la précision de ses prédictions."),$=I(),F=b("p"),X(k.$$.fragment)},l(m){e=E(m,"ARTICLE",{});var h=S(e);t=E(h,"H1",{});var Z=S(t);n=A(Z,"Visualisation de l'entraînement"),Z.forEach(_),l=B(h),o=E(h,"SECTION",{});var C=S(o);s=E(C,"H2",{});var U=S(s);y=A(U,"Entraîner notre modèle"),U.forEach(_),c=B(C),u=E(C,"P",{});var K=S(u);w=A(K,"Notre but est d'entraîner un modèle à reconnaitre des chiffres."),K.forEach(_),d=B(C),M=E(C,"P",{});var ee=S(M);j(r.$$.fragment,ee),ee.forEach(_),f=B(C),v=E(C,"P",{});var te=S(v);j(p.$$.fragment,te),te.forEach(_),C.forEach(_),P=B(h),g=E(h,"SECTION",{});var L=S(g);H=E(L,"H2",{});var ne=S(H);q=A(ne,"Evaluation de notre modèle"),ne.forEach(_),x=B(L),T=E(L,"P",{});var se=S(T);R=A(se,"Maintenant que notre modèle est entraîné on peut évaluer la précision de ses prédictions."),se.forEach(_),$=B(L),F=E(L,"P",{});var ae=S(F);j(k.$$.fragment,ae),ae.forEach(_),L.forEach(_),h.forEach(_)},m(m,h){O(m,e,h),i(e,t),i(t,n),i(e,l),i(e,o),i(o,s),i(s,y),i(o,c),i(o,u),i(u,w),i(o,d),i(o,M),J(r,M,null),i(o,f),i(o,v),J(p,v,null),i(e,P),i(e,g),i(g,H),i(H,q),i(g,x),i(g,T),i(T,R),i(g,$),i(g,F),J(k,F,null),W=!0},p(m,h){const Z={};h&2048&&(Z.$$scope={dirty:h,ctx:m}),r.$set(Z);const C={};h&2048&&(C.$$scope={dirty:h,ctx:m}),p.$set(C);const U={};h&2048&&(U.$$scope={dirty:h,ctx:m}),k.$set(U)},i(m){W||(V(r.$$.fragment,m),V(p.$$.fragment,m),V(k.$$.fragment,m),W=!0)},o(m){N(r.$$.fragment,m),N(p.$$.fragment,m),N(k.$$.fragment,m),W=!1},d(m){m&&_(e),Y(r),Y(p),Y(k)}}}function Ae(a){let e,t;return e=new Pe({props:{size:"400",color:"#FF3E00",unit:"px"}}),{c(){X(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,l){J(e,n,l),t=!0},p:Q,i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Me(a){let e;return{c(){e=D("Entraîner")},l(t){e=A(t,"Entraîner")},m(t,n){O(t,e,n)},d(t){t&&_(e)}}}function Te(a){let e;return{c(){e=D("Voir le résumé du modèle")},l(t){e=A(t,"Voir le résumé du modèle")},m(t,n){O(t,e,n)},d(t){t&&_(e)}}}function Ie(a){let e;return{c(){e=D("Evaluer la précision")},l(t){e=A(t,"Evaluer la précision")},m(t,n){O(t,e,n)},d(t){t&&_(e)}}}function Be(a){let e,t,n,l;const o=[Ae,De],s=[];function y(c,u){return c[0]?0:1}return e=y(a),t=s[e]=o[e](a),{c(){t.c(),n=oe()},l(c){t.l(c),n=oe()},m(c,u){s[e].m(c,u),O(c,n,u),l=!0},p(c,[u]){let w=e;e=y(c),e===w?s[e].p(c,u):(Se(),N(s[w],1,1,()=>{s[w]=null}),ge(),t=s[e],t?t.p(c,u):(t=s[e]=o[e](c),t.c()),V(t,1),t.m(n.parentNode,n))},i(c){l||(V(t),l=!0)},o(c){N(t),l=!1},d(c){s[e].d(c),c&&_(n)}}}function Oe(a,e,t){let n;be(a,re,r=>t(6,n=r));let l,o=!0,s;Ee(async()=>{s=await he(()=>import("../chunks/index.90837037.js").then(r=>r.i),["../chunks/index.90837037.js","../chunks/stores.df143790.js","../chunks/index.ebc08152.js","../chunks/stitches.config.236b0e80.js","../chunks/paths.c42eb611.js","../assets/stores.bd53f61f.css"],import.meta.url),we.load().then(r=>{t(0,o=!1),l=r})});async function y(r,f,v){const[q,x]=ce(()=>{const $=f.nextTrainBatch(5e3);return[$.xs.reshape([5e3,784]),$.labels]}),[T,R]=ce(()=>{const $=f.nextTestBatch(1e3);return[$.xs.reshape([1e3,28*28]),$.labels]});return r.fit(q,x,{batchSize:100,validationData:[T,R],epochs:8,shuffle:!0,callbacks:v})}async function c(){re.update(()=>Ce());const r=["acc","val_acc"],f={name:"show.fitCallbacks",tab:"Entraînement",styles:{height:"1000px"}},v=s.show.fitCallbacks(f,r);return y(n,l,v)}const u=["Zero","Un","Deux","Trois","Quatre","Cinq","Six","Sept","Huit","Neuf"];async function w(){const r={name:"Résumé du modèle",tab:"Inspection"};s.show.modelSummary(r,n);const f={name:"Couche 1",tab:"Inspection"};s.show.layer(f,n.layers[1]);const v={name:"Couche 2",tab:"Inspection"};s.show.layer(v,n.layers[2]);const p={name:"Couche 3",tab:"Inspection"};s.show.layer(p,n.layers[3])}function d(r,f=1e3){const v=l.nextTestBatch(f),p=v.xs.reshape([f,28*28]),P=v.labels.argMax([-1]),g=r.predict(p).argMax([-1]);return p.dispose(),[g,P]}async function M(){const[r,f]=d(n),v=await s.metrics.perClassAccuracy(f,r),p={name:"Précision par classe",tab:"Evaluation"};s.show.perClassAccuracy(p,v,u);const P=await s.metrics.confusionMatrix(f,r),g={name:"Matrice de confusion",tab:"Evaluation"};s.render.confusionMatrix(g,{values:P,tickLabels:u}),f.dispose()}return[o,c,w,M]}class qe extends pe{constructor(e){super(),me(this,e,Oe,Be,de,{})}}export{qe as component,Ve as universal};
