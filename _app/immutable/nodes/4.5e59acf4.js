import{_ as K}from"../chunks/preload-helper.41c905a7.js";import{S as W,i as ee,s as te,e as Y,b as u,d as x,f as ne,g as S,h as r,Q as se,o as ae,v as re,y,a as D,k as O,z as P,c as z,l as V,m as Z,A as h,B as M,P as oe,q as A,r as B}from"../chunks/index.04e7dd59.js";import{b as le,m as U,g as ce,B as j,S as ie,L as fe,t as F}from"../chunks/stores.6b4164f9.js";import{T as G}from"../chunks/Title.0c60eac0.js";import{T as J}from"../chunks/Text.072a036b.js";const ue=!1,he=Object.freeze(Object.defineProperty({__proto__:null,ssr:ue},Symbol.toStringTag,{value:"Module"}));function $e(o){let t,n,s,$,w,l,d,c,m,p,q,k,f,i,_,b,E,C,T,g,H;return t=new G({props:{order:"2",$$slots:{default:[pe]},$$scope:{ctx:o}}}),$=new J({props:{$$slots:{default:[_e]},$$scope:{ctx:o}}}),d=new j({props:{$$slots:{default:[de]},$$scope:{ctx:o}}}),d.$on("click",o[1]),p=new j({props:{$$slots:{default:[be]},$$scope:{ctx:o}}}),p.$on("click",o[2]),k=new ie({}),i=new G({props:{order:"2",$$slots:{default:[Ee]},$$scope:{ctx:o}}}),E=new J({props:{$$slots:{default:[ge]},$$scope:{ctx:o}}}),g=new j({props:{id:"show-accuracy",$$slots:{default:[ve]},$$scope:{ctx:o}}}),g.$on("click",o[3]),{c(){y(t.$$.fragment),n=D(),s=O("p"),y($.$$.fragment),w=D(),l=O("p"),y(d.$$.fragment),c=D(),m=O("p"),y(p.$$.fragment),q=D(),y(k.$$.fragment),f=D(),y(i.$$.fragment),_=D(),b=O("p"),y(E.$$.fragment),C=D(),T=O("p"),y(g.$$.fragment)},l(e){P(t.$$.fragment,e),n=z(e),s=V(e,"P",{});var a=Z(s);P($.$$.fragment,a),a.forEach(r),w=z(e),l=V(e,"P",{});var v=Z(l);P(d.$$.fragment,v),v.forEach(r),c=z(e),m=V(e,"P",{});var I=Z(m);P(p.$$.fragment,I),I.forEach(r),q=z(e),P(k.$$.fragment,e),f=z(e),P(i.$$.fragment,e),_=z(e),b=V(e,"P",{});var L=Z(b);P(E.$$.fragment,L),L.forEach(r),C=z(e),T=V(e,"P",{});var N=Z(T);P(g.$$.fragment,N),N.forEach(r)},m(e,a){h(t,e,a),u(e,n,a),u(e,s,a),h($,s,null),u(e,w,a),u(e,l,a),h(d,l,null),u(e,c,a),u(e,m,a),h(p,m,null),u(e,q,a),h(k,e,a),u(e,f,a),h(i,e,a),u(e,_,a),u(e,b,a),h(E,b,null),u(e,C,a),u(e,T,a),h(g,T,null),H=!0},p(e,a){const v={};a&2048&&(v.$$scope={dirty:a,ctx:e}),t.$set(v);const I={};a&2048&&(I.$$scope={dirty:a,ctx:e}),$.$set(I);const L={};a&2048&&(L.$$scope={dirty:a,ctx:e}),d.$set(L);const N={};a&2048&&(N.$$scope={dirty:a,ctx:e}),p.$set(N);const Q={};a&2048&&(Q.$$scope={dirty:a,ctx:e}),i.$set(Q);const R={};a&2048&&(R.$$scope={dirty:a,ctx:e}),E.$set(R);const X={};a&2048&&(X.$$scope={dirty:a,ctx:e}),g.$set(X)},i(e){H||(S(t.$$.fragment,e),S($.$$.fragment,e),S(d.$$.fragment,e),S(p.$$.fragment,e),S(k.$$.fragment,e),S(i.$$.fragment,e),S(E.$$.fragment,e),S(g.$$.fragment,e),H=!0)},o(e){x(t.$$.fragment,e),x($.$$.fragment,e),x(d.$$.fragment,e),x(p.$$.fragment,e),x(k.$$.fragment,e),x(i.$$.fragment,e),x(E.$$.fragment,e),x(g.$$.fragment,e),H=!1},d(e){M(t,e),e&&r(n),e&&r(s),M($),e&&r(w),e&&r(l),M(d),e&&r(c),e&&r(m),M(p),e&&r(q),M(k,e),e&&r(f),M(i,e),e&&r(_),e&&r(b),M(E),e&&r(C),e&&r(T),M(g)}}}function me(o){let t,n;return t=new fe({props:{size:"lg"}}),{c(){y(t.$$.fragment)},l(s){P(t.$$.fragment,s)},m(s,$){h(t,s,$),n=!0},p:oe,i(s){n||(S(t.$$.fragment,s),n=!0)},o(s){x(t.$$.fragment,s),n=!1},d(s){M(t,s)}}}function pe(o){let t;return{c(){t=A("Entraîner notre modèle")},l(n){t=B(n,"Entraîner notre modèle")},m(n,s){u(n,t,s)},d(n){n&&r(t)}}}function _e(o){let t;return{c(){t=A("Notre but est d'entraîner un modèle à reconnaitre des chiffres.")},l(n){t=B(n,"Notre but est d'entraîner un modèle à reconnaitre des chiffres.")},m(n,s){u(n,t,s)},d(n){n&&r(t)}}}function de(o){let t;return{c(){t=A("Entraîner")},l(n){t=B(n,"Entraîner")},m(n,s){u(n,t,s)},d(n){n&&r(t)}}}function be(o){let t;return{c(){t=A("Voir le résumé du modèle")},l(n){t=B(n,"Voir le résumé du modèle")},m(n,s){u(n,t,s)},d(n){n&&r(t)}}}function Ee(o){let t;return{c(){t=A("Evaluation de notre modèle")},l(n){t=B(n,"Evaluation de notre modèle")},m(n,s){u(n,t,s)},d(n){n&&r(t)}}}function ge(o){let t;return{c(){t=A("Maintenant que notre modèle est entraîné on peut évaluer la précision de ses prédictions.")},l(n){t=B(n,"Maintenant que notre modèle est entraîné on peut évaluer la précision de ses prédictions.")},m(n,s){u(n,t,s)},d(n){n&&r(t)}}}function ve(o){let t;return{c(){t=A("Evaluer la précision")},l(n){t=B(n,"Evaluer la précision")},m(n,s){u(n,t,s)},d(n){n&&r(t)}}}function xe(o){let t,n,s,$;const w=[me,$e],l=[];function d(c,m){return c[0]?0:1}return t=d(o),n=l[t]=w[t](o),{c(){n.c(),s=Y()},l(c){n.l(c),s=Y()},m(c,m){l[t].m(c,m),u(c,s,m),$=!0},p(c,[m]){let p=t;t=d(c),t===p?l[t].p(c,m):(re(),x(l[p],1,1,()=>{l[p]=null}),ne(),n=l[t],n?n.p(c,m):(n=l[t]=w[t](c),n.c()),S(n,1),n.m(s.parentNode,s))},i(c){$||(S(n),$=!0)},o(c){x(n),$=!1},d(c){l[t].d(c),c&&r(s)}}}function Se(o,t,n){let s;se(o,U,f=>n(6,s=f));let $,w=!0,l;ae(async()=>{l=await K(()=>import("../chunks/index.b1cbf3be.js").then(f=>f.i),["../chunks/index.b1cbf3be.js","../chunks/stores.6b4164f9.js","../chunks/index.04e7dd59.js","../chunks/Box.25815407.js","../chunks/index.21347e7e.js","../chunks/paths.f60956c5.js","../assets/stores.bd53f61f.css"],import.meta.url),le.load().then(f=>{n(0,w=!1),$=f})});async function d(f,i,_){const[g,H]=F(()=>{const v=i.nextTrainBatch(5e3);return[v.xs.reshape([5e3,784]),v.labels]}),[e,a]=F(()=>{const v=i.nextTestBatch(1e3);return[v.xs.reshape([1e3,28*28]),v.labels]});return f.fit(g,H,{batchSize:100,validationData:[e,a],epochs:8,shuffle:!0,callbacks:_})}async function c(){U.update(()=>ce());const f=["acc","val_acc"],i={name:"Evolution de la précision",tab:"Entraînement",styles:{height:"800px"}},_=l.show.fitCallbacks(i,f);return d(s,$,_)}const m=["Zero","Un","Deux","Trois","Quatre","Cinq","Six","Sept","Huit","Neuf"];async function p(){const f={name:"Résumé du modèle",tab:"Inspection"};l.show.modelSummary(f,s);for(const[i,_]of s.layers.entries()){const b={name:"Couche "+i,tab:"Inspection"};l.show.layer(b,_)}}function q(f,i=1e3){const _=$.nextTestBatch(i),b=_.xs.reshape([i,28*28]),E=_.labels.argMax([-1]),C=f.predict(b).argMax([-1]);return b.dispose(),[C,E]}async function k(){const[f,i]=q(s),_=await l.metrics.perClassAccuracy(i,f),b={name:"Précision par classe",tab:"Evaluation"};l.show.perClassAccuracy(b,_,m);const E=await l.metrics.confusionMatrix(i,f),C={name:"Matrice de confusion",tab:"Evaluation"};l.render.confusionMatrix(C,{values:E,tickLabels:m}),i.dispose()}return[w,c,p,k]}class Me extends W{constructor(t){super(),ee(this,t,Se,xe,te,{})}}export{Me as component,he as universal};
