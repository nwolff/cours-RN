import{_ as ne}from"../chunks/preload-helper.41c905a7.js";import{S as ee,i as te,s as se,C as Q,w as ae,D as re,y as P,z as w,A as M,E as oe,F as le,G as ce,g as S,d as h,B as y,H as F,I as ie,J as fe,K as ue,L as me,M as pe,e as G,b,f as _e,h as m,Q as $e,o as de,v as be,a as B,k as O,c as x,l as j,m as V,P as ge,q as A,r as H}from"../chunks/index.04e7dd59.js";import{b as Ee,m as J,g as Se,B as Z,L as he,t as K}from"../chunks/stores.c49e4da0.js";import{c as ke,B as ze}from"../chunks/Box.25815407.js";import{T as U}from"../chunks/Title.0c60eac0.js";import{T as W}from"../chunks/Text.072a036b.js";const Ce=ke((a,{h:e,w:t})=>({root:{width:a.fn.size({size:t,sizes:a.space}),minWidth:a.fn.size({size:t,sizes:a.space}),height:a.fn.size({size:e,sizes:a.space}),minHeight:a.fn.size({size:e,sizes:a.space})}}));function ve(a){let e;const t=a[10].default,n=fe(t,a,a[12],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,$){n&&n.m(o,$),e=!0},p(o,$){n&&n.p&&(!e||$&4096)&&ue(n,t,o,o[12],e?pe(t,o[12],$,null):me(o[12]),null)},i(o){e||(S(n,o),e=!0)},o(o){h(n,o),e=!1},d(o){n&&n.d(o)}}}function Pe(a){let e,t,n;const o=[{use:a[1]},{class:a[6](a[2],a[5].root,a[4]({css:a[3]}))},a[7]];function $(r){a[11](r)}let i={$$slots:{default:[ve]},$$scope:{ctx:a}};for(let r=0;r<o.length;r+=1)i=Q(i,o[r]);return a[0]!==void 0&&(i.element=a[0]),e=new ze({props:i}),ae.push(()=>re(e,"element",$)),{c(){P(e.$$.fragment)},l(r){w(e.$$.fragment,r)},m(r,l){M(e,r,l),n=!0},p(r,[l]){const _=l&254?oe(o,[l&2&&{use:r[1]},l&124&&{class:r[6](r[2],r[5].root,r[4]({css:r[3]}))},l&128&&le(r[7])]):{};l&4096&&(_.$$scope={dirty:l,ctx:r}),!t&&l&1&&(t=!0,_.element=r[0],ce(()=>t=!1)),e.$set(_)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),n=!1},d(r){y(e,r)}}}function we(a,e,t){let n,o,$;const i=["use","element","class","override","w","h"];let r=F(e,i),{$$slots:l={},$$scope:_}=e,{use:g=[],element:z=void 0,class:k="",override:p={},w:u=0,h:d=0}=e;function E(f){z=f,t(0,z)}return a.$$set=f=>{e=Q(Q({},e),ie(f)),t(7,r=F(e,i)),"use"in f&&t(1,g=f.use),"element"in f&&t(0,z=f.element),"class"in f&&t(2,k=f.class),"override"in f&&t(3,p=f.override),"w"in f&&t(8,u=f.w),"h"in f&&t(9,d=f.h),"$$scope"in f&&t(12,_=f.$$scope)},a.$$.update=()=>{a.$$.dirty&768&&t(6,{cx:n,classes:o,getStyles:$}=Ce({h:d,w:u},{name:"Space"}),n,(t(5,o),t(9,d),t(8,u)),(t(4,$),t(9,d),t(8,u)))},[z,g,k,p,$,o,n,r,u,d,l,E,_]}class Me extends ee{constructor(e){super(),te(this,e,we,Pe,se,{use:1,element:0,class:2,override:3,w:8,h:9})}}const ye=Me,Te=!1,Fe=Object.freeze(Object.defineProperty({__proto__:null,ssr:Te},Symbol.toStringTag,{value:"Module"}));function De(a){let e,t,n,o,$,i,r,l,_,g,z,k,p,u,d,E,f,T,D,C,I;return e=new U({props:{order:"2",$$slots:{default:[xe]},$$scope:{ctx:a}}}),o=new W({props:{$$slots:{default:[Ae]},$$scope:{ctx:a}}}),r=new Z({props:{$$slots:{default:[He]},$$scope:{ctx:a}}}),r.$on("click",a[1]),g=new Z({props:{$$slots:{default:[Ie]},$$scope:{ctx:a}}}),g.$on("click",a[2]),k=new ye({}),u=new U({props:{order:"2",$$slots:{default:[Le]},$$scope:{ctx:a}}}),f=new W({props:{$$slots:{default:[Ne]},$$scope:{ctx:a}}}),C=new Z({props:{id:"show-accuracy",$$slots:{default:[qe]},$$scope:{ctx:a}}}),C.$on("click",a[3]),{c(){P(e.$$.fragment),t=B(),n=O("p"),P(o.$$.fragment),$=B(),i=O("p"),P(r.$$.fragment),l=B(),_=O("p"),P(g.$$.fragment),z=B(),P(k.$$.fragment),p=B(),P(u.$$.fragment),d=B(),E=O("p"),P(f.$$.fragment),T=B(),D=O("p"),P(C.$$.fragment)},l(s){w(e.$$.fragment,s),t=x(s),n=j(s,"P",{});var c=V(n);w(o.$$.fragment,c),c.forEach(m),$=x(s),i=j(s,"P",{});var v=V(i);w(r.$$.fragment,v),v.forEach(m),l=x(s),_=j(s,"P",{});var L=V(_);w(g.$$.fragment,L),L.forEach(m),z=x(s),w(k.$$.fragment,s),p=x(s),w(u.$$.fragment,s),d=x(s),E=j(s,"P",{});var N=V(E);w(f.$$.fragment,N),N.forEach(m),T=x(s),D=j(s,"P",{});var q=V(D);w(C.$$.fragment,q),q.forEach(m)},m(s,c){M(e,s,c),b(s,t,c),b(s,n,c),M(o,n,null),b(s,$,c),b(s,i,c),M(r,i,null),b(s,l,c),b(s,_,c),M(g,_,null),b(s,z,c),M(k,s,c),b(s,p,c),M(u,s,c),b(s,d,c),b(s,E,c),M(f,E,null),b(s,T,c),b(s,D,c),M(C,D,null),I=!0},p(s,c){const v={};c&2048&&(v.$$scope={dirty:c,ctx:s}),e.$set(v);const L={};c&2048&&(L.$$scope={dirty:c,ctx:s}),o.$set(L);const N={};c&2048&&(N.$$scope={dirty:c,ctx:s}),r.$set(N);const q={};c&2048&&(q.$$scope={dirty:c,ctx:s}),g.$set(q);const R={};c&2048&&(R.$$scope={dirty:c,ctx:s}),u.$set(R);const X={};c&2048&&(X.$$scope={dirty:c,ctx:s}),f.$set(X);const Y={};c&2048&&(Y.$$scope={dirty:c,ctx:s}),C.$set(Y)},i(s){I||(S(e.$$.fragment,s),S(o.$$.fragment,s),S(r.$$.fragment,s),S(g.$$.fragment,s),S(k.$$.fragment,s),S(u.$$.fragment,s),S(f.$$.fragment,s),S(C.$$.fragment,s),I=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),h(r.$$.fragment,s),h(g.$$.fragment,s),h(k.$$.fragment,s),h(u.$$.fragment,s),h(f.$$.fragment,s),h(C.$$.fragment,s),I=!1},d(s){y(e,s),s&&m(t),s&&m(n),y(o),s&&m($),s&&m(i),y(r),s&&m(l),s&&m(_),y(g),s&&m(z),y(k,s),s&&m(p),y(u,s),s&&m(d),s&&m(E),y(f),s&&m(T),s&&m(D),y(C)}}}function Be(a){let e,t;return e=new he({props:{size:"lg"}}),{c(){P(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,o){M(e,n,o),t=!0},p:ge,i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){h(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function xe(a){let e;return{c(){e=A("Entraîner notre modèle")},l(t){e=H(t,"Entraîner notre modèle")},m(t,n){b(t,e,n)},d(t){t&&m(e)}}}function Ae(a){let e;return{c(){e=A("Notre but est d'entraîner un modèle à reconnaitre des chiffres.")},l(t){e=H(t,"Notre but est d'entraîner un modèle à reconnaitre des chiffres.")},m(t,n){b(t,e,n)},d(t){t&&m(e)}}}function He(a){let e;return{c(){e=A("Entraîner")},l(t){e=H(t,"Entraîner")},m(t,n){b(t,e,n)},d(t){t&&m(e)}}}function Ie(a){let e;return{c(){e=A("Voir le résumé du modèle")},l(t){e=H(t,"Voir le résumé du modèle")},m(t,n){b(t,e,n)},d(t){t&&m(e)}}}function Le(a){let e;return{c(){e=A("Evaluation de notre modèle")},l(t){e=H(t,"Evaluation de notre modèle")},m(t,n){b(t,e,n)},d(t){t&&m(e)}}}function Ne(a){let e;return{c(){e=A("Maintenant que notre modèle est entraîné on peut évaluer la précision de ses prédictions.")},l(t){e=H(t,"Maintenant que notre modèle est entraîné on peut évaluer la précision de ses prédictions.")},m(t,n){b(t,e,n)},d(t){t&&m(e)}}}function qe(a){let e;return{c(){e=A("Evaluer la précision")},l(t){e=H(t,"Evaluer la précision")},m(t,n){b(t,e,n)},d(t){t&&m(e)}}}function Oe(a){let e,t,n,o;const $=[Be,De],i=[];function r(l,_){return l[0]?0:1}return e=r(a),t=i[e]=$[e](a),{c(){t.c(),n=G()},l(l){t.l(l),n=G()},m(l,_){i[e].m(l,_),b(l,n,_),o=!0},p(l,[_]){let g=e;e=r(l),e===g?i[e].p(l,_):(be(),h(i[g],1,1,()=>{i[g]=null}),_e(),t=i[e],t?t.p(l,_):(t=i[e]=$[e](l),t.c()),S(t,1),t.m(n.parentNode,n))},i(l){o||(S(t),o=!0)},o(l){h(t),o=!1},d(l){i[e].d(l),l&&m(n)}}}function je(a,e,t){let n;$e(a,J,p=>t(6,n=p));let o,$=!0,i;de(async()=>{i=await ne(()=>import("../chunks/index.70c69f34.js").then(p=>p.i),["../chunks/index.70c69f34.js","../chunks/stores.c49e4da0.js","../chunks/index.04e7dd59.js","../chunks/Box.25815407.js","../chunks/index.21347e7e.js","../chunks/paths.1cd20566.js","../assets/stores.bd53f61f.css"],import.meta.url),Ee.load().then(p=>{t(0,$=!1),o=p})});async function r(p,u,d){const[C,I]=K(()=>{const v=u.nextTrainBatch(5e3);return[v.xs.reshape([5e3,784]),v.labels]}),[s,c]=K(()=>{const v=u.nextTestBatch(1e3);return[v.xs.reshape([1e3,28*28]),v.labels]});return p.fit(C,I,{batchSize:100,validationData:[s,c],epochs:8,shuffle:!0,callbacks:d})}async function l(){J.update(()=>Se());const p=["acc","val_acc"],u={name:"show.fitCallbacks",tab:"Entraînement",styles:{height:"1000px"}},d=i.show.fitCallbacks(u,p);return r(n,o,d)}const _=["Zero","Un","Deux","Trois","Quatre","Cinq","Six","Sept","Huit","Neuf"];async function g(){const p={name:"Résumé du modèle",tab:"Inspection"};i.show.modelSummary(p,n);for(const[u,d]of n.layers.entries()){const E={name:"Couche "+u,tab:"Inspection"};i.show.layer(E,d)}}function z(p,u=1e3){const d=o.nextTestBatch(u),E=d.xs.reshape([u,28*28]),f=d.labels.argMax([-1]),T=p.predict(E).argMax([-1]);return E.dispose(),[T,f]}async function k(){const[p,u]=z(n),d=await i.metrics.perClassAccuracy(u,p),E={name:"Précision par classe",tab:"Evaluation"};i.show.perClassAccuracy(E,d,_);const f=await i.metrics.confusionMatrix(u,p),T={name:"Matrice de confusion",tab:"Evaluation"};i.render.confusionMatrix(T,{values:f,tickLabels:_}),u.dispose()}return[$,l,g,k]}class Ge extends ee{constructor(e){super(),te(this,e,je,Oe,se,{})}}export{Ge as component,Fe as universal};
