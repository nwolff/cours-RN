import{s as x,a as D,e as Q,c as F,i as v,d as S,G as U,o as ee,l as R,m as B,F as te}from"../chunks/scheduler.2MOiW16C.js";import{S as re,i as ne,b as _,d as w,m as d,t as u,c as se,a as c,e as b,g as $e}from"../chunks/index.uDgcqgGv.js";import{D as fe,a as V}from"../chunks/DrawBox.3FDOqVHK.js";import{S as h,N as ae}from"../chunks/NetworkGraph.8lwVril9.js";import{g as oe,t as X,m as Y,f as ie,b as me,r as pe,s as Z,L as le,c as ue,d as ce}from"../chunks/stores.0Q_cJDUb.js";import{T as H,D as I}from"../chunks/Title.U1khdO1D.js";import{G as O}from"../chunks/combinator.mu5Wrrku.js";const ge=!1,Ne=Object.freeze(Object.defineProperty({__proto__:null,ssr:ge},Symbol.toStringTag,{value:"Module"}));function _e(f){let t;return{c(){t=R("Reconnaître des chiffres")},l(n){t=B(n,"Reconnaître des chiffres")},m(n,r){v(n,t,r)},d(n){n&&S(t)}}}function we(f){let t,n;return t=new O({props:{cols:4,$$slots:{default:[Me]},$$scope:{ctx:f}}}),{c(){_(t.$$.fragment)},l(r){w(t.$$.fragment,r)},m(r,a){d(t,r,a),n=!0},p(r,a){const s={};a&16407&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){n||(c(t.$$.fragment,r),n=!0)},o(r){u(t.$$.fragment,r),n=!1},d(r){b(t,r)}}}function de(f){let t,n;return t=new le({props:{size:"xl"}}),{c(){_(t.$$.fragment)},l(r){w(t.$$.fragment,r)},m(r,a){d(t,r,a),n=!0},p:te,i(r){n||(c(t.$$.fragment,r),n=!0)},o(r){u(t.$$.fragment,r),n=!1},d(r){b(t,r)}}}function be(f){let t;return{c(){t=R("Modèle qui apprend")},l(n){t=B(n,"Modèle qui apprend")},m(n,r){v(n,t,r)},d(n){n&&S(t)}}}function ke(f){let t;return{c(){t=R("Modèle déja entraîné")},l(n){t=B(n,"Modèle déja entraîné")},m(n,r){v(n,t,r)},d(n){n&&S(t)}}}function ve(f){let t,n,r,a,s,i,g,M,L,k,P,$,p,j,T,G,m,l,y,N,C,z,q,A;return t=new h({props:{h:"lg"}}),r=new fe({}),r.$on("imageData",f[7]),s=new h({props:{h:"sm"}}),g=new I({}),L=new H({props:{order:4,$$slots:{default:[be]},$$scope:{ctx:f}}}),P=new h({props:{h:"sm"}}),p=new V({props:{labels:f[6],values:f[0],color:"#0000ff"}}),T=new h({props:{h:"sm"}}),m=new I({}),y=new H({props:{order:4,$$slots:{default:[ke]},$$scope:{ctx:f}}}),C=new h({props:{h:"sm"}}),q=new V({props:{labels:f[6],values:f[1],color:"orange"}}),{c(){_(t.$$.fragment),n=D(),_(r.$$.fragment),a=D(),_(s.$$.fragment),i=D(),_(g.$$.fragment),M=D(),_(L.$$.fragment),k=D(),_(P.$$.fragment),$=D(),_(p.$$.fragment),j=D(),_(T.$$.fragment),G=D(),_(m.$$.fragment),l=D(),_(y.$$.fragment),N=D(),_(C.$$.fragment),z=D(),_(q.$$.fragment)},l(e){w(t.$$.fragment,e),n=F(e),w(r.$$.fragment,e),a=F(e),w(s.$$.fragment,e),i=F(e),w(g.$$.fragment,e),M=F(e),w(L.$$.fragment,e),k=F(e),w(P.$$.fragment,e),$=F(e),w(p.$$.fragment,e),j=F(e),w(T.$$.fragment,e),G=F(e),w(m.$$.fragment,e),l=F(e),w(y.$$.fragment,e),N=F(e),w(C.$$.fragment,e),z=F(e),w(q.$$.fragment,e)},m(e,o){d(t,e,o),v(e,n,o),d(r,e,o),v(e,a,o),d(s,e,o),v(e,i,o),d(g,e,o),v(e,M,o),d(L,e,o),v(e,k,o),d(P,e,o),v(e,$,o),d(p,e,o),v(e,j,o),d(T,e,o),v(e,G,o),d(m,e,o),v(e,l,o),d(y,e,o),v(e,N,o),d(C,e,o),v(e,z,o),d(q,e,o),A=!0},p(e,o){const W={};o&16384&&(W.$$scope={dirty:o,ctx:e}),L.$set(W);const E={};o&1&&(E.values=e[0]),p.$set(E);const J={};o&16384&&(J.$$scope={dirty:o,ctx:e}),y.$set(J);const K={};o&2&&(K.values=e[1]),q.$set(K)},i(e){A||(c(t.$$.fragment,e),c(r.$$.fragment,e),c(s.$$.fragment,e),c(g.$$.fragment,e),c(L.$$.fragment,e),c(P.$$.fragment,e),c(p.$$.fragment,e),c(T.$$.fragment,e),c(m.$$.fragment,e),c(y.$$.fragment,e),c(C.$$.fragment,e),c(q.$$.fragment,e),A=!0)},o(e){u(t.$$.fragment,e),u(r.$$.fragment,e),u(s.$$.fragment,e),u(g.$$.fragment,e),u(L.$$.fragment,e),u(P.$$.fragment,e),u(p.$$.fragment,e),u(T.$$.fragment,e),u(m.$$.fragment,e),u(y.$$.fragment,e),u(C.$$.fragment,e),u(q.$$.fragment,e),A=!1},d(e){e&&(S(n),S(a),S(i),S(M),S(k),S($),S(j),S(G),S(l),S(N),S(z)),b(t,e),b(r,e),b(s,e),b(g,e),b(L,e),b(P,e),b(p,e),b(T,e),b(m,e),b(y,e),b(C,e),b(q,e)}}}function Se(f){let t,n;return t=new ae({props:{networkShape:f[5],activations:f[2],weights:f[4],linkFilter:f[8]}}),{c(){_(t.$$.fragment)},l(r){w(t.$$.fragment,r)},m(r,a){d(t,r,a),n=!0},p(r,a){const s={};a&4&&(s.activations=r[2]),a&16&&(s.weights=r[4]),t.$set(s)},i(r){n||(c(t.$$.fragment,r),n=!0)},o(r){u(t.$$.fragment,r),n=!1},d(r){b(t,r)}}}function Me(f){let t,n,r,a;return t=new O.Col({props:{span:1,$$slots:{default:[ve]},$$scope:{ctx:f}}}),r=new O.Col({props:{span:3,$$slots:{default:[Se]},$$scope:{ctx:f}}}),{c(){_(t.$$.fragment),n=D(),_(r.$$.fragment)},l(s){w(t.$$.fragment,s),n=F(s),w(r.$$.fragment,s)},m(s,i){d(t,s,i),v(s,n,i),d(r,s,i),a=!0},p(s,i){const g={};i&16387&&(g.$$scope={dirty:i,ctx:s}),t.$set(g);const M={};i&16404&&(M.$$scope={dirty:i,ctx:s}),r.$set(M)},i(s){a||(c(t.$$.fragment,s),c(r.$$.fragment,s),a=!0)},o(s){u(t.$$.fragment,s),u(r.$$.fragment,s),a=!1},d(s){s&&S(n),b(t,s),b(r,s)}}}function Le(f){let t,n,r,a,s,i,g,M;t=new H({props:{order:1,$$slots:{default:[_e]},$$scope:{ctx:f}}}),r=new I({});const L=[de,we],k=[];function P($,p){return $[3]?0:1}return s=P(f),i=k[s]=L[s](f),{c(){_(t.$$.fragment),n=D(),_(r.$$.fragment),a=D(),i.c(),g=Q()},l($){w(t.$$.fragment,$),n=F($),w(r.$$.fragment,$),a=F($),i.l($),g=Q()},m($,p){d(t,$,p),v($,n,p),d(r,$,p),v($,a,p),k[s].m($,p),v($,g,p),M=!0},p($,[p]){const j={};p&16384&&(j.$$scope={dirty:p,ctx:$}),t.$set(j);let T=s;s=P($),s===T?k[s].p($,p):($e(),u(k[T],1,1,()=>{k[T]=null}),se(),i=k[s],i?i.p($,p):(i=k[s]=L[s]($),i.c()),c(i,1),i.m(g.parentNode,g))},i($){M||(c(t.$$.fragment,$),c(r.$$.fragment,$),c(i),M=!0)},o($){u(t.$$.fragment,$),u(r.$$.fragment,$),u(i),M=!1},d($){$&&(S(n),S(a),S(g)),b(t,$),b(r,$),k[s].d($)}}}function ye(f){const t=f.length;return t<=500?f:[...f].sort((r,a)=>Math.abs(a.weight)-Math.abs(r.weight)).slice(0,Math.min(500,.1*t))}function De(f,t,n){let r,a,s;U(f,Y,m=>n(9,a=m)),U(f,X,m=>n(10,s=m));const i=oe(),g=i.outputLayer.labels;let M,L,k,P=!0;ee(async()=>{await X.load(),await Y.load(),n(3,P=!1)});function $(m){const l=m.detail.image,y=ie(l,1);j(y)}function p(m){const l=[];for(const y of m.layers)l.push(y.output);return ue({inputs:m.input,outputs:l.flat()})}function j(m){const l=me(()=>pe(m,[1,784]).toFloat().div(255));n(1,L=Z(s.predict(l)).dataSync());const y=p(a).predict(l);n(2,k=[l,...y].map(N=>Z(N).dataSync())),n(0,M=k[k.length-1])}function T(m){return m.find(l=>l.a.activation)?m.map(l=>new ce(l.a,l.b,l.weight*(1+.5*l.a.activation))):m}function G(m){const l=T(m);return ye(l)}return f.$$.update=()=>{f.$$.dirty&512&&n(4,r=a?.weights)},[M,L,k,P,r,i,g,$,G,a]}class he extends re{constructor(t){super(),ne(this,t,De,Le,x,{})}}export{he as component,Ne as universal};
